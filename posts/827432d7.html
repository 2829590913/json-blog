<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>javaseåŸºç¡€çŸ¥è¯† | json'blogğŸ¥</title><meta name="keywords" content="java,javase"><meta name="author" content="jsonğŸ¥"><meta name="copyright" content="jsonğŸ¥"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="è¿™æ˜¯ä¸€ç¯‡å…³äºjavaseçš„ç¬”è®°">
<meta property="og:type" content="article">
<meta property="og:title" content="javaseåŸºç¡€çŸ¥è¯†">
<meta property="og:url" content="https://www.json25.cn/posts/827432d7.html">
<meta property="og:site_name" content="json&#39;blogğŸ¥">
<meta property="og:description" content="è¿™æ˜¯ä¸€ç¯‡å…³äºjavaseçš„ç¬”è®°">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn-eys.pages.dev/img/dm18.webp">
<meta property="article:published_time" content="2021-03-16T15:59:15.000Z">
<meta property="article:modified_time" content="2023-03-16T16:44:19.221Z">
<meta property="article:author" content="jsonğŸ¥">
<meta property="article:tag" content="java">
<meta property="article:tag" content="javase">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn-eys.pages.dev/img/dm18.webp"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://www.json25.cn/posts/827432d7"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'javaseåŸºç¡€çŸ¥è¯†',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-17 00:44:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="json'blogğŸ¥" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/favicon.png" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">json'blogğŸ¥</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">javaseåŸºç¡€çŸ¥è¯†</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2021-03-16T15:59:15.000Z" title="å‘è¡¨äº 2021-03-16 23:59:15">2021-03-16</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-03-16T16:44:19.221Z" title="æ›´æ–°äº 2023-03-17 00:44:19">2023-03-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/Java%E5%9F%BA%E7%A1%80/">JavaåŸºç¡€</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">13.9w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>500åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="javaseåŸºç¡€çŸ¥è¯†"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>JavaSE</h1>
<h2 id="åŸºç¡€">åŸºç¡€</h2>
<h3 id="æ•°æ®">æ•°æ®</h3>
<h4 id="å˜é‡ç±»å‹">å˜é‡ç±»å‹</h4>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">æˆå‘˜å˜é‡</th>
<th style="text-align:center">å±€éƒ¨å˜é‡</th>
<th style="text-align:center">é™æ€å˜é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å®šä¹‰ä½ç½®</td>
<td style="text-align:center">åœ¨ç±»ä¸­ï¼Œæ–¹æ³•å¤–</td>
<td style="text-align:center">æ–¹æ³•ä¸­æˆ–è€…æ–¹æ³•çš„å½¢å‚</td>
<td style="text-align:center">åœ¨ç±»ä¸­ï¼Œæ–¹æ³•å¤–</td>
</tr>
<tr>
<td style="text-align:center">åˆå§‹åŒ–å€¼</td>
<td style="text-align:center">æœ‰é»˜è®¤åˆå§‹åŒ–å€¼</td>
<td style="text-align:center">æ— ï¼Œèµ‹å€¼åæ‰èƒ½ä½¿ç”¨</td>
<td style="text-align:center">æœ‰é»˜è®¤åˆå§‹åŒ–å€¼</td>
</tr>
<tr>
<td style="text-align:center">è°ƒç”¨æ–¹æ³•</td>
<td style="text-align:center">å¯¹è±¡è°ƒç”¨</td>
<td style="text-align:center"></td>
<td style="text-align:center">å¯¹è±¡è°ƒç”¨ï¼Œç±»åè°ƒç”¨</td>
</tr>
<tr>
<td style="text-align:center">å­˜å‚¨ä½ç½®</td>
<td style="text-align:center">å †ä¸­</td>
<td style="text-align:center">æ ˆä¸­</td>
<td style="text-align:center">æ–¹æ³•åŒºï¼ˆJDK8 ä»¥åç§»åˆ°å †ä¸­ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">ç”Ÿå‘½å‘¨æœŸ</td>
<td style="text-align:center">ä¸å¯¹è±¡å…±å­˜äº¡</td>
<td style="text-align:center">ä¸æ–¹æ³•å…±å­˜äº¡</td>
<td style="text-align:center">ä¸ç±»å…±å­˜äº¡</td>
</tr>
<tr>
<td style="text-align:center">åˆ«å</td>
<td style="text-align:center">å®ä¾‹å˜é‡</td>
<td style="text-align:center"></td>
<td style="text-align:center">ç±»å˜é‡ï¼Œé™æ€æˆå‘˜å˜é‡</td>
</tr>
</tbody>
</table>
<p>é™æ€å˜é‡åªæœ‰ä¸€ä¸ªï¼Œæˆå‘˜å˜é‡æ˜¯ç±»ä¸­çš„å˜é‡ï¼Œå±€éƒ¨å˜é‡æ˜¯æ–¹æ³•ä¸­çš„å˜é‡</p>
<p>åˆå­¦æ—¶ç¬”è®°å†…å®¹å‚è€ƒè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1TE41177mP%EF%BC%8C%E9%9A%8F%E7%9D%80%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%B7%B1%E5%85%A5%E5%8F%88%E5%A2%9E%E5%8A%A0%E5%BE%88%E5%A4%9A%E7%9F%A5%E8%AF%86">https://www.bilibili.com/video/BV1TE41177mPï¼Œéšç€å­¦ä¹ çš„æ·±å…¥åˆå¢åŠ å¾ˆå¤šçŸ¥è¯†</a></p>
<h4 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h4>
<h5 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹</h5>
<p>Java è¯­è¨€æä¾›äº†å…«ç§åŸºæœ¬ç±»å‹ã€‚å…­ç§æ•°å­—ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°å‹ï¼Œä¸¤ä¸ªæµ®ç‚¹å‹ï¼‰ï¼Œä¸€ç§å­—ç¬¦ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§å¸ƒå°”å‹</p>
<p><strong>byteï¼š</strong></p>
<ul>
<li>byte æ•°æ®ç±»å‹æ˜¯ 8 ä½ã€æœ‰ç¬¦å·çš„ï¼Œä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°ï¼Œ<strong>8 ä½ä¸€ä¸ªå­—èŠ‚</strong>ï¼Œé¦–ä½æ˜¯ç¬¦å·ä½</li>
<li>æœ€å°å€¼æ˜¯ -128ï¼ˆ-2^7ï¼‰ã€æœ€å¤§å€¼æ˜¯ 127ï¼ˆ2^7-1ï¼‰</li>
<li>é»˜è®¤å€¼æ˜¯ <code>0</code></li>
<li>byte ç±»å‹ç”¨åœ¨å¤§å‹æ•°ç»„ä¸­èŠ‚çº¦ç©ºé—´ï¼Œä¸»è¦ä»£æ›¿æ•´æ•°ï¼Œbyte å˜é‡å ç”¨çš„ç©ºé—´åªæœ‰ int ç±»å‹çš„å››åˆ†ä¹‹ä¸€</li>
<li>ä¾‹å­ï¼š<code>byte a = 100ï¼Œbyte b = -50</code></li>
</ul>
<p><strong>shortï¼š</strong></p>
<ul>
<li>short æ•°æ®ç±»å‹æ˜¯ 16 ä½ã€æœ‰ç¬¦å·çš„ä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°</li>
<li>æœ€å°å€¼æ˜¯ -32768ï¼ˆ-2^15ï¼‰ã€æœ€å¤§å€¼æ˜¯ 32767ï¼ˆ2^15 - 1ï¼‰</li>
<li>short æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥åƒ byte é‚£æ ·èŠ‚çœç©ºé—´ï¼Œä¸€ä¸ª short å˜é‡æ˜¯ int å‹å˜é‡æ‰€å ç©ºé—´çš„äºŒåˆ†ä¹‹ä¸€</li>
<li>é»˜è®¤å€¼æ˜¯ <code>0</code></li>
<li>ä¾‹å­ï¼š<code>short s = 1000ï¼Œshort r = -20000</code></li>
</ul>
<p><strong>intï¼š</strong></p>
<ul>
<li>int æ•°æ®ç±»å‹æ˜¯ 32 ä½ 4 å­—èŠ‚ã€æœ‰ç¬¦å·çš„ä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°</li>
<li>æœ€å°å€¼æ˜¯ -2,147,483,648ï¼ˆ-2^31ï¼‰ã€æœ€å¤§å€¼æ˜¯ 2,147,483,647ï¼ˆ2^31 - 1ï¼‰</li>
<li>ä¸€èˆ¬åœ°æ•´å‹å˜é‡é»˜è®¤ä¸º int ç±»å‹</li>
<li>é»˜è®¤å€¼æ˜¯ <code>0</code></li>
<li>ä¾‹å­ï¼š<code>int a = 100000, int b = -200000</code></li>
</ul>
<p><strong>longï¼š</strong></p>
<ul>
<li>long æ•°æ®ç±»å‹æ˜¯ 64 ä½ 8 å­—èŠ‚ã€æœ‰ç¬¦å·çš„ä»¥äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºçš„æ•´æ•°</li>
<li>æœ€å°å€¼æ˜¯ -9,223,372,036,854,775,808ï¼ˆ-2^63ï¼‰ã€æœ€å¤§å€¼æ˜¯ 9,223,372,036,854,775,807ï¼ˆ2^63 -1ï¼‰</li>
<li>è¿™ç§ç±»å‹ä¸»è¦ä½¿ç”¨åœ¨éœ€è¦æ¯”è¾ƒå¤§æ•´æ•°çš„ç³»ç»Ÿä¸Š</li>
<li>é»˜è®¤å€¼æ˜¯ <code>0L</code></li>
<li>ä¾‹å­ï¼š <code>long a = 100000Lï¼ŒLong b = -200000L</code>ï¼ŒL ç†è®ºä¸Šä¸åˆ†å¤§å°å†™ï¼Œä½†æ˜¯è‹¥å†™æˆ I å®¹æ˜“ä¸æ•°å­— 1 æ··æ·†ï¼Œä¸å®¹æ˜“åˆ†è¾©</li>
</ul>
<p><strong>floatï¼š</strong></p>
<ul>
<li>float æ•°æ®ç±»å‹æ˜¯å•ç²¾åº¦ã€32 ä½ã€ç¬¦åˆ IEEE 754 æ ‡å‡†çš„æµ®ç‚¹æ•°</li>
<li>float åœ¨å‚¨å­˜å¤§å‹æµ®ç‚¹æ•°ç»„çš„æ—¶å€™å¯èŠ‚çœå†…å­˜ç©ºé—´</li>
<li>é»˜è®¤å€¼æ˜¯ <code>0.0f</code></li>
<li>æµ®ç‚¹æ•°ä¸èƒ½ç”¨æ¥è¡¨ç¤ºç²¾ç¡®çš„å€¼ï¼Œå¦‚è´§å¸</li>
<li>ä¾‹å­ï¼š<code>float f1 = 234.5F</code></li>
</ul>
<p><strong>doubleï¼š</strong></p>
<ul>
<li>double æ•°æ®ç±»å‹æ˜¯åŒç²¾åº¦ã€64 ä½ã€ç¬¦åˆ IEEE 754 æ ‡å‡†çš„æµ®ç‚¹æ•°</li>
<li>æµ®ç‚¹æ•°çš„é»˜è®¤ç±»å‹ä¸º double ç±»å‹</li>
<li>double ç±»å‹åŒæ ·ä¸èƒ½è¡¨ç¤ºç²¾ç¡®çš„å€¼ï¼Œå¦‚è´§å¸</li>
<li>é»˜è®¤å€¼æ˜¯ <code>0.0d</code></li>
<li>ä¾‹å­ï¼š<code>double d1 = 123.4</code></li>
</ul>
<p><strong>booleanï¼š</strong></p>
<ul>
<li>boolean æ•°æ®ç±»å‹è¡¨ç¤ºä¸€ä½çš„ä¿¡æ¯</li>
<li>åªæœ‰ä¸¤ä¸ªå–å€¼ï¼štrue å’Œ false</li>
<li>JVM è§„èŒƒæŒ‡å‡º boolean å½“åš int å¤„ç†ï¼Œboolean æ•°ç»„å½“åš byte æ•°ç»„å¤„ç†ï¼Œè¿™æ ·å¯ä»¥å¾—å‡º boolean ç±»å‹å•ç‹¬ä½¿ç”¨å äº† 4 ä¸ªå­—èŠ‚ï¼Œåœ¨æ•°ç»„ä¸­æ˜¯ 1 ä¸ªå­—èŠ‚</li>
<li>é»˜è®¤å€¼æ˜¯ <code>false</code></li>
<li>ä¾‹å­ï¼š<code>boolean one = true</code></li>
</ul>
<p><strong>charï¼š</strong></p>
<ul>
<li>char ç±»å‹æ˜¯ä¸€ä¸ªå•ä¸€çš„ 16 ä½<strong>ä¸¤ä¸ªå­—èŠ‚</strong>çš„ Unicode å­—ç¬¦</li>
<li>æœ€å°å€¼æ˜¯ <code>\u0000</code>ï¼ˆå³ä¸º 0ï¼‰</li>
<li>æœ€å¤§å€¼æ˜¯ <code>\uffff</code>ï¼ˆå³ä¸º 65535ï¼‰</li>
<li>char æ•°æ®ç±»å‹å¯ä»¥<strong>å­˜å‚¨ä»»ä½•å­—ç¬¦</strong></li>
<li>ä¾‹å­ï¼š<code>char c = 'A'</code>ï¼Œ<code>char c = 'å¼ '</code></li>
</ul>
<h5 id="ä¸Šä¸‹è½¬å‹">ä¸Šä¸‹è½¬å‹</h5>
<ul>
<li>
<p>float ä¸ doubleï¼š</p>
<p>Java ä¸èƒ½éšå¼æ‰§è¡Œ<strong>å‘ä¸‹è½¬å‹</strong>ï¼Œå› ä¸ºè¿™ä¼šä½¿å¾—ç²¾åº¦é™ä½ï¼Œä½†æ˜¯å¯ä»¥å‘ä¸Šè½¬å‹</p>
<p>1</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span><span class="number">1.1</span>å­—é¢é‡å±äºdoubleç±»å‹ï¼Œä¸èƒ½ç›´æ¥å°†<span class="number">1.1</span>ç›´æ¥èµ‹å€¼ç»™ float å˜é‡ï¼Œå› ä¸ºè¿™æ˜¯å‘ä¸‹è½¬å‹</span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float f <span class="operator">=</span> <span class="number">1.1</span><span class="comment">;//æŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span><span class="number">1.1</span>f å­—é¢é‡æ‰æ˜¯ float ç±»å‹</span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float f <span class="operator">=</span> <span class="number">1.1</span>f<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>1</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float f1 <span class="operator">=</span> <span class="number">1.234</span>f<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">double d1 <span class="operator">=</span> f1<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">double d2 <span class="operator">=</span> <span class="number">1.23</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>5</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span> f2 = (<span class="built_in">float</span>) d2;<span class="comment">//å‘ä¸‹è½¬å‹éœ€è¦å¼ºè½¬</span></span><br></pre></td></tr></table></figure>
<p>1</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int i1 <span class="operator">=</span> <span class="number">1245</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">long l1 <span class="operator">=</span> i1<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">long l2 <span class="operator">=</span> <span class="number">1234</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>5</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int i2 <span class="operator">=</span> (int) l2<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>éšå¼ç±»å‹è½¬æ¢ï¼š</p>
<p>å­—é¢é‡ 1 æ˜¯ int ç±»å‹ï¼Œæ¯” short ç±»å‹ç²¾åº¦è¦é«˜ï¼Œå› æ­¤ä¸èƒ½éšå¼åœ°å°† int ç±»å‹å‘ä¸‹è½¬å‹ä¸º short ç±»å‹</p>
<p>ä½¿ç”¨ += æˆ–è€… ++ è¿ç®—ç¬¦ä¼šæ‰§è¡Œç±»å‹è½¬æ¢ï¼š</p>
<p>1</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">short s1 <span class="operator">=</span> <span class="number">1</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1 += <span class="number">1</span>;    <span class="regexp">//</span>s1++;</span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>ä¸Šé¢çš„è¯­å¥ç›¸å½“äºå°† s1 + <span class="number">1</span> çš„è®¡ç®—ç»“æœè¿›è¡Œäº†å‘ä¸‹è½¬å‹</span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">s1</span> = (short) (s1 + <span class="number">1</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="å¼•ç”¨ç±»å‹">å¼•ç”¨ç±»å‹</h5>
<p>å¼•ç”¨æ•°æ®ç±»å‹ï¼šç±»ï¼Œæ¥å£ï¼Œæ•°ç»„éƒ½æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåˆå«åŒ…è£…ç±»</p>
<p>åŒ…è£…ç±»çš„ä½œç”¨ï¼š</p>
<ul>
<li>åŒ…è£…ç±»ä½œä¸ºç±»é¦–å…ˆæ‹¥æœ‰äº† Object ç±»çš„æ–¹æ³•</li>
<li>åŒ…è£…ç±»ä½œä¸ºå¼•ç”¨ç±»å‹çš„å˜é‡å¯ä»¥<strong>å­˜å‚¨ null å€¼</strong></li>
</ul>
<p>1</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åŸºæœ¬æ•°æ®ç±»å‹                åŒ…è£…ç±»ï¼ˆå¼•ç”¨æ•°æ®ç±»å‹ï¼‰</span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>                      <span class="keyword">Byte</span></span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">short</span>                     <span class="keyword">Short</span></span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>                       <span class="keyword">Integer</span></span><br></pre></td></tr></table></figure>
<p>5</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span>                      <span class="keyword">Long</span></span><br></pre></td></tr></table></figure>
<p>6</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>7</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">float</span>                     <span class="attribute">Float</span></span><br></pre></td></tr></table></figure>
<p>8</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span>                    <span class="keyword">Double</span></span><br></pre></td></tr></table></figure>
<p>9</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">char</span>                      <span class="keyword">Character</span></span><br></pre></td></tr></table></figure>
<p>10</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">boolean</span>                   <span class="built_in">Boolean</span></span><br></pre></td></tr></table></figure>
<p>Java ä¸ºåŒ…è£…ç±»åšäº†ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½ï¼Œå…·ä½“æ¥çœ‹ç‰¹æ®ŠåŠŸèƒ½ä¸»è¦æœ‰ï¼š</p>
<ul>
<li>
<p>å¯ä»¥æŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹çš„å€¼</p>
<ol>
<li>è°ƒç”¨ toString() æ–¹æ³•</li>
<li>è°ƒç”¨ Integer.toString(åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼) å¾—åˆ°å­—ç¬¦ä¸²</li>
<li>ç›´æ¥æŠŠåŸºæœ¬æ•°æ®ç±»å‹ + ç©ºå­—ç¬¦ä¸²å°±å¾—åˆ°äº†å­—ç¬¦ä¸²ï¼ˆæ¨èä½¿ç”¨ï¼‰</li>
</ol>
</li>
<li>
<p>æŠŠå­—ç¬¦ä¸²ç±»å‹çš„æ•°å€¼è½¬æ¢æˆå¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼ˆ<strong>é‡è¦</strong>ï¼‰</p>
<ol>
<li>Xxx.parseXxx(â€œå­—ç¬¦ä¸²ç±»å‹çš„æ•°å€¼â€) â†’ <code>Integer.parseInt(numStr)</code></li>
<li>Xxx.valueOf(â€œå­—ç¬¦ä¸²ç±»å‹çš„æ•°å€¼â€)   â†’ <code>Integer.valueOf(numStr)</code> ï¼ˆæ¨èä½¿ç”¨ï¼‰</li>
</ol>
<p>1</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">PackageClass02</span> &#123;</span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> <span class="number">1</span>.æŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼è½¬æˆå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer it <span class="operator">=</span> <span class="number">100</span> <span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>5</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> a.è°ƒç”¨toString()æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>
<p>6</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String itStr <span class="operator">=</span> it.toString()<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>7</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.<span class="keyword">out</span>.println(itStr+<span class="number">1</span>);<span class="comment">//1001</span></span><br></pre></td></tr></table></figure>
<p>8</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> b.è°ƒç”¨Integer.toString(åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼)å¾—åˆ°å­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></table></figure>
<p>9</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String itStr1 = <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">it</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>10</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.<span class="keyword">out</span>.println(itStr1+<span class="number">1</span>);<span class="comment">//1001</span></span><br></pre></td></tr></table></figure>
<p>11</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> c.ç›´æ¥æŠŠåŸºæœ¬æ•°æ®ç±»å‹+ç©ºå­—ç¬¦ä¸²å°±å¾—åˆ°äº†å­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></table></figure>
<p>12</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> itStr2 = <span class="literal">it</span> + <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>13</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.<span class="keyword">out</span>.println(itStr2+<span class="number">1</span>);<span class="comment">// 1001</span></span><br></pre></td></tr></table></figure>
<p>14</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure>
<p>15</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> <span class="number">2</span>.æŠŠå­—ç¬¦ä¸²ç±»å‹çš„æ•°å€¼è½¬æ¢æˆå¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼</span><br></pre></td></tr></table></figure>
<p>16</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String numStr <span class="operator">=</span> <span class="string">&quot;23&quot;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>17</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> numInt = <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>value<span class="constructor">Of(<span class="params">numStr</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>18</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.<span class="keyword">out</span>.println(numInt+<span class="number">1</span>);<span class="comment">//24</span></span><br></pre></td></tr></table></figure>
<p>19</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure>
<p>20</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String doubleStr <span class="operator">=</span> <span class="string">&quot;99.9&quot;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>21</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span> <span class="built_in">double</span>Db = Double.valueOf(<span class="built_in">double</span>Str);</span><br></pre></td></tr></table></figure>
<p>22</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">System</span>.out.println(doubleDb+<span class="number">0</span>.<span class="number">1</span>);//<span class="number">100</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>23</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>24</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="ç±»å‹å¯¹æ¯”">ç±»å‹å¯¹æ¯”</h5>
<ul>
<li>
<p>æœ‰äº†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¼•ç”¨æ•°æ®ç±»å‹ï¼Ÿ</p>
<blockquote>
<p>å¼•ç”¨æ•°æ®ç±»å‹å°è£…äº†æ•°æ®å’Œå¤„ç†è¯¥æ•°æ®çš„æ–¹æ³•ï¼Œæ¯”å¦‚ Integer.parseInt(String) å°±æ˜¯å°† String å­—ç¬¦ç±»å‹æ•°æ®è½¬æ¢ä¸º Integer æ•´å‹</p>
<p>Java ä¸­å¤§éƒ¨åˆ†ç±»å’Œæ–¹æ³•éƒ½æ˜¯é’ˆå¯¹å¼•ç”¨æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æ³›å‹å’Œé›†åˆ</p>
</blockquote>
</li>
<li>
<p>å¼•ç”¨æ•°æ®ç±»å‹é‚£ä¹ˆå¥½ï¼Œä¸ºä»€ä¹ˆè¿˜ç”¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ</p>
<blockquote>
<p>å¼•ç”¨ç±»å‹çš„å¯¹è±¡è¦å¤šå‚¨å­˜å¯¹è±¡å¤´ï¼Œå¯¹åŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ç©ºé—´æµªè´¹ç‡å¤ªé«˜ã€‚é€»è¾‘ä¸Šæ¥è®²ï¼ŒJava åªæœ‰åŒ…è£…ç±»å°±å¤Ÿäº†ï¼Œä¸ºäº†è¿è¡Œé€Ÿåº¦ï¼Œéœ€è¦ç”¨åˆ°åŸºæœ¬æ•°æ®ç±»å‹ï¼›ä¼˜å…ˆè€ƒè™‘è¿è¡Œæ•ˆç‡çš„é—®é¢˜ï¼Œæ‰€ä»¥äºŒè€…åŒæ—¶å­˜åœ¨æ˜¯åˆä¹æƒ…ç†çš„</p>
</blockquote>
</li>
<li>
<p>Java é›†åˆä¸èƒ½å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªå­˜æ”¾å¯¹è±¡çš„å¼•ç”¨ï¼Ÿ</p>
<blockquote>
<p>ä¸èƒ½æ”¾åŸºæœ¬æ•°æ®ç±»å‹æ˜¯å› ä¸ºä¸æ˜¯ Object çš„å­ç±»ã€‚æ³›å‹æ€æƒ³ï¼Œå¦‚æœä¸ç”¨æ³›å‹è¦å†™å¾ˆå¤šå‚æ•°ç±»å‹ä¸åŒçš„ä½†åŠŸèƒ½ç›¸åŒçš„å‡½æ•°ï¼ˆæ–¹æ³•é‡è½½ï¼‰</p>
</blockquote>
</li>
<li>
<p>==</p>
<blockquote>
<p>== æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å…·ä½“çš„å€¼ == æ¯”è¾ƒå¼•ç”¨æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å¯¹è±¡åœ°å€å€¼</p>
</blockquote>
</li>
</ul>
<h4 id="è£…ç®±æ‹†ç®±">è£…ç®±æ‹†ç®±</h4>
<p><strong>è‡ªåŠ¨è£…ç®±</strong>ï¼šå¯ä»¥ç›´æ¥æŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æˆ–è€…å˜é‡èµ‹å€¼ç»™åŒ…è£…ç±»</p>
<p><strong>è‡ªåŠ¨æ‹†ç®±</strong>ï¼šå¯ä»¥æŠŠåŒ…è£…ç±»çš„å˜é‡ç›´æ¥èµ‹å€¼ç»™åŸºæœ¬æ•°æ®ç±»å‹</p>
<p>1</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">PackegeClass</span> &#123;</span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int a <span class="operator">=</span> <span class="number">12</span> <span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer a1 <span class="operator">=</span> <span class="number">12</span> <span class="comment">;  // è‡ªåŠ¨è£…ç®±</span></span><br></pre></td></tr></table></figure>
<p>5</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer a2 <span class="operator">=</span> a <span class="comment">;   // è‡ªåŠ¨è£…ç®±</span></span><br></pre></td></tr></table></figure>
<p>6</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">a3</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// å¼•ç”¨æ•°æ®ç±»å‹çš„é»˜è®¤å€¼å¯ä»¥ä¸ºnull</span></span><br></pre></td></tr></table></figure>
<p>7</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>8</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer c <span class="operator">=</span> <span class="number">100</span> <span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>9</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int <span class="keyword">c</span><span class="number">1</span> <span class="operator">=</span> <span class="keyword">c</span> <span class="comment">;      // è‡ªåŠ¨æ‹†ç®±</span></span><br></pre></td></tr></table></figure>
<p>10</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>11</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Integer</span> it = <span class="keyword">Integer</span>.valueOf(<span class="number">12</span>);   <span class="comment">// æ‰‹å·¥è£…ç®±ï¼</span></span><br></pre></td></tr></table></figure>
<p>12</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> Integer it1 = new Integer(<span class="number">12</span>);   <span class="regexp">//</span> æ‰‹å·¥è£…ç®±ï¼</span><br></pre></td></tr></table></figure>
<p>13</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer it2 <span class="operator">=</span> <span class="number">12</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>14</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>15</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer it3 <span class="operator">=</span> <span class="number">111</span> <span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>16</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> it33 = it3.<span class="built_in">int</span><span class="constructor">Value()</span>; <span class="comment">// æ‰‹å·¥æ‹†ç®±</span></span><br></pre></td></tr></table></figure>
<p>17</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>18</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è‡ªåŠ¨è£…ç®±</strong>åç¼–è¯‘ååº•å±‚è°ƒç”¨ <code>Integer.valueOf()</code> å®ç°ï¼Œæºç ï¼š</p>
<p>1</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>2</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="selector-tag">i</span> &gt;= IntegerCache<span class="selector-class">.low</span> &amp;&amp; <span class="selector-tag">i</span> &lt;= IntegerCache.high)</span><br></pre></td></tr></table></figure>
<p>3</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> ã€ç¼“å­˜æ± ã€‘ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„</span><br></pre></td></tr></table></figure>
<p>4</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br></pre></td></tr></table></figure>
<p>5</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Integer</span>(i);</span><br></pre></td></tr></table></figure>
<p>6</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªåŠ¨æ‹†ç®±è°ƒç”¨ <code>java.lang.Integer#intValue</code>ï¼Œæºç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">intValue</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¼“å­˜æ± ">ç¼“å­˜æ± </h4>
<p>new Integer(123) ä¸ Integer.valueOf(123) çš„åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>
<p>new Integer(123)ï¼šæ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡</p>
</li>
<li>
<p>Integer.valueOf(123)ï¼šä¼šä½¿ç”¨ç¼“å­˜æ± ä¸­çš„å¯¹è±¡ï¼Œå¤šæ¬¡è°ƒç”¨å–å¾—åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> x = <span class="built_in">new</span> <span class="type">Integer</span>(<span class="number">123</span>);</span><br><span class="line"><span class="type">Integer</span> y = <span class="built_in">new</span> <span class="type">Integer</span>(<span class="number">123</span>);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(x == y);    // <span class="keyword">false</span></span><br><span class="line"><span class="type">Integer</span> z = <span class="type">Integer</span>.valueOf(<span class="number">123</span>);</span><br><span class="line"><span class="type">Integer</span> k = <span class="type">Integer</span>.valueOf(<span class="number">123</span>);</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(z == k);   // <span class="keyword">true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>valueOf() æ–¹æ³•çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å…ˆåˆ¤æ–­å€¼æ˜¯å¦åœ¨ç¼“å­˜æ± ä¸­ï¼Œå¦‚æœåœ¨çš„è¯å°±ç›´æ¥è¿”å›ç¼“å­˜æ± çš„å†…å®¹ã€‚ç¼–è¯‘å™¨ä¼šåœ¨è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå› æ­¤å¤šä¸ªå€¼ç›¸åŒä¸”å€¼åœ¨ç¼“å­˜æ± èŒƒå›´å†…çš„ Integer å®ä¾‹ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥åˆ›å»ºï¼Œé‚£ä¹ˆå°±ä¼šå¼•ç”¨ç›¸åŒçš„å¯¹è±¡</p>
<p><strong>åŸºæœ¬ç±»å‹å¯¹åº”çš„ç¼“å­˜æ± å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>Boolean values true and false</li>
<li>all byte values</li>
<li>Short values between -128 and 127</li>
<li>Long values between -128 and 127</li>
<li>Integer values between -128 and 127</li>
<li>Character in the range \u0000 to \u007F (0 and 127)</li>
</ul>
<p>åœ¨ jdk 1.8 æ‰€æœ‰çš„æ•°å€¼ç±»ç¼“å†²æ± ä¸­ï¼Œ<strong>Integer çš„ç¼“å­˜æ±  IntegerCache å¾ˆç‰¹æ®Šï¼Œè¿™ä¸ªç¼“å†²æ± çš„ä¸‹ç•Œæ˜¯ -128ï¼Œä¸Šç•Œé»˜è®¤æ˜¯ 127</strong>ï¼Œä½†æ˜¯ä¸Šç•Œæ˜¯å¯è°ƒçš„ï¼Œåœ¨å¯åŠ¨ JVM æ—¶é€šè¿‡ <code>AutoBoxCacheMax=</code> æ¥æŒ‡å®šè¿™ä¸ªç¼“å†²æ± çš„å¤§å°ï¼Œè¯¥é€‰é¡¹åœ¨ JVM åˆå§‹åŒ–çš„æ—¶å€™ä¼šè®¾å®šä¸€ä¸ªåä¸º java.lang.IntegerCache.high ç³»ç»Ÿå±æ€§ï¼Œç„¶å IntegerCache åˆå§‹åŒ–çš„æ—¶å€™å°±ä¼šè¯»å–è¯¥ç³»ç»Ÿå±æ€§æ¥å†³å®šä¸Šç•Œ</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Integer x <span class="operator">=</span> <span class="number">100</span><span class="comment">;				// è‡ªåŠ¨è£…ç®±ï¼Œåº•å±‚è°ƒç”¨ Integer.valueOf(1)</span></span><br><span class="line">Integer y <span class="operator">=</span> <span class="number">100</span><span class="comment">;</span></span><br><span class="line">System.out.println(x <span class="operator">=</span><span class="operator">=</span> y)<span class="comment">;   	// true</span></span><br><span class="line"></span><br><span class="line">Integer x <span class="operator">=</span> <span class="number">1000</span><span class="comment">;</span></span><br><span class="line">Integer y <span class="operator">=</span> <span class="number">1000</span><span class="comment">;</span></span><br><span class="line">System.out.println(x <span class="operator">=</span><span class="operator">=</span> y)<span class="comment">;   	// falseï¼Œå› ä¸ºç¼“å­˜æ± æœ€å¤§127</span></span><br><span class="line"></span><br><span class="line">int x <span class="operator">=</span> <span class="number">1000</span><span class="comment">;</span></span><br><span class="line">Integer y <span class="operator">=</span> <span class="number">1000</span><span class="comment">;</span></span><br><span class="line">System.out.println(x <span class="operator">=</span><span class="operator">=</span> y)<span class="comment">;		// trueï¼Œå› ä¸º y ä¼šè°ƒç”¨ intValue ã€è‡ªåŠ¨æ‹†ç®±ã€‘è¿”å› int åŸå§‹å€¼è¿›è¡Œæ¯”è¾ƒ</span></span><br></pre></td></tr></table></figure>
<h4 id="è¾“å…¥æ•°æ®">è¾“å…¥æ•°æ®</h4>
<p>è¯­æ³•ï¼š<code>Scanner sc = new Scanner(System.in)</code></p>
<ul>
<li>next()ï¼šé‡åˆ°äº†ç©ºæ ¼ï¼Œå°±ä¸å†å½•å…¥æ•°æ®äº†ï¼Œç»“æŸæ ‡è®°ï¼šç©ºæ ¼ã€tab é”®</li>
<li>nextLine()ï¼šå¯ä»¥å°†æ•°æ®å®Œæ•´çš„æ¥æ”¶è¿‡æ¥ï¼Œç»“æŸæ ‡è®°ï¼šå›è½¦æ¢è¡Œç¬¦</li>
</ul>
<p>ä¸€èˆ¬ä½¿ç”¨ <code>sc.nextInt()</code> æˆ–è€… <code>sc.nextLine()</code> æ¥å—æ•´å‹å’Œå­—ç¬¦ä¸²ï¼Œç„¶åè½¬æˆéœ€è¦çš„æ•°æ®ç±»å‹</p>
<ul>
<li>Scannerï¼š<code>BufferedReader br = new BufferedReader(new InputStreamReader(System.in))</code></li>
<li>printï¼š<code>PrintStream.write()</code></li>
</ul>
<blockquote>
<p>ä½¿ç”¨å¼•ç”¨æ•°æ®ç±»å‹çš„API</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">    <span class="title class_">Scanner</span> sc = <span class="keyword">new</span> <span class="title class_">Scanner</span>(<span class="title class_">System</span>.<span class="property">in</span>);</span><br><span class="line">    <span class="keyword">while</span> (sc.<span class="title function_">hasNextLine</span>()) &#123;</span><br><span class="line">        <span class="title class_">String</span> msg = sc.<span class="title function_">nextLine</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°ç»„">æ•°ç»„</h3>
<h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4>
<p>æ•°ç»„å°±æ˜¯å­˜å‚¨æ•°æ®é•¿åº¦å›ºå®šçš„å®¹å™¨ï¼Œå­˜å‚¨å¤šä¸ªæ•°æ®çš„æ•°æ®ç±»å‹è¦ä¸€è‡´ï¼Œ<strong>æ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡</strong></p>
<p>åˆ›å»ºæ•°ç»„ï¼š</p>
<ul>
<li>æ•°æ®ç±»å‹[] æ•°ç»„åï¼š<code>int[] arr</code>  ï¼ˆå¸¸ç”¨ï¼‰</li>
<li>æ•°æ®ç±»å‹ æ•°ç»„å[]ï¼š<code>int arr[]</code></li>
</ul>
<p>é™æ€åˆå§‹åŒ–ï¼š</p>
<ul>
<li>æ•°æ®ç±»å‹[] æ•°ç»„å = new æ•°æ®ç±»å‹[]{å…ƒç´ 1,å…ƒç´ 2,â€¦}ï¼š<code>int[] arr = new int[]&#123;11,22,33&#125;</code></li>
<li>æ•°æ®ç±»å‹[] æ•°ç»„å = {å…ƒç´ 1,å…ƒç´ 2,â€¦}ï¼š<code>int[] arr = &#123;44,55,66&#125;</code></li>
</ul>
<p>åŠ¨æ€åˆå§‹åŒ–</p>
<ul>
<li>æ•°æ®ç±»å‹[] æ•°ç»„å = new æ•°æ®ç±»å‹[æ•°ç»„é•¿åº¦]ï¼š<code>int[] arr = new int[3]</code></li>
</ul>
<h4 id="å…ƒç´ è®¿é—®">å…ƒç´ è®¿é—®</h4>
<ul>
<li><strong>ç´¢å¼•</strong>ï¼šæ¯ä¸€ä¸ªå­˜å‚¨åˆ°æ•°ç»„çš„å…ƒç´ ï¼Œéƒ½ä¼šè‡ªåŠ¨çš„æ‹¥æœ‰ä¸€ä¸ªç¼–å·ï¼Œä» <strong>0</strong> å¼€å§‹ã€‚è¿™ä¸ªè‡ªåŠ¨ç¼–å·ç§°ä¸ºæ•°ç»„ç´¢å¼•ï¼ˆindexï¼‰ï¼Œå¯ä»¥é€šè¿‡æ•°ç»„çš„ç´¢å¼•è®¿é—®åˆ°æ•°ç»„ä¸­çš„å…ƒç´ </li>
<li><strong>è®¿é—®æ ¼å¼</strong>ï¼šæ•°ç»„å[ç´¢å¼•]ï¼Œ<code>arr[0]</code></li>
<li><strong>èµ‹å€¼ï¼š</strong><code>arr[0] = 10</code></li>
</ul>
<h4 id="å†…å­˜åˆ†é…">å†…å­˜åˆ†é…</h4>
<p>å†…å­˜æ˜¯è®¡ç®—æœºä¸­çš„é‡è¦å™¨ä»¶ï¼Œä¸´æ—¶å­˜å‚¨åŒºåŸŸï¼Œä½œç”¨æ˜¯è¿è¡Œç¨‹åºã€‚ç¼–å†™çš„ç¨‹åºæ˜¯å­˜æ”¾åœ¨ç¡¬ç›˜ä¸­ï¼Œåœ¨ç¡¬ç›˜ä¸­çš„ç¨‹åºæ˜¯ä¸ä¼šè¿è¡Œçš„ï¼Œå¿…é¡»æ”¾è¿›å†…å­˜ä¸­æ‰èƒ½è¿è¡Œï¼Œè¿è¡Œå®Œæ¯•åä¼šæ¸…ç©ºå†…å­˜ï¼ŒJava è™šæ‹Ÿæœºè¦è¿è¡Œç¨‹åºï¼Œå¿…é¡»è¦å¯¹å†…å­˜è¿›è¡Œç©ºé—´çš„åˆ†é…å’Œç®¡ç†</p>
<table>
<thead>
<tr>
<th>åŒºåŸŸåç§°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯„å­˜å™¨</td>
<td>ç»™ CPU ä½¿ç”¨</td>
</tr>
<tr>
<td>æœ¬åœ°æ–¹æ³•æ ˆ</td>
<td>JVM åœ¨ä½¿ç”¨æ“ä½œç³»ç»ŸåŠŸèƒ½çš„æ—¶å€™ä½¿ç”¨</td>
</tr>
<tr>
<td>æ–¹æ³•åŒº</td>
<td>å­˜å‚¨å¯ä»¥è¿è¡Œçš„ class æ–‡ä»¶</td>
</tr>
<tr>
<td>å †å†…å­˜</td>
<td>å­˜å‚¨å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œnew æ¥åˆ›å»ºçš„ï¼Œéƒ½å­˜å‚¨åœ¨å †å†…å­˜</td>
</tr>
<tr>
<td>æ–¹æ³•æ ˆ</td>
<td>æ–¹æ³•è¿è¡Œæ—¶ä½¿ç”¨çš„å†…å­˜ï¼Œæ¯”å¦‚ main æ–¹æ³•è¿è¡Œï¼Œè¿›å…¥æ–¹æ³•æ ˆä¸­æ‰§è¡Œ</td>
</tr>
</tbody>
</table>
<p><strong>å†…å­˜åˆ†é…å›¾</strong>ï¼šJava å†…å­˜åˆ†é…</p>
<ul>
<li>
<p>ä¸€ä¸ªæ•°ç»„å†…å­˜å›¾</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D-%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%9B%BE.png" alt="img"></p>
</li>
<li>
<p>ä¸¤ä¸ªæ•°ç»„å†…å­˜å›¾</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D-%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%9B%BE.png" alt="img"></p>
</li>
<li>
<p>å¤šä¸ªæ•°ç»„æŒ‡å‘ç›¸åŒå†…å­˜å›¾</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D-%E5%A4%9A%E4%B8%AA%E6%95%B0%E7%BB%84%E6%8C%87%E5%90%91%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%9B%BE.png" alt="img"></p>
</li>
</ul>
<h4 id="æ•°ç»„å¼‚å¸¸">æ•°ç»„å¼‚å¸¸</h4>
<ul>
<li>
<p>ç´¢å¼•è¶Šç•Œå¼‚å¸¸ï¼šArrayIndexOutOfBoundsException</p>
</li>
<li>
<p>ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼šNullPointerException</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ArrayDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="comment">//æŠŠnullèµ‹å€¼ç»™æ•°ç»„</span></span><br><span class="line">        arr = <span class="literal">null</span>;</span><br><span class="line">        System.<span class="keyword">out</span>.println(arr[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>arr = nullï¼Œè¡¨ç¤ºå˜é‡ arr å°†ä¸å†ä¿å­˜æ•°ç»„çš„å†…å­˜åœ°å€ï¼Œä¹Ÿå°±ä¸å…è®¸å†æ“ä½œæ•°ç»„ï¼Œå› æ­¤è¿è¡Œçš„æ—¶å€™ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚åœ¨å¼€å‘ä¸­ï¼Œç©ºæŒ‡é’ˆå¼‚å¸¸æ˜¯ä¸èƒ½å‡ºç°çš„ï¼Œä¸€æ—¦å‡ºç°äº†ï¼Œå°±å¿…é¡»è¦ä¿®æ”¹ç¼–å†™çš„ä»£ç </p>
<p>è§£å†³æ–¹æ¡ˆï¼šç»™æ•°ç»„ä¸€ä¸ªçœŸæ­£çš„å †å†…å­˜ç©ºé—´å¼•ç”¨å³å¯</p>
</li>
</ul>
<h4 id="äºŒç»´æ•°ç»„">äºŒç»´æ•°ç»„</h4>
<p>äºŒç»´æ•°ç»„ä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ï¼Œä¸åŒäºä¸€ç»´æ•°ç»„ï¼Œè¯¥å®¹å™¨å­˜å‚¨çš„éƒ½æ˜¯ä¸€ç»´æ•°ç»„å®¹å™¨</p>
<p>åˆå§‹åŒ–ï¼š</p>
<ul>
<li>åŠ¨æ€åˆå§‹åŒ–ï¼šæ•°æ®ç±»å‹ å˜é‡å = new æ•°æ®ç±»å‹[m] [n]ï¼Œ<code>int[][] arr = new int[3][3]</code>
<ul>
<li>m è¡¨ç¤ºè¿™ä¸ªäºŒç»´æ•°ç»„ï¼Œå¯ä»¥å­˜æ”¾å¤šå°‘ä¸ªä¸€ç»´æ•°ç»„ï¼Œè¡Œ</li>
<li>n è¡¨ç¤ºæ¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå¯ä»¥å­˜æ”¾å¤šå°‘ä¸ªå…ƒç´ ï¼Œåˆ—</li>
</ul>
</li>
<li>é™æ€åˆå§‹åŒ–
<ul>
<li><code>int[][] arr = &#123;&#123;11,22,33&#125;, &#123;44,55,66&#125;&#125;</code></li>
</ul>
</li>
</ul>
<p>éå†ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ­¥éª¤:</span></span><br><span class="line"><span class="comment">            1. éå†äºŒç»´æ•°ç»„ï¼Œå–å‡ºé‡Œé¢æ¯ä¸€ä¸ªä¸€ç»´æ•°ç»„</span></span><br><span class="line"><span class="comment">            2. åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ç»§ç»­å®Œæˆéå†ï¼Œè·å–å†…éƒ¨å­˜å‚¨çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[][] arr = &#123;&#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>&#125;, &#123;<span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>&#125;&#125;;</span><br><span class="line">        <span class="comment">// 1. éå†äºŒç»´æ•°ç»„ï¼Œå–å‡ºé‡Œé¢æ¯ä¸€ä¸ªä¸€ç»´æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="comment">//System.out.println(arr[i]);</span></span><br><span class="line">            <span class="comment">// 2. åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ç»§ç»­å®Œæˆéå†ï¼Œè·å–å†…éƒ¨å­˜å‚¨çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            <span class="comment">//int[] temp = arr[i];</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; arr[i].length; j++) &#123;</span><br><span class="line">                System.out.<span class="built_in">println</span>(arr[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿ç®—">è¿ç®—</h3>
<ul>
<li>
<p>i++ ä¸ ++i çš„åŒºåˆ«ï¼Ÿ</p>
<p>i++ è¡¨ç¤ºå…ˆå°† i æ”¾åœ¨è¡¨è¾¾å¼ä¸­è¿ç®—ï¼Œç„¶åå†åŠ  1ï¼Œ++i è¡¨ç¤ºå…ˆå°† i åŠ  1ï¼Œç„¶åå†æ”¾åœ¨è¡¨è¾¾å¼ä¸­è¿ç®—</p>
</li>
<li>
<p>|| å’Œ |ï¼Œ&amp;&amp; å’Œ&amp; çš„åŒºåˆ«ï¼Œé€»è¾‘è¿ç®—ç¬¦</p>
<p><strong>&amp; å’Œ| ç§°ä¸ºå¸ƒå°”è¿ç®—ç¬¦ï¼Œä½è¿ç®—ç¬¦ï¼›&amp;&amp; å’Œ || ç§°ä¸ºæ¡ä»¶å¸ƒå°”è¿ç®—ç¬¦ï¼Œä¹Ÿå«çŸ­è·¯è¿ç®—ç¬¦</strong></p>
<p>å¦‚æœ &amp;&amp; è¿ç®—ç¬¦çš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯ falseï¼Œå°±ä¸éœ€è¦è€ƒè™‘ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼äº†ï¼Œå› ä¸ºæ— è®ºç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼æ˜¯ä»€ä¹ˆï¼Œå…¶ç»“æœéƒ½æ˜¯ falseï¼›åŒæ ·ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯ trueï¼Œ|| è¿ç®—ç¬¦å°±è¿”å› trueï¼Œæ— éœ€è€ƒè™‘ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼ï¼›ä½† &amp; å’Œ | å´ä¸æ˜¯è¿™æ ·ï¼Œå®ƒä»¬æ€»æ˜¯è¦è®¡ç®—ä¸¤ä¸ªæ“ä½œæ•°ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œ<strong>å°½å¯èƒ½ä½¿ç”¨ &amp;&amp; å’Œ || è¿ç®—ç¬¦</strong></p>
</li>
<li>
<p>å¼‚æˆ– ^ï¼šä¸¤ä½ç›¸å¼‚ä¸º 1ï¼Œç›¸åŒä¸º 0ï¼Œåˆå«ä¸è¿›ä½åŠ æ³•</p>
</li>
<li>
<p>åŒæˆ–ï¼šä¸¤ä½ç›¸åŒä¸º 1ï¼Œç›¸å¼‚ä¸º 0</p>
</li>
<li>
<p>switchï¼šä» Java 7 å¼€å§‹ï¼Œå¯ä»¥åœ¨ switch æ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­ä½¿ç”¨ String å¯¹è±¡</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String s = <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (s) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;a&quot;</span>:</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;b&quot;</span>:</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>switch ä¸æ”¯æŒ longã€floatã€doubleï¼Œswitch çš„è®¾è®¡åˆè¡·æ˜¯å¯¹é‚£äº›åªæœ‰å°‘æ•°å‡ ä¸ªå€¼çš„ç±»å‹è¿›è¡Œç­‰å€¼åˆ¤æ–­ï¼Œå¦‚æœå€¼è¿‡äºå¤æ‚ï¼Œé‚£ä¹ˆç”¨ if æ¯”è¾ƒåˆé€‚</p>
</li>
<li>
<p>breakï¼šè·³å‡ºä¸€å±‚å¾ªç¯</p>
</li>
<li>
<p>ç§»ä½è¿ç®—ï¼šè®¡ç®—æœºé‡Œä¸€èˆ¬ç”¨<strong>è¡¥ç è¡¨ç¤ºæ•°å­—</strong>ï¼Œæ­£æ•°ã€è´Ÿæ•°çš„è¡¨ç¤ºåŒºåˆ«å°±æ˜¯æœ€é«˜ä½æ˜¯ 0 è¿˜æ˜¯ 1</p>
<ul>
<li>
<p>æ­£æ•°çš„åŸç åç è¡¥ç ç›¸åŒï¼Œæœ€é«˜ä½ä¸º 0</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">100</span>:	<span class="number">00000000</span>  <span class="number">00000000</span>  <span class="number">00000000</span>  <span class="number">01100100</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è´Ÿæ•°ï¼š åŸç ï¼šæœ€é«˜ä½ä¸º 1ï¼Œå…¶ä½™ä½ç½®å’Œæ­£æ•°ç›¸åŒ åç ï¼šä¿è¯ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½ç½®å–å è¡¥ç ï¼šä¿è¯ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½ç½®å–åååŠ  1ï¼Œå³åç  +1</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="number">100</span> åŸç :	<span class="number">10000000</span>  <span class="number">00000000</span>  <span class="number">00000000</span>  <span class="number">01100100</span>	//<span class="number">32</span>ä½</span><br><span class="line">-<span class="number">100</span> åç :	<span class="number">11111111</span>  <span class="number">11111111</span>  <span class="number">11111111</span>  <span class="number">10011011</span></span><br><span class="line">-<span class="number">100</span> è¡¥ç :	<span class="number">11111111</span>  <span class="number">11111111</span>  <span class="number">11111111</span>  <span class="number">10011100</span></span><br></pre></td></tr></table></figure>
<p>è¡¥ç  â†’ åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½ç½®å–ååŠ  1</p>
</li>
</ul>
<p>è¿ç®—ç¬¦ï¼š</p>
<ul>
<li><code>&gt;&gt;</code> è¿ç®—ç¬¦ï¼šå°†äºŒè¿›åˆ¶ä½è¿›è¡Œå³ç§»æ“ä½œï¼Œç›¸å½“äºé™¤ 2</li>
<li><code>&lt;&lt;</code> è¿ç®—ç¬¦ï¼šå°†äºŒè¿›åˆ¶ä½è¿›è¡Œå·¦ç§»æ“ä½œï¼Œç›¸å½“äºä¹˜ 2</li>
<li><code>&gt;&gt;&gt;</code> è¿ç®—ç¬¦ï¼šæ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥ 0 è¡¥é½</li>
</ul>
<p>è¿ç®—è§„åˆ™ï¼š</p>
<ul>
<li>
<p>æ­£æ•°çš„å·¦ç§»ä¸å³ç§»ï¼Œç©ºä½è¡¥ 0</p>
</li>
<li>
<p>è´Ÿæ•°åŸç çš„å·¦ç§»ä¸å³ç§»ï¼Œç©ºä½è¡¥ 0</p>
<p>è´Ÿæ•°åç çš„å·¦ç§»ä¸å³ç§»ï¼Œç©ºä½è¡¥ 1</p>
<p>è´Ÿæ•°è¡¥ç ï¼Œå·¦ç§»ä½ä½è¡¥ 0ï¼ˆä¼šå¯¼è‡´è´Ÿæ•°å˜ä¸ºæ­£æ•°çš„é—®é¢˜ï¼Œå› ä¸ºç§»åŠ¨äº†ç¬¦å·ä½ï¼‰ï¼Œå³ç§»é«˜ä½è¡¥ 1</p>
</li>
<li>
<p>æ— ç¬¦å·ç§»ä½ï¼Œç©ºä½è¡¥ 0</p>
</li>
</ul>
</li>
</ul>
<h3 id="å‚æ•°">å‚æ•°</h3>
<h4 id="å½¢å‚å®å‚">å½¢å‚å®å‚</h4>
<p>å½¢å‚ï¼š</p>
<ul>
<li>å½¢å¼å‚æ•°ï¼Œç”¨äºå®šä¹‰æ–¹æ³•çš„æ—¶å€™ä½¿ç”¨çš„å‚æ•°ï¼Œåªèƒ½æ˜¯å˜é‡</li>
<li>å½¢å‚åªæœ‰åœ¨æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºæ‰åˆ†é…å†…å­˜å•å…ƒï¼Œæ–¹æ³•è°ƒç”¨ç»“æŸä¹‹åä¾¿ä¼šé‡Šæ”¾æ‰€åˆ†é…çš„å†…å­˜å•å…ƒ</li>
</ul>
<p>å®å‚ï¼šè°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’çš„æ•°æ®å¯ä»¥æ˜¯å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å˜é‡</p>
<h4 id="å¯å˜å‚æ•°">å¯å˜å‚æ•°</h4>
<p>å¯å˜å‚æ•°ç”¨åœ¨å½¢å‚ä¸­å¯ä»¥æ¥æ”¶å¤šä¸ªæ•°æ®ï¼Œåœ¨æ–¹æ³•å†…éƒ¨<strong>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„</strong></p>
<p>æ ¼å¼ï¼šæ•°æ®ç±»å‹â€¦ å‚æ•°åç§°</p>
<p>ä½œç”¨ï¼šä¼ è¾“å‚æ•°éå¸¸çµæ´»ï¼Œå¯ä»¥ä¸ä¼ è¾“å‚æ•°ã€ä¼ è¾“ä¸€ä¸ªå‚æ•°ã€æˆ–è€…ä¼ è¾“ä¸€ä¸ªæ•°ç»„</p>
<p>å¯å˜å‚æ•°çš„æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªå½¢å‚åˆ—è¡¨ä¸­å¯å˜å‚æ•°åªèƒ½æœ‰ä¸€ä¸ª</li>
<li>å¯å˜å‚æ•°å¿…é¡»æ”¾åœ¨å½¢å‚åˆ—è¡¨çš„<strong>æœ€åé¢</strong></li>
</ul>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">	<span class="keyword">sum</span>(); <span class="comment">// å¯ä»¥ä¸ä¼ è¾“å‚æ•°ã€‚</span></span><br><span class="line">	<span class="keyword">sum</span>(<span class="number">10</span>); <span class="comment">// å¯ä»¥ä¼ è¾“ä¸€ä¸ªå‚æ•°ã€‚</span></span><br><span class="line">	<span class="keyword">sum</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>); <span class="comment">// å¯ä»¥ä¼ è¾“å¤šä¸ªå‚æ•°ã€‚</span></span><br><span class="line">	<span class="keyword">sum</span>(<span class="keyword">new</span> <span class="built_in">int</span>[]&#123;<span class="number">10</span>,<span class="number">30</span>,<span class="number">50</span>,<span class="number">70</span>,<span class="number">90</span>&#125;); <span class="comment">// å¯ä»¥ä¼ è¾“ä¸€ä¸ªæ•°ç»„ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="keyword">sum</span>(<span class="built_in">int</span>... nums)&#123;</span><br><span class="line">	<span class="built_in">int</span> <span class="keyword">sum</span> = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="built_in">int</span> i : a) &#123;</span><br><span class="line">		<span class="keyword">sum</span> += i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">sum</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•">æ–¹æ³•</h3>
<h4 id="æ–¹æ³•æ¦‚è¿°">æ–¹æ³•æ¦‚è¿°</h4>
<p>æ–¹æ³•ï¼ˆmethodï¼‰æ˜¯å°†å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ä»£ç å—ç»„ç»‡æˆä¸ºä¸€ä¸ªæ•´ä½“ï¼Œä½¿å…¶å…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„ä»£ç é›†</p>
<p>æ³¨æ„ï¼šæ–¹æ³•å¿…é¡»å…ˆåˆ›å»ºæ‰å¯ä»¥ä½¿ç”¨ï¼Œè¯¥è¿‡ç¨‹æˆä¸ºæ–¹æ³•å®šä¹‰ï¼Œæ–¹æ³•åˆ›å»ºåå¹¶ä¸æ˜¯ç›´æ¥å¯ä»¥è¿è¡Œçš„ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨åæ‰æ‰§è¡Œï¼Œè¯¥è¿‡ç¨‹æˆä¸ºæ–¹æ³•è°ƒç”¨</p>
<p>åœ¨æ–¹æ³•å†…éƒ¨å®šä¹‰çš„å«å±€éƒ¨å˜é‡ï¼Œå±€éƒ¨å˜é‡ä¸èƒ½åŠ  staticï¼ŒåŒ…æ‹¬ protectedã€privateã€public è¿™äº›ä¹Ÿä¸èƒ½åŠ </p>
<p>åŸå› ï¼šå±€éƒ¨å˜é‡æ˜¯ä¿å­˜åœ¨æ ˆä¸­çš„ï¼Œè€Œé™æ€å˜é‡ä¿å­˜äºæ–¹æ³•åŒºï¼ˆJDK8 åœ¨å †ä¸­ï¼‰ï¼Œå±€éƒ¨å˜é‡å‡ºäº†æ–¹æ³•å°±è¢«æ ˆå›æ”¶äº†ï¼Œè€Œé™æ€å˜é‡ä¸ä¼šï¼Œæ‰€ä»¥<strong>åœ¨å±€éƒ¨å˜é‡å‰ä¸èƒ½åŠ  static å…³é”®å­—</strong>ï¼Œé™æ€å˜é‡æ˜¯å®šä¹‰åœ¨ç±»ä¸­ï¼Œåˆå«ç±»å˜é‡</p>
<h4 id="å®šä¹‰è°ƒç”¨">å®šä¹‰è°ƒç”¨</h4>
<p>å®šä¹‰æ ¼å¼ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°) &#123;</span><br><span class="line">	<span class="comment">//æ–¹æ³•ä½“;</span></span><br><span class="line">	<span class="keyword">return</span> æ•°æ® ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨æ ¼å¼ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®ç±»å‹ å˜é‡å <span class="operator">=</span> æ–¹æ³•å (å‚æ•°) <span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•åï¼šè°ƒç”¨æ–¹æ³•æ—¶å€™ä½¿ç”¨çš„æ ‡è¯†</li>
<li>å‚æ•°ï¼šç”±æ•°æ®ç±»å‹å’Œå˜é‡åç»„æˆï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨é€—å·éš”å¼€</li>
<li>æ–¹æ³•ä½“ï¼šå®ŒæˆåŠŸèƒ½çš„ä»£ç å—</li>
<li>returnï¼šå¦‚æœæ–¹æ³•æ“ä½œå®Œæ¯•ï¼Œæœ‰æ•°æ®è¿”å›ï¼Œç”¨äºæŠŠæ•°æ®è¿”å›ç»™è°ƒç”¨è€…</li>
</ul>
<p>å¦‚æœæ–¹æ³•æ“ä½œå®Œæ¯•</p>
<ul>
<li>void ç±»å‹çš„æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼Œè€Œä¸”æ–¹æ³•ä½“ä¸­ä¸€èˆ¬ä¸å†™ return</li>
<li>é void ç±»å‹çš„æ–¹æ³•ï¼Œæ¨èç”¨å˜é‡æ¥æ”¶è°ƒç”¨</li>
</ul>
<p>åŸç†ï¼šæ¯ä¸ªæ–¹æ³•åœ¨è¢«è°ƒç”¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šè¿›å…¥æ ˆå†…å­˜ï¼Œå¹¶ä¸”æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œæ–¹æ³•å†…éƒ¨ä»£ç è°ƒç”¨å®Œæ¯•ä¹‹åï¼Œä¼šä»æ ˆå†…å­˜ä¸­å¼¹æ ˆæ¶ˆå¤±</p>
<h4 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>
<p>æ–¹æ³•ä¸èƒ½åµŒå¥—å®šä¹‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodDemo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">methodOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">methodTwo</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="comment">// è¿™é‡Œä¼šå¼•å‘ç¼–è¯‘é”™è¯¯!!!</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>void è¡¨ç¤ºæ— è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥ returnï¼Œä¹Ÿå¯ä»¥å•ç‹¬çš„ä¹¦å†™ returnï¼Œåé¢ä¸åŠ æ•°æ®</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">methodTwo</span>()</span> &#123;</span><br><span class="line">	<span class="comment">//return 100; ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºæ²¡æœ‰å…·ä½“è¿”å›å€¼ç±»å‹</span></span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">//System.out.println(100); returnè¯­å¥åé¢ä¸èƒ½è·Ÿæ•°æ®æˆ–ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="æ–¹æ³•é‡è½½">æ–¹æ³•é‡è½½</h4>
<h5 id="é‡è½½ä»‹ç»">é‡è½½ä»‹ç»</h5>
<p>æ–¹æ³•é‡è½½æŒ‡åŒä¸€ä¸ªç±»ä¸­å®šä¹‰çš„å¤šä¸ªæ–¹æ³•ä¹‹é—´çš„å…³ç³»ï¼Œæ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„å¤šä¸ªæ–¹æ³•ç›¸äº’æ„æˆé‡è½½ï¼š</p>
<ol>
<li>å¤šä¸ªæ–¹æ³•åœ¨<strong>åŒä¸€ä¸ªç±»</strong>ä¸­</li>
<li>å¤šä¸ªæ–¹æ³•å…·æœ‰<strong>ç›¸åŒçš„æ–¹æ³•å</strong></li>
<li>å¤šä¸ªæ–¹æ³•çš„<strong>å‚æ•°ä¸ç›¸åŒ</strong>ï¼Œç±»å‹ä¸åŒæˆ–è€…æ•°é‡ä¸åŒ</li>
</ol>
<p>é‡è½½ä»…å¯¹åº”æ–¹æ³•çš„å®šä¹‰ï¼Œä¸æ–¹æ³•çš„è°ƒç”¨æ— å…³ï¼Œè°ƒç”¨æ–¹å¼å‚ç…§æ ‡å‡†æ ¼å¼</p>
<p>é‡è½½ä»…é’ˆå¯¹åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•çš„åç§°ä¸å‚æ•°è¿›è¡Œè¯†åˆ«ï¼Œä¸è¿”å›å€¼æ— å…³ï¼Œ<strong>ä¸èƒ½é€šè¿‡è¿”å›å€¼æ¥åˆ¤å®šä¸¤ä¸ªæ–¹æ³•æ˜¯å¦æ„æˆé‡è½½</strong></p>
<p>åŸç†ï¼šJVM â†’ è¿è¡Œæœºåˆ¶ â†’ æ–¹æ³•è°ƒç”¨ â†’ å¤šæ€åŸç†</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodDemo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">void</span> <span class="function"><span class="keyword">fn</span>(<span class="params"><span class="keyword">int</span> a</span>) </span>&#123;</span><br><span class="line">		<span class="comment">//æ–¹æ³•ä½“</span></span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">int</span> <span class="function"><span class="keyword">fn</span>(<span class="params"><span class="keyword">int</span> a</span>) </span>&#123; <span class="comment">/*é”™è¯¯åŸå› ï¼šé‡è½½ä¸è¿”å›å€¼æ— å…³*/</span></span><br><span class="line">		<span class="comment">//æ–¹æ³•ä½“</span></span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">void</span> <span class="function"><span class="keyword">fn</span>(<span class="params"><span class="keyword">int</span> a, <span class="keyword">int</span> b</span>) </span>&#123;<span class="comment">/*æ­£ç¡®æ ¼å¼*/</span></span><br><span class="line">		<span class="comment">//æ–¹æ³•ä½“</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ–¹æ³•é€‰å–">æ–¹æ³•é€‰å–</h5>
<p>é‡è½½çš„æ–¹æ³•åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å³å¯å®Œæˆè¯†åˆ«ï¼Œæ–¹æ³•è°ƒç”¨æ—¶ Java ç¼–è¯‘å™¨ä¼šæ ¹æ®æ‰€ä¼ å…¥å‚æ•°çš„å£°æ˜ç±»å‹ï¼ˆæ³¨æ„ä¸å®é™…ç±»å‹åŒºåˆ†ï¼‰æ¥é€‰å–é‡è½½æ–¹æ³•ã€‚é€‰å–çš„è¿‡ç¨‹å…±åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ä¸€é˜¶æ®µï¼šåœ¨ä¸è€ƒè™‘å¯¹åŸºæœ¬ç±»å‹è‡ªåŠ¨è£…æ‹†ç®± (auto-boxingï¼Œauto-unboxing)ï¼Œä»¥åŠå¯å˜é•¿å‚æ•°çš„æƒ…å†µä¸‹é€‰å–é‡è½½æ–¹æ³•</li>
<li>äºŒé˜¶æ®µï¼šå¦‚æœç¬¬ä¸€é˜¶æ®µä¸­æ²¡æœ‰æ‰¾åˆ°é€‚é…çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨å…è®¸è‡ªåŠ¨è£…æ‹†ç®±ï¼Œä½†ä¸å…è®¸å¯å˜é•¿å‚æ•°çš„æƒ…å†µä¸‹é€‰å–é‡è½½æ–¹æ³•</li>
<li>ä¸‰é˜¶æ®µï¼šå¦‚æœç¬¬äºŒé˜¶æ®µä¸­æ²¡æœ‰æ‰¾åˆ°é€‚é…çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨å…è®¸è‡ªåŠ¨è£…æ‹†ç®±ä»¥åŠå¯å˜é•¿å‚æ•°çš„æƒ…å†µä¸‹é€‰å–é‡è½½æ–¹æ³•</li>
</ul>
<p>å¦‚æœ Java ç¼–è¯‘å™¨åœ¨åŒä¸€ä¸ªé˜¶æ®µä¸­æ‰¾åˆ°äº†å¤šä¸ªé€‚é…çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šé€‰æ‹©ä¸€ä¸ªæœ€ä¸ºè´´åˆ‡çš„ï¼Œè€Œå†³å®šè´´åˆ‡ç¨‹åº¦çš„ä¸€ä¸ªå…³é”®å°±æ˜¯å½¢å¼å‚æ•°ç±»å‹çš„ç»§æ‰¿å…³ç³»ï¼Œ<strong>ä¸€èˆ¬ä¼šé€‰æ‹©å½¢å‚ä¸ºå‚æ•°ç±»å‹çš„å­ç±»çš„æ–¹æ³•ï¼Œå› ä¸ºå­ç±»æ—¶æ›´å…·ä½“çš„å®ç°</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodDemo</span> &#123;</span><br><span class="line">    <span class="built_in">void</span> <span class="title function_">invoke</span>(<span class="params"><span class="built_in">Object</span> obj, <span class="built_in">Object</span>... args</span>) &#123; ... &#125;</span><br><span class="line">    <span class="built_in">void</span> <span class="title function_">invoke</span>(<span class="params"><span class="built_in">String</span> s, <span class="built_in">Object</span> obj, <span class="built_in">Object</span>... args</span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">invoke</span>(<span class="literal">null</span>, <span class="number">1</span>); 	<span class="comment">// è°ƒç”¨ç¬¬äºŒä¸ªinvokeæ–¹æ³•ï¼Œé€‰å–çš„ç¬¬äºŒé˜¶æ®µ</span></span><br><span class="line">    <span class="title function_">invoke</span>(<span class="literal">null</span>, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// è°ƒç”¨ç¬¬äºŒä¸ªinvokeæ–¹æ³•ï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªï¼Œä½†Stringæ˜¯Objectçš„å­ç±»</span></span><br><span class="line">    </span><br><span class="line">    <span class="title function_">invoke</span>(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">1</span>&#125;); <span class="comment">// åªæœ‰æ‰‹åŠ¨ç»•å¼€å¯å˜é•¿å‚æ•°çš„è¯­æ³•ç³–ï¼Œæ‰èƒ½è°ƒç”¨ç¬¬ä¸€ä¸ªinvokeæ–¹æ³•</span></span><br><span class="line">    							   <span class="comment">// å¯å˜å‚æ•°åº•å±‚æ˜¯æ•°ç»„ï¼ŒJVM-&gt;è¿è¡Œæœºåˆ¶-&gt;ä»£ç ä¼˜åŒ–</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ä¸æå€¡å¯å˜é•¿å‚æ•°æ–¹æ³•çš„é‡è½½</p>
<h5 id="ç»§æ‰¿é‡è½½">ç»§æ‰¿é‡è½½</h5>
<p>é™¤äº†åŒä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•ï¼Œé‡è½½ä¹Ÿå¯ä»¥ä½œç”¨äºè¿™ä¸ªç±»æ‰€ç»§æ‰¿è€Œæ¥çš„æ–¹æ³•ã€‚å¦‚æœå­ç±»å®šä¹‰äº†ä¸çˆ¶ç±»ä¸­<strong>éç§æœ‰æ–¹æ³•</strong>åŒåçš„æ–¹æ³•ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªæ–¹æ³•çš„å‚æ•°ç±»å‹ä¸åŒï¼Œé‚£ä¹ˆåœ¨å­ç±»ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åŒæ ·æ„æˆäº†é‡è½½</p>
<ul>
<li>å¦‚æœè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œé‚£ä¹ˆå­ç±»ä¸­çš„æ–¹æ³•éšè—äº†çˆ¶ç±»ä¸­çš„æ–¹æ³•</li>
<li>å¦‚æœè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¸æ˜¯é™æ€çš„ï¼Œä¸”éƒ½ä¸æ˜¯ç§æœ‰çš„ï¼Œé‚£ä¹ˆå­ç±»çš„æ–¹æ³•é‡å†™äº†çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯<strong>å¤šæ€</strong></li>
</ul>
<h4 id="å‚æ•°ä¼ é€’">å‚æ•°ä¼ é€’</h4>
<p>Java çš„å‚æ•°æ˜¯ä»¥<strong>å€¼ä¼ é€’</strong>çš„å½¢å¼ä¼ å…¥æ–¹æ³•ä¸­</p>
<p>å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«åœ¨äºä¼ é€’åä¼šä¸ä¼šå½±å“å®å‚çš„å€¼ï¼š<strong>å€¼ä¼ é€’ä¼šåˆ›å»ºå‰¯æœ¬</strong>ï¼Œå¼•ç”¨ä¼ é€’ä¸ä¼šåˆ›å»ºå‰¯æœ¬</p>
<ul>
<li>
<p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šå½¢å¼å‚æ•°çš„æ”¹å˜ï¼Œä¸å½±å“å®é™…å‚æ•°</p>
<p>æ¯ä¸ªæ–¹æ³•åœ¨æ ˆå†…å­˜ä¸­ï¼Œéƒ½ä¼šæœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œæ–¹æ³•è¿è¡Œç»“æŸåå°±ä¼šå¼¹æ ˆæ¶ˆå¤±</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArgsDemo01</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">		int <span class="built_in">number</span> = <span class="number">100</span>;</span><br><span class="line">		<span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;è°ƒç”¨changeæ–¹æ³•å‰ï¼š&quot;</span> + <span class="built_in">number</span>);<span class="comment">//100</span></span><br><span class="line">		<span class="title function_">change</span>(<span class="built_in">number</span>);</span><br><span class="line">		<span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;è°ƒç”¨changeæ–¹æ³•åï¼š&quot;</span> + <span class="built_in">number</span>);<span class="comment">//100</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">change</span>(<span class="params">int <span class="built_in">number</span></span>) &#123;</span><br><span class="line">		<span class="built_in">number</span> = <span class="number">200</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¼•ç”¨ç±»å‹ï¼šå½¢å¼å‚æ•°çš„æ”¹å˜ï¼Œå½±å“å®é™…å‚æ•°çš„å€¼</p>
<p><strong>å¼•ç”¨æ•°æ®ç±»å‹çš„ä¼ å‚ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†å¯¹è±¡çš„åœ°å€ä»¥å€¼çš„æ–¹å¼ä¼ é€’åˆ°å½¢å‚ä¸­</strong>ï¼Œå†…å­˜ä¸­ä¼šé€ æˆä¸¤ä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå†…å­˜çš„æ•ˆæœï¼Œæ‰€ä»¥å³ä½¿æ–¹æ³•å¼¹æ ˆï¼Œå †å†…å­˜ä¸­çš„æ•°æ®ä¹Ÿå·²ç»æ˜¯æ”¹å˜åçš„ç»“æœ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PassByValueExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Dog</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="title function_">func</span>(dog);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(dog.<span class="title function_">getName</span>());	<span class="comment">// B</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">func</span>(<span class="params">Dog dog</span>) &#123;</span><br><span class="line">        dog.<span class="title function_">setName</span>(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="title class_">String</span> name;<span class="comment">//.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="æšä¸¾">æšä¸¾</h3>
<p>æšä¸¾æ˜¯ Java ä¸­çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œä¸ºäº†åšä¿¡æ¯çš„æ ‡å¿—å’Œä¿¡æ¯çš„åˆ†ç±»</p>
<p>å®šä¹‰æšä¸¾çš„æ ¼å¼ï¼š</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">enum</span> æšä¸¾åç§°&#123;</span><br><span class="line">	ç¬¬ä¸€è¡Œéƒ½æ˜¯ç½—åˆ—æšä¸¾å®ä¾‹çš„åç§°ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æšä¸¾çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æšä¸¾ç±»æ˜¯ç”¨ final ä¿®é¥°çš„ï¼Œæšä¸¾ç±»ä¸èƒ½è¢«ç»§æ‰¿</li>
<li>æšä¸¾ç±»é»˜è®¤ç»§æ‰¿äº† java.lang.Enum æšä¸¾ç±»</li>
<li>æšä¸¾ç±»çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯å¸¸é‡ï¼Œå¿…é¡»æ˜¯ç½—åˆ—æšä¸¾ç±»çš„å®ä¾‹åç§°</li>
<li>æšä¸¾ç±»ç›¸å½“äºæ˜¯å¤šä¾‹è®¾è®¡æ¨¡å¼</li>
<li>æ¯ä¸ªæšä¸¾é¡¹éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œæ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡</li>
</ul>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>String name()</td>
<td>è·å–æšä¸¾é¡¹çš„åç§°</td>
</tr>
<tr>
<td>int ordinal()</td>
<td>è¿”å›æšä¸¾é¡¹åœ¨æšä¸¾ç±»ä¸­çš„ç´¢å¼•å€¼</td>
</tr>
<tr>
<td>int compareTo(E  o)</td>
<td>æ¯”è¾ƒä¸¤ä¸ªæšä¸¾é¡¹ï¼Œè¿”å›çš„æ˜¯ç´¢å¼•å€¼çš„å·®å€¼</td>
</tr>
<tr>
<td>String toString()</td>
<td>è¿”å›æšä¸¾å¸¸é‡çš„åç§°</td>
</tr>
<tr>
<td>static <T> T  valueOf(Class<T> type,String  name)</td>
<td>è·å–æŒ‡å®šæšä¸¾ç±»ä¸­çš„æŒ‡å®šåç§°çš„æšä¸¾å€¼</td>
</tr>
<tr>
<td>values()</td>
<td>è·å¾—æ‰€æœ‰çš„æšä¸¾é¡¹</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>æºç åˆ†æï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Season</span> &#123;</span><br><span class="line">    SPRING , SUMMER , AUTUMN , WINTER;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æšä¸¾ç±»çš„ç¼–è¯‘ä»¥åæºä»£ç ï¼š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Season</span> <span class="keyword">extends</span> <span class="title class_">java</span>.lang.Enum&lt;Season&gt; &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Season</span> <span class="variable">SPRING</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Season</span>();</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Season</span> <span class="variable">SUMMER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Season</span>();</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Season</span> <span class="variable">AUTUMN</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Season</span>();</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Season</span> <span class="variable">WINTER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Season</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Season[] values();</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Season <span class="title function_">valueOf</span><span class="params">(java.lang.String)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>API ä½¿ç”¨</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EnumDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// è·å–ç´¢å¼•</span></span><br><span class="line">        Season s = Season.SPRING;</span><br><span class="line">        System.<span class="keyword">out</span>.println(s);	<span class="comment">//SPRING</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(s.ordinal()); <span class="comment">// 0ï¼Œè¯¥å€¼ä»£è¡¨ç´¢å¼•ï¼Œsummer å°±æ˜¯ 1</span></span><br><span class="line">        s.s.doSomething();</span><br><span class="line">        <span class="comment">// è·å–å…¨éƒ¨æšä¸¾</span></span><br><span class="line">        Season[] ss = Season.values();</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; ss.length; i++)&#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(ss[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">int</span> result = Season.SPRING.compareTo(Season.WINTER);</span><br><span class="line">        System.<span class="keyword">out</span>.println(result);<span class="comment">//-3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">enum</span> Season &#123;</span><br><span class="line">    SPRING , SUMMER , AUTUMN , WINTER;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span>()</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;hello &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Debug">Debug</h3>
<p>Debug æ˜¯ä¾›ç¨‹åºå‘˜ä½¿ç”¨çš„ç¨‹åºè°ƒè¯•å·¥å…·ï¼Œå®ƒå¯ä»¥ç”¨äºæŸ¥çœ‹ç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼Œä¹Ÿå¯ä»¥ç”¨äºè¿½è¸ªç¨‹åºæ‰§è¡Œè¿‡ç¨‹æ¥è°ƒè¯•ç¨‹åºã€‚</p>
<p>åŠ æ–­ç‚¹ â†’ Debug è¿è¡Œ â†’ å•æ­¥è¿è¡Œ â†’ çœ‹ Debugger çª—å£ â†’ çœ‹ Console çª—å£</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Debug%E6%8C%89%E9%94%AE%E8%AF%B4%E6%98%8E.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Debug%E6%9D%A1%E4%BB%B6%E6%96%AD%E7%82%B9.png" alt="Debugæ¡ä»¶æ–­ç‚¹"></p>
<h2 id="å¯¹è±¡">å¯¹è±¡</h2>
<h3 id="æ¦‚è¿°">æ¦‚è¿°</h3>
<p>Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„é«˜çº§ç¼–ç¨‹è¯­è¨€</p>
<p>é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾ï¼š<strong>å°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€</strong></p>
<p>ä¸¤ä¸ªæ¦‚å¿µï¼šç±»å’Œå¯¹è±¡</p>
<ul>
<li>ç±»ï¼šç›¸åŒäº‹ç‰©å…±åŒç‰¹å¾çš„æè¿°ï¼Œç±»åªæ˜¯å­¦æœ¯ä¸Šçš„ä¸€ä¸ªæ¦‚å¿µå¹¶éçœŸå®å­˜åœ¨çš„ï¼Œåªèƒ½æè¿°ä¸€ç±»äº‹ç‰©</li>
<li>å¯¹è±¡ï¼šæ˜¯çœŸå®å­˜åœ¨çš„å®ä¾‹ï¼Œ å®ä¾‹ == å¯¹è±¡ï¼Œ<strong>å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹åŒ–</strong></li>
<li>ç»“è®ºï¼šæœ‰äº†ç±»å’Œå¯¹è±¡å°±å¯ä»¥æè¿°ä¸‡åƒä¸–ç•Œæ‰€æœ‰çš„äº‹ç‰©ï¼Œå¿…é¡»å…ˆæœ‰ç±»æ‰èƒ½æœ‰å¯¹è±¡</li>
</ul>
<h3 id="ç±»">ç±»</h3>
<h4 id="å®šä¹‰">å®šä¹‰</h4>
<p>å®šä¹‰æ ¼å¼</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="class"><span class="keyword">class</span> ç±»å</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>ç±»åçš„é¦–å­—æ¯å»ºè®®å¤§å†™ï¼Œæ»¡è¶³é©¼å³°æ¨¡å¼ï¼Œæ¯”å¦‚ StudentNameCode</li>
<li>ä¸€ä¸ª Java ä»£ç ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªç±»ï¼ŒæŒ‰ç…§è§„èŒƒä¸€ä¸ª Java æ–‡ä»¶ä¸€ä¸ªç±»</li>
<li>ä¸€ä¸ª Java ä»£ç æ–‡ä»¶ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç±»æ˜¯ public ä¿®é¥°ï¼Œ<strong>public ä¿®é¥°çš„ç±»åå¿…é¡»æˆä¸ºå½“å‰ Java ä»£ç çš„æ–‡ä»¶åç§°</strong></li>
</ol>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç±»ä¸­çš„æˆåˆ†:æœ‰ä¸”ä»…æœ‰äº”å¤§æˆåˆ†</span><br><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">class</span> ç±»å&#123;</span><br><span class="line">		<span class="number">1.</span>æˆå‘˜å˜é‡(Field):  	æè¿°ç±»æˆ–è€…å¯¹è±¡çš„å±æ€§ä¿¡æ¯çš„ã€‚</span><br><span class="line">        <span class="number">2.</span>æˆå‘˜æ–¹æ³•(Method):		æè¿°ç±»æˆ–è€…å¯¹è±¡çš„è¡Œä¸ºä¿¡æ¯çš„ã€‚</span><br><span class="line">		<span class="number">3.</span>æ„é€ å™¨(Constructor):	 åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡è¿”å›ã€‚</span><br><span class="line">		<span class="number">4.</span>ä»£ç å—</span><br><span class="line">		<span class="number">5.</span>å†…éƒ¨ç±»</span><br><span class="line">	  &#125;</span><br><span class="line">ç±»ä¸­æœ‰ä¸”ä»…æœ‰è¿™äº”ç§æˆåˆ†ï¼Œå¦åˆ™ä»£ç æŠ¥é”™ï¼</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">ClassDemo</span> &#123;</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="number">1</span>);<span class="comment">//æŠ¥é”™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ„é€ å™¨">æ„é€ å™¨</h4>
<p>æ„é€ å™¨æ ¼å¼ï¼š</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">ä¿®é¥°ç¬¦ ç±»å(å½¢å‚åˆ—è¡¨)</span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable"></span></span><br><span class="line"><span class="template-variable">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä½œç”¨ï¼šåˆå§‹åŒ–ç±»çš„ä¸€ä¸ªå¯¹è±¡è¿”å›</p>
<p>åˆ†ç±»ï¼šæ— å‚æ•°æ„é€ å™¨ï¼Œæœ‰å‚æ•°æ„é€ å™¨</p>
<p>æ³¨æ„ï¼š<strong>ä¸€ä¸ªç±»é»˜è®¤è‡ªå¸¦ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨</strong>ï¼Œå†™äº†æœ‰å‚æ•°æ„é€ å™¨é»˜è®¤çš„æ— å‚æ•°æ„é€ å™¨å°±æ¶ˆå¤±ï¼Œè¿˜éœ€è¦ç”¨æ— å‚æ•°æ„é€ å™¨å°±è¦é‡æ–°å†™</p>
<p>æ„é€ å™¨åˆå§‹åŒ–å¯¹è±¡çš„æ ¼å¼ï¼šç±»å å¯¹è±¡åç§° = new æ„é€ å™¨</p>
<ul>
<li>æ— å‚æ•°æ„é€ å™¨çš„ä½œç”¨ï¼šåˆå§‹åŒ–ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼ˆä½¿ç”¨å¯¹è±¡çš„é»˜è®¤å€¼åˆå§‹åŒ–ï¼‰è¿”å›</li>
<li>æœ‰å‚æ•°æ„é€ å™¨çš„ä½œç”¨ï¼šåˆå§‹åŒ–ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼ˆå¯ä»¥åœ¨åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™ä¸ºå¯¹è±¡èµ‹å€¼ï¼‰è¿”å›</li>
</ul>
<h3 id="åŒ…">åŒ…</h3>
<p>åŒ…ï¼šåˆ†é—¨åˆ«ç±»çš„ç®¡ç†å„ç§ä¸åŒçš„æŠ€æœ¯ï¼Œä¾¿äºç®¡ç†æŠ€æœ¯ï¼Œæ‰©å±•æŠ€æœ¯ï¼Œé˜…è¯»æŠ€æœ¯</p>
<p>å®šä¹‰åŒ…çš„æ ¼å¼ï¼š<code>package åŒ…å</code>ï¼Œå¿…é¡»æ”¾åœ¨ç±»åçš„æœ€ä¸Šé¢</p>
<p>å¯¼åŒ…æ ¼å¼ï¼š<code>import åŒ…å.ç±»å</code></p>
<p>ç›¸åŒåŒ…ä¸‹çš„ç±»å¯ä»¥ç›´æ¥è®¿é—®ï¼›ä¸åŒåŒ…ä¸‹çš„ç±»å¿…é¡»å¯¼åŒ…æ‰å¯ä»¥ä½¿ç”¨</p>
<h3 id="å°è£…">å°è£…</h3>
<p>å°è£…çš„å“²å­¦æ€ç»´ï¼šåˆç†éšè—ï¼Œåˆç†æš´éœ²</p>
<p>å°è£…æœ€åˆçš„ç›®çš„ï¼šæé«˜ä»£ç çš„å®‰å…¨æ€§å’Œå¤ç”¨æ€§ï¼Œç»„ä»¶åŒ–</p>
<p>å°è£…çš„æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æˆå‘˜å˜é‡åº”è¯¥ç§æœ‰ï¼Œç”¨ private ä¿®é¥°ï¼Œåªèƒ½åœ¨æœ¬ç±»ä¸­ç›´æ¥è®¿é—®</strong></li>
<li><strong>æä¾›æˆå¥—çš„ getter å’Œ setter æ–¹æ³•æš´éœ²æˆå‘˜å˜é‡çš„å–å€¼å’Œèµ‹å€¼</strong></li>
</ol>
<p>ä½¿ç”¨ private ä¿®é¥°æˆå‘˜å˜é‡çš„åŸå› ï¼šå®ç°æ•°æ®å°è£…ï¼Œä¸æƒ³è®©åˆ«äººä½¿ç”¨ä¿®æ”¹ä½ çš„æ•°æ®ï¼Œæ¯”è¾ƒå®‰å…¨</p>
<h3 id="this">this</h3>
<p>this å…³é”®å­—çš„ä½œç”¨ï¼š</p>
<ul>
<li>this å…³é”®å­—ä»£è¡¨äº†å½“å‰å¯¹è±¡çš„å¼•ç”¨</li>
<li>this å‡ºç°åœ¨æ–¹æ³•ä¸­ï¼š<strong>å“ªä¸ªå¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³• this å°±ä»£è¡¨è°</strong></li>
<li>this å¯ä»¥å‡ºç°åœ¨æ„é€ å™¨ä¸­ï¼šä»£è¡¨æ„é€ å™¨æ­£åœ¨åˆå§‹åŒ–çš„é‚£ä¸ªå¯¹è±¡</li>
<li>this å¯ä»¥åŒºåˆ†å˜é‡æ˜¯è®¿é—®çš„æˆå‘˜å˜é‡è¿˜æ˜¯å±€éƒ¨å˜é‡</li>
</ul>
<h3 id="static">static</h3>
<h4 id="åŸºæœ¬ä»‹ç»">åŸºæœ¬ä»‹ç»</h4>
<p>Java æ˜¯é€šè¿‡æˆå‘˜å˜é‡æ˜¯å¦æœ‰ static ä¿®é¥°æ¥åŒºåˆ†æ˜¯ç±»çš„è¿˜æ˜¯å±äºå¯¹è±¡çš„</p>
<p>æŒ‰ç…§æœ‰æ—  static ä¿®é¥°ï¼Œæˆå‘˜å˜é‡å’Œæ–¹æ³•å¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>æˆå‘˜å˜é‡ï¼š
<ul>
<li>é™æ€æˆå‘˜å˜é‡ï¼ˆç±»å˜é‡ï¼‰ï¼šstatic ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå±äºç±»æœ¬èº«ï¼Œ<strong>ä¸ç±»ä¸€èµ·åŠ è½½ä¸€æ¬¡ï¼Œåªæœ‰ä¸€ä¸ª</strong>ï¼Œç›´æ¥ç”¨ç±»åè®¿é—®å³å¯</li>
<li>å®ä¾‹æˆå‘˜å˜é‡ï¼šæ—  static ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå±äºç±»çš„æ¯ä¸ªå¯¹è±¡çš„ï¼Œ<strong>ä¸ç±»çš„å¯¹è±¡ä¸€èµ·åŠ è½½</strong>ï¼Œå¯¹è±¡æœ‰å¤šå°‘ä¸ªï¼Œå®ä¾‹æˆå‘˜å˜é‡å°±åŠ è½½å¤šå°‘ä¸ªï¼Œå¿…é¡»ç”¨ç±»çš„å¯¹è±¡æ¥è®¿é—®</li>
</ul>
</li>
<li>æˆå‘˜æ–¹æ³•ï¼š
<ul>
<li>é™æ€æ–¹æ³•ï¼šæœ‰ static ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ç§°ä¸ºé™æ€æ–¹æ³•ä¹Ÿå«ç±»æ–¹æ³•ï¼Œå±äºç±»æœ¬èº«çš„ï¼Œç›´æ¥ç”¨ç±»åè®¿é—®å³å¯</li>
<li>å®ä¾‹æ–¹æ³•ï¼šæ—  static ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ç§°ä¸ºå®ä¾‹æ–¹æ³•ï¼Œå±äºç±»çš„æ¯ä¸ªå¯¹è±¡çš„ï¼Œå¿…é¡»ç”¨ç±»çš„å¯¹è±¡æ¥è®¿é—®</li>
</ul>
</li>
</ul>
<h4 id="static-ç”¨æ³•">static ç”¨æ³•</h4>
<p>æˆå‘˜å˜é‡çš„è®¿é—®è¯­æ³•ï¼š</p>
<ul>
<li>é™æ€æˆå‘˜å˜é‡ï¼šåªæœ‰ä¸€ä»½å¯ä»¥è¢«ç±»å’Œç±»çš„å¯¹è±¡<strong>å…±äº«è®¿é—®</strong>
<ul>
<li>ç±»å.é™æ€æˆå‘˜å˜é‡ï¼ˆåŒä¸€ä¸ªç±»ä¸­è®¿é—®é™æ€æˆå‘˜å˜é‡å¯ä»¥çœç•¥ç±»åä¸å†™ï¼‰</li>
<li>å¯¹è±¡.é™æ€æˆå‘˜å˜é‡ï¼ˆä¸æ¨èï¼‰</li>
</ul>
</li>
<li>å®ä¾‹æˆå‘˜å˜é‡ï¼š
<ul>
<li>å¯¹è±¡.å®ä¾‹æˆå‘˜å˜é‡ï¼ˆå…ˆåˆ›å»ºå¯¹è±¡ï¼‰</li>
</ul>
</li>
</ul>
<p>æˆå‘˜æ–¹æ³•çš„è®¿é—®è¯­æ³•ï¼š</p>
<ul>
<li>
<p>é™æ€æ–¹æ³•ï¼šæœ‰ static ä¿®é¥°ï¼Œå±äºç±»</p>
<ul>
<li>ç±»å.é™æ€æ–¹æ³•ï¼ˆåŒä¸€ä¸ªç±»ä¸­è®¿é—®é™æ€æˆå‘˜å¯ä»¥çœç•¥ç±»åä¸å†™ï¼‰</li>
<li>å¯¹è±¡.é™æ€æ–¹æ³•ï¼ˆä¸æ¨èï¼Œå‚è€ƒ JVM â†’ è¿è¡Œæœºåˆ¶ â†’ æ–¹æ³•è°ƒç”¨ï¼‰</li>
</ul>
</li>
<li>
<p>å®ä¾‹æ–¹æ³•ï¼šæ—  static ä¿®é¥°ï¼Œå±äºå¯¹è±¡</p>
<ul>
<li>å¯¹è±¡.å®ä¾‹æ–¹æ³•</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">// 1.é™æ€æ–¹æ³•ï¼šæœ‰staticä¿®é¥°ï¼Œå±äºç±»ï¼Œç›´æ¥ç”¨ç±»åè®¿é—®å³å¯ï¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">inAddr</span>(<span class="params"></span>)&#123; &#125;</span><br><span class="line">    <span class="comment">// 2.å®ä¾‹æ–¹æ³•ï¼šæ— staticä¿®é¥°ï¼Œå±äºå¯¹è±¡ï¼Œå¿…é¡»ç”¨å¯¹è±¡è®¿é—®ï¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">eat</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="comment">// a.ç±»å.é™æ€æ–¹æ³•</span></span><br><span class="line">        <span class="title class_">Student</span>.<span class="title function_">inAddr</span>();</span><br><span class="line">        <span class="title function_">inAddr</span>();</span><br><span class="line">        <span class="comment">// b.å¯¹è±¡.å®ä¾‹æ–¹æ³•</span></span><br><span class="line">        <span class="comment">// Student.eat(); // æŠ¥é”™äº†ï¼</span></span><br><span class="line">        <span class="title class_">Student</span> sea = <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        sea.<span class="title function_">eat</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="ä¸¤ä¸ªé—®é¢˜">ä¸¤ä¸ªé—®é¢˜</h4>
<p>å†…å­˜é—®é¢˜ï¼š</p>
<ul>
<li>æ ˆå†…å­˜å­˜æ”¾ main æ–¹æ³•å’Œåœ°å€</li>
<li>å †å†…å­˜å­˜æ”¾å¯¹è±¡å’Œå˜é‡</li>
<li>æ–¹æ³•åŒºå­˜æ”¾ class å’Œé™æ€å˜é‡ï¼ˆjdk8 ä»¥åç§»å…¥å †ï¼‰</li>
</ul>
<p>è®¿é—®é—®é¢˜ï¼š</p>
<ul>
<li>å®ä¾‹æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®å®ä¾‹æˆå‘˜å˜é‡ï¼Ÿå¯ä»¥ï¼Œå› ä¸ºå®ƒä»¬éƒ½å±äºå¯¹è±¡</li>
<li>å®ä¾‹æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®é™æ€æˆå‘˜å˜é‡ï¼Ÿå¯ä»¥ï¼Œé™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«å…±äº«è®¿é—®</li>
<li>å®ä¾‹æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®å®ä¾‹æ–¹æ³•? å¯ä»¥ï¼Œå®ä¾‹æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•éƒ½å±äºå¯¹è±¡</li>
<li>å®ä¾‹æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®é™æ€æ–¹æ³•ï¼Ÿå¯ä»¥ï¼Œé™æ€æ–¹æ³•å¯ä»¥è¢«å…±äº«è®¿é—®</li>
<li>é™æ€æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®å®ä¾‹å˜é‡ï¼Ÿ ä¸å¯ä»¥ï¼Œå®ä¾‹å˜é‡<strong>å¿…é¡»ç”¨å¯¹è±¡è®¿é—®</strong>ï¼ï¼</li>
<li>é™æ€æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®é™æ€å˜é‡ï¼Ÿ å¯ä»¥ï¼Œé™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«å…±äº«è®¿é—®ã€‚</li>
<li>é™æ€æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®å®ä¾‹æ–¹æ³•? ä¸å¯ä»¥ï¼Œå®ä¾‹æ–¹æ³•å¿…é¡»ç”¨å¯¹è±¡è®¿é—®ï¼ï¼</li>
<li>é™æ€æ–¹æ³•æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®é™æ€æ–¹æ³•ï¼Ÿå¯ä»¥ï¼Œé™æ€æ–¹æ³•å¯ä»¥è¢«å…±äº«è®¿é—®ï¼ï¼</li>
</ul>
<h3 id="ç»§æ‰¿">ç»§æ‰¿</h3>
<h4 id="åŸºæœ¬ä»‹ç»-2">åŸºæœ¬ä»‹ç»</h4>
<p>ç»§æ‰¿æ˜¯ Java ä¸­ä¸€èˆ¬åˆ°ç‰¹æ®Šçš„å…³ç³»ï¼Œæ˜¯ä¸€ç§å­ç±»åˆ°çˆ¶ç±»çš„å…³ç³»</p>
<ul>
<li>è¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºï¼šçˆ¶ç±»/è¶…ç±»</li>
<li>ç»§æ‰¿çˆ¶ç±»çš„ç±»ç§°ä¸ºï¼šå­ç±»</li>
</ul>
<p>ç»§æ‰¿çš„ä½œç”¨ï¼š</p>
<ul>
<li><strong>æé«˜ä»£ç çš„å¤ç”¨</strong>ï¼Œç›¸åŒä»£ç å¯ä»¥å®šä¹‰åœ¨çˆ¶ç±»ä¸­</li>
<li>å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»è¿™äº›ä»£ç ï¼ˆç›¸åŒä»£ç é‡å¤åˆ©ç”¨ï¼‰</li>
<li>å­ç±»å¾—åˆ°çˆ¶ç±»çš„å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰å’Œè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰ï¼Œè¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„åŠŸèƒ½ï¼Œå­ç±»æ›´å¼ºå¤§</li>
</ul>
<p>ç»§æ‰¿çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å­ç±»çš„å…¨éƒ¨æ„é€ å™¨é»˜è®¤å…ˆè®¿é—®çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å™¨ï¼Œå†æ‰§è¡Œè‡ªå·±çš„æ„é€ å™¨</li>
<li><strong>å•ç»§æ‰¿</strong>ï¼šä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç›´æ¥çˆ¶ç±»</li>
<li>å¤šå±‚ç»§æ‰¿ï¼šä¸€ä¸ªç±»å¯ä»¥é—´æ¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼ˆå®¶è°±ï¼‰</li>
<li>ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªå­ç±»</li>
<li>ä¸€ä¸ªç±»è¦ä¹ˆé»˜è®¤ç»§æ‰¿äº† Object ç±»ï¼Œè¦ä¹ˆé—´æ¥ç»§æ‰¿äº† Object ç±»ï¼Œ<strong>Object ç±»æ˜¯ Java ä¸­çš„ç¥–å®—ç±»</strong></li>
</ol>
<p>ç»§æ‰¿çš„æ ¼å¼ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å­ç±» <span class="keyword">extends</span> çˆ¶ç±»&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„ä¸œè¥¿ï¼š</p>
<ul>
<li>å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å™¨ï¼Œå­ç±»æœ‰è‡ªå·±çš„æ„é€ å™¨</li>
<li>å­ç±»æ˜¯ä¸èƒ½å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„ç§æœ‰æˆå‘˜çš„ï¼Œå¯ä»¥åå°„æš´åŠ›å»è®¿é—®ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç§æœ‰æˆå‘˜</li>
<li>å­ç±»æ˜¯ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„é™æ€æˆå‘˜ï¼Œçˆ¶ç±»é™æ€æˆå‘˜åªæœ‰ä¸€ä»½å¯ä»¥è¢«å­ç±»å…±äº«è®¿é—®ï¼Œ<strong>å…±äº«å¹¶éç»§æ‰¿</strong></li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Cat</span> c = <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        <span class="comment">// c.run();</span></span><br><span class="line">        <span class="title class_">Cat</span>.<span class="title function_">test</span>();</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="title class_">Cat</span>.<span class="property">schoolName</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">String</span> schoolName =<span class="string">&quot;seazean&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">void</span> <span class="title function_">run</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å˜é‡è®¿é—®">å˜é‡è®¿é—®</h4>
<p>ç»§æ‰¿åæˆå‘˜å˜é‡çš„è®¿é—®ç‰¹ç‚¹ï¼š<strong>å°±è¿‘åŸåˆ™</strong>ï¼Œå­ç±»æœ‰æ‰¾å­ç±»ï¼Œå­ç±»æ²¡æœ‰æ‰¾çˆ¶ç±»ï¼Œçˆ¶ç±»æ²¡æœ‰å°±æŠ¥é”™</p>
<p>å¦‚æœè¦ç”³æ˜è®¿é—®çˆ¶ç±»çš„æˆå‘˜å˜é‡å¯ä»¥ä½¿ç”¨ï¼šsuper.çˆ¶ç±»æˆå‘˜å˜é‡ï¼ŒsuperæŒ‡çˆ¶ç±»å¼•ç”¨</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendsDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void wmain(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        Wolf w = <span class="keyword">new</span> <span class="type">Wolf</span>();w</span><br><span class="line">        w.showName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span> <span class="keyword"><span class="keyword">extends</span> <span class="type">Animal</span></span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> name = <span class="string">&quot;å­ç±»ç‹¼&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> void showName()&#123;</span><br><span class="line">        <span class="keyword">String</span> name = <span class="string">&quot;å±€éƒ¨åç§°&quot;</span>;</span><br><span class="line">        System.out.println(name); <span class="comment">// å±€éƒ¨name</span></span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name); <span class="comment">// å­ç±»å¯¹è±¡çš„name</span></span><br><span class="line">        System.out.println(<span class="keyword">super</span>.name); <span class="comment">// çˆ¶ç±»çš„</span></span><br><span class="line">        System.out.println(name1); <span class="comment">// çˆ¶ç±»çš„</span></span><br><span class="line">        <span class="comment">//System.out.println(name2); // æŠ¥é”™ã€‚å­ç±»çˆ¶ç±»éƒ½æ²¡æœ‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> name = <span class="string">&quot;çˆ¶ç±»åŠ¨ç‰©åç§°&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> name1 = <span class="string">&quot;çˆ¶ç±»&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹æ³•è®¿é—®">æ–¹æ³•è®¿é—®</h4>
<p>å­ç±»ç»§æ‰¿äº†çˆ¶ç±»å°±å¾—åˆ°äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œ<strong>å¯ä»¥ç›´æ¥è°ƒç”¨</strong>ï¼Œå—æƒé™ä¿®é¥°ç¬¦çš„é™åˆ¶ï¼Œä¹Ÿå¯ä»¥é‡å†™æ–¹æ³•</p>
<p>æ–¹æ³•é‡å†™ï¼šå­ç±»é‡å†™ä¸€ä¸ªä¸çˆ¶ç±»ç”³æ˜ä¸€æ ·çš„æ–¹æ³•æ¥<strong>è¦†ç›–</strong>çˆ¶ç±»çš„è¯¥æ–¹æ³•</p>
<p>æ–¹æ³•é‡å†™çš„æ ¡éªŒæ³¨è§£ï¼š@Override</p>
<ul>
<li>æ–¹æ³•åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œé‚£å°±å¿…é¡»æ˜¯æˆåŠŸé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>@Override ä¼˜åŠ¿ï¼šå¯è¯»æ€§å¥½ï¼Œå®‰å…¨ï¼Œä¼˜é›…</li>
</ul>
<p><strong>å­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½</strong>ï¼Œé‡å†™æœ‰ä»¥ä¸‹ä¸‰ä¸ªé™åˆ¶ï¼š</p>
<ul>
<li>å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»å¤§äºç­‰äºçˆ¶ç±»æ–¹æ³•</li>
<li>å­ç±»æ–¹æ³•çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»æ–¹æ³•è¿”å›ç±»å‹æˆ–ä¸ºå…¶å­ç±»å‹</li>
<li>å­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»æŠ›å‡ºå¼‚å¸¸ç±»å‹æˆ–ä¸ºå…¶å­ç±»å‹</li>
</ul>
<p>ç»§æ‰¿ä¸­çš„éšè—é—®é¢˜ï¼š</p>
<ul>
<li>å­ç±»å’Œçˆ¶ç±»æ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œé‚£ä¹ˆå­ç±»ä¸­çš„æ–¹æ³•ä¼šéšè—çˆ¶ç±»ä¸­çš„æ–¹æ³•</li>
<li>åœ¨å­ç±»ä¸­å¯ä»¥å®šä¹‰å’Œçˆ¶ç±»æˆå‘˜å˜é‡åŒåçš„æˆå‘˜å˜é‡ï¼Œæ­¤æ—¶å­ç±»çš„æˆå‘˜å˜é‡éšè—äº†çˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼Œåœ¨åˆ›å»ºå¯¹è±¡ä¸ºå¯¹è±¡åˆ†é…å†…å­˜çš„è¿‡ç¨‹ä¸­ï¼Œ<strong>éšè—å˜é‡ä¾ç„¶ä¼šè¢«åˆ†é…å†…å­˜</strong></li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Wolf</span> w = <span class="keyword">new</span> <span class="title class_">Wolf</span>();</span><br><span class="line">        w.<span class="title function_">run</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Wolf</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">run</span>(<span class="params"></span>)&#123;&#125;<span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">run</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h4>
<ul>
<li>
<p>ä¸ºä»€ä¹ˆå­ç±»æ„é€ å™¨ä¼šå…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Ÿ</p>
<ol>
<li>å­ç±»çš„æ„é€ å™¨çš„ç¬¬ä¸€è¡Œé»˜è®¤ super() è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å™¨ï¼Œå†™ä¸å†™éƒ½å­˜åœ¨</li>
<li>å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œå­ç±»å°±å¾—åˆ°äº†çˆ¶ç±»çš„å±æ€§å’Œè¡Œä¸ºã€‚è°ƒç”¨å­ç±»æ„é€ å™¨åˆå§‹åŒ–å­ç±»å¯¹è±¡æ•°æ®æ—¶ï¼Œå¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å™¨åˆå§‹åŒ–ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§å’Œè¡Œä¸º</li>
<li>å‚è€ƒ JVM â†’ ç±»åŠ è½½ â†’ å¯¹è±¡åˆ›å»º</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    public <span class="type">Animal</span>() &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">&quot;==çˆ¶ç±»Animalçš„æ— å‚æ•°æ„é€ å™¨==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tiger</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    public <span class="type">Tiger</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>(); <span class="comment">// é»˜è®¤å­˜åœ¨çš„ï¼Œæ ¹æ®å‚æ•°å»åŒ¹é…è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ã€‚</span></span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">&quot;==å­ç±»Tigerçš„æ— å‚æ•°æ„é€ å™¨==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="type">Tiger</span>(<span class="type">String</span> name) &#123;</span><br><span class="line">        <span class="comment">//super();  é»˜è®¤å­˜åœ¨çš„ï¼Œæ ¹æ®å‚æ•°å»åŒ¹é…è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ã€‚</span></span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">&quot;==å­ç±»Tigerçš„æœ‰å‚æ•°æ„é€ å™¨==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆ Java æ˜¯å•ç»§æ‰¿çš„ï¼Ÿ</strong></p>
<p>ç­”ï¼šåè¯æ³•ï¼Œå‡å¦‚ Java å¯ä»¥å¤šç»§æ‰¿ï¼Œè¯·çœ‹å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">A</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span>()</span>&#123;</span><br><span class="line">		System.<span class="keyword">out</span>.println(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">B</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span>()</span>&#123;</span><br><span class="line">		System.<span class="keyword">out</span>.println(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">C</span> <span class="title">extends</span> <span class="title">A</span> , <span class="title">B</span> &#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</span><br><span class="line">		C c = <span class="keyword">new</span> C();</span><br><span class="line">        c.test(); </span><br><span class="line">        <span class="comment">// å‡ºç°äº†ç±»çš„äºŒä¹‰æ€§ï¼æ‰€ä»¥Javaä¸èƒ½å¤šç»§æ‰¿ï¼ï¼</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="super">super</h3>
<p>ç»§æ‰¿å super è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œçˆ¶ç±»æ„é€ å™¨åˆå§‹åŒ–ç»§æ‰¿è‡ªçˆ¶ç±»çš„æ•°æ®ã€‚</p>
<p>æ€»ç»“ä¸æ‹“å±•ï¼š</p>
<ul>
<li>this ä»£è¡¨äº†å½“å‰å¯¹è±¡çš„å¼•ç”¨ï¼ˆç»§æ‰¿ä¸­æŒ‡ä»£å­ç±»å¯¹è±¡ï¼‰ï¼šthis.å­ç±»æˆå‘˜å˜é‡ã€this.å­ç±»æˆå‘˜æ–¹æ³•ã€<strong>this(â€¦)</strong> å¯ä»¥æ ¹æ®å‚æ•°åŒ¹é…è®¿é—®æœ¬ç±»å…¶ä»–æ„é€ å™¨</li>
<li>super ä»£è¡¨äº†çˆ¶ç±»å¯¹è±¡çš„å¼•ç”¨ï¼ˆç»§æ‰¿ä¸­æŒ‡ä»£äº†çˆ¶ç±»å¯¹è±¡ç©ºé—´ï¼‰ï¼šsuper.çˆ¶ç±»æˆå‘˜å˜é‡ã€super.çˆ¶ç±»çš„æˆå‘˜æ–¹æ³•ã€super(â€¦) å¯ä»¥æ ¹æ®å‚æ•°åŒ¹é…è®¿é—®çˆ¶ç±»çš„æ„é€ å™¨</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>this(â€¦) å€Ÿç”¨æœ¬ç±»å…¶ä»–æ„é€ å™¨ï¼Œsuper(â€¦) è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨</li>
<li>this(â€¦) æˆ– super(â€¦) å¿…é¡»æ”¾åœ¨æ„é€ å™¨çš„ç¬¬ä¸€è¡Œï¼Œå¦åˆ™æŠ¥é”™</li>
<li>this(â€¦) å’Œ super(â€¦) <strong>ä¸èƒ½åŒæ—¶å‡ºç°</strong>åœ¨æ„é€ å™¨ä¸­ï¼Œå› ä¸ºæ„é€ å‡½æ•°å¿…é¡»å‡ºç°åœ¨ç¬¬ä¸€è¡Œä¸Šï¼Œåªèƒ½é€‰æ‹©ä¸€ä¸ª</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThisDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// éœ€æ±‚ï¼šå¸Œæœ›å¦‚æœä¸å†™å­¦æ ¡é»˜è®¤å°±æ˜¯â€å¼ ä¸‰â€œï¼</span></span><br><span class="line">        Student s1 = <span class="keyword">new</span> <span class="built_in">Student</span>(<span class="string">&quot;å¤©è“¬å…ƒå¸…&quot;</span>, <span class="number">1000</span> );</span><br><span class="line">        Student s2 = <span class="keyword">new</span> <span class="built_in">Student</span>(<span class="string">&quot;é½å¤©å¤§åœ£&quot;</span>, <span class="number">2000</span>, <span class="string">&quot;æ¸…åå¤§å­¦&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Study</span> extends Student &#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Study</span><span class="params">(<span class="type">String</span> name, <span class="type">int</span> age, <span class="type">String</span> schoolName)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(name , age , schoolName) ; </span><br><span class="line">       <span class="comment">// æ ¹æ®å‚æ•°åŒ¹é…è°ƒç”¨çˆ¶ç±»æ„é€ å™¨</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> name ;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age ;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> schoolName ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="type">String</span> name , <span class="type">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="comment">// å€Ÿç”¨å…„å¼Ÿæ„é€ å™¨çš„åŠŸèƒ½ï¼</span></span><br><span class="line">        <span class="built_in">this</span>(name , age , <span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="type">String</span> name, <span class="type">int</span> age, <span class="type">String</span> schoolName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.schoolName = schoolName;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// .......get + set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="final">final</h3>
<h4 id="åŸºæœ¬ä»‹ç»-3">åŸºæœ¬ä»‹ç»</h4>
<p>final ç”¨äºä¿®é¥°ï¼šç±»ï¼Œæ–¹æ³•ï¼Œå˜é‡</p>
<ul>
<li>final ä¿®é¥°ç±»ï¼Œç±»ä¸èƒ½è¢«ç»§æ‰¿äº†ï¼Œç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥ä½¿ç”¨</li>
<li>final å¯ä»¥ä¿®é¥°æ–¹æ³•ï¼Œæ–¹æ³•å°±ä¸èƒ½è¢«é‡å†™</li>
<li>final ä¿®é¥°å˜é‡æ€»è§„åˆ™ï¼šå˜é‡æœ‰ä¸”ä»…èƒ½è¢«èµ‹å€¼ä¸€æ¬¡</li>
</ul>
<p>final å’Œ abstract çš„å…³ç³»æ˜¯<strong>äº’æ–¥å…³ç³»</strong>ï¼Œä¸èƒ½åŒæ—¶ä¿®é¥°ç±»æˆ–è€…åŒæ—¶ä¿®é¥°æ–¹æ³•</p>
<h4 id="ä¿®é¥°å˜é‡">ä¿®é¥°å˜é‡</h4>
<h5 id="é™æ€å˜é‡">é™æ€å˜é‡</h5>
<p>final ä¿®é¥°é™æ€æˆå‘˜å˜é‡ï¼Œå˜é‡å˜æˆäº†å¸¸é‡</p>
<p>å¸¸é‡ï¼šæœ‰ public static final ä¿®é¥°ï¼Œåç§°å­—æ¯å…¨éƒ¨å¤§å†™ï¼Œå¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥</p>
<p>final ä¿®é¥°é™æ€æˆå‘˜å˜é‡å¯ä»¥åœ¨å“ªäº›åœ°æ–¹èµ‹å€¼ï¼š</p>
<ol>
<li>å®šä¹‰çš„æ—¶å€™èµ‹å€¼ä¸€æ¬¡</li>
<li>å¯ä»¥åœ¨é™æ€ä»£ç å—ä¸­èµ‹å€¼ä¸€æ¬¡</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinalDemo</span> &#123;</span><br><span class="line">	<span class="comment">//å¸¸é‡ï¼špublic static finalä¿®é¥°ï¼Œåç§°å­—æ¯å…¨éƒ¨å¤§å†™ï¼Œä¸‹åˆ’çº¿è¿æ¥ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">static</span> <span class="keyword">final</span> <span class="type">String</span> SCHOOL_NAME = <span class="string">&quot;å¼ ä¸‰&quot;</span> ;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">static</span> <span class="keyword">final</span> <span class="type">String</span> SCHOOL_NAME1;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span>&#123;</span><br><span class="line">        <span class="comment">//SCHOOL_NAME = &quot;java&quot;;//æŠ¥é”™</span></span><br><span class="line">        SCHOOL_NAME1 = <span class="string">&quot;å¼ ä¸‰1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å®ä¾‹å˜é‡">å®ä¾‹å˜é‡</h5>
<p>final ä¿®é¥°å˜é‡çš„æ€»è§„åˆ™ï¼šæœ‰ä¸”ä»…èƒ½è¢«èµ‹å€¼ä¸€æ¬¡</p>
<p>final ä¿®é¥°å®ä¾‹æˆå‘˜å˜é‡å¯ä»¥åœ¨å“ªäº›åœ°æ–¹èµ‹å€¼ 1 æ¬¡ï¼š</p>
<ol>
<li>å®šä¹‰çš„æ—¶å€™èµ‹å€¼ä¸€æ¬¡</li>
<li>å¯ä»¥åœ¨å®ä¾‹ä»£ç å—ä¸­èµ‹å€¼ä¸€æ¬¡</li>
<li>å¯ä»¥åœ¨æ¯ä¸ªæ„é€ å™¨ä¸­èµ‹å€¼ä¸€æ¬¡</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinalDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> name = <span class="string">&quot;å¼ ä¸‰&quot;</span> ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> name1;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> name2;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥åœ¨å®ä¾‹ä»£ç å—ä¸­èµ‹å€¼ä¸€æ¬¡ã€‚</span></span><br><span class="line">        name1 = <span class="string">&quot;å¼ ä¸‰1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//æ„é€ å™¨èµ‹å€¼ä¸€æ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FinalDemo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        name2 = <span class="string">&quot;å¼ ä¸‰2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FinalDemo</span><span class="params">(<span class="type">String</span> a)</span></span>&#123;</span><br><span class="line">        name2 = <span class="string">&quot;å¼ ä¸‰2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        FinalDemo f1 = <span class="keyword">new</span> <span class="built_in">FinalDemo</span>();</span><br><span class="line">        <span class="comment">//f1.name = &quot;å¼ ä¸‰1&quot;; // ç¬¬äºŒæ¬¡èµ‹å€¼ æŠ¥é”™ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æŠ½è±¡ç±»">æŠ½è±¡ç±»</h3>
<h4 id="åŸºæœ¬ä»‹ç»-4">åŸºæœ¬ä»‹ç»</h4>
<blockquote>
<p>çˆ¶ç±»çŸ¥é“å­ç±»è¦å®ŒæˆæŸä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯æ¯ä¸ªå­ç±»å®ç°æƒ…å†µä¸ä¸€æ ·</p>
</blockquote>
<p>æŠ½è±¡æ–¹æ³•ï¼šæ²¡æœ‰æ–¹æ³•ä½“ï¼Œåªæœ‰æ–¹æ³•ç­¾åï¼Œå¿…é¡»ç”¨ abstract ä¿®é¥°çš„æ–¹æ³•å°±æ˜¯æŠ½è±¡æ–¹æ³•</p>
<p>æŠ½è±¡ç±»ï¼šæ‹¥æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»å®šä¹‰æˆæŠ½è±¡ç±»ï¼Œå¿…é¡»ç”¨ abstract ä¿®é¥°ï¼Œ<strong>æŠ½è±¡ç±»æ˜¯ä¸ºäº†è¢«ç»§æ‰¿</strong></p>
<p>ä¸€ä¸ªç±»ç»§æ‰¿æŠ½è±¡ç±»ï¼Œ<strong>å¿…é¡»é‡å†™æŠ½è±¡ç±»çš„å…¨éƒ¨æŠ½è±¡æ–¹æ³•</strong>ï¼Œå¦åˆ™è¿™ä¸ªç±»å¿…é¡»å®šä¹‰æˆæŠ½è±¡ç±»</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AbstractDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        Dog d = <span class="keyword">new</span> Dog();</span><br><span class="line">        d.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Dog</span> <span class="title">extends</span> <span class="title">Animal</span>&#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span> &#123; </span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ğŸ•è·‘&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Animal</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¸¸è§é—®é¢˜-2">å¸¸è§é—®é¢˜</h4>
<p>ä¸€ã€æŠ½è±¡ç±»æ˜¯å¦æœ‰æ„é€ å™¨ï¼Œæ˜¯å¦å¯ä»¥åˆ›å»ºå¯¹è±¡?</p>
<ul>
<li>æŠ½è±¡ç±»æœ‰æ„é€ å™¨ï¼Œä½†æ˜¯æŠ½è±¡ç±»ä¸èƒ½åˆ›å»ºå¯¹è±¡ï¼Œç±»çš„å…¶ä»–æˆåˆ†å®ƒéƒ½å…·å¤‡ï¼Œæ„é€ å™¨æä¾›ç»™å­ç±»ç»§æ‰¿åè°ƒç”¨çˆ¶ç±»æ„é€ å™¨ä½¿ç”¨</li>
<li>æŠ½è±¡ç±»ä¸­å­˜åœ¨æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½æ‰§è¡Œï¼Œ<strong>æŠ½è±¡ç±»ä¸­ä¹Ÿå¯æ²¡æœ‰æŠ½è±¡æ–¹æ³•</strong></li>
</ul>
<blockquote>
<p>æŠ½è±¡åœ¨å­¦æœ¯ä¸Šæœ¬èº«æ„å‘³ç€ä¸èƒ½å®ä¾‹åŒ–</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AbstractDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//Animal a = new Animal(); æŠ½è±¡ç±»ä¸èƒ½åˆ›å»ºå¯¹è±¡ï¼</span></span><br><span class="line">        <span class="comment">//a.run(); // æŠ½è±¡æ–¹æ³•ä¸èƒ½æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Animal</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String schoolName = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Animal</span>()</span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span>()</span>;</span><br><span class="line">    <span class="comment">//æ™®é€šæ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">go</span>()</span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äºŒã€static ä¸ abstract èƒ½åŒæ—¶ä½¿ç”¨å—ï¼Ÿ</p>
<p>ç­”ï¼šä¸èƒ½ï¼Œè¢« static ä¿®é¥°çš„æ–¹æ³•å±äºç±»ï¼Œæ˜¯ç±»è‡ªå·±çš„ä¸œè¥¿ï¼Œä¸æ˜¯ç»™å­ç±»æ¥ç»§æ‰¿çš„ï¼Œè€ŒæŠ½è±¡æ–¹æ³•æœ¬èº«æ²¡æœ‰å®ç°ï¼Œå°±æ˜¯ç”¨æ¥ç»™å­ç±»ç»§æ‰¿</p>
<h4 id="å­˜åœ¨æ„ä¹‰">å­˜åœ¨æ„ä¹‰</h4>
<p><strong>è¢«ç»§æ‰¿</strong>ï¼ŒæŠ½è±¡ç±»å°±æ˜¯ä¸ºäº†è¢«å­ç±»ç»§æ‰¿ï¼Œå¦åˆ™æŠ½è±¡ç±»å°†æ¯«æ— æ„ä¹‰ï¼ˆæ ¸å¿ƒï¼‰</p>
<p>æŠ½è±¡ç±»ä½“ç°çš„æ˜¯&quot;æ¨¡æ¿æ€æƒ³&quot;ï¼š<strong>éƒ¨åˆ†å®ç°ï¼Œéƒ¨åˆ†æŠ½è±¡</strong>ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»è®¾è®¡ä¸€ä¸ªæ¨¡æ¿æ¨¡å¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½œæ–‡æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Student</span> xiaoMa = <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        xiaoMa.<span class="title function_">write</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Template</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">writeText</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="string">&quot;\tå†…å®¹&quot;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1.å†™ä¸€ä¸ªæ¨¡æ¿ç±»ï¼šä»£è¡¨äº†ä½œæ–‡æ¨¡æ¿ã€‚</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Template</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> title = <span class="string">&quot;\t\t\t\t\tæ ‡é¢˜&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> start = <span class="string">&quot;\tå¼€å¤´&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> last = <span class="string">&quot;\tç»“å°¾&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">write</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(title+<span class="string">&quot;\n&quot;</span>+start);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="title function_">writeText</span>());</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(last);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ­£æ–‡éƒ¨åˆ†å®šä¹‰æˆæŠ½è±¡æ–¹æ³•ï¼Œäº¤ç»™å­ç±»é‡å†™ï¼ï¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="title class_">String</span> <span class="title function_">writeText</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¥å£">æ¥å£</h3>
<h4 id="åŸºæœ¬ä»‹ç»-5">åŸºæœ¬ä»‹ç»</h4>
<p>æ¥å£æ˜¯ Java è¯­è¨€ä¸­ä¸€ç§å¼•ç”¨ç±»å‹ï¼Œæ˜¯æ–¹æ³•çš„é›†åˆã€‚</p>
<p>æ¥å£æ˜¯æ›´åŠ å½»åº•çš„æŠ½è±¡ï¼Œæ¥å£ä¸­åªæœ‰æŠ½è±¡æ–¹æ³•å’Œå¸¸é‡ï¼Œæ²¡æœ‰å…¶ä»–æˆåˆ†</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> ä¿®é¥°ç¬¦ interface æ¥å£åç§°&#123;</span><br><span class="line">	<span class="regexp">//</span> æŠ½è±¡æ–¹æ³•</span><br><span class="line">	<span class="regexp">//</span> é»˜è®¤æ–¹æ³•</span><br><span class="line">	<span class="regexp">//</span> é™æ€æ–¹æ³•</span><br><span class="line">	<span class="regexp">//</span> ç§æœ‰æ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>æŠ½è±¡æ–¹æ³•ï¼šæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•é»˜è®¤ä¼šåŠ ä¸Š public abstract ä¿®é¥°ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥ä¸å†™</p>
</li>
<li>
<p>é™æ€æ–¹æ³•ï¼šé™æ€æ–¹æ³•å¿…é¡»æœ‰æ–¹æ³•ä½“</p>
</li>
<li>
<p>å¸¸é‡ï¼šæ˜¯ public static final ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œä»…èƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œå€¼ä¸èƒ½æ”¹å˜ã€‚å¸¸é‡çš„åç§°è§„èŒƒä¸Šè¦æ±‚å…¨éƒ¨å¤§å†™ï¼Œå¤šä¸ªå•è¯ä¸‹åˆ’çº¿è¿æ¥ï¼Œpublic static final å¯ä»¥çœç•¥ä¸å†™</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">InterfaceDemo</span>&#123;</span><br><span class="line">    <span class="comment">//public static final String SCHOOL_NAME = &quot;å¼ ä¸‰&quot;;</span></span><br><span class="line">	String SCHOOL_NAME = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//public abstract void run();</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span>()</span>;<span class="comment">//é»˜è®¤è¡¥å……</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="å®ç°æ¥å£">å®ç°æ¥å£</h4>
<p><strong>æ¥å£æ˜¯ç”¨æ¥è¢«ç±»å®ç°çš„ã€‚</strong></p>
<ul>
<li>ç±»ä¸ç±»æ˜¯ç»§æ‰¿å…³ç³»ï¼šä¸€ä¸ªç±»åªèƒ½ç›´æ¥ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œå•ç»§æ‰¿</li>
<li>ç±»ä¸æ¥å£æ˜¯å®ç°å…³ç³»ï¼šä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œå¤šå®ç°ï¼Œæ¥å£ä¸èƒ½ç»§æ‰¿ç±»</li>
<li>æ¥å£ä¸æ¥å£ç»§æ‰¿å…³ç³»ï¼š<strong>å¤šç»§æ‰¿</strong></li>
</ul>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="class"><span class="keyword">class</span> å®ç°ç±»åç§° <span class="keyword"><span class="keyword">implements</span> </span>æ¥å£1,æ¥å£2,æ¥å£3,....</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">ä¿®é¥°ç¬¦ <span class="class"><span class="keyword">interface</span> æ¥å£å <span class="title">extend</span> æ¥å£1,æ¥å£2,æ¥å£3,....</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°å¤šä¸ªæ¥å£çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>
<p>å½“ä¸€ä¸ªç±»å®ç°å¤šä¸ªæ¥å£æ—¶ï¼Œå¤šä¸ªæ¥å£ä¸­å­˜åœ¨åŒåçš„é™æ€æ–¹æ³•å¹¶ä¸ä¼šå†²çªï¼Œåªèƒ½é€šè¿‡å„è‡ªæ¥å£åè®¿é—®é™æ€æ–¹æ³•</p>
</li>
<li>
<p>å½“ä¸€ä¸ªç±»å®ç°å¤šä¸ªæ¥å£æ—¶ï¼Œå¤šä¸ªæ¥å£ä¸­å­˜åœ¨åŒåçš„é»˜è®¤æ–¹æ³•ï¼Œå®ç°ç±»å¿…é¡»é‡å†™è¿™ä¸ªæ–¹æ³•</p>
</li>
<li>
<p>å½“ä¸€ä¸ªç±»æ—¢ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œåˆå®ç°è‹¥å¹²ä¸ªæ¥å£æ—¶ï¼Œçˆ¶ç±»ä¸­æˆå‘˜æ–¹æ³•ä¸æ¥å£ä¸­é»˜è®¤æ–¹æ³•é‡åï¼Œå­ç±»<strong>å°±è¿‘é€‰æ‹©æ‰§è¡Œçˆ¶ç±»</strong>çš„æˆå‘˜æ–¹æ³•</p>
</li>
<li>
<p>æ¥å£ä¸­ï¼Œæ²¡æœ‰æ„é€ å™¨ï¼Œ<strong>ä¸èƒ½åˆ›å»ºå¯¹è±¡</strong>ï¼Œæ¥å£æ˜¯æ›´å½»åº•çš„æŠ½è±¡ï¼Œè¿æ„é€ å™¨éƒ½æ²¡æœ‰ï¼Œè‡ªç„¶ä¸èƒ½åˆ›å»ºå¯¹è±¡</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterfaceDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Student</span> s = <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        s.<span class="title function_">run</span>();</span><br><span class="line">        s.<span class="title function_">rule</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Food</span>, <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">eat</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Food</span>&#123;</span><br><span class="line">    <span class="built_in">void</span> <span class="title function_">eat</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="built_in">void</span> <span class="title function_">run</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯ä»¥ç›´æ¥ interface Person extend Food,</span></span><br><span class="line"><span class="comment">//ç„¶å class Student implements Person æ•ˆæœä¸€æ ·</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="æ–°å¢åŠŸèƒ½">æ–°å¢åŠŸèƒ½</h4>
<p>jdk1.8 ä»¥åæ–°å¢çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>é»˜è®¤æ–¹æ³•ï¼ˆå°±æ˜¯æ™®é€šå®ä¾‹æ–¹æ³•ï¼‰
<ul>
<li>å¿…é¡»ç”¨ default ä¿®é¥°ï¼Œé»˜è®¤ä¼š public ä¿®é¥°</li>
<li>å¿…é¡»ç”¨æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡æ¥è°ƒç”¨</li>
<li>å¿…é¡»æœ‰é»˜è®¤å®ç°</li>
</ul>
</li>
<li>é™æ€æ–¹æ³•
<ul>
<li>é»˜è®¤ä¼š public ä¿®é¥°</li>
<li>æ¥å£çš„é™æ€æ–¹æ³•å¿…é¡»ç”¨æ¥å£çš„ç±»åæœ¬èº«æ¥è°ƒç”¨</li>
<li>è°ƒç”¨æ ¼å¼ï¼šClassName.method()</li>
<li>å¿…é¡»æœ‰é»˜è®¤å®ç°</li>
</ul>
</li>
<li>ç§æœ‰æ–¹æ³•ï¼šJDK 1.9 æ‰å¼€å§‹æœ‰çš„ï¼Œåªèƒ½åœ¨<strong>æœ¬ç±»ä¸­</strong>è¢«å…¶ä»–çš„é»˜è®¤æ–¹æ³•æˆ–è€…ç§æœ‰æ–¹æ³•è®¿é—®</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">InterfaceDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.é»˜è®¤æ–¹æ³•è°ƒç”¨ï¼šå¿…é¡»ç”¨æ¥å£çš„å®ç°ç±»å¯¹è±¡è°ƒç”¨ã€‚</span></span><br><span class="line">        Man m = <span class="keyword">new</span> Man();</span><br><span class="line">        m.run();</span><br><span class="line">        m.work();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.æ¥å£çš„é™æ€æ–¹æ³•å¿…é¡»ç”¨æ¥å£çš„ç±»åæœ¬èº«æ¥è°ƒç”¨ã€‚</span></span><br><span class="line">        InterfaceJDK8.inAddr();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Man</span> <span class="title">implements</span> <span class="title">InterfaceJDK8</span> &#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span>()</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å·¥ä½œä¸­ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title">InterfaceJDK8</span> &#123;</span><br><span class="line">    <span class="comment">//æŠ½è±¡æ–¹æ³•ï¼ï¼</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">work</span>()</span>;</span><br><span class="line">    <span class="comment">// a.é»˜è®¤æ–¹æ³•ï¼ˆå°±æ˜¯ä¹‹å‰å†™çš„æ™®é€šå®ä¾‹æ–¹æ³•ï¼‰</span></span><br><span class="line">    <span class="comment">// å¿…é¡»ç”¨æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡æ¥è°ƒç”¨ã€‚</span></span><br><span class="line">    <span class="function"><span class="literal">default</span> <span class="keyword">void</span> <span class="title">run</span>()</span> &#123;</span><br><span class="line">        go();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å¼€å§‹è·‘æ­¥ğŸƒâ€&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// b.é™æ€æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼šæ¥å£çš„é™æ€æ–¹æ³•å¿…é¡»ç”¨æ¥å£çš„ç±»åæœ¬èº«æ¥è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">inAddr</span>()</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;æˆ‘ä»¬åœ¨æ­¦æ±‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// c.ç§æœ‰æ–¹æ³•ï¼ˆå°±æ˜¯ç§æœ‰çš„å®ä¾‹æ–¹æ³•ï¼‰: JDK 1.9æ‰å¼€å§‹æœ‰çš„ã€‚</span></span><br><span class="line">    <span class="comment">// åªèƒ½åœ¨æœ¬æ¥å£ä¸­è¢«å…¶ä»–çš„é»˜è®¤æ–¹æ³•æˆ–è€…ç§æœ‰æ–¹æ³•è®¿é—®ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">go</span>()</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å¼€å§‹ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯¹æ¯”æŠ½è±¡ç±»">å¯¹æ¯”æŠ½è±¡ç±»</h4>
<table>
<thead>
<tr>
<th><strong>å‚æ•°</strong></th>
<th><strong>æŠ½è±¡ç±»</strong></th>
<th><strong>æ¥å£</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>é»˜è®¤çš„æ–¹æ³•å®ç°</td>
<td>å¯ä»¥æœ‰é»˜è®¤çš„æ–¹æ³•å®ç°</td>
<td>æ¥å£å®Œå…¨æ˜¯æŠ½è±¡çš„ï¼Œjdk8 ä»¥åæœ‰é»˜è®¤çš„å®ç°</td>
</tr>
<tr>
<td>å®ç°</td>
<td>å­ç±»ä½¿ç”¨ <strong>extends</strong> å…³é”®å­—æ¥ç»§æ‰¿æŠ½è±¡ç±»ã€‚å¦‚æœå­ç±»ä¸æ˜¯æŠ½è±¡ç±»çš„è¯ï¼Œå®ƒéœ€è¦æä¾›æŠ½è±¡ç±»ä¸­æ‰€æœ‰å£°æ˜çš„æ–¹æ³•çš„å®ç°ã€‚</td>
<td>å­ç±»ä½¿ç”¨å…³é”®å­— <strong>implements</strong> æ¥å®ç°æ¥å£ã€‚å®ƒéœ€è¦æä¾›æ¥å£ä¸­æ‰€æœ‰å£°æ˜çš„æ–¹æ³•çš„å®ç°</td>
</tr>
<tr>
<td>æ„é€ å™¨</td>
<td>æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨</td>
<td>æ¥å£ä¸èƒ½æœ‰æ„é€ å™¨</td>
</tr>
<tr>
<td>ä¸æ­£å¸¸Javaç±»çš„åŒºåˆ«</td>
<td>é™¤äº†ä¸èƒ½å®ä¾‹åŒ–æŠ½è±¡ç±»ä¹‹å¤–ï¼Œå’Œæ™®é€š Java ç±»æ²¡æœ‰ä»»ä½•åŒºåˆ«</td>
<td>æ¥å£æ˜¯å®Œå…¨ä¸åŒçš„ç±»å‹</td>
</tr>
<tr>
<td>è®¿é—®ä¿®é¥°ç¬¦</td>
<td>æŠ½è±¡æ–¹æ³•æœ‰ <strong>public</strong>ã€<strong>protected</strong> å’Œ <strong>default</strong> è¿™äº›ä¿®é¥°ç¬¦</td>
<td>æ¥å£é»˜è®¤ä¿®é¥°ç¬¦æ˜¯ <strong>public</strong>ï¼Œåˆ«çš„ä¿®é¥°ç¬¦éœ€è¦æœ‰æ–¹æ³•ä½“</td>
</tr>
<tr>
<td>mainæ–¹æ³•</td>
<td>æŠ½è±¡æ–¹æ³•å¯ä»¥æœ‰ main æ–¹æ³•å¹¶ä¸”æˆ‘ä»¬å¯ä»¥è¿è¡Œå®ƒ</td>
<td>jdk8 ä»¥å‰æ¥å£æ²¡æœ‰ main æ–¹æ³•ï¼Œä¸èƒ½è¿è¡Œï¼›jdk8 ä»¥åæ¥å£å¯ä»¥æœ‰ default å’Œ static æ–¹æ³•ï¼Œå¯ä»¥è¿è¡Œ main æ–¹æ³•</td>
</tr>
<tr>
<td>å¤šç»§æ‰¿</td>
<td>æŠ½è±¡æ–¹æ³•å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»å’Œå®ç°å¤šä¸ªæ¥å£</td>
<td>æ¥å£å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªå…¶å®ƒæ¥å£ï¼Œæ¥å£ä¸å¯ç»§æ‰¿ç±»</td>
</tr>
<tr>
<td>é€Ÿåº¦</td>
<td>æ¯”æ¥å£é€Ÿåº¦è¦å¿«</td>
<td>æ¥å£æ˜¯ç¨å¾®æœ‰ç‚¹æ…¢çš„ï¼Œå› ä¸ºå®ƒéœ€è¦æ—¶é—´å»å¯»æ‰¾åœ¨ç±»ä¸­å®ç°çš„æ–¹æ³•</td>
</tr>
<tr>
<td>æ·»åŠ æ–°æ–¹æ³•</td>
<td>å¦‚æœå¾€æŠ½è±¡ç±»ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå¯ä»¥ç»™å®ƒæä¾›é»˜è®¤çš„å®ç°ï¼Œå› æ­¤ä¸éœ€è¦æ”¹å˜ç°åœ¨çš„ä»£ç </td>
<td>å¦‚æœå¾€æ¥å£ä¸­æ·»åŠ æ–¹æ³•ï¼Œé‚£ä¹ˆå¿…é¡»æ”¹å˜å®ç°è¯¥æ¥å£çš„ç±»</td>
</tr>
</tbody>
</table>
<h3 id="å¤šæ€">å¤šæ€</h3>
<h4 id="åŸºæœ¬ä»‹ç»-6">åŸºæœ¬ä»‹ç»</h4>
<p>å¤šæ€çš„æ¦‚å¿µï¼šåŒä¸€ä¸ªå®ä½“åŒæ—¶å…·æœ‰å¤šç§å½¢å¼åŒä¸€ä¸ªç±»å‹çš„å¯¹è±¡ï¼Œæ‰§è¡ŒåŒä¸€ä¸ªè¡Œä¸ºï¼Œåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä¼šè¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºç‰¹å¾</p>
<p>å¤šæ€çš„æ ¼å¼ï¼š</p>
<ul>
<li>çˆ¶ç±»ç±»å‹èŒƒå›´ &gt; å­ç±»ç±»å‹èŒƒå›´</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç±»ç±»å‹ å¯¹è±¡åç§° <span class="operator">=</span> new å­ç±»æ„é€ å™¨<span class="comment">;</span></span><br><span class="line">æ¥å£	  å¯¹è±¡åç§° <span class="operator">=</span> new å®ç°ç±»æ„é€ å™¨<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>å¤šæ€çš„æ‰§è¡Œï¼š</p>
<ul>
<li>å¯¹äºæ–¹æ³•çš„è°ƒç”¨ï¼š<strong>ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å³è¾¹</strong>ï¼ˆåˆ†æ´¾æœºåˆ¶ï¼‰</li>
<li>å¯¹äºå˜é‡çš„è°ƒç”¨ï¼š<strong>ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å·¦è¾¹</strong></li>
</ul>
<p>å¤šæ€çš„ä½¿ç”¨è§„åˆ™ï¼š</p>
<ul>
<li>å¿…é¡»å­˜åœ¨ç»§æ‰¿æˆ–è€…å®ç°å…³ç³»</li>
<li>å¿…é¡»å­˜åœ¨çˆ¶ç±»ç±»å‹çš„å˜é‡å¼•ç”¨å­ç±»ç±»å‹çš„å¯¹è±¡</li>
<li>å­˜åœ¨æ–¹æ³•é‡å†™</li>
</ul>
<p>å¤šæ€çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>åœ¨å¤šæ€å½¢å¼ä¸‹ï¼Œå³è¾¹å¯¹è±¡å¯ä»¥å®ç°ç»„ä»¶åŒ–åˆ‡æ¢ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤ï¼Œä¹Ÿå¯ä»¥å®ç°ç±»ä¸ç±»ä¹‹é—´çš„<strong>è§£è€¦</strong></li>
<li>çˆ¶ç±»ç±»å‹ä½œä¸ºæ–¹æ³•å½¢å¼å‚æ•°ï¼Œä¼ é€’å­ç±»å¯¹è±¡ç»™æ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥ä¸€åˆ‡å­ç±»å¯¹è±¡è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨ï¼Œæ›´èƒ½ä½“ç°å‡ºå¤šæ€çš„<strong>æ‰©å±•æ€§</strong>ä¸ä¾¿åˆ©æ€§</li>
</ul>
<p>å¤šæ€çš„åŠ£åŠ¿ï¼š</p>
<ul>
<li>å¤šæ€å½¢å¼ä¸‹ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨å­ç±»ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œå› ä¸ºç¼–è¯‘çœ‹å·¦è¾¹ï¼Œçˆ¶ç±»ä¸­æ²¡æœ‰å­ç±»ç‹¬æœ‰çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä»£ç åœ¨ç¼–è¯‘é˜¶æ®µå°±ç›´æ¥æŠ¥é”™äº†</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">PolymorphicDemo</span> </span>&#123;</span><br><span class="line">    public static void main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">        <span class="type">Animal</span> c = <span class="keyword">new</span> <span class="type">Cat</span>();</span><br><span class="line">        c.run();</span><br><span class="line">        <span class="comment">//c.eat();//æŠ¥é”™  ç¼–è¯‘çœ‹å·¦è¾¹ éœ€è¦å¼ºè½¬</span></span><br><span class="line">        go(c);</span><br><span class="line">        go(<span class="keyword">new</span> <span class="type">Dog</span>);   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç”¨ Dogæˆ–è€…Cat éƒ½æ²¡åŠæ³•è®©æ‰€æœ‰åŠ¨ç‰©å‚ä¸è¿›æ¥ï¼Œåªèƒ½ç”¨Anima</span></span><br><span class="line">    public static void go(<span class="type">Animal</span> d)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    public void eat();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void run()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    public void run()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸Šä¸‹è½¬å‹-2">ä¸Šä¸‹è½¬å‹</h4>
<blockquote>
<p>åŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢ï¼š</p>
<ol>
<li>å°èŒƒå›´ç±»å‹çš„å˜é‡æˆ–è€…å€¼å¯ä»¥ç›´æ¥èµ‹å€¼ç»™å¤§èŒƒå›´ç±»å‹çš„å˜é‡</li>
<li>å¤§èŒƒå›´ç±»å‹çš„å˜é‡æˆ–è€…å€¼å¿…é¡»å¼ºåˆ¶ç±»å‹è½¬æ¢ç»™å°èŒƒå›´ç±»å‹çš„å˜é‡</li>
</ol>
</blockquote>
<p>å¼•ç”¨æ•°æ®ç±»å‹çš„<strong>è‡ªåŠ¨</strong>ç±»å‹è½¬æ¢è¯­æ³•ï¼šå­ç±»ç±»å‹çš„å¯¹è±¡æˆ–è€…å˜é‡å¯ä»¥è‡ªåŠ¨ç±»å‹è½¬æ¢èµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„å˜é‡</p>
<p><strong>çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</strong></p>
<ul>
<li><strong>å‘ä¸Šè½¬å‹ (upcasting)</strong>ï¼šé€šè¿‡å­ç±»å¯¹è±¡ï¼ˆå°èŒƒå›´ï¼‰å®ä¾‹åŒ–çˆ¶ç±»å¯¹è±¡ï¼ˆå¤§èŒƒå›´ï¼‰ï¼Œè¿™ç§å±äºè‡ªåŠ¨è½¬æ¢</li>
<li><strong>å‘ä¸‹è½¬å‹ (downcasting)</strong>ï¼šé€šè¿‡çˆ¶ç±»å¯¹è±¡ï¼ˆå¤§èŒƒå›´ï¼‰å®ä¾‹åŒ–å­ç±»å¯¹è±¡ï¼ˆå°èŒƒå›´ï¼‰ï¼Œè¿™ç§å±äºå¼ºåˆ¶è½¬æ¢</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">PolymorphicDemo</span> </span>&#123;</span><br><span class="line">    public static void main(<span class="type">String</span>[] args)&#123;</span><br><span class="line">        <span class="type">Animal</span> a = <span class="keyword">new</span> <span class="type">Cat</span>();	<span class="comment">// å‘ä¸Šè½¬å‹</span></span><br><span class="line">        <span class="type">Cat</span> c = (<span class="type">Cat</span>)a;			<span class="comment">// å‘ä¸‹è½¬å‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="instanceof">instanceof</h4>
<p>instanceofï¼šåˆ¤æ–­å·¦è¾¹çš„å¯¹è±¡æ˜¯å¦æ˜¯å³è¾¹çš„ç±»çš„å®ä¾‹ï¼Œæˆ–è€…æ˜¯å…¶ç›´æ¥æˆ–é—´æ¥å­ç±»ï¼Œæˆ–è€…æ˜¯å…¶æ¥å£çš„å®ç°ç±»</p>
<ul>
<li>å¼•ç”¨ç±»å‹å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šçˆ¶ç±»ç±»å‹çš„å˜é‡æˆ–è€…å¯¹è±¡å¼ºåˆ¶ç±»å‹è½¬æ¢æˆå­ç±»ç±»å‹çš„å˜é‡ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>å¼ºåˆ¶ç±»å‹è½¬æ¢çš„æ ¼å¼ï¼š<strong>ç±»å‹ å˜é‡åç§° = (ç±»å‹)(å¯¹è±¡æˆ–è€…å˜é‡)</strong></li>
<li>æœ‰ç»§æ‰¿/å®ç°å…³ç³»çš„ä¸¤ä¸ªç±»å‹å°±å¯ä»¥è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç¼–è¯‘é˜¶æ®µä¸€å®šä¸æŠ¥é”™ï¼Œä½†æ˜¯è¿è¡Œé˜¶æ®µå¯èƒ½å‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ ClassCastException</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</span><br><span class="line">    public static void main(<span class="type">String</span>[] args)&#123;</span><br><span class="line">		<span class="type">Aniaml</span> a = <span class="keyword">new</span> <span class="type">Dog</span>();</span><br><span class="line">		<span class="comment">//Dog d = (Dog)a;</span></span><br><span class="line">        <span class="comment">//Cat c = (Cat)a; ç¼–è¯‘ä¸æŠ¥é”™ï¼Œè¿è¡ŒæŠ¥ClassCastExceptioné”™è¯¯</span></span><br><span class="line">        <span class="keyword">if</span>(a instanceof <span class="type">Cat</span>)&#123;</span><br><span class="line">            <span class="type">Cat</span> c = (<span class="type">Cat</span>)a; </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(a instanceof <span class="type">Dog</span>) &#123;</span><br><span class="line">            <span class="type">Dog</span> d = (<span class="type">Dog</span>)a;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å†…éƒ¨ç±»">å†…éƒ¨ç±»</h3>
<h4 id="æ¦‚è¿°-2">æ¦‚è¿°</h4>
<p>å†…éƒ¨ç±»æ˜¯ç±»çš„äº”å¤§æˆåˆ†ä¹‹ä¸€ï¼šæˆå‘˜å˜é‡ï¼Œæ–¹æ³•ï¼Œæ„é€ å™¨ï¼Œä»£ç å—ï¼Œå†…éƒ¨ç±»</p>
<p>æ¦‚å¿µï¼šå®šä¹‰åœ¨ä¸€ä¸ªç±»é‡Œé¢çš„ç±»å°±æ˜¯å†…éƒ¨ç±»</p>
<p>ä½œç”¨ï¼šæä¾›æ›´å¥½çš„å°è£…æ€§ï¼Œä½“ç°å‡ºç»„ä»¶æ€æƒ³ï¼Œ<strong>é—´æ¥è§£å†³ç±»æ— æ³•å¤šç»§æ‰¿å¼•èµ·çš„ä¸€ç³»åˆ—é—®é¢˜</strong></p>
<p>åˆ†ç±»ï¼šé™æ€å†…éƒ¨ç±»ã€å®ä¾‹å†…éƒ¨ç±»ï¼ˆæˆå‘˜å†…éƒ¨ç±»ï¼‰ã€å±€éƒ¨å†…éƒ¨ç±»ã€<strong>åŒ¿åå†…éƒ¨ç±»</strong>ï¼ˆé‡ç‚¹ï¼‰</p>
<h4 id="é™æ€å†…éƒ¨ç±»">é™æ€å†…éƒ¨ç±»</h4>
<p>å®šä¹‰ï¼šæœ‰ static ä¿®é¥°ï¼Œå±äºå¤–éƒ¨ç±»æœ¬èº«ï¼Œä¼šåŠ è½½ä¸€æ¬¡</p>
<p>é™æ€å†…éƒ¨ç±»ä¸­çš„æˆåˆ†ç ”ç©¶ï¼š</p>
<ul>
<li>ç±»æœ‰çš„æˆåˆ†å®ƒéƒ½æœ‰ï¼Œé™æ€å†…éƒ¨ç±»å±äºå¤–éƒ¨ç±»æœ¬èº«ï¼Œåªä¼šåŠ è½½ä¸€æ¬¡</li>
<li>ç‰¹ç‚¹ä¸å¤–éƒ¨ç±»æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªæ˜¯ä½ç½®åœ¨åˆ«äººé‡Œé¢</li>
<li>å¯ä»¥å®šä¹‰é™æ€æˆå‘˜</li>
</ul>
<p>é™æ€å†…éƒ¨ç±»çš„è®¿é—®æ ¼å¼ï¼šå¤–éƒ¨ç±»åç§°.å†…éƒ¨ç±»åç§°</p>
<p>é™æ€å†…éƒ¨ç±»åˆ›å»ºå¯¹è±¡çš„æ ¼å¼ï¼šå¤–éƒ¨ç±»åç§°.å†…éƒ¨ç±»åç§° å¯¹è±¡åç§° = new å¤–éƒ¨ç±»åç§°.å†…éƒ¨ç±»æ„é€ å™¨</p>
<p>é™æ€å†…éƒ¨ç±»çš„è®¿é—®æ‹“å±•ï¼š</p>
<ul>
<li>é™æ€å†…éƒ¨ç±»ä¸­æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜?	å¯ä»¥ï¼Œå¤–éƒ¨ç±»çš„é™æ€æˆå‘˜åªæœ‰ä¸€ä»½ï¼Œå¯ä»¥è¢«å…±äº«</li>
<li>é™æ€å†…éƒ¨ç±»ä¸­æ˜¯å¦å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜?	ä¸å¯ä»¥ï¼Œå¤–éƒ¨ç±»çš„æˆå‘˜å¿…é¡»ç”¨å¤–éƒ¨ç±»å¯¹è±¡è®¿é—®</li>
</ul>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args)&#123;</span><br><span class="line">        Outter.Inner <span class="keyword">in</span> = <span class="keyword">new</span> Outter.Inner();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Outter</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">double</span> salary;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">         <span class="comment">//æ‹¥æœ‰ç±»çš„æ‰€æœ‰åŠŸèƒ½ æ„é€ å™¨ æ–¹æ³• æˆå‘˜å˜é‡</span></span><br><span class="line">         System.out.println(age);</span><br><span class="line">         <span class="comment">//System.out.println(salary);æŠ¥é”™</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å®ä¾‹å†…éƒ¨ç±»">å®ä¾‹å†…éƒ¨ç±»</h4>
<p>å®šä¹‰ï¼šæ—  static ä¿®é¥°çš„å†…éƒ¨ç±»ï¼Œå±äºå¤–éƒ¨ç±»çš„æ¯ä¸ªå¯¹è±¡ï¼Œè·Ÿç€å¤–éƒ¨ç±»å¯¹è±¡ä¸€èµ·åŠ è½½</p>
<p>å®ä¾‹å†…éƒ¨ç±»çš„æˆåˆ†ç‰¹ç‚¹ï¼šå®ä¾‹å†…éƒ¨ç±»ä¸­ä¸èƒ½å®šä¹‰é™æ€æˆå‘˜ï¼Œå…¶ä»–éƒ½å¯ä»¥å®šä¹‰</p>
<p>å®ä¾‹å†…éƒ¨ç±»çš„è®¿é—®æ ¼å¼ï¼šå¤–éƒ¨ç±»åç§°.å†…éƒ¨ç±»åç§°</p>
<p>åˆ›å»ºå¯¹è±¡çš„æ ¼å¼ï¼šå¤–éƒ¨ç±»åç§°.å†…éƒ¨ç±»åç§° å¯¹è±¡åç§° = new å¤–éƒ¨ç±»æ„é€ å™¨.new å†…éƒ¨æ„é€ å™¨</p>
<ul>
<li><code>Outter.Inner in = new Outter().new Inner()</code></li>
</ul>
<p><strong>å®ä¾‹å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„å…¨éƒ¨æˆå‘˜</strong></p>
<ul>
<li>å®ä¾‹å†…éƒ¨ç±»ä¸­å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ï¼Œå¤–éƒ¨ç±»çš„é™æ€æˆå‘˜å¯ä»¥è¢«å…±äº«è®¿é—®</li>
<li>å®ä¾‹å†…éƒ¨ç±»ä¸­å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜ï¼Œå®ä¾‹å†…éƒ¨ç±»å±äºå¤–éƒ¨ç±»å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»å¯¹è±¡çš„å®ä¾‹æˆå‘˜</li>
</ul>
<h4 id="å±€éƒ¨å†…éƒ¨ç±»">å±€éƒ¨å†…éƒ¨ç±»</h4>
<p>å±€éƒ¨å†…éƒ¨ç±»ï¼šå®šä¹‰åœ¨æ–¹æ³•ä¸­ï¼Œåœ¨æ„é€ å™¨ä¸­ï¼Œä»£ç å—ä¸­ï¼Œfor å¾ªç¯ä¸­å®šä¹‰çš„å†…éƒ¨ç±»</p>
<p>å±€éƒ¨å†…éƒ¨ç±»ä¸­çš„æˆåˆ†ç‰¹ç‚¹ï¼šåªèƒ½å®šä¹‰å®ä¾‹æˆå‘˜ï¼Œä¸èƒ½å®šä¹‰é™æ€æˆå‘˜</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InnerClass</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>)&#123;</span><br><span class="line">        <span class="title class_">String</span> name;</span><br><span class="line">        <span class="keyword">class</span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">Animal</span>&#123;&#125;</span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;&#125;  </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åŒ¿åå†…éƒ¨ç±»">åŒ¿åå†…éƒ¨ç±»</h4>
<p>åŒ¿åå†…éƒ¨ç±»ï¼šæ²¡æœ‰åå­—çš„å±€éƒ¨å†…éƒ¨ç±»</p>
<p>åŒ¿åå†…éƒ¨ç±»çš„æ ¼å¼ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="type"></span>ç±»å|æŠ½è±¡ç±»|æ¥å£(å½¢å‚)&#123;</span><br><span class="line">	<span class="comment">//æ–¹æ³•é‡å†™ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒ¿åå†…éƒ¨ç±»çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰é™æ€æˆå‘˜</li>
<li>åŒ¿åå†…éƒ¨ç±»ä¸€æ—¦å†™å‡ºæ¥ï¼Œå°±ä¼šç«‹å³åˆ›å»ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡è¿”å›</li>
<li><strong>åŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡çš„ç±»å‹ç›¸å½“äºæ˜¯å½“å‰ new çš„é‚£ä¸ªçš„ç±»å‹çš„å­ç±»ç±»å‹</strong></li>
<li>åŒ¿åå†…éƒ¨ç±»å¼•ç”¨å±€éƒ¨å˜é‡å¿…é¡»æ˜¯<strong>å¸¸é‡</strong>ï¼Œåº•å±‚åˆ›å»ºä¸ºå†…éƒ¨ç±»çš„æˆå‘˜å˜é‡ï¼ˆåŸå› ï¼šJVM â†’ è¿è¡Œæœºåˆ¶ â†’ ä»£ç ä¼˜åŒ–ï¼‰</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Anonymity</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        Animal a = <span class="keyword">new</span> Animal()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span> &#123;</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;çŒ«è·‘çš„è´¼æºœ~~&quot;</span>);</span><br><span class="line">                <span class="comment">//System.out.println(n);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        a.run();</span><br><span class="line">        a.go();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Animal</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">go</span>()</span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å¼€å§‹go~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æƒé™ç¬¦">æƒé™ç¬¦</h3>
<p>æƒé™ä¿®é¥°ç¬¦ï¼šæœ‰å››ç§**ï¼ˆprivate -&gt; ç¼ºçœ -&gt; protected - &gt; public ï¼‰** å¯ä»¥ä¿®é¥°æˆå‘˜å˜é‡ï¼Œä¿®é¥°æ–¹æ³•ï¼Œä¿®é¥°æ„é€ å™¨ï¼Œå†…éƒ¨ç±»ï¼Œä¸åŒä¿®é¥°ç¬¦ä¿®é¥°çš„æˆå‘˜èƒ½å¤Ÿè¢«è®¿é—®çš„æƒé™å°†å—åˆ°é™åˆ¶</p>
<table>
<thead>
<tr>
<th>å››ç§ä¿®é¥°ç¬¦è®¿é—®æƒé™</th>
<th style="text-align:center">private</th>
<th style="text-align:center">ç¼ºçœ</th>
<th style="text-align:center">protected</th>
<th style="text-align:center">public</th>
</tr>
</thead>
<tbody>
<tr>
<td>æœ¬ç±»ä¸­</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td>æœ¬åŒ…ä¸‹çš„å­ç±»ä¸­</td>
<td style="text-align:center">X</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td>æœ¬åŒ…ä¸‹å…¶ä»–ç±»ä¸­</td>
<td style="text-align:center">X</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td>å…¶ä»–åŒ…ä¸‹çš„å­ç±»ä¸­</td>
<td style="text-align:center">X</td>
<td style="text-align:center">X</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
</tr>
<tr>
<td>å…¶ä»–åŒ…ä¸‹çš„å…¶ä»–ç±»ä¸­</td>
<td style="text-align:center">X</td>
<td style="text-align:center">X</td>
<td style="text-align:center">X</td>
<td style="text-align:center">âˆš</td>
</tr>
</tbody>
</table>
<p>protected ç”¨äºä¿®é¥°æˆå‘˜ï¼Œè¡¨ç¤ºåœ¨ç»§æ‰¿ä½“ç³»ä¸­æˆå‘˜å¯¹äºå­ç±»å¯è§</p>
<ul>
<li>åŸºç±»çš„ protected æˆå‘˜æ˜¯åŒ…å†…å¯è§çš„ï¼Œå¹¶ä¸”å¯¹å­ç±»å¯è§</li>
<li>è‹¥å­ç±»ä¸åŸºç±»ä¸åœ¨åŒä¸€åŒ…ä¸­ï¼Œé‚£ä¹ˆå­ç±»å®ä¾‹å¯ä»¥è®¿é—®å…¶ä»åŸºç±»ç»§æ‰¿è€Œæ¥çš„ protected æ–¹æ³•ï¼ˆé‡å†™ï¼‰ï¼Œè€Œä¸èƒ½è®¿é—®åŸºç±»å®ä¾‹çš„ protected æ–¹æ³•</li>
</ul>
<h3 id="ä»£ç å—">ä»£ç å—</h3>
<h4 id="é™æ€ä»£ç å—">é™æ€ä»£ç å—</h4>
<p>é™æ€ä»£ç å—çš„æ ¼å¼ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é™æ€ä»£ç å—ç‰¹ç‚¹ï¼š
<ul>
<li>å¿…é¡»æœ‰ static ä¿®é¥°ï¼Œåªèƒ½è®¿é—®é™æ€èµ„æº</li>
<li>ä¼šä¸ç±»ä¸€èµ·ä¼˜å…ˆåŠ è½½ï¼Œä¸”è‡ªåŠ¨è§¦å‘æ‰§è¡Œä¸€æ¬¡</li>
</ul>
</li>
<li>é™æ€ä»£ç å—ä½œç”¨ï¼š
<ul>
<li>å¯ä»¥åœ¨æ‰§è¡Œç±»çš„æ–¹æ³•ç­‰æ“ä½œä¹‹å‰å…ˆåœ¨é™æ€ä»£ç å—ä¸­è¿›è¡Œé™æ€èµ„æºçš„åˆå§‹åŒ–</li>
<li><strong>å…ˆæ‰§è¡Œé™æ€ä»£ç å—ï¼Œåœ¨æ‰§è¡Œ main å‡½æ•°é‡Œçš„æ“ä½œ</strong></li>
</ul>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CodeDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String schoolName ;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;String&gt; lists = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€ä»£ç å—,å±äºç±»ï¼Œä¸ç±»ä¸€èµ·åŠ è½½ä¸€æ¬¡!</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;é™æ€ä»£ç å—è¢«è§¦å‘æ‰§è¡Œ~~~~~~~&quot;</span>);</span><br><span class="line">        <span class="comment">// åœ¨é™æ€ä»£ç å—ä¸­è¿›è¡Œé™æ€èµ„æºçš„åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">        schoolName = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;mainæ–¹æ³•è¢«æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(schoolName);</span><br><span class="line">        System.<span class="keyword">out</span>.println(lists);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*é™æ€ä»£ç å—è¢«è§¦å‘æ‰§è¡Œ~~~~~~~</span></span><br><span class="line"><span class="comment">mainæ–¹æ³•è¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">å¼ ä¸‰</span></span><br><span class="line"><span class="comment">[3, 4, 5] */</span></span><br></pre></td></tr></table></figure>
<h4 id="å®ä¾‹ä»£ç å—">å®ä¾‹ä»£ç å—</h4>
<p>å®ä¾‹ä»£ç å—çš„æ ¼å¼ï¼š</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable"></span></span><br><span class="line"><span class="template-variable">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å®ä¾‹ä»£ç å—çš„ç‰¹ç‚¹ï¼š
<ul>
<li>æ—  static ä¿®é¥°ï¼Œå±äºå¯¹è±¡</li>
<li>ä¼šä¸ç±»çš„å¯¹è±¡ä¸€èµ·åŠ è½½ï¼Œæ¯æ¬¡åˆ›å»ºç±»çš„å¯¹è±¡çš„æ—¶å€™ï¼Œå®ä¾‹ä»£ç å—éƒ½ä¼šè¢«åŠ è½½ä¸”è‡ªåŠ¨è§¦å‘æ‰§è¡Œä¸€æ¬¡</li>
<li>å®ä¾‹ä»£ç å—çš„ä»£ç åœ¨åº•å±‚å®é™…ä¸Šæ˜¯æå–åˆ°æ¯ä¸ªæ„é€ å™¨ä¸­å»æ‰§è¡Œçš„</li>
</ul>
</li>
<li>å®ä¾‹ä»£ç å—çš„ä½œç”¨ï¼šå®ä¾‹ä»£ç å—å¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡ä¹‹å‰è¿›è¡Œå®ä¾‹èµ„æºçš„åˆå§‹åŒ–æ“ä½œ</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CodeDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;String&gt; lists = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    &#123;</span><br><span class="line">        name = <span class="string">&quot;ä»£ç å—&quot;</span>;</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å®ä¾‹ä»£ç å—è¢«è§¦å‘æ‰§è¡Œä¸€æ¬¡~~~~~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CodeDemo02</span>()</span>&#123; &#125;<span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CodeDemo02</span>(<span class="params">String name</span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        CodeDemo c = <span class="keyword">new</span> CodeDemo();<span class="comment">//å®ä¾‹ä»£ç å—è¢«è§¦å‘æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(c.name);</span><br><span class="line">        System.<span class="keyword">out</span>.println(c.lists);</span><br><span class="line">        <span class="keyword">new</span> CodeDemo02();<span class="comment">//å®ä¾‹ä»£ç å—è¢«è§¦å‘æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="API">API</h2>
<h3 id="Object">Object</h3>
<h4 id="åŸºæœ¬ä»‹ç»-7">åŸºæœ¬ä»‹ç»</h4>
<p>Object ç±»æ˜¯ Java ä¸­çš„ç¥–å®—ç±»ï¼Œä¸€ä¸ªç±»æˆ–è€…é»˜è®¤ç»§æ‰¿ Object ç±»ï¼Œæˆ–è€…é—´æ¥ç»§æ‰¿ Object ç±»ï¼ŒObject ç±»çš„æ–¹æ³•æ˜¯ä¸€åˆ‡å­ç±»éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<p>Object ç±»å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><code>public String toString()</code>ï¼šé»˜è®¤æ˜¯è¿”å›å½“å‰å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„åœ°å€ä¿¡æ¯ï¼šç±»çš„å…¨é™å@å†…å­˜åœ°å€ï¼Œä¾‹ï¼šStudent@735b478ï¼›
<ul>
<li>ç›´æ¥è¾“å‡ºå¯¹è±¡åç§°ï¼Œé»˜è®¤ä¼šè°ƒç”¨ toString() æ–¹æ³•ï¼Œæ‰€ä»¥çœç•¥ toString() ä¸å†™ï¼›</li>
<li>å¦‚æœè¾“å‡ºå¯¹è±¡çš„å†…å®¹ï¼Œéœ€è¦é‡å†™ toString() æ–¹æ³•ï¼ŒtoString æ–¹æ³•å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†è¢«å­ç±»é‡å†™</li>
</ul>
</li>
<li><code>public boolean equals(Object o)</code>ï¼šé»˜è®¤æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸åŒ</li>
<li><code>protected Object clone()</code>ï¼šåˆ›å»ºå¹¶è¿”å›æ­¤å¯¹è±¡çš„å‰¯æœ¬</li>
</ul>
<p>åªè¦ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ä¸€æ ·ï¼Œå°±è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> boolean equals(Object o) &#123;</span><br><span class="line">	<span class="comment">// 1.åˆ¤æ–­æ˜¯å¦è‡ªå·±å’Œè‡ªå·±æ¯”è¾ƒï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªå¯¹è±¡æ¯”è¾ƒç›´æ¥è¿”å›true</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="comment">// 2.åˆ¤æ–­è¢«æ¯”è¾ƒè€…æ˜¯å¦ä¸ºnull ,ä»¥åŠæ˜¯å¦æ˜¯å­¦ç”Ÿç±»å‹ã€‚</span></span><br><span class="line">	<span class="keyword">if</span> (o == <span class="literal">null</span> || <span class="keyword">this</span>.getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="comment">// 3.oä¸€å®šæ˜¯å­¦ç”Ÿç±»å‹ï¼Œå¼ºåˆ¶è½¬æ¢æˆå­¦ç”Ÿï¼Œå¼€å§‹æ¯”è¾ƒå†…å®¹ï¼</span></span><br><span class="line">	Student student = (Student) o;</span><br><span class="line">	<span class="keyword">return</span> age == student.age &amp;&amp;</span><br><span class="line">           sex == student.sex &amp;&amp;</span><br><span class="line">           Objects.equals(name, student.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>é¢è¯•é¢˜</strong>ï¼š== å’Œ equals çš„åŒºåˆ«</p>
<ul>
<li>== æ¯”è¾ƒçš„æ˜¯å˜é‡ï¼ˆæ ˆï¼‰å†…å­˜ä¸­å­˜æ”¾çš„å¯¹è±¡çš„ï¼ˆå †ï¼‰å†…å­˜åœ°å€ï¼Œç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„<strong>åœ°å€</strong>æ˜¯å¦ç›¸åŒï¼Œå³æ˜¯å¦æ˜¯æŒ‡ç›¸åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”è¾ƒçš„æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æŒ‡é’ˆæ“ä½œ</li>
<li>Object ç±»ä¸­çš„æ–¹æ³•ï¼Œ<strong>é»˜è®¤æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨</strong>ï¼Œé‡å†™ equals æ–¹æ³•æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„<strong>å†…å®¹</strong>æ˜¯å¦ç›¸ç­‰ï¼Œæ‰€æœ‰çš„ç±»éƒ½æ˜¯ç»§æ‰¿è‡ª java.lang.Object ç±»ï¼Œæ‰€ä»¥é€‚ç”¨äºæ‰€æœ‰å¯¹è±¡</li>
</ul>
<p>hashCode çš„ä½œç”¨ï¼š</p>
<ul>
<li>hashCode çš„å­˜åœ¨ä¸»è¦æ˜¯ç”¨äºæŸ¥æ‰¾çš„å¿«æ·æ€§ï¼Œå¦‚ Hashtableï¼ŒHashMap ç­‰ï¼Œå¯ä»¥åœ¨æ•£åˆ—å­˜å‚¨ç»“æ„ä¸­ç¡®å®šå¯¹è±¡çš„å­˜å‚¨åœ°å€</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸åŒï¼Œå°±æ˜¯é€‚ç”¨äº equals(java.lang.Object) æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ä¸€å®šè¦ç›¸åŒ</li>
<li>å“ˆå¸Œå€¼ç›¸åŒçš„æ•°æ®ä¸ä¸€å®šå†…å®¹ç›¸åŒï¼Œå†…å®¹ç›¸åŒçš„æ•°æ®å“ˆå¸Œå€¼ä¸€å®šç›¸åŒ</li>
</ul>
<h4 id="æ·±æµ…å…‹éš†">æ·±æµ…å…‹éš†</h4>
<p>Object çš„ clone() æ˜¯ protected æ–¹æ³•ï¼Œä¸€ä¸ªç±»ä¸æ˜¾å¼å»é‡å†™ clone()ï¼Œå°±ä¸èƒ½ç›´æ¥å»è°ƒç”¨è¯¥ç±»å®ä¾‹çš„ clone() æ–¹æ³•</p>
<p>æ·±æµ…æ‹·è´ï¼ˆå…‹éš†ï¼‰çš„æ¦‚å¿µï¼š</p>
<ul>
<li>
<p>æµ…æ‹·è´ (shallowCopy)ï¼š<strong>å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå€¼ä¼ é€’ï¼Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹åªæ˜¯å¤åˆ¶äº†å¼•ç”¨</strong>ï¼Œè¢«å¤åˆ¶å¯¹è±¡å±æ€§çš„æ‰€æœ‰çš„å¼•ç”¨ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯å¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘åŸæ¥å¯¹è±¡çš„å†…å­˜åœ°å€</p>
<p><strong>Java ä¸­çš„å¤åˆ¶æ–¹æ³•åŸºæœ¬éƒ½æ˜¯æµ…æ‹·è´</strong>ï¼šObject.clone()ã€System.arraycopy()ã€Arrays.copyOf()</p>
</li>
<li>
<p>æ·±æ‹·è´ (deepCopy)ï¼šå¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå€¼ä¼ é€’ï¼Œå¯¹å¼•ç”¨æ•°æ®ç±»å‹æ˜¯ä¸€ä¸ªæ•´ä¸ªç‹¬ç«‹çš„å¯¹è±¡æ‹·è´ï¼Œä¼šæ‹·è´æ‰€æœ‰çš„å±æ€§å¹¶æŒ‡å‘çš„åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯æŠŠæ‰€æœ‰å±æ€§å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„å†…å­˜ï¼Œå¢åŠ ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ–°å†…å­˜ã€‚æ‰€ä»¥ä½¿ç”¨æ·±æ‹·è´çš„æƒ…å†µä¸‹ï¼Œé‡Šæ”¾å†…å­˜çš„æ—¶å€™ä¸ä¼šå‡ºç°ä½¿ç”¨æµ…æ‹·è´æ—¶é‡Šæ”¾åŒä¸€å—å†…å­˜çš„é”™è¯¯</p>
</li>
</ul>
<p>Cloneable æ¥å£æ˜¯ä¸€ä¸ªæ ‡è¯†æ€§æ¥å£ï¼Œå³è¯¥æ¥å£ä¸åŒ…å«ä»»ä½•æ–¹æ³•ï¼ˆåŒ…æ‹¬ cloneï¼‰ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªç±»æƒ³åˆæ³•çš„è¿›è¡Œå…‹éš†ï¼Œé‚£ä¹ˆå°±å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ï¼Œåœ¨ä½¿ç”¨ clone() æ–¹æ³•æ—¶ï¼Œè‹¥è¯¥ç±»æœªå®ç° Cloneable æ¥å£ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</p>
<ul>
<li>
<p>Clone &amp; Copyï¼š<code>Student s = new Student</code></p>
<p><code>Student s1 = s</code>ï¼šåªæ˜¯ copy äº†ä¸€ä¸‹ referenceï¼Œs å’Œ s1 æŒ‡å‘å†…å­˜ä¸­åŒä¸€ä¸ª Objectï¼Œå¯¹å¯¹è±¡çš„ä¿®æ”¹ä¼šå½±å“å¯¹æ–¹</p>
<p><code>Student s2 = s.clone()</code>ï¼šä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ Student å¯¹è±¡ï¼Œå¹¶ä¸”å’Œ s å…·æœ‰ç›¸åŒçš„å±æ€§å€¼å’Œæ–¹æ³•</p>
</li>
<li>
<p>Shallow Clone &amp; Deep Cloneï¼š</p>
<p>æµ…å…‹éš†ï¼šObject ä¸­çš„ clone() æ–¹æ³•åœ¨å¯¹æŸä¸ªå¯¹è±¡å…‹éš†æ—¶å¯¹å…¶ä»…ä»…æ˜¯ç®€å•åœ°æ‰§è¡ŒåŸŸå¯¹åŸŸçš„ copy</p>
<ul>
<li>å¯¹åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»çš„å…‹éš†æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚Stringã€Integer ç­‰åŒ…è£…ç±»å‹åœ¨å†…å­˜ä¸­æ˜¯<strong>ä¸å¯ä»¥è¢«æ”¹å˜çš„å¯¹è±¡</strong>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å…‹éš†æ—¶å¯ä»¥è§†ä¸ºåŸºæœ¬ç±»å‹ï¼Œåªéœ€æµ…å…‹éš†å¼•ç”¨å³å¯</li>
<li>å¦‚æœå¯¹ä¸€ä¸ªå¼•ç”¨ç±»å‹è¿›è¡Œå…‹éš†æ—¶åªæ˜¯å…‹éš†äº†å®ƒçš„å¼•ç”¨ï¼Œå’ŒåŸå§‹å¯¹è±¡å…±äº«å¯¹è±¡æˆå‘˜å˜é‡</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Object%E6%B5%85%E5%85%8B%E9%9A%86.jpg" alt="img"></p>
<p>æ·±å…‹éš†ï¼šåœ¨å¯¹æ•´ä¸ªå¯¹è±¡æµ…å…‹éš†åï¼Œå¯¹å…¶å¼•ç”¨å˜é‡è¿›è¡Œå…‹éš†ï¼Œå¹¶å°†å…¶æ›´æ–°åˆ°æµ…å…‹éš†å¯¹è±¡ä¸­å»</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>  <span class="keyword">implements</span> <span class="title class_">Cloneable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> name;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Integer</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Date</span> date;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title class_">Object</span> <span class="title function_">clone</span>() throws <span class="title class_">CloneNotSupportedException</span> &#123;</span><br><span class="line">        <span class="title class_">Student</span> s = (<span class="title class_">Student</span>) <span class="variable language_">super</span>.<span class="title function_">clone</span>();</span><br><span class="line">        s.<span class="property">date</span> = (<span class="title class_">Date</span>) date.<span class="title function_">clone</span>();</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>SDP â†’ åˆ›å»ºå‹ â†’ åŸå‹æ¨¡å¼</p>
<h3 id="Objects">Objects</h3>
<p>Objects ç±»ä¸ Object æ˜¯ç»§æ‰¿å…³ç³»</p>
<p>Objects çš„æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>public static boolean equals(Object a, Object b)</code>ï¼šæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> <span class="title function_">equals</span>(<span class="params"><span class="built_in">Object</span> a, <span class="built_in">Object</span> b</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿›è¡Œéç©ºåˆ¤æ–­ï¼Œä»è€Œå¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">return</span> a == b || a != <span class="literal">null</span> &amp;&amp; a.<span class="title function_">equals</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>public static boolean isNull(Object obj)</code>ï¼šåˆ¤æ–­å˜é‡æ˜¯å¦ä¸º null ï¼Œä¸º null è¿”å› true</p>
</li>
<li>
<p><code>public static String toString(å¯¹è±¡)</code>ï¼šè¿”å›å‚æ•°ä¸­å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</p>
</li>
<li>
<p><code>public static String toString(å¯¹è±¡, é»˜è®¤å­—ç¬¦ä¸²)</code>ï¼šè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</p>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ObjectsDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        Student s1 = <span class="literal">null</span>;</span><br><span class="line">        Student s2 = <span class="keyword">new</span> Student();</span><br><span class="line">        System.<span class="keyword">out</span>.println(Objects.<span class="keyword">equals</span>(s1 , s2));<span class="comment">//æ¨èä½¿ç”¨</span></span><br><span class="line">        <span class="comment">// System.out.println(s1.equals(s2)); // ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line"> </span><br><span class="line">        System.<span class="keyword">out</span>.println(Objects.isNull(s1));</span><br><span class="line">        System.<span class="keyword">out</span>.println(s1 == <span class="literal">null</span>);<span class="comment">//ç›´æ¥åˆ¤æ–­æ¯”è¾ƒå¥½</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Student</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="String">String</h3>
<h4 id="åŸºæœ¬ä»‹ç»-8">åŸºæœ¬ä»‹ç»</h4>
<p>String è¢«å£°æ˜ä¸º finalï¼Œå› æ­¤ä¸å¯è¢«ç»§æ‰¿ <strong>ï¼ˆInteger ç­‰åŒ…è£…ç±»ä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ï¼‰</strong></p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span> <span class="keyword">implements</span> <span class="title class_ inherited__">java</span>.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123;</span><br><span class="line"> 	<span class="comment">/** The value is used for character storage. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="built_in">char</span> value[];</span><br><span class="line">    <span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> hash; <span class="comment">// Default to 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Java 9 ä¹‹åï¼ŒString ç±»çš„å®ç°æ”¹ç”¨ byte æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä½¿ç”¨ <code>coder</code> æ¥æ ‡è¯†ä½¿ç”¨äº†å“ªç§ç¼–ç </p>
<p>value æ•°ç»„è¢«å£°æ˜ä¸º finalï¼Œè¿™æ„å‘³ç€ value æ•°ç»„åˆå§‹åŒ–ä¹‹åå°±ä¸èƒ½å†å¼•ç”¨å…¶å®ƒæ•°ç»„ï¼Œå¹¶ä¸” String å†…éƒ¨æ²¡æœ‰æ”¹å˜ value æ•°ç»„çš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥<strong>ä¿è¯ String ä¸å¯å˜ï¼Œä¹Ÿä¿è¯çº¿ç¨‹å®‰å…¨</strong></p>
<p>æ³¨æ„ï¼šä¸èƒ½æ”¹å˜çš„æ„æ€æ˜¯<strong>æ¯æ¬¡æ›´æ”¹å­—ç¬¦ä¸²éƒ½ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡</strong>ï¼Œå¹¶ä¸æ˜¯å¯¹åŸå§‹å¯¹è±¡è¿›è¡Œæ”¹å˜</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> s = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">s = s + <span class="string">&quot;cd&quot;</span>; <span class="comment">//s = abccd æ–°å¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<h4 id="å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•</h4>
<p>å¸¸ç”¨ APIï¼š</p>
<ul>
<li><code>public boolean equals(String s)</code>ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒã€åŒºåˆ†å¤§å°å†™</li>
<li><code>public boolean equalsIgnoreCase(String anotherString)</code>ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹ï¼Œå¿½ç•¥å¤§å°å†™</li>
<li><code>public int length()</code>ï¼šè¿”å›æ­¤å­—ç¬¦ä¸²çš„é•¿åº¦</li>
<li><code>public String trim()</code>ï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶å€¼ä¸ºæ­¤å­—ç¬¦ä¸²ï¼Œå¹¶åˆ é™¤ä»»ä½•å‰å¯¼å’Œå°¾éšç©ºæ ¼</li>
<li><code>public String[] split(String regex)</code>ï¼šå°†å­—ç¬¦ä¸²æŒ‰ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„</li>
<li><code>public char charAt(int index)</code>ï¼šå–ç´¢å¼•å¤„çš„å€¼</li>
<li><code>public char[] toCharArray()</code>ï¼šå°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºå­—ç¬¦æ•°ç»„åè¿”å›</li>
<li><code>public boolean startsWith(String prefix)</code>ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å¤´</li>
<li><code>public int indexOf(String str)</code>ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„å­—ç¬¦ä¸²å†…çš„ç´¢å¼•ï¼Œæ²¡æœ‰è¿”å› -1</li>
<li><code>public int lastIndexOf(String str)</code>ï¼šè¿”å›å­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç° str çš„ç´¢å¼•ï¼Œæ²¡æœ‰è¿”å› -1</li>
<li><code>public String substring(int beginIndex)</code>ï¼šè¿”å›å­å­—ç¬¦ä¸²ï¼Œä»¥åŸå­—ç¬¦ä¸²æŒ‡å®šç´¢å¼•å¤„åˆ°ç»“å°¾</li>
<li><code>public String substring(int i, int j)</code>ï¼šæŒ‡å®šç´¢å¼•å¤„æ‰©å±•åˆ° j - 1 çš„ä½ç½®ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¸º j - i</li>
<li><code>public String toLowerCase()</code>ï¼šå°†æ­¤ String æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™ï¼Œä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒçš„è§„åˆ™</li>
<li><code>public String toUpperCase()</code>ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒçš„è§„åˆ™å°†æ­¤ String æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™</li>
<li><code>public String replace(CharSequence target, CharSequence replacement)</code>ï¼šä½¿ç”¨æ–°å€¼ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„æ—§å€¼æ›¿æ¢ï¼Œå¾—åˆ°æ–°çš„å­—ç¬¦ä¸²</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">String</span> s = <span class="number">123</span>-<span class="number">78</span>;</span><br><span class="line"><span class="attribute">s</span>.replace(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>);//<span class="number">12378</span></span><br></pre></td></tr></table></figure>
<h4 id="æ„é€ æ–¹å¼">æ„é€ æ–¹å¼</h4>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li><code>public String()</code>ï¼šåˆ›å»ºä¸€ä¸ªç©ºç™½å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¸å«æœ‰ä»»ä½•å†…å®¹</li>
<li><code>public String(char[] chs)</code>ï¼šæ ¹æ®å­—ç¬¦æ•°ç»„çš„å†…å®¹ï¼Œæ¥åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</li>
<li><code>public String(String original)</code>ï¼šæ ¹æ®ä¼ å…¥çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œæ¥åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</li>
</ul>
<p>ç›´æ¥èµ‹å€¼ï¼š<code>String s = &quot;abc&quot;</code> ç›´æ¥èµ‹å€¼çš„æ–¹å¼åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå†…å®¹å°±æ˜¯ abc</p>
<ul>
<li>é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºï¼šé€šè¿‡ new åˆ›å»ºçš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œæ¯ä¸€æ¬¡ new éƒ½ä¼šç”³è¯·ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œè™½ç„¶å†…å®¹ç›¸åŒï¼Œä½†æ˜¯åœ°å€å€¼ä¸åŒï¼Œ<strong>è¿”å›å †å†…å­˜ä¸­å¯¹è±¡çš„å¼•ç”¨</strong></li>
<li>ç›´æ¥èµ‹å€¼æ–¹å¼åˆ›å»ºï¼šä»¥ <code>&quot; &quot;</code> æ–¹å¼ç»™å‡ºçš„å­—ç¬¦ä¸²ï¼Œåªè¦å­—ç¬¦åºåˆ—ç›¸åŒï¼ˆé¡ºåºå’Œå¤§å°å†™ï¼‰ï¼Œæ— è®ºåœ¨ç¨‹åºä»£ç ä¸­å‡ºç°å‡ æ¬¡ï¼ŒJVM éƒ½åªä¼š<strong>åœ¨ String Pool ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡</strong>ï¼Œå¹¶åœ¨å­—ç¬¦ä¸²æ± ä¸­ç»´æŠ¤</li>
</ul>
<p><code>String str = new String(&quot;abc&quot;)</code> åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼šå­—ç¬¦ä¸²æ± ä¸­å·²ç»å­˜åœ¨ abc å¯¹è±¡ï¼Œé‚£ä¹ˆç›´æ¥åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ”¾å…¥å †ä¸­ï¼Œè¿”å›å †å†…å¼•ç”¨</li>
<li>åˆ›å»ºä¸¤ä¸ªå¯¹è±¡ï¼šå­—ç¬¦ä¸²æ± ä¸­æœªæ‰¾åˆ° abc å¯¹è±¡ï¼Œé‚£ä¹ˆåˆ†åˆ«åœ¨å †ä¸­å’Œå­—ç¬¦ä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå­—ç¬¦ä¸²æ± ä¸­çš„æ¯”è¾ƒéƒ½æ˜¯é‡‡ç”¨ equals()  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/String%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%AD%97%E8%8A%82%E7%A0%81.png" alt="img"></li>
</ul>
<p><code>new String(&quot;a&quot;) + new String(&quot;b&quot;)</code> åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼š</p>
<ul>
<li>
<p>å¯¹è±¡ 1ï¼šnew StringBuilder()</p>
</li>
<li>
<p>å¯¹è±¡ 2ï¼šnew String(â€œaâ€)ã€å¯¹è±¡ 3ï¼šå¸¸é‡æ± ä¸­çš„ a</p>
</li>
<li>
<p>å¯¹è±¡ 4ï¼šnew String(â€œbâ€)ã€å¯¹è±¡ 5ï¼šå¸¸é‡æ± ä¸­çš„ b <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/String%E6%8B%BC%E6%8E%A5%E6%96%B9%E6%B3%95%E5%AD%97%E8%8A%82%E7%A0%81.png" alt="img"></p>
</li>
<li>
<p>StringBuilder çš„ toString()ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(value, <span class="number">0</span>, count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹è±¡ 6ï¼šnew String(â€œabâ€)</li>
<li>StringBuilder çš„ toString() è°ƒç”¨ï¼Œ<strong>åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰ç”Ÿæˆ ab</strong>ï¼Œnew String(â€œabâ€) ä¼šåˆ›å»ºä¸¤ä¸ªå¯¹è±¡å› ä¸ºä¼ å‚æ•°çš„æ—¶å€™ä½¿ç”¨å­—é¢é‡åˆ›å»ºäº†å¯¹è±¡ abï¼Œå½“ä½¿ç”¨æ•°ç»„æ„é€  String å¯¹è±¡æ—¶ï¼Œæ²¡æœ‰åŠ å…¥å¸¸é‡æ± çš„æ“ä½œ</li>
</ul>
</li>
</ul>
<h4 id="String-Pool">String Pool</h4>
<h5 id="åŸºæœ¬ä»‹ç»-9">åŸºæœ¬ä»‹ç»</h5>
<p>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Pool / StringTable / ä¸²æ± ï¼‰ä¿å­˜ç€æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆliteral stringsï¼‰ï¼Œè¿™äº›å­—é¢é‡åœ¨ç¼–è¯‘æ—¶æœŸå°±ç¡®å®šï¼Œå¸¸é‡æ± ç±»ä¼¼äº Java ç³»ç»Ÿçº§åˆ«æä¾›çš„<strong>ç¼“å­˜</strong>ï¼Œå­˜æ”¾å¯¹è±¡å’Œå¼•ç”¨</p>
<ul>
<li>StringTableï¼Œç±»ä¼¼ HashTable ç»“æ„ï¼Œé€šè¿‡ <code>-XX:StringTableSize</code> è®¾ç½®å¤§å°ï¼ŒJDK 1.8 ä¸­é»˜è®¤ 60013</li>
<li>å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²ä»…æ˜¯ç¬¦å·ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰å˜ä¸ºå¯¹è±¡ï¼Œå¯ä»¥é¿å…é‡å¤åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</li>
<li>å­—ç¬¦ä¸²<strong>å˜é‡</strong>çš„æ‹¼æ¥çš„åŸç†æ˜¯ StringBuilder#appendï¼Œappend æ–¹æ³•æ¯”å­—ç¬¦ä¸²æ‹¼æ¥æ•ˆç‡é«˜ï¼ˆJDK 1.8ï¼‰</li>
<li>å­—ç¬¦ä¸²<strong>å¸¸é‡</strong>æ‹¼æ¥çš„åŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ–ï¼Œæ‹¼æ¥ç»“æœæ”¾å…¥å¸¸é‡æ± </li>
<li>å¯ä»¥ä½¿ç”¨ String çš„ intern() æ–¹æ³•åœ¨è¿è¡Œè¿‡ç¨‹å°†å­—ç¬¦ä¸²æ·»åŠ åˆ° String Pool ä¸­</li>
</ul>
<h5 id="intern">intern()</h5>
<p>JDK 1.8ï¼šå½“ä¸€ä¸ªå­—ç¬¦ä¸²è°ƒç”¨ intern() æ–¹æ³•æ—¶ï¼Œå¦‚æœ String Pool ä¸­ï¼š</p>
<ul>
<li>å­˜åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å’Œè¯¥å­—ç¬¦ä¸²å€¼ç›¸ç­‰ï¼Œå°±ä¼šè¿”å› String Pool ä¸­å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼ˆéœ€è¦å˜é‡æ¥æ”¶ï¼‰</li>
<li>ä¸å­˜åœ¨ï¼Œä¼šæŠŠå¯¹è±¡çš„<strong>å¼•ç”¨åœ°å€</strong>å¤åˆ¶ä¸€ä»½æ”¾å…¥ä¸²æ± ï¼Œå¹¶è¿”å›ä¸²æ± ä¸­çš„å¼•ç”¨åœ°å€ï¼Œå‰ææ˜¯å †å†…å­˜æœ‰è¯¥å¯¹è±¡ï¼Œå› ä¸º Pool åœ¨å †ä¸­ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ä¸å†åˆ›å»ºæ–°å¯¹è±¡</li>
</ul>
<p>JDK 1.6ï¼šå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰å°±ä¸æ”¾å…¥ï¼Œè¿”å›å·²æœ‰çš„ä¸²æ± ä¸­çš„å¯¹è±¡çš„å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰ä¼šæŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œæ”¾å…¥ä¸²æ± ï¼ŒæŠŠä¸²æ± ä¸­çš„å¯¹è±¡è¿”å›</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class Demo &#123;</span><br><span class="line">    <span class="regexp">//</span> å¸¸é‡æ± ä¸­çš„ä¿¡æ¯éƒ½åŠ è½½åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè¿™æ—¶a b abæ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·ï¼Œè¿˜ä¸æ˜¯javaå­—ç¬¦ä¸²å¯¹è±¡ï¼Œæ˜¯æ‡’æƒ°çš„</span><br><span class="line">    <span class="regexp">//</span> ldc <span class="comment">#2 ä¼šæŠŠ a ç¬¦å·å˜ä¸º &quot;a&quot; å­—ç¬¦ä¸²å¯¹è±¡     ldc:åç¼–è¯‘åçš„æŒ‡ä»¤</span></span><br><span class="line">    <span class="regexp">//</span> ldc <span class="comment">#3 ä¼šæŠŠ b ç¬¦å·å˜ä¸º &quot;b&quot; å­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">    <span class="regexp">//</span> ldc <span class="comment">#4 ä¼šæŠŠ ab ç¬¦å·å˜ä¸º &quot;ab&quot; å­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        String s1 = <span class="string">&quot;a&quot;</span>; 	<span class="regexp">//</span> æ‡’æƒ°çš„</span><br><span class="line">        String s2 = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">        String s3 = <span class="string">&quot;ab&quot;</span>;	<span class="regexp">//</span> ä¸²æ± </span><br><span class="line">        </span><br><span class="line">        String s4 = s1 + s2;	<span class="regexp">//</span> è¿”å›çš„æ˜¯å †å†…åœ°å€</span><br><span class="line">        <span class="regexp">//</span> åŸç†ï¼šnew StringBuilder().append(<span class="string">&quot;a&quot;</span>).append(<span class="string">&quot;b&quot;</span>).toString()  new String(<span class="string">&quot;ab&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        String s5 = <span class="string">&quot;a&quot;</span> + <span class="string">&quot;b&quot;</span>;  <span class="regexp">//</span> javac åœ¨ç¼–è¯‘æœŸé—´çš„ä¼˜åŒ–ï¼Œç»“æœå·²ç»åœ¨ç¼–è¯‘æœŸç¡®å®šä¸ºab</span><br><span class="line"></span><br><span class="line">        System.out.println(s3 == s4); <span class="regexp">//</span> false</span><br><span class="line">        System.out.println(s3 == s5); <span class="regexp">//</span> true</span><br><span class="line"></span><br><span class="line">        String x2 = new String(<span class="string">&quot;c&quot;</span>) + new String(<span class="string">&quot;d&quot;</span>); <span class="regexp">//</span> new String(<span class="string">&quot;cd&quot;</span>)</span><br><span class="line">        <span class="regexp">//</span> è™½ç„¶ newï¼Œä½†æ˜¯åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± æ²¡æœ‰ cd å¯¹è±¡ï¼Œå› ä¸º toString() æ–¹æ³•</span><br><span class="line">        x2.intern();</span><br><span class="line">        String x1 = <span class="string">&quot;cd&quot;</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(x1 == x2); <span class="regexp">//</span>true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>== æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å…·ä½“çš„å€¼</li>
<li>== æ¯”è¾ƒå¼•ç”¨æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å¯¹è±¡åœ°å€å€¼</li>
</ul>
<p>ç»“è®ºï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> s1 = <span class="string">&quot;ab&quot;</span>;								<span class="comment">// ä»…æ”¾å…¥ä¸²æ± </span></span><br><span class="line"><span class="built_in">String</span> s2 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;a&quot;</span>) + <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;b&quot;</span>);	<span class="comment">// ä»…æ”¾å…¥å †</span></span><br><span class="line"><span class="comment">// ä¸Šé¢ä¸¤æ¡æŒ‡ä»¤çš„ç»“æœå’Œä¸‹é¢çš„ æ•ˆæœ ç›¸åŒ</span></span><br><span class="line"><span class="built_in">String</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;ab&quot;</span>);</span><br></pre></td></tr></table></figure>
<h5 id="å¸¸è§é—®é¢˜-3">å¸¸è§é—®é¢˜</h5>
<p>é—®é¢˜ä¸€ï¼š</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">    <span class="built_in">String</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;a&quot;</span>) + <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;b&quot;</span>);//<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;ab&quot;</span>)</span><br><span class="line">    <span class="regexp">//</span>åœ¨ä¸Šä¸€è¡Œä»£ç æ‰§è¡Œå®Œä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰<span class="string">&quot;ab&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> s2 = s.intern();</span><br><span class="line">    //jdk6ï¼šä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²<span class="string">&quot;ab&quot;</span></span><br><span class="line">    //jdk8ï¼šä¸²æ± ä¸­æ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²<span class="string">&quot;ab&quot;</span>,è€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¼•ç”¨æŒ‡å‘ <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;ab&quot;</span>)ï¼Œå°†æ­¤å¼•ç”¨è¿”å›</span><br><span class="line"></span><br><span class="line">    System.out.println(s2 == <span class="string">&quot;ab&quot;</span>);//jdk6:<span class="literal">true</span>  jdk8:<span class="literal">true</span></span><br><span class="line">    System.out.println(s == <span class="string">&quot;ab&quot;</span>);//jdk6:<span class="literal">false</span>  jdk8:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜äºŒï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">    String str1 = <span class="keyword">new</span> <span class="constructor">StringBuilder(<span class="string">&quot;58&quot;</span>)</span>.append(<span class="string">&quot;tongcheng&quot;</span>).<span class="keyword">to</span><span class="constructor">String()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(str1<span class="operator"> == </span>str1.intern<span class="literal">()</span>);<span class="comment">//trueï¼Œå­—ç¬¦ä¸²æ± ä¸­ä¸å­˜åœ¨ï¼ŒæŠŠå †ä¸­çš„å¼•ç”¨å¤åˆ¶ä¸€ä»½æ”¾å…¥ä¸²æ± </span></span><br><span class="line"></span><br><span class="line">    String str2 = <span class="keyword">new</span> <span class="constructor">StringBuilder(<span class="string">&quot;ja&quot;</span>)</span>.append(<span class="string">&quot;va&quot;</span>).<span class="keyword">to</span><span class="constructor">String()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(str2<span class="operator"> == </span>str2.intern<span class="literal">()</span>);<span class="comment">//falseï¼Œå­—ç¬¦ä¸²æ± ä¸­å­˜åœ¨ï¼Œç›´æ¥è¿”å›å·²ç»å­˜åœ¨çš„å¼•ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸå› ï¼š</p>
<ul>
<li>
<p>System ç±»å½“è°ƒç”¨ Version çš„é™æ€æ–¹æ³•ï¼Œå¯¼è‡´ Version åˆå§‹åŒ–ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initializeSystemClass</span>()</span> &#123;</span><br><span class="line">    sun.misc.Version.<span class="keyword">init</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Version ç±»åˆå§‹åŒ–æ—¶éœ€è¦å¯¹é™æ€å¸¸é‡å­—æ®µåˆå§‹åŒ–ï¼Œè¢« launcher_name é™æ€å¸¸é‡å­—æ®µæ‰€å¼•ç”¨çš„ <code>&quot;java&quot;</code> å­—ç¬¦ä¸²å­—é¢é‡å°±è¢«æ”¾å…¥çš„å­—ç¬¦ä¸²å¸¸é‡æ± ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> sun.misc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Version</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">launcher_name</span> <span class="operator">=</span> <span class="string">&quot;java&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">java_version</span> <span class="operator">=</span> <span class="string">&quot;1.8.0_221&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">java_runtime_name</span> <span class="operator">=</span> <span class="string">&quot;Java(TM) SE Runtime Environment&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">java_profile_name</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">java_runtime_version</span> <span class="operator">=</span> <span class="string">&quot;1.8.0_221-b11&quot;</span>;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="å†…å­˜ä½ç½®">å†…å­˜ä½ç½®</h5>
<p>Java 7 ä¹‹å‰ï¼ŒString Pool è¢«æ”¾åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œå±äºæ°¸ä¹…ä»£ï¼›Java 7 ä»¥åï¼ŒString Pool è¢«ç§»åˆ°å †ä¸­ï¼Œè¿™æ˜¯å› ä¸ºæ°¸ä¹…ä»£çš„ç©ºé—´æœ‰é™ï¼Œåœ¨å¤§é‡ä½¿ç”¨å­—ç¬¦ä¸²çš„åœºæ™¯ä¸‹ä¼šå¯¼è‡´ OutOfMemoryError é”™è¯¯</p>
<p>æ¼”ç¤º StringTable ä½ç½®ï¼š</p>
<ul>
<li>
<p><code>-Xmx10m</code> è®¾ç½®å †å†…å­˜ 10m</p>
</li>
<li>
<p>åœ¨ JDK8 ä¸‹è®¾ç½®ï¼š <code>-Xmx10m -XX:-UseGCOverheadLimit</code>ï¼ˆè¿è¡Œå‚æ•°åœ¨ Run Configurations VM optionsï¼‰</p>
</li>
<li>
<p>åœ¨ JDK6 ä¸‹è®¾ç½®ï¼š <code>-XX:MaxPermSize=10m</code></p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span>(<span class="built_in">String</span>[] args) <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    List&lt;<span class="built_in">String</span>&gt; list = <span class="keyword">new </span><span class="class title_">ArrayList</span>&lt;<span class="built_in">String</span>&gt;();</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">260000</span>; j++) &#123;</span><br><span class="line">            list.<span class="property">add</span>(<span class="built_in">String</span>.<span class="property">valueOf</span>(j).<span class="property">intern</span>());</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="title function_">catch</span> (Throwable e) &#123;</span><br><span class="line">        e.<span class="property">printStackTrace</span>();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.<span class="property">out</span>.<span class="property">println</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%86%85%E5%AD%98%E5%9B%BE%E5%AF%B9%E6%AF%94.png" alt="img"></p>
<h4 id="ä¼˜åŒ–å¸¸é‡æ± ">ä¼˜åŒ–å¸¸é‡æ± </h4>
<p>ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>è°ƒæ•´ -XX:StringTableSize=æ¡¶ä¸ªæ•°ï¼Œæ•°é‡è¶Šå°‘ï¼Œæ€§èƒ½è¶Šå·®</li>
<li>intern å°†å­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥å¸¸é‡æ± ï¼Œé€šè¿‡å¤ç”¨å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼Œå‡å°‘å†…å­˜å ç”¨</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤º intern å‡å°‘å†…å­˜å ç”¨</span></span><br><span class="line"><span class="comment"> * -XX:StringTableSize=200000 -XX:+PrintStringTableStatistics</span></span><br><span class="line"><span class="comment"> * -Xsx500m -Xmx500m -XX:+PrintStringTableStatistics -XX:StringTableSize=200000</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> Demo1_25 &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws IOException &#123;</span><br><span class="line">        List&lt;String&gt; address = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">in</span>.<span class="keyword">read</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            //å¾ˆå¤šæ•°æ®</span><br><span class="line">            try (BufferedReader reader = <span class="built_in">new</span> BufferedReader(<span class="built_in">new</span> InputStreamReader(<span class="built_in">new</span> FileInputStream(&quot;linux.words&quot;), &quot;utf-8&quot;))) &#123;</span><br><span class="line">                String <span class="type">line</span> = <span class="keyword">null</span>;</span><br><span class="line">                long start = <span class="keyword">System</span>.nanoTime();</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    <span class="type">line</span> = reader.readLine();</span><br><span class="line">                    <span class="keyword">if</span>(<span class="type">line</span> == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    address.<span class="keyword">add</span>(<span class="type">line</span>.intern());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;cost:&quot; +(<span class="keyword">System</span>.nanoTime()-<span class="keyword">start</span>)/<span class="number">1000000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">in</span>.<span class="keyword">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸å¯å˜å¥½å¤„">ä¸å¯å˜å¥½å¤„</h4>
<ul>
<li>å¯ä»¥ç¼“å­˜ hash å€¼ï¼Œä¾‹å¦‚ String ç”¨åš HashMap çš„ keyï¼Œä¸å¯å˜çš„ç‰¹æ€§å¯ä»¥ä½¿å¾— hash å€¼ä¹Ÿä¸å¯å˜ï¼Œåªè¦è¿›è¡Œä¸€æ¬¡è®¡ç®—</li>
<li>String Pool çš„éœ€è¦ï¼Œå¦‚æœä¸€ä¸ª String å¯¹è±¡å·²ç»è¢«åˆ›å»ºè¿‡äº†ï¼Œå°±ä¼šä» String Pool ä¸­å–å¾—å¼•ç”¨ï¼Œåªæœ‰ String æ˜¯ä¸å¯å˜çš„ï¼Œæ‰å¯èƒ½ä½¿ç”¨ String Pool</li>
<li>å®‰å…¨æ€§ï¼ŒString ç»å¸¸ä½œä¸ºå‚æ•°ï¼ŒString ä¸å¯å˜æ€§å¯ä»¥ä¿è¯å‚æ•°ä¸å¯å˜ã€‚ä¾‹å¦‚åœ¨ä½œä¸ºç½‘ç»œè¿æ¥å‚æ•°çš„æƒ…å†µä¸‹å¦‚æœ String æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œè¿æ¥è¿‡ç¨‹ä¸­ï¼ŒString è¢«æ”¹å˜ï¼Œæ”¹å˜ String çš„é‚£ä¸€æ–¹ä»¥ä¸ºç°åœ¨è¿æ¥çš„æ˜¯å…¶å®ƒä¸»æœºï¼Œè€Œå®é™…æƒ…å†µå´ä¸ä¸€å®šæ˜¯</li>
<li>String ä¸å¯å˜æ€§å¤©ç”Ÿå…·å¤‡çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å®‰å…¨åœ°ä½¿ç”¨</li>
<li>é˜²æ­¢å­ç±»ç»§æ‰¿ï¼Œç ´å String çš„ API çš„ä½¿ç”¨</li>
</ul>
<h3 id="StringBuilder">StringBuilder</h3>
<p>String StringBuffer å’Œ StringBuilder åŒºåˆ«ï¼š</p>
<ul>
<li>String : <strong>ä¸å¯å˜</strong>çš„å­—ç¬¦åºåˆ—ï¼Œçº¿ç¨‹å®‰å…¨</li>
<li>StringBuffer : <strong>å¯å˜</strong>çš„å­—ç¬¦åºåˆ—ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œåº•å±‚æ–¹æ³•åŠ  synchronizedï¼Œæ•ˆç‡ä½</li>
<li>StringBuilder : <strong>å¯å˜</strong>çš„å­—ç¬¦åºåˆ—ï¼ŒJDK5.0 æ–°å¢ï¼›çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜</li>
</ul>
<p>ç›¸åŒç‚¹ï¼šåº•å±‚ä½¿ç”¨ char[] å­˜å‚¨</p>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li><code>public StringBuilder()</code>ï¼šåˆ›å»ºä¸€ä¸ªç©ºç™½å¯å˜å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¸å«æœ‰ä»»ä½•å†…å®¹</li>
<li><code>public StringBuilder(String str)</code>ï¼šæ ¹æ®å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œæ¥åˆ›å»ºå¯å˜å­—ç¬¦ä¸²å¯¹è±¡</li>
</ul>
<p>å¸¸ç”¨API :</p>
<ul>
<li><code>public StringBuilder append(ä»»æ„ç±»å‹)</code>ï¼šæ·»åŠ æ•°æ®ï¼Œå¹¶è¿”å›å¯¹è±¡æœ¬èº«</li>
<li><code>public StringBuilder reverse()</code>ï¼šè¿”å›ç›¸åçš„å­—ç¬¦åºåˆ—</li>
<li><code>public String toString()</code>ï¼šé€šè¿‡ toString() å°±å¯ä»¥å®ç°æŠŠ StringBuilder è½¬æ¢ä¸º String</li>
</ul>
<p>å­˜å‚¨åŸç†ï¼š</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">char data[] = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line"><span class="built_in">StringBuffer</span> sb1 = <span class="keyword">new</span> <span class="built_in">StringBuffer</span>();<span class="comment">//new byte[16] </span></span><br><span class="line">sb1.append(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//value[0] = &#x27;a&#x27;;</span></span><br></pre></td></tr></table></figure>
<p>append æºç ï¼šæ‰©å®¹ä¸ºäºŒå€</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> AbstractStringBuilder append(String <span class="built_in">str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">str</span> == <span class="literal">null</span>) <span class="keyword">return</span> appendNull();</span><br><span class="line">    <span class="built_in">int</span> len = <span class="built_in">str</span>.length();</span><br><span class="line">    ensureCapacityInternal(<span class="keyword">count</span> + len);</span><br><span class="line">    <span class="built_in">str</span>.getChars(<span class="number">0</span>, len, value, <span class="keyword">count</span>);</span><br><span class="line">    <span class="keyword">count</span> += len;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> ensureCapacityInternal(<span class="built_in">int</span> minimumCapacity) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè¶…è¿‡æ•°ç»„é•¿åº¦å°±æ–°çš„charæ•°ç»„ï¼ŒæŠŠæ•°æ®æ‹·è´è¿‡å»</span></span><br><span class="line">    <span class="keyword">if</span> (minimumCapacity - value.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//int newCapacity = (value.length &lt;&lt; 1) + 2;æ¯æ¬¡æ‰©å®¹2å€+2</span></span><br><span class="line">        value = Arrays.copyOf(value, newCapacity(minimumCapacity));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> getChars(<span class="built_in">int</span> srcBegin, <span class="built_in">int</span> srcEnd, <span class="built_in">char</span> dst[], <span class="built_in">int</span> dstBegin) &#123;</span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦å¤åˆ¶åˆ°ç›®æ ‡å­—ç¬¦æ•°ç»„ä¸­</span></span><br><span class="line">	<span class="comment">// å­—ç¬¦ä¸²è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ­¤æ—¶valueæ˜¯å­—ç¬¦ä¸²çš„å€¼ï¼Œdstæ˜¯ç›®æ ‡å­—ç¬¦æ•°ç»„</span></span><br><span class="line">    System.arraycopy(value, srcBegin, dst, dstBegin, srcEnd - srcBegin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Arrays">Arrays</h3>
<p>Array çš„å·¥å…·ç±» Arrays</p>
<p>å¸¸ç”¨APIï¼š</p>
<ul>
<li><code>public static String toString(int[] a)</code>ï¼šè¿”å›æŒ‡å®šæ•°ç»„çš„å†…å®¹çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</li>
<li><code>public static void sort(int[] a)</code>ï¼šæŒ‰ç…§æ•°å­—é¡ºåºæ’åˆ—æŒ‡å®šçš„æ•°ç»„</li>
<li><code>public static int binarySearch(int[] a, int key)</code>ï¼šåˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾è¿”å›æŒ‡å®šå…ƒç´ çš„ç´¢å¼•</li>
<li><code>public static  List asList(T... a)</code>ï¼šè¿”å›ç”±æŒ‡å®šæ•°ç»„æ”¯æŒçš„åˆ—è¡¨</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> MyArraysDemo &#123;</span><br><span class="line">      public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">		<span class="comment">//æŒ‰ç…§æ•°å­—é¡ºåºæ’åˆ—æŒ‡å®šçš„æ•°ç»„</span></span><br><span class="line">        <span class="built_in">int</span> <span class="literal">[]</span> arr = &#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>&#125;;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span>sort(arr);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">arr</span>)</span>);</span><br><span class="line">		</span><br><span class="line">        <span class="built_in">int</span> <span class="literal">[]</span> arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">        <span class="built_in">int</span> index = <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span>binary<span class="constructor">Search(<span class="params">arr</span>, 0)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(index);</span><br><span class="line">        <span class="comment">//1,æ•°ç»„å¿…é¡»æœ‰åº</span></span><br><span class="line">        <span class="comment">//2.å¦‚æœè¦æŸ¥æ‰¾çš„å…ƒç´ å­˜åœ¨,é‚£ä¹ˆè¿”å›çš„æ˜¯è¿™ä¸ªå…ƒç´ å®é™…çš„ç´¢å¼•</span></span><br><span class="line">        <span class="comment">//3.å¦‚æœè¦æŸ¥æ‰¾çš„å…ƒç´ ä¸å­˜åœ¨,é‚£ä¹ˆè¿”å›çš„æ˜¯ (-æ’å…¥ç‚¹-1)</span></span><br><span class="line">            <span class="comment">//æ’å…¥ç‚¹:å¦‚æœè¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­,ä»–åº”è¯¥åœ¨å“ªä¸ªç´¢å¼•ä¸Š.</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Random">Random</h3>
<p>ç”¨äºç”Ÿæˆä¼ªéšæœºæ•°ã€‚</p>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>å¯¼å…¥åŒ…ï¼š<code>import java.util.Random</code></li>
<li>åˆ›å»ºå¯¹è±¡ï¼š<code>Random r = new Random()</code></li>
<li>éšæœºæ•´æ•°ï¼š<code>int num = r.nextInt(10)</code>
<ul>
<li>è§£é‡Šï¼š10 ä»£è¡¨çš„æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œå¦‚æœæ‹¬å·å†™ 10ï¼Œäº§ç”Ÿçš„éšæœºæ•°å°±æ˜¯ 0 - 9ï¼Œæ‹¬å·å†™ 20 çš„éšæœºæ•°åˆ™æ˜¯ 0 - 19</li>
<li>è·å– 0 - 10ï¼š<code>int num = r.nextInt(10 + 1)</code></li>
</ul>
</li>
<li>éšæœºå°æ•°ï¼š<code>public double nextDouble()</code> ä»èŒƒå›´ <code>0.0d</code> è‡³ <code>1.0d</code> ï¼ˆå·¦é—­å³å¼€ï¼‰ï¼Œä¼ªéšæœºåœ°ç”Ÿæˆå¹¶è¿”å›</li>
</ol>
<h3 id="System">System</h3>
<p>System ä»£è¡¨å½“å‰ç³»ç»Ÿ</p>
<p>é™æ€æ–¹æ³•ï¼š</p>
<ul>
<li><code>public static void exit(int status)</code>ï¼šç»ˆæ­¢ JVM è™šæ‹Ÿæœºï¼Œ<strong>é 0 æ˜¯å¼‚å¸¸ç»ˆæ­¢</strong></li>
<li><code>public static long currentTimeMillis()</code>ï¼šè·å–å½“å‰ç³»ç»Ÿæ­¤åˆ»æ—¶é—´æ¯«ç§’å€¼</li>
<li><code>static void arraycopy(Object var0, int var1, Object var2, int var3, int var4)</code>ï¼šæ•°ç»„æ‹·è´
<ul>
<li>å‚æ•°ä¸€ï¼šåŸæ•°ç»„</li>
<li>å‚æ•°äºŒï¼šä»åŸæ•°ç»„çš„å“ªä¸ªä½ç½®å¼€å§‹èµ‹å€¼</li>
<li>å‚æ•°ä¸‰ï¼šç›®æ ‡æ•°ç»„</li>
<li>å‚æ•°å››ï¼šä»ç›®æ ‡æ•°ç»„çš„å“ªä¸ªä½ç½®å¼€å§‹èµ‹å€¼</li>
<li>å‚æ•°äº”ï¼šèµ‹å€¼å‡ ä¸ª</li>
</ul>
</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//System.exit(0); // 0ä»£è¡¨æ­£å¸¸ç»ˆæ­¢!!</span></span><br><span class="line">        <span class="type">long</span> startTime = System.<span class="built_in">currentTimeMillis</span>();<span class="comment">//å®šä¹‰sdf æŒ‰ç…§æ ¼å¼è¾“å‡º</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;è¾“å‡ºi&#125;</span><br><span class="line">		<span class="type">long</span> endTime = <span class="keyword">new</span> <span class="built_in">Date</span>().<span class="built_in">getTime</span>();</span><br><span class="line">		System.out.<span class="built_in">println</span>( (endTime - startTime)/<span class="number">1000.0</span> +<span class="string">&quot;s&quot;</span>);<span class="comment">//ç¨‹åºç”¨æ—¶</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="type">int</span>[]&#123;<span class="number">10</span> ,<span class="number">20</span> ,<span class="number">30</span> ,<span class="number">40</span> ,<span class="number">50</span> ,<span class="number">60</span> ,<span class="number">70</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] arr2 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">6</span>]; <span class="comment">// [ 0 , 0 , 0 , 0 , 0 , 0]</span></span><br><span class="line">        <span class="comment">// å˜æˆarrs2 = [0 , 30 , 40 , 50 , 0 , 0 ]</span></span><br><span class="line">        System.<span class="built_in">arraycopy</span>(arr1, <span class="number">2</span>, arr2, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Date">Date</h3>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public Date()</code>ï¼šåˆ›å»ºå½“å‰ç³»ç»Ÿçš„æ­¤åˆ»æ—¥æœŸæ—¶é—´å¯¹è±¡ã€‚</li>
<li><code>public Date(long time)</code>ï¼šæŠŠæ—¶é—´æ¯«ç§’å€¼è½¬æ¢æˆæ—¥æœŸå¯¹è±¡</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li><code>public long getTime()</code>ï¼šè¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 00:00:00 GMT ä»¥æ¥æ€»çš„æ¯«ç§’æ•°ã€‚</li>
</ul>
<p>æ—¶é—´è®°å½•çš„ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>Date æ—¥æœŸå¯¹è±¡</li>
<li>æ—¶é—´æ¯«ç§’å€¼ï¼šä» <code>1970-01-01 00:00:00</code> å¼€å§‹èµ°åˆ°æ­¤åˆ»çš„æ€»çš„æ¯«ç§’å€¼ï¼Œ1s = 1000ms</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Date</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(d);<span class="comment">//Fri Oct 16 21:58:44 CST 2020</span></span><br><span class="line">        long time = d.<span class="title function_">getTime</span>() + <span class="number">121</span>*<span class="number">1000</span>;<span class="comment">//è¿‡121sæ˜¯ä»€ä¹ˆæ—¶é—´</span></span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(time);<span class="comment">//1602856875485</span></span><br><span class="line">        </span><br><span class="line">        <span class="title class_">Date</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>(time);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(d1);<span class="comment">//Fri Oct 16 22:01:15 CST 2020</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>)&#123;</span><br><span class="line">    <span class="title class_">Date</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    long startTime = d.<span class="title function_">getTime</span>();</span><br><span class="line">    <span class="keyword">for</span>(int i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;è¾“å‡ºi&#125;</span><br><span class="line">    long endTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>( (endTime - startTime) / <span class="number">1000.0</span> +<span class="string">&quot;s&quot;</span>);</span><br><span class="line">    <span class="comment">//è¿è¡Œä¸€ä¸‡æ¬¡è¾“å‡ºéœ€è¦å¤šé•¿æ—¶é—´</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DateFormat">DateFormat</h3>
<p>DateFormat ä½œç”¨ï¼š</p>
<ol>
<li>å¯ä»¥æŠŠâ€œæ—¥æœŸå¯¹è±¡â€æˆ–è€…â€œæ—¶é—´æ¯«ç§’å€¼â€æ ¼å¼åŒ–æˆæˆ‘ä»¬å–œæ¬¢çš„æ—¶é—´å½¢å¼ï¼ˆæ ¼å¼åŒ–æ—¶é—´ï¼‰</li>
<li>å¯ä»¥æŠŠå­—ç¬¦ä¸²çš„æ—¶é—´å½¢å¼è§£ææˆæ—¥æœŸå¯¹è±¡ï¼ˆè§£æå­—ç¬¦ä¸²æ—¶é—´ï¼‰</li>
</ol>
<p>DateFormat æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œä½¿ç”¨å®ƒçš„å­ç±»ï¼šSimpleDateFormat</p>
<p>SimpleDateFormat  ç®€å•æ—¥æœŸæ ¼å¼åŒ–ç±»ï¼š</p>
<ul>
<li><code>public SimpleDateFormat(String pattern)</code>ï¼šæŒ‡å®šæ—¶é—´çš„æ ¼å¼åˆ›å»ºç®€å•æ—¥æœŸå¯¹è±¡</li>
<li><code>public String format(Date date)</code>ï¼šæŠŠæ—¥æœŸå¯¹è±¡æ ¼å¼åŒ–æˆæˆ‘ä»¬å–œæ¬¢çš„æ—¶é—´å½¢å¼ï¼Œè¿”å›å­—ç¬¦ä¸²</li>
<li><code>public String format(Object time)</code>ï¼šæŠŠæ—¶é—´æ¯«ç§’å€¼æ ¼å¼åŒ–æˆè®¾å®šçš„æ—¶é—´å½¢å¼ï¼Œè¿”å›å­—ç¬¦ä¸²!</li>
<li><code>public Date parse(String date)</code>ï¼šæŠŠå­—ç¬¦ä¸²çš„æ—¶é—´è§£ææˆæ—¥æœŸå¯¹è±¡</li>
</ul>
<blockquote>
<p>yyyyå¹´MMæœˆddæ—¥ HH:mm:ss EEE a&quot; å‘¨å‡  ä¸Šåˆä¸‹åˆ</p>
</blockquote>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">	<span class="built_in">Date</span> <span class="built_in">date</span> = new <span class="built_in">Date</span>();</span><br><span class="line">    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss);</span><br><span class="line">    String <span class="built_in">time</span> = sdf.<span class="built_in">format</span>(<span class="built_in">date</span>);</span><br><span class="line">    System.out.println(<span class="built_in">time</span>);//<span class="number">2020</span>-<span class="number">10</span>-<span class="number">18</span> <span class="number">19</span>:<span class="number">58</span>:<span class="number">34</span></span><br><span class="line">    //è¿‡<span class="number">121</span>såæ˜¯ä»€ä¹ˆæ—¶é—´</span><br><span class="line">    long <span class="built_in">time</span> = <span class="built_in">date</span>.getTime();</span><br><span class="line">    <span class="built_in">time</span>+=<span class="number">121</span>;</span><br><span class="line">    System.out.println(sdf.formate(<span class="built_in">time</span>));</span><br><span class="line">    String d = &quot;<span class="number">2020</span>-<span class="number">10</span>-<span class="number">18</span> <span class="number">20</span>:<span class="number">20</span>:<span class="number">20</span>&quot;;//æ ¼å¼ä¸€è‡´</span><br><span class="line">    <span class="built_in">Date</span> newDate = sdf.parse(d);</span><br><span class="line">    System.out.println(sdf.<span class="built_in">format</span>(newDate)); //æŒ‰ç…§å‰é¢çš„æ–¹æ³•è¾“å‡º</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Calendar">Calendar</h3>
<p>Calendar ä»£è¡¨äº†ç³»ç»Ÿæ­¤åˆ»æ—¥æœŸå¯¹åº”çš„æ—¥å†å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æ¥åˆ›å»ºå¯¹è±¡</p>
<p>Calendar æ—¥å†ç±»åˆ›å»ºæ—¥å†å¯¹è±¡ï¼š<code>Calendar rightNow = Calendar.getInstance()</code>ï¼ˆ<strong>é¥¿æ±‰å•ä¾‹æ¨¡å¼</strong>ï¼‰</p>
<p>Calendar çš„æ–¹æ³•ï¼š</p>
<ul>
<li><code>public static Calendar getInstance()</code>ï¼šè¿”å›ä¸€ä¸ªæ—¥å†ç±»çš„å¯¹è±¡</li>
<li><code>public int get(int field)</code>ï¼šå–æ—¥æœŸä¸­çš„æŸä¸ªå­—æ®µä¿¡æ¯</li>
<li><code>public void set(int field,int value)</code>ï¼šä¿®æ”¹æ—¥å†çš„æŸä¸ªå­—æ®µä¿¡æ¯</li>
<li><code>public void add(int field,int amount)</code>ï¼šä¸ºæŸä¸ªå­—æ®µå¢åŠ /å‡å°‘æŒ‡å®šçš„å€¼</li>
<li><code>public final Date getTime()</code>ï¼šæ‹¿åˆ°æ­¤åˆ»æ—¥æœŸå¯¹è±¡</li>
<li><code>public long getTimeInMillis()</code>ï¼šæ‹¿åˆ°æ­¤åˆ»æ—¶é—´æ¯«ç§’å€¼</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</span><br><span class="line">	Calendar rightNow = Calendar.getInsance(); </span><br><span class="line">	<span class="built_in">int</span> year = rightNow.<span class="keyword">get</span>(Calendar.YEAR);<span class="comment">//è·å–å¹´</span></span><br><span class="line">    <span class="built_in">int</span> month = rightNow.<span class="keyword">get</span>(Calendar.MONTH) + <span class="number">1</span>;<span class="comment">//æœˆè¦+1</span></span><br><span class="line">    <span class="built_in">int</span> days = rightNow.<span class="keyword">get</span>(Calendar.DAY_OF_YEAR);</span><br><span class="line">    rightNow.<span class="keyword">set</span>(Calendar.YEAR , <span class="number">2099</span>);<span class="comment">//ä¿®æ”¹æŸä¸ªå­—æ®µ</span></span><br><span class="line">    rightNow.<span class="keyword">add</span>(Calendar.HOUR , <span class="number">15</span>);<span class="comment">//åŠ 15å°æ—¶  -15å°±æ˜¯å‡å»15å°æ—¶</span></span><br><span class="line">    Date date = rightNow.getTime();<span class="comment">//æ—¥å†å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">long</span> time = rightNow.getTimeInMillis();<span class="comment">//æ—¶é—´æ¯«ç§’å€¼</span></span><br><span class="line">    <span class="comment">//700å¤©åæ˜¯ä»€ä¹ˆæ—¥å­</span></span><br><span class="line">    rightNow.<span class="keyword">add</span>(Calendar.DAY_OF_YEAR , <span class="number">701</span>);</span><br><span class="line">    Date date d = rightNow.getTime();</span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    System.<span class="keyword">out</span>.println(sdf.format(d));<span class="comment">//è¾“å‡º700å¤©åçš„æ—¥æœŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="LocalDateTime">LocalDateTime</h3>
<p>JDK1.8 æ–°å¢ï¼Œçº¿ç¨‹å®‰å…¨</p>
<ul>
<li>LocalDate       è¡¨ç¤ºæ—¥æœŸï¼ˆå¹´æœˆæ—¥ï¼‰</li>
<li>LocalTime       è¡¨ç¤ºæ—¶é—´ï¼ˆæ—¶åˆ†ç§’ï¼‰</li>
<li>LocalDateTime    è¡¨ç¤ºæ—¶é—´+ æ—¥æœŸ ï¼ˆå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰</li>
</ul>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li>public static LocalDateTime now()ï¼šè·å–å½“å‰ç³»ç»Ÿæ—¶é—´</li>
<li>public static LocalDateTime of(å¹´, æœˆ , æ—¥, æ—¶, åˆ†, ç§’)ï¼šä½¿ç”¨æŒ‡å®šå¹´æœˆæ—¥å’Œæ—¶åˆ†ç§’åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡</li>
</ul>
<p>å¸¸ç”¨APIï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>public int getYear()</td>
<td>è·å–å¹´</td>
</tr>
<tr>
<td>public int getMonthValue()</td>
<td>è·å–æœˆä»½ï¼ˆ1-12ï¼‰</td>
</tr>
<tr>
<td>public int getDayOfMonth()</td>
<td>è·å–æœˆä»½ä¸­çš„ç¬¬å‡ å¤©ï¼ˆ1-31ï¼‰</td>
</tr>
<tr>
<td>public int getDayOfYear()</td>
<td>è·å–ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼ˆ1-366ï¼‰</td>
</tr>
<tr>
<td>public DayOfWeek getDayOfWeek()</td>
<td>è·å–æ˜ŸæœŸ</td>
</tr>
<tr>
<td>public int getMinute()</td>
<td>è·å–åˆ†é’Ÿ</td>
</tr>
<tr>
<td>public int getHour()</td>
<td>è·å–å°æ—¶</td>
</tr>
<tr>
<td>public LocalDate  toLocalDate()</td>
<td>è½¬æ¢æˆä¸ºä¸€ä¸ª LocalDate å¯¹è±¡ï¼ˆå¹´æœˆæ—¥ï¼‰</td>
</tr>
<tr>
<td>public LocalTime toLocalTime()</td>
<td>è½¬æ¢æˆä¸ºä¸€ä¸ª LocalTime å¯¹è±¡ï¼ˆæ—¶åˆ†ç§’ï¼‰</td>
</tr>
<tr>
<td>public String format(æŒ‡å®šæ ¼å¼)</td>
<td>æŠŠä¸€ä¸ª LocalDateTime æ ¼å¼åŒ–æˆä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>public LocalDateTime parse(å‡†å¤‡è§£æçš„å­—ç¬¦ä¸², è§£ææ ¼å¼)</td>
<td>æŠŠä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²è§£ææˆä¸ºä¸€ä¸ª LocalDateTime å¯¹è±¡</td>
</tr>
<tr>
<td>public static DateTimeFormatter ofPattern(String pattern)</td>
<td>ä½¿ç”¨æŒ‡å®šçš„æ—¥æœŸæ¨¡æ¿è·å–ä¸€ä¸ªæ—¥æœŸæ ¼å¼åŒ–å™¨ DateTimeFormatter å¯¹è±¡</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDK8DateDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        System.out.println(now);</span><br><span class="line"></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">localDateTime</span> <span class="operator">=</span> LocalDateTime.of(<span class="number">2020</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>);</span><br><span class="line">        System.out.println(localDateTime);</span><br><span class="line">        <span class="type">DateTimeFormatter</span> <span class="variable">pattern</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyyå¹´MMæœˆddæ—¥ HH:mm:ss&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> localDateTime.format(pattern);</span><br><span class="line">		<span class="type">LocalDateTime</span> <span class="variable">parse</span> <span class="operator">=</span> LocalDateTime.parse(s, pattern);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>public LocalDateTime plusYears (long years)</td>
<td>æ·»åŠ æˆ–è€…å‡å»å¹´</td>
</tr>
<tr>
<td>public LocalDateTime withYear(int year)</td>
<td>ç›´æ¥ä¿®æ”¹å¹´</td>
</tr>
</tbody>
</table>
<p><strong>æ—¶é—´é—´éš”</strong> Duration ç±»APIï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static Period between(å¼€å§‹æ—¶é—´,ç»“æŸæ—¶é—´)</td>
<td>è®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´&quot;çš„é—´éš”</td>
</tr>
<tr>
<td>public int getYears()</td>
<td>è·å¾—è¿™æ®µæ—¶é—´çš„å¹´æ•°</td>
</tr>
<tr>
<td>public int getMonths()</td>
<td>è·å¾—æ­¤æœŸé—´çš„æ€»æœˆæ•°</td>
</tr>
<tr>
<td>public int getDays()</td>
<td>è·å¾—æ­¤æœŸé—´çš„å¤©æ•°</td>
</tr>
<tr>
<td>public long toTotalMonths()</td>
<td>è·å–æ­¤æœŸé—´çš„æ€»æœˆæ•°</td>
</tr>
<tr>
<td>public static Durationbetween(å¼€å§‹æ—¶é—´,ç»“æŸæ—¶é—´)</td>
<td>è®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´&quot;çš„é—´éš”</td>
</tr>
<tr>
<td>public long toSeconds()</td>
<td>è·å¾—æ­¤æ—¶é—´é—´éš”çš„ç§’</td>
</tr>
<tr>
<td>public long toMillis()</td>
<td>è·å¾—æ­¤æ—¶é—´é—´éš”çš„æ¯«ç§’</td>
</tr>
<tr>
<td>public long toNanos()</td>
<td>è·å¾—æ­¤æ—¶é—´é—´éš”çš„çº³ç§’</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDK8DateDemo9</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">localDate1</span> <span class="operator">=</span> LocalDate.of(<span class="number">2020</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">localDate2</span> <span class="operator">=</span> LocalDate.of(<span class="number">2048</span>, <span class="number">12</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="type">Period</span> <span class="variable">period</span> <span class="operator">=</span> Period.between(localDate1, localDate2);</span><br><span class="line">        System.out.println(period);<span class="comment">//P28Y11M11D</span></span><br><span class="line">		<span class="type">Duration</span> <span class="variable">duration</span> <span class="operator">=</span> Duration.between(localDateTime1, localDateTime2);</span><br><span class="line">        System.out.println(duration);<span class="comment">//PT21H57M58S</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Math">Math</h3>
<p>Math ç”¨äºåšæ•°å­¦è¿ç®—</p>
<p>Math ç±»ä¸­çš„æ–¹æ³•å…¨éƒ¨æ˜¯é™æ€æ–¹æ³•ï¼Œç›´æ¥ç”¨ç±»åè°ƒç”¨å³å¯ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static int abs(int a)</td>
<td>è·å–å‚æ•°açš„ç»å¯¹å€¼</td>
</tr>
<tr>
<td>public static double ceil(double a)</td>
<td>å‘ä¸Šå–æ•´</td>
</tr>
<tr>
<td>public static double floor(double a)</td>
<td>å‘ä¸‹å–æ•´</td>
</tr>
<tr>
<td>public static double pow(double a, double b)</td>
<td>è·å– a çš„ b æ¬¡å¹‚</td>
</tr>
<tr>
<td>public static long round(double a)</td>
<td>å››èˆäº”å…¥å–æ•´</td>
</tr>
<tr>
<td>public static int max(int a,int b)</td>
<td>è¿”å›è¾ƒå¤§å€¼</td>
</tr>
<tr>
<td>public static int min(int a,int b)</td>
<td>è¿”å›è¾ƒå°å€¼</td>
</tr>
<tr>
<td>public static double random()</td>
<td>è¿”å›å€¼ä¸º double çš„æ­£å€¼ï¼Œ[0.0,1.0)</td>
</tr>
</tbody>
</table>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> MathDemo &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="comment">// 1.å–ç»å¯¹å€¼:è¿”å›æ­£æ•°ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>abs(<span class="number">10</span>));</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>abs<span class="number">(-10.3)</span>);</span><br><span class="line">        <span class="comment">// 2.å‘ä¸Šå–æ•´: 5</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>ceil(<span class="number">4.00000001</span>)); <span class="comment">// 5.0</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>ceil<span class="number">(-4.00000001)</span>);<span class="comment">//4.0</span></span><br><span class="line">        <span class="comment">// 3.å‘ä¸‹å–æ•´ï¼š4</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>floor(<span class="number">4.99999999</span>)); <span class="comment">// 4.0</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>floor<span class="number">(-4.99999999)</span>); <span class="comment">// 5.0</span></span><br><span class="line">        <span class="comment">// 4.æ±‚æŒ‡æ•°æ¬¡æ–¹</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>pow(<span class="number">2</span> , <span class="number">3</span>)); <span class="comment">// 2^3 = 8.0</span></span><br><span class="line">        <span class="comment">// 5.å››èˆäº”å…¥ 10</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>round(<span class="number">4.49999</span>)); <span class="comment">// 4</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>round(<span class="number">4.500001</span>)); <span class="comment">// 5</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>round(<span class="number">5.5</span>));<span class="comment">//6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DecimalFormat">DecimalFormat</h3>
<p>ä½¿ä»»ä½•å½¢å¼çš„æ•°å­—è§£æå’Œæ ¼å¼åŒ–</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String<span class="literal">[]</span>args)&#123;</span><br><span class="line">    double pi = <span class="number">3.1415927</span>;ã€€<span class="comment">//åœ†å‘¨ç‡</span></span><br><span class="line">    <span class="comment">//å–ä¸€ä½æ•´æ•°</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;0&quot;</span>)</span>.format(pi));ã€€ã€€ã€€<span class="comment">//3</span></span><br><span class="line">    <span class="comment">//å–ä¸€ä½æ•´æ•°å’Œä¸¤ä½å°æ•°</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;0.00&quot;</span>)</span>.format(pi));ã€€<span class="comment">//3.14</span></span><br><span class="line">    <span class="comment">//å–ä¸¤ä½æ•´æ•°å’Œä¸‰ä½å°æ•°ï¼Œæ•´æ•°ä¸è¶³éƒ¨åˆ†ä»¥0å¡«è¡¥ã€‚</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;00.000&quot;</span>)</span>.format(pi));<span class="comment">// 03.142</span></span><br><span class="line">    <span class="comment">//å–æ‰€æœ‰æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;#&quot;</span>)</span>.format(pi));ã€€ã€€ã€€<span class="comment">//3</span></span><br><span class="line">    <span class="comment">//ä»¥ç™¾åˆ†æ¯”æ–¹å¼è®¡æ•°ï¼Œå¹¶å–ä¸¤ä½å°æ•°</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;#.##%&quot;</span>)</span>.format(pi));ã€€<span class="comment">//314.16%</span></span><br><span class="line"></span><br><span class="line">    long c =<span class="number">299792458</span>;ã€€ã€€<span class="comment">//å…‰é€Ÿ</span></span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•ï¼Œå¹¶å–äº”ä½å°æ•°</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;#.#####E0&quot;</span>)</span>.format(c));<span class="comment">//2.99792E8</span></span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºä¸ºä¸¤ä½æ•´æ•°çš„ç§‘å­¦è®¡æ•°æ³•ï¼Œå¹¶å–å››ä½å°æ•°</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;00.####E0&quot;</span>)</span>.format(c));<span class="comment">//29.9792E7</span></span><br><span class="line">    <span class="comment">//æ¯ä¸‰ä½ä»¥é€—å·è¿›è¡Œåˆ†éš”ã€‚</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;,###&quot;</span>)</span>.format(c));<span class="comment">//299,792,458</span></span><br><span class="line">    <span class="comment">//å°†æ ¼å¼åµŒå…¥æ–‡æœ¬</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">new</span> <span class="constructor">DecimalFormat(<span class="string">&quot;å…‰é€Ÿå¤§å°ä¸ºæ¯ç§’,###ç±³ã€‚&quot;</span>)</span>.format(c));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="BigDecimal">BigDecimal</h3>
<p>Java åœ¨ java.math åŒ…ä¸­æä¾›çš„ API ç±»ï¼Œç”¨æ¥å¯¹è¶…è¿‡16ä½æœ‰æ•ˆä½çš„æ•°è¿›è¡Œç²¾ç¡®çš„è¿ç®—</p>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li><code>public static BigDecimal valueOf(double val)</code>ï¼šåŒ…è£…æµ®ç‚¹æ•°æˆä¸ºå¤§æ•°æ®å¯¹è±¡ã€‚</li>
<li><code>public BigDecimal(double val)</code></li>
<li><code>public BigDecimal(String val)</code></li>
</ul>
<p>å¸¸ç”¨APIï¼š</p>
<ul>
<li><code>public BigDecimal add(BigDecimal value)</code>ï¼šåŠ æ³•è¿ç®—</li>
<li><code>public BigDecimal subtract(BigDecimal value)</code>ï¼šå‡æ³•è¿ç®—</li>
<li><code>public BigDecimal multiply(BigDecimal value)</code>ï¼šä¹˜æ³•è¿ç®—</li>
<li><code>public BigDecimal divide(BigDecimal value)</code>ï¼šé™¤æ³•è¿ç®—</li>
<li><code>public double doubleValue()</code>ï¼šæŠŠ BigDecimal è½¬æ¢æˆ double ç±»å‹</li>
<li><code>public int intValue()</code>ï¼šè½¬ä¸º int å…¶ä»–ç±»å‹ç›¸åŒ</li>
<li><code>public BigDecimal divide (BigDecimal valueï¼Œç²¾ç¡®å‡ ä½ï¼Œèˆå…¥æ¨¡å¼)</code>ï¼šé™¤æ³•</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BigDecimalDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// æµ®ç‚¹å‹è¿ç®—çš„æ—¶å€™ç›´æ¥+ - * / å¯èƒ½ä¼šå‡ºç°æ•°æ®å¤±çœŸï¼ˆç²¾åº¦é—®é¢˜ï¼‰ã€‚</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="number">0.1</span> + <span class="number">0.2</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="number">1.301</span> / <span class="number">100</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">double</span> a = <span class="number">0.1</span> ;</span><br><span class="line">        <span class="built_in">double</span> b = <span class="number">0.2</span> ;</span><br><span class="line">        <span class="built_in">double</span> c = a + b ;</span><br><span class="line">        System.<span class="keyword">out</span>.println(c);<span class="comment">//0.30000000000000004</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1.æŠŠæµ®ç‚¹æ•°è½¬æ¢æˆå¤§æ•°æ®å¯¹è±¡è¿ç®—</span></span><br><span class="line">        BigDecimal a1 = BigDecimal.valueOf(a);</span><br><span class="line">        BigDecimal b1 = BigDecimal.valueOf(b);</span><br><span class="line">        BigDecimal c1 = a1.<span class="keyword">add</span>(b1);<span class="comment">//a1.divide(b1);ä¹Ÿå¯ä»¥</span></span><br><span class="line">		System.<span class="keyword">out</span>.println(c1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// BigDecimalåªæ˜¯è§£å†³ç²¾åº¦é—®é¢˜çš„æ‰‹æ®µï¼Œdoubleæ•°æ®æ‰æ˜¯æˆ‘ä»¬çš„ç›®çš„ï¼ï¼</span></span><br><span class="line">        <span class="built_in">double</span> d = c1.doubleValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>BigDecimal æ˜¯ç”¨æ¥è¿›è¡Œç²¾ç¡®è®¡ç®—çš„</li>
<li>åˆ›å»º BigDecimal çš„å¯¹è±¡ï¼Œæ„é€ æ–¹æ³•ä½¿ç”¨å‚æ•°ç±»å‹ä¸ºå­—ç¬¦ä¸²çš„</li>
<li>å››åˆ™è¿ç®—ä¸­çš„é™¤æ³•ï¼Œå¦‚æœé™¤ä¸å°½è¯·ä½¿ç”¨ divide çš„ä¸‰ä¸ªå‚æ•°çš„æ–¹æ³•</li>
</ol>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal divide = bd1.divide(å‚ä¸è¿ç®—çš„å¯¹è±¡,å°æ•°ç‚¹åç²¾ç¡®åˆ°å¤šå°‘ä½,èˆå…¥æ¨¡å¼);</span><br><span class="line"><span class="regexp">//</span>å‚æ•°<span class="number">1</span>ï¼šè¡¨ç¤ºå‚ä¸è¿ç®—çš„BigDecimal å¯¹è±¡ã€‚</span><br><span class="line"><span class="regexp">//</span>å‚æ•°<span class="number">2</span>ï¼šè¡¨ç¤ºå°æ•°ç‚¹åé¢ç²¾ç¡®åˆ°å¤šå°‘ä½</span><br><span class="line"><span class="regexp">//</span>å‚æ•°<span class="number">3</span>ï¼šèˆå…¥æ¨¡å¼  </span><br><span class="line"><span class="regexp">//</span> BigDecimal.ROUND_UP  è¿›ä¸€æ³•</span><br><span class="line"><span class="regexp">//</span> BigDecimal.ROUND_FLOOR å»å°¾æ³•</span><br><span class="line"><span class="regexp">//</span> BigDecimal.ROUND_HALF_UP å››èˆäº”å…¥</span><br></pre></td></tr></table></figure>
<h3 id="Regex">Regex</h3>
<h4 id="æ¦‚è¿°-3">æ¦‚è¿°</h4>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„ä½œç”¨ï¼šæ˜¯ä¸€äº›ç‰¹æ®Šå­—ç¬¦ç»„æˆçš„æ ¡éªŒè§„åˆ™ï¼Œå¯ä»¥æ ¡éªŒä¿¡æ¯çš„æ­£ç¡®æ€§ï¼Œæ ¡éªŒé‚®ç®±ã€ç”µè¯å·ç ã€é‡‘é¢ç­‰ã€‚</p>
<p>æ¯”å¦‚æ£€éªŒ qq å·ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> <span class="title function_">checkQQRegex</span>(<span class="params"><span class="built_in">String</span> qq</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> qq!=<span class="literal">null</span> &amp;&amp; qq.<span class="title function_">matches</span>(<span class="string">&quot;\\d&#123;4,&#125;&quot;</span>);<span class="comment">//å³æ˜¯æ•°å­— å¿…é¡»å¤§äº4ä½æ•°</span></span><br><span class="line">&#125;<span class="comment">// ç”¨\\d  æ˜¯å› ä¸º\ç”¨æ¥å‘Šè¯‰å®ƒæ˜¯ä¸€ä¸ªæ ¡éªŒç±»ï¼Œä¸æ˜¯æ™®é€šçš„å­—ç¬¦ æ¯”å¦‚ \t \n</span></span><br></pre></td></tr></table></figure>
<p>java.util.regex åŒ…ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç±»ï¼š</p>
<ul>
<li>
<p>Pattern ç±»ï¼š</p>
<p>Pattern å¯¹è±¡æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘è¡¨ç¤ºã€‚Pattern ç±»æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ï¼Œè¦åˆ›å»ºä¸€ä¸ª Pattern å¯¹è±¡ï¼Œå¿…é¡»é¦–å…ˆè°ƒç”¨å…¶å…¬å…±é™æ€ç¼–è¯‘æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª Pattern å¯¹è±¡ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°</p>
</li>
<li>
<p>Matcher ç±»ï¼š</p>
<p>Matcher å¯¹è±¡æ˜¯å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œè§£é‡Šå’ŒåŒ¹é…æ“ä½œçš„å¼•æ“ã€‚ä¸Pattern ç±»ä¸€æ ·ï¼ŒMatcher ä¹Ÿæ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ï¼Œéœ€è¦è°ƒç”¨ Pattern å¯¹è±¡çš„ matcher æ–¹æ³•æ¥è·å¾—ä¸€ä¸ª Matcher å¯¹è±¡</p>
</li>
<li>
<p>PatternSyntaxExceptionï¼š</p>
<p>PatternSyntaxException æ˜¯ä¸€ä¸ªéå¼ºåˆ¶å¼‚å¸¸ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„è¯­æ³•é”™è¯¯ã€‚</p>
</li>
</ul>
<h4 id="å­—ç¬¦åŒ¹é…">å­—ç¬¦åŒ¹é…</h4>
<h5 id="æ™®é€šå­—ç¬¦">æ™®é€šå­—ç¬¦</h5>
<p>å­—æ¯ã€æ•°å­—ã€æ±‰å­—ã€ä¸‹åˆ’çº¿ã€ä»¥åŠæ²¡æœ‰ç‰¹æ®Šå®šä¹‰çš„æ ‡ç‚¹ç¬¦å·ï¼Œéƒ½æ˜¯â€œæ™®é€šå­—ç¬¦â€ã€‚è¡¨è¾¾å¼ä¸­çš„æ™®é€šå­—ç¬¦ï¼Œåœ¨åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ—¶å€™ï¼ŒåŒ¹é…ä¸ä¹‹ç›¸åŒçš„ä¸€ä¸ªå­—ç¬¦ã€‚å…¶ä»–ç»Ÿç§°<strong>å…ƒå­—ç¬¦</strong></p>
<h5 id="ç‰¹æ®Šå­—ç¬¦">ç‰¹æ®Šå­—ç¬¦</h5>
<p>\r\n æ˜¯ Windows ä¸­çš„æ–‡æœ¬è¡Œç»“æŸæ ‡ç­¾ï¼Œåœ¨ Unix/Linux åˆ™æ˜¯ \n</p>
<table>
<thead>
<tr>
<th>å…ƒå­—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºä¸€ä¸ªç‰¹æ®Šå­—ç¬¦æˆ–åŸä¹‰å­—ç¬¦ï¼Œå‘Šè¯‰å®ƒæ˜¯ä¸€ä¸ªæ ¡éªŒç±»ï¼Œä¸æ˜¯æ™®é€šå­—ç¬¦</td>
</tr>
<tr>
<td>\f</td>
<td>æ¢é¡µç¬¦</td>
</tr>
<tr>
<td>\n</td>
<td>æ¢è¡Œç¬¦</td>
</tr>
<tr>
<td>\r</td>
<td>å›è½¦ç¬¦</td>
</tr>
<tr>
<td>\t</td>
<td>åˆ¶è¡¨ç¬¦</td>
</tr>
<tr>
<td>\</td>
<td>ä»£è¡¨ \ æœ¬èº«</td>
</tr>
<tr>
<td>()</td>
<td>ä½¿ç”¨ () å®šä¹‰ä¸€ä¸ªå­è¡¨è¾¾å¼ã€‚å­è¡¨è¾¾å¼çš„å†…å®¹å¯ä»¥å½“æˆä¸€ä¸ªç‹¬ç«‹å…ƒç´ </td>
</tr>
</tbody>
</table>
<h5 id="æ ‡å‡†å­—ç¬¦">æ ‡å‡†å­—ç¬¦</h5>
<p>èƒ½å¤Ÿä¸å¤šç§å­—ç¬¦åŒ¹é…çš„è¡¨è¾¾å¼ï¼Œæ³¨æ„åŒºåˆ†å¤§å°å†™ï¼Œå¤§å†™æ˜¯ç›¸åçš„æ„æ€ï¼Œåªèƒ½æ ¡éªŒ<strong>å•</strong>ä¸ªå­—ç¬¦ã€‚</p>
<table>
<thead>
<tr>
<th>å…ƒå­—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆé™¤äº†æ¢è¡Œç¬¦ï¼‰ï¼Œå¦‚æœè¦åŒ¹é…åŒ…æ‹¬ \n åœ¨å†…çš„æ‰€æœ‰å­—ç¬¦ï¼Œä¸€èˆ¬ç”¨ [\s\S]</td>
</tr>
<tr>
<td>\d</td>
<td>æ•°å­—å­—ç¬¦ï¼Œ0~9 ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œç­‰ä»·äº [0-9]</td>
</tr>
<tr>
<td>\D</td>
<td>éæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº  [ ^0-9]</td>
</tr>
<tr>
<td>\w</td>
<td>å¤§å°å†™å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº[a-zA-Z_0-9_]</td>
</tr>
<tr>
<td>\W</td>
<td>å¯¹\wå–éï¼Œç­‰ä»·äº[ ^\w]</td>
</tr>
<tr>
<td>\s</td>
<td>ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ç©ºç™½å­—ç¬¦çš„å…¶ä¸­ä»»æ„ä¸€ä¸ªï¼Œç­‰ä»·äº[\f\n\r\t\v]</td>
</tr>
<tr>
<td>\S</td>
<td>å¯¹ \s å–é</td>
</tr>
</tbody>
</table>
<p>\x åŒ¹é…åå…­è¿›åˆ¶å­—ç¬¦ï¼Œ\0 åŒ¹é…å…«è¿›åˆ¶ï¼Œä¾‹å¦‚ \xA å¯¹åº”å€¼ä¸º 10 çš„ ASCII å­—ç¬¦ ï¼Œå³ \n</p>
<h5 id="è‡ªå®šä¹‰ç¬¦">è‡ªå®šä¹‰ç¬¦</h5>
<p>è‡ªå®šä¹‰ç¬¦å·é›†åˆï¼Œ[ ] æ–¹æ‹¬å·åŒ¹é…æ–¹å¼ï¼Œèƒ½å¤ŸåŒ¹é…æ–¹æ‹¬å·ä¸­<strong>ä»»æ„ä¸€ä¸ª</strong>å­—ç¬¦</p>
<table>
<thead>
<tr>
<th>å…ƒå­—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>[ab5@]</td>
<td>åŒ¹é… â€œaâ€ æˆ– â€œbâ€ æˆ– â€œ5â€ æˆ– â€œ@â€</td>
</tr>
<tr>
<td>[^abc]</td>
<td>åŒ¹é… â€œaâ€,â€œbâ€,â€œcâ€ ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[f-k]</td>
<td>åŒ¹é… â€œfâ€~â€œkâ€ ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—æ¯</td>
</tr>
<tr>
<td>[^A-F0-3]</td>
<td>åŒ¹é… â€œAâ€,â€œFâ€,â€œ0â€~â€œ3â€ ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[a-d[m-p]]</td>
<td>åŒ¹é… a åˆ° d æˆ–è€… m åˆ° pï¼š[a-dm-p]ï¼ˆå¹¶é›†ï¼‰</td>
</tr>
<tr>
<td>[a-z&amp;&amp;[m-p]]</td>
<td>åŒ¹é… a åˆ° z å¹¶ä¸” m åˆ° pï¼š[a-dm-p]ï¼ˆäº¤é›†ï¼‰</td>
</tr>
<tr>
<td>[^]</td>
<td>å–å</td>
</tr>
</tbody>
</table>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šç¬¦å·ï¼Œè¢«åŒ…å«åˆ°ä¸­æ‹¬å·ä¸­ï¼Œåˆ™å¤±å»ç‰¹æ®Šæ„ä¹‰ï¼Œé™¤äº† ^,- ä¹‹å¤–ï¼Œéœ€è¦åœ¨å‰é¢åŠ  \</li>
<li>æ ‡å‡†å­—ç¬¦é›†åˆï¼Œé™¤å°æ•°ç‚¹å¤–ï¼Œå¦‚æœè¢«åŒ…å«äºä¸­æ‹¬å·ï¼Œè‡ªå®šä¹‰å­—ç¬¦é›†åˆå°†åŒ…å«è¯¥é›†åˆã€‚ æ¯”å¦‚ï¼š[\d. \ -+] å°†åŒ¹é…ï¼šæ•°å­—ã€å°æ•°ç‚¹ã€+ã€-</li>
</ul>
<h5 id="é‡è¯å­—ç¬¦">é‡è¯å­—ç¬¦</h5>
<p>ä¿®é¥°åŒ¹é…æ¬¡æ•°çš„ç‰¹æ®Šç¬¦å·ã€‚</p>
<ul>
<li>åŒ¹é…æ¬¡æ•°ä¸­çš„è´ªå©ªæ¨¡å¼(åŒ¹é…å­—ç¬¦è¶Šå¤šè¶Šå¥½ï¼Œé»˜è®¤ ï¼)ï¼Œ* å’Œ + éƒ½æ˜¯è´ªå©ªå‹å…ƒå­—ç¬¦ã€‚</li>
<li>åŒ¹é…æ¬¡æ•°ä¸­çš„éè´ªå©ªæ¨¡å¼ï¼ˆåŒ¹é…å­—ç¬¦è¶Šå°‘è¶Šå¥½ï¼Œä¿®é¥°åŒ¹é…æ¬¡æ•°çš„ç‰¹æ®Šç¬¦å·åå†åŠ ä¸Šä¸€ä¸ª ? å·ï¼‰</li>
</ul>
<table>
<thead>
<tr>
<th>å…ƒå­—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>X?</td>
<td>X ä¸€æ¬¡æˆ–ä¸€æ¬¡ä¹Ÿæ²¡ï¼Œæœ‰ç›¸å½“äº {0,1}</td>
</tr>
<tr>
<td>X*</td>
<td>X ä¸å‡ºç°æˆ–å‡ºç°ä»»æ„æ¬¡ï¼Œç›¸å½“äº {0,}</td>
</tr>
<tr>
<td>X+</td>
<td>X è‡³å°‘ä¸€æ¬¡ï¼Œç›¸å½“äº {1,}</td>
</tr>
<tr>
<td>X{n}</td>
<td>X æ°å¥½ n æ¬¡</td>
</tr>
<tr>
<td>{n,}</td>
<td>X è‡³å°‘ n æ¬¡</td>
</tr>
<tr>
<td>{n,m}</td>
<td>X è‡³å°‘ n æ¬¡ï¼Œä½†æ˜¯ä¸è¶…è¿‡ m æ¬¡</td>
</tr>
</tbody>
</table>
<h4 id="ä½ç½®åŒ¹é…">ä½ç½®åŒ¹é…</h4>
<h5 id="å­—ç¬¦è¾¹ç•Œ">å­—ç¬¦è¾¹ç•Œ</h5>
<p>æœ¬ç»„æ ‡è®°åŒ¹é…çš„ä¸æ˜¯å­—ç¬¦è€Œæ˜¯ä½ç½®ï¼Œç¬¦åˆæŸç§æ¡ä»¶çš„ä½ç½®</p>
<table>
<thead>
<tr>
<th>å…ƒå­—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>ä¸å­—ç¬¦ä¸²å¼€å§‹çš„åœ°æ–¹åŒ¹é…ï¼ˆåœ¨å­—ç¬¦é›†åˆä¸­ç”¨æ¥æ±‚éï¼Œåœ¨å­—ç¬¦é›†åˆå¤–ç”¨ä½œåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ï¼‰</td>
</tr>
<tr>
<td>$</td>
<td>ä¸å­—ç¬¦ä¸²ç»“æŸçš„åœ°æ–¹åŒ¹é…</td>
</tr>
<tr>
<td>\b</td>
<td>åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œ</td>
</tr>
</tbody>
</table>
<h5 id="æ•è·ç»„">æ•è·ç»„</h5>
<p>æ•è·ç»„æ˜¯æŠŠå¤šä¸ªå­—ç¬¦å½“ä¸€ä¸ªå•ç‹¬å•å…ƒè¿›è¡Œå¤„ç†çš„æ–¹æ³•ï¼Œå®ƒé€šè¿‡å¯¹æ‹¬å·å†…çš„å­—ç¬¦åˆ†ç»„æ¥åˆ›å»ºã€‚</p>
<p>åœ¨è¡¨è¾¾å¼ <code>((A)(B(C)))</code>ï¼Œæœ‰å››ä¸ªè¿™æ ·çš„ç»„ï¼š((A)(BÂ©))ã€(A)ã€(BÂ©)ã€Â©ï¼ˆæŒ‰ç…§æ‹¬å·ä»å·¦åˆ°å³ä¾æ¬¡ä¸º group(1)â€¦ï¼‰</p>
<ul>
<li>è°ƒç”¨ matcher å¯¹è±¡çš„ groupCount æ–¹æ³•è¿”å›ä¸€ä¸ª int å€¼ï¼Œè¡¨ç¤º matcher å¯¹è±¡å½“å‰æœ‰å¤šä¸ªæ•è·ç»„ã€‚</li>
<li>ç‰¹æ®Šçš„ç»„ group(0)ã€group()ï¼Œä»£è¡¨æ•´ä¸ªè¡¨è¾¾å¼ï¼Œè¯¥ç»„ä¸åŒ…æ‹¬åœ¨ groupCount çš„è¿”å›å€¼ä¸­ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>|  (åˆ†æ”¯ç»“æ„)</td>
<td>å·¦å³ä¸¤è¾¹è¡¨è¾¾å¼ä¹‹é—´ â€œæˆ–â€ å…³ç³»ï¼ŒåŒ¹é…å·¦è¾¹æˆ–è€…å³è¾¹</td>
</tr>
<tr>
<td>()  (æ•è·ç»„)</td>
<td>(1) åœ¨è¢«ä¿®é¥°åŒ¹é…æ¬¡æ•°çš„æ—¶å€™ï¼Œæ‹¬å·ä¸­çš„è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºæ•´ä½“è¢«ä¿®é¥°<br/>(2) å–åŒ¹é…ç»“æœçš„æ—¶å€™ï¼Œæ‹¬å·ä¸­çš„è¡¨è¾¾å¼åŒ¹é…åˆ°çš„å†…å®¹å¯ä»¥è¢«å•ç‹¬å¾—åˆ°<br/>(3) æ¯ä¸€å¯¹æ‹¬å·åˆ†é…ä¸€ä¸ªç¼–å·,()çš„æ•è·æ ¹æ®å·¦æ‹¬å·çš„é¡ºåºä» 1 å¼€å§‹è‡ªåŠ¨ç¼–å·ã€‚æ•è·å…ƒç´ ç¼–å·ä¸ºé›¶çš„ç¬¬ä¸€ä¸ªæ•è·æ˜¯ç”±æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…çš„æ–‡æœ¬</td>
</tr>
<tr>
<td>(?:Expression)   éæ•è·ç»„</td>
<td>ä¸€äº›è¡¨è¾¾å¼ä¸­ï¼Œä¸å¾—ä¸ä½¿ç”¨( )ï¼Œä½†åˆä¸éœ€è¦ä¿å­˜ () ä¸­å­è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ï¼Œè¿™æ—¶å¯ä»¥ç”¨éæ•è·ç»„æ¥æŠµæ¶ˆä½¿ç”¨( )å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚</td>
</tr>
</tbody>
</table>
<h5 id="åå‘å¼•ç”¨">åå‘å¼•ç”¨</h5>
<p>åå‘å¼•ç”¨ï¼ˆ\numberï¼‰ï¼Œåˆå«å›æº¯å¼•ç”¨ï¼š</p>
<ul>
<li>
<p>æ¯ä¸€å¯¹()ä¼šåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œä½¿ç”¨ () çš„æ•è·æ ¹æ®å·¦æ‹¬å·çš„é¡ºåºä»1å¼€å§‹è‡ªåŠ¨ç¼–å·</p>
</li>
<li>
<p>é€šè¿‡åå‘å¼•ç”¨ï¼Œå¯ä»¥å¯¹åˆ†ç»„å·²æ•è·çš„å­—ç¬¦ä¸²è¿›è¡Œå¼•ç”¨ï¼Œç»§ç»­åŒ¹é…</p>
</li>
<li>
<p><strong>æŠŠåŒ¹é…åˆ°çš„å­—ç¬¦é‡å¤ä¸€éåœ¨è¿›è¡ŒåŒ¹é…</strong></p>
</li>
<li>
<p>åº”ç”¨ 1ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String regex <span class="operator">=</span> <span class="string">&quot;((\d)3)\1[0-9](\w)\2&#123;2&#125;&quot;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é¦–å…ˆåŒ¹é… ((\d)3)ï¼Œå…¶æ¬¡ \1 åŒ¹é… ((\d)3) å·²ç»åŒ¹é…åˆ°çš„å†…å®¹ï¼Œ\2 åŒ¹é… (\d)ï¼Œ {2} æŒ‡çš„æ˜¯ \2 çš„å€¼å‡ºç°ä¸¤æ¬¡</li>
<li>å®ä¾‹ï¼š23238n22ï¼ˆåŒ¹é…åˆ° 2 æœªæ¥å°±ç»§ç»­åŒ¹é… 2ï¼‰</li>
<li>å®ä¾‹ï¼š43438n44</li>
</ul>
</li>
<li>
<p>åº”ç”¨ 2ï¼šçˆ¬è™«</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String regex <span class="operator">=</span> <span class="string">&quot;&lt;(h[1-6])&gt;\w*?&lt;\/\1&gt;&quot;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>åŒ¹é…ç»“æœ</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>x<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>//åŒ¹é…</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>x<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>//åŒ¹é…</span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>x<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>//ä¸åŒ¹é…</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="é›¶å®½æ–­è¨€">é›¶å®½æ–­è¨€</h5>
<p>é¢„æœç´¢ï¼ˆé›¶å®½æ–­è¨€ï¼‰ï¼ˆç¯è§†ï¼‰</p>
<ul>
<li>
<p>åªè¿›è¡Œå­è¡¨è¾¾å¼çš„åŒ¹é…ï¼ŒåŒ¹é…å†…å®¹ä¸è®¡å…¥æœ€ç»ˆçš„åŒ¹é…ç»“æœï¼Œæ˜¯é›¶å®½åº¦</p>
</li>
<li>
<p>åˆ¤æ–­å½“å‰ä½ç½®çš„å‰åå­—ç¬¦ï¼Œæ˜¯å¦ç¬¦åˆæŒ‡å®šçš„æ¡ä»¶ï¼Œä½†ä¸åŒ¹é…å‰åçš„å­—ç¬¦ï¼Œ<strong>æ˜¯å¯¹ä½ç½®çš„åŒ¹é…</strong></p>
</li>
<li>
<p>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå­è¡¨è¾¾å¼åŒ¹é…åˆ°çš„æ˜¯å­—ç¬¦å†…å®¹ï¼Œè€Œéä½ç½®ï¼Œå¹¶è¢«ä¿å­˜åˆ°æœ€ç»ˆçš„åŒ¹é…ç»“æœä¸­ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå­è¡¨è¾¾å¼æ˜¯å æœ‰å­—ç¬¦çš„ï¼›å¦‚æœå­è¡¨è¾¾å¼åŒ¹é…çš„ä»…ä»…æ˜¯ä½ç½®ï¼Œæˆ–è€…åŒ¹é…çš„å†…å®¹å¹¶ä¸ä¿å­˜åˆ°æœ€ç»ˆçš„åŒ¹é…ç»“æœä¸­ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå­è¡¨è¾¾å¼æ˜¯<strong>é›¶å®½åº¦</strong>çš„ã€‚å æœ‰å­—ç¬¦è¿˜æ˜¯é›¶å®½åº¦ï¼Œæ˜¯é’ˆå¯¹åŒ¹é…çš„å†…å®¹æ˜¯å¦ä¿å­˜åˆ°æœ€ç»ˆçš„åŒ¹é…ç»“æœä¸­è€Œè¨€çš„</p>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>(?=exp)</td>
<td>æ–­è¨€è‡ªèº«å‡ºç°çš„ä½ç½®çš„åé¢èƒ½åŒ¹é…è¡¨è¾¾å¼exp</td>
</tr>
<tr>
<td>(?&lt;=exp)</td>
<td>æ–­è¨€è‡ªèº«å‡ºç°çš„ä½ç½®çš„å‰é¢èƒ½åŒ¹é…è¡¨è¾¾å¼exp</td>
</tr>
<tr>
<td>(?!exp)</td>
<td>æ–­è¨€æ­¤ä½ç½®çš„åé¢ä¸èƒ½åŒ¹é…è¡¨è¾¾å¼exp</td>
</tr>
<tr>
<td>(?&lt;!exp)</td>
<td>æ–­è¨€æ­¤ä½ç½®çš„å‰é¢ä¸èƒ½åŒ¹é…è¡¨è¾¾å¼exp</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h4 id="åŒ¹é…æ¨¡å¼">åŒ¹é…æ¨¡å¼</h4>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ¨¡å¼ï¼š</p>
<ul>
<li>IGNORECASE å¿½ç•¥å¤§å°å†™æ¨¡å¼
<ul>
<li>åŒ¹é…æ—¶å¿½ç•¥å¤§å°å†™ã€‚</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯è¦åŒºåˆ†å¤§å°å†™çš„ã€‚</li>
</ul>
</li>
<li>SINGLELINE å•è¡Œæ¨¡å¼
<ul>
<li>æ•´ä¸ªæ–‡æœ¬çœ‹ä½œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªæœ‰ä¸€ä¸ªå¼€å¤´ï¼Œä¸€ä¸ªç»“å°¾ã€‚</li>
<li>ä½¿å°æ•°ç‚¹ â€œ.â€ å¯ä»¥åŒ¹é…åŒ…å«æ¢è¡Œç¬¦ï¼ˆ\nï¼‰åœ¨å†…çš„ä»»æ„å­—ç¬¦ã€‚</li>
</ul>
</li>
<li>MULTILINE å¤šè¡Œæ¨¡å¼
<ul>
<li>æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéƒ½æœ‰å¼€å¤´å’Œç»“å°¾ã€‚</li>
<li>åœ¨æŒ‡å®šäº† MULTILINE ä¹‹åï¼Œå¦‚æœéœ€è¦ä»…åŒ¹é…å­—ç¬¦ä¸²å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ \A å’Œ \Z</li>
</ul>
</li>
</ul>
<h4 id="åˆ†ç»„åŒ¹é…">åˆ†ç»„åŒ¹é…</h4>
<p>Pattern ç±»ï¼š</p>
<ul>
<li><code>static Pattern compile(String regex)</code>ï¼šå°†ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘ä¸ºæ¨¡å¼</li>
<li><code>Matcher matcher(CharSequence input)</code>ï¼šåˆ›å»ºä¸€ä¸ªåŒ¹é…å™¨ï¼ŒåŒ¹é…ç»™å®šçš„è¾“å…¥ä¸æ­¤æ¨¡å¼</li>
<li><code>static boolean matches(String regex, CharSequence input)</code>ï¼šç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶åŒ¹é…è¾“å…¥</li>
</ul>
<p>Matcher ç±»ï¼š</p>
<ul>
<li><code>boolean find()</code>ï¼šæ‰«æè¾“å…¥çš„åºåˆ—ï¼ŒæŸ¥æ‰¾ä¸è¯¥æ¨¡å¼åŒ¹é…çš„ä¸‹ä¸€ä¸ªå­åºåˆ—</li>
<li><code>String group()</code>ï¼šè¿”å›ä¸ä¸Šä¸€ä¸ªåŒ¹é…çš„è¾“å…¥å­åºåˆ—ï¼ŒåŒ group(0)ï¼ŒåŒ¹é…æ•´ä¸ªè¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²</li>
<li><code>String group(int group)</code>ï¼šè¿”å›åœ¨ä¸Šä¸€æ¬¡åŒ¹é…æ“ä½œæœŸé—´ç”±ç»™å®šç»„æ•è·çš„è¾“å…¥å­åºåˆ—</li>
<li><code>int groupCount()</code>ï¼šè¿”å›æ­¤åŒ¹é…å™¨æ¨¡å¼ä¸­æ•è·ç»„çš„æ•°é‡</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class Demo01&#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		<span class="regexp">//</span>è¡¨è¾¾å¼å¯¹è±¡</span><br><span class="line">		Pattern p = Pattern.compile(<span class="string">&quot;\\w+&quot;</span>);</span><br><span class="line">		<span class="regexp">//</span>åˆ›å»ºMatcherå¯¹è±¡</span><br><span class="line">		Matcher m = p.matcher(<span class="string">&quot;asfsdf2&amp;&amp;3323&quot;</span>);</span><br><span class="line">		<span class="regexp">//</span>boolean b = m.matches();<span class="regexp">//</span>å°è¯•å°†æ•´ä¸ªå­—ç¬¦åºåˆ—ä¸è¯¥æ¨¡å¼åŒ¹é…</span><br><span class="line">		<span class="regexp">//</span>System.out.println(b);<span class="regexp">//</span>false</span><br><span class="line">		<span class="regexp">//</span>boolean b2 = m.find();<span class="regexp">//</span>è¯¥æ–¹æ³•æ‰«æè¾“å…¥çš„åºåˆ—ï¼ŒæŸ¥æ‰¾ä¸è¯¥æ¨¡å¼åŒ¹é…çš„ä¸‹ä¸€ä¸ªå­åºåˆ—</span><br><span class="line">		<span class="regexp">//</span>System.out.println(b2);<span class="regexp">//</span>true</span><br><span class="line">		</span><br><span class="line">		<span class="regexp">//</span>System.out.println(m.find());</span><br><span class="line">		<span class="regexp">//</span>System.out.println(m.group());<span class="regexp">//</span>asfsdf2</span><br><span class="line">		<span class="regexp">//</span>System.out.println(m.find());</span><br><span class="line">		<span class="regexp">//</span>System.out.println(m.group());<span class="regexp">//</span><span class="number">3323</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">while</span>(m.find())&#123;</span><br><span class="line">			System.out.println(m.group());	<span class="regexp">//g</span>roup(),group(<span class="number">0</span>)åŒ¹é…æ•´ä¸ªè¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²</span><br><span class="line">			System.out.println(m.group(<span class="number">0</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">public class Demo02 &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		<span class="regexp">//</span>åœ¨è¿™ä¸ªå­—ç¬¦ä¸²ï¼šasfsdf23323ï¼Œæ˜¯å¦ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\w+</span><br><span class="line">		<span class="regexp">//</span>è¡¨è¾¾å¼å¯¹è±¡</span><br><span class="line">        Pattern p = Pattern.compile(<span class="string">&quot;(([a-z]+)([0-9]+))&quot;</span>);<span class="regexp">//</span>ä¸éœ€è¦åŠ å¤šä½™çš„æ‹¬å·</span><br><span class="line">		<span class="regexp">//</span>åˆ›å»ºMatcherå¯¹è±¡</span><br><span class="line">		Matcher m = p.matcher(<span class="string">&quot;aa232**ssd445&quot;</span>);</span><br><span class="line">	</span><br><span class="line">		<span class="keyword">while</span>(m.find())&#123;</span><br><span class="line">			System.out.println(m.group());<span class="regexp">//</span>aa232  ssd445</span><br><span class="line">			System.out.println(m.group(<span class="number">1</span>));<span class="regexp">//</span>aa232  ssd445</span><br><span class="line">			System.out.println(m.group(<span class="number">2</span>));<span class="regexp">//</span>aa     ssd</span><br><span class="line">            System.out.println(m.group(<span class="number">3</span>));<span class="regexp">//</span><span class="number">232</span>    <span class="number">445</span> </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼æ”¹ä¸º <code>&quot;(([a-z]+)(?:[0-9]+))&quot;</code>   æ²¡æœ‰ group(3) å› ä¸ºæ˜¯éæ•è·ç»„</li>
<li>æ­£åˆ™è¡¨è¾¾å¼æ”¹ä¸º <code>&quot;([a-z]+)([0-9]+)&quot;</code>  æ²¡æœ‰ group(3)    aa232  - aa  --232</li>
</ul>
<h4 id="åº”ç”¨">åº”ç”¨</h4>
<h5 id="åŸºæœ¬éªŒè¯">åŸºæœ¬éªŒè¯</h5>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">public</span> <span class="keyword">static</span> <span class="variable">void</span> <span class="title function_">main</span>(<span class="params">String</span>[] <span class="params">args</span>)&#123;</span><br><span class="line">	<span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;a&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;[abc]&quot;</span>));<span class="comment">//trueåˆ¤æ–­aæ˜¯å¦åœ¨abc</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;a&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;[^abc]&quot;</span>));<span class="comment">//false åˆ¤æ–­aæ˜¯å¦åœ¨abcä¹‹å¤–çš„</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;a&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;<span class="char escape_">\\</span>d&quot;</span>)); <span class="comment">//false æ˜¯å¦aæ˜¯æ•´æ•°</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;a&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;<span class="char escape_">\\</span>w&quot;</span>)); <span class="comment">//true æ˜¯å¦æ˜¯å­—ç¬¦</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;ä½ &quot;</span>.<span class="property">matches</span>(<span class="string">&quot;<span class="char escape_">\\</span>w&quot;</span>)); <span class="comment">// false</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;aa&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;<span class="char escape_">\\</span>w&quot;</span>));<span class="comment">//false åªèƒ½æ£€éªŒå•ä¸ªå­—ç¬¦</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯†ç  å¿…é¡»æ˜¯æ•°å­— å­—æ¯ ä¸‹åˆ’çº¿ è‡³å°‘ 6ä½</span></span><br><span class="line">	<span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;ssds3c&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;<span class="char escape_">\\</span>w&#123;6,&#125;&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">    <span class="comment">// éªŒè¯ã€‚å¿…é¡»æ˜¯æ•°å­—å’Œå­—ç¬¦  å¿…é¡»æ˜¯4ä½</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;dsd22&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;[a-zA-Z0-9]&#123;4&#125;&quot;</span>)); <span class="comment">// false</span></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;A3dy&quot;</span>.<span class="property">matches</span>(<span class="string">&quot;[a-zA-Z0-9]&#123;4&#125;&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="éªŒè¯å·ç ">éªŒè¯å·ç </h5>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1å¼€å¤´ ç¬¬äºŒä½æ˜¯2-9çš„æ•°å­—</span></span><br><span class="line"><span class="variable">public</span> <span class="keyword">static</span> <span class="variable">void</span> <span class="title function_">checkPhone</span>(<span class="params">String</span> <span class="params">phone</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">phone</span>.<span class="property">matches</span>(<span class="string">&quot;1[3-9]<span class="char escape_">\\</span>d&#123;9&#125;&quot;</span>))&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;æ‰‹æœºå·ç æ ¼å¼æ­£ç¡®ï¼&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="operator">...</span><span class="operator">...</span>.&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1111@qq.com  zhy@pic.com.cn</span></span><br><span class="line"><span class="variable">public</span> <span class="keyword">static</span> <span class="variable">void</span> <span class="title function_">checkEmail</span>(<span class="params">String</span> <span class="params">email</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">email</span>.<span class="property">matches</span>(<span class="string">&quot;<span class="char escape_">\\</span>w&#123;1,&#125;@<span class="char escape_">\\</span>w&#123;1,&#125;(<span class="char escape_">\\</span>.<span class="char escape_">\\</span>w&#123;2,5&#125;)&#123;1,2&#125;&quot;</span>))&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;é‚®ç®±æ ¼å¼æ­£ç¡®ï¼&quot;</span>);</span><br><span class="line">    &#125;<span class="comment">// .æ˜¯ä»»æ„å­—ç¬¦ \\.å°±æ˜¯ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æŸ¥æ‰¾æ›¿æ¢">æŸ¥æ‰¾æ›¿æ¢</h5>
<ul>
<li><code>public String[] split(String regex)</code>ï¼šæŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹è¿›è¡Œåˆ†å‰²å­—ç¬¦ä¸²ï¼Œåå›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„</li>
<li><code>public String replaceAll(String regex,String newStr)</code>ï¼šæŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹è¿›è¡Œæ›¿æ¢</li>
</ul>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°ç»„åˆ†å‰²</span></span><br><span class="line"><span class="variable">public</span> <span class="keyword">static</span> <span class="variable">void</span> <span class="title function_">main</span>(<span class="params">String</span>[] <span class="params">args</span>) &#123;</span><br><span class="line">	<span class="comment">// 1.splitçš„åŸºç¡€ç”¨æ³•</span></span><br><span class="line">	<span class="title class_">String</span> <span class="variable">names</span> <span class="operator">=</span> <span class="string">&quot;é£æ¸…æ‰¬,å¼ æ— å¿Œ,å‘¨èŠ·è‹¥&quot;</span>;</span><br><span class="line">	<span class="comment">// ä»¥â€œï¼Œâ€åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">    <span class="title class_">String</span>[] <span class="variable">nameArrs</span> <span class="operator">=</span> <span class="variable">names</span>.<span class="property">split</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.splité›†åˆæ­£åˆ™è¡¨è¾¾å¼åšåˆ†å‰²</span></span><br><span class="line">    <span class="title class_">String</span> <span class="variable">names1</span> <span class="operator">=</span> <span class="string">&quot;é£æ¸…æ‰¬lv434fda324å¼ æ— å¿Œ87632fad2342423å‘¨èŠ·è‹¥&quot;</span>;</span><br><span class="line">    <span class="comment">// ä»¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ä¸ºåˆ†å‰²ç‚¹åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">	<span class="title class_">String</span>[] <span class="variable">nameArrs1</span> <span class="operator">=</span> <span class="variable">names1</span>.<span class="property">split</span>(<span class="string">&quot;<span class="char escape_">\\</span>w+&quot;</span>);</span><br><span class="line">    </span><br><span class="line">	<span class="comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®šä½å‡ºå†…å®¹ï¼Œæ›¿æ¢æˆ/</span></span><br><span class="line">	<span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="variable">names1</span>.<span class="property">replaceAll</span>(<span class="string">&quot;<span class="char escape_">\\</span>w+&quot;</span>,<span class="string">&quot;/&quot;</span>));<span class="comment">//é£æ¸…æ‰¬/å¼ æ— å¿Œ/å‘¨èŠ·è‹¥</span></span><br><span class="line"></span><br><span class="line">	<span class="title class_">String</span> <span class="variable">names3</span> <span class="operator">=</span> <span class="string">&quot;é£æ¸…æ‰¬,å¼ æ— å¿Œ,å‘¨èŠ·è‹¥&quot;</span>;</span><br><span class="line">	<span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="variable">names3</span>.<span class="property">replaceAll</span>(<span class="string">&quot;,&quot;</span>,<span class="string">&quot;-&quot;</span>));<span class="comment">//é£æ¸…æ‰¬-å¼ æ— å¿Œ-å‘¨èŠ·è‹¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æœç´¢å·ç ">æœç´¢å·ç </h5>
<p>æ‰¾å‡ºæ‰€æœ‰ 189 å’Œ 132 å¼€å¤´çš„æ‰‹æœºå·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="string">&quot;189asjk65as1891898777745gkkkk189745612318936457894&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;(?=((189|132)\\d&#123;8&#125;))&quot;</span>;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(rs);</span><br><span class="line">        <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">            System.out.println(matcher.group(<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é›†åˆ">é›†åˆ</h2>
<h3 id="é›†åˆæ¦‚è¿°">é›†åˆæ¦‚è¿°</h3>
<p>é›†åˆæ˜¯ä¸€ä¸ªå¤§å°å¯å˜çš„å®¹å™¨ï¼Œå®¹å™¨ä¸­çš„æ¯ä¸ªæ•°æ®ç§°ä¸ºä¸€ä¸ªå…ƒç´ </p>
<p>é›†åˆç‰¹ç‚¹ï¼šç±»å‹å¯ä»¥ä¸ç¡®å®šï¼Œå¤§å°ä¸å›ºå®šï¼›é›†åˆæœ‰å¾ˆå¤šï¼Œä¸åŒçš„é›†åˆç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯ä¸åŒ</p>
<p>æ•°ç»„ï¼šç±»å‹å’Œé•¿åº¦ä¸€æ—¦å®šä¹‰å‡ºæ¥å°±éƒ½å›ºå®š</p>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>åœ¨å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™å…ƒç´ çš„ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„</li>
<li>è€Œä¸”ç»å¸¸è¦è¿›è¡Œå…ƒç´ çš„å¢åˆ è¯¥æŸ¥æ“ä½œï¼Œé›†åˆéƒ½æ˜¯éå¸¸åˆé€‚çš„ï¼Œå¼€å‘ä¸­é›†åˆç”¨çš„æ›´å¤š</li>
</ul>
<h3 id="å­˜å‚¨ç»“æ„">å­˜å‚¨ç»“æ„</h3>
<p>æ•°æ®ç»“æ„æŒ‡çš„æ˜¯æ•°æ®ä»¥ä»€ä¹ˆæ–¹å¼ç»„ç»‡åœ¨ä¸€èµ·ï¼Œä¸åŒçš„æ•°æ®ç»“æ„ï¼Œå¢åˆ æŸ¥çš„æ€§èƒ½æ˜¯ä¸ä¸€æ ·çš„</p>
<p>æ•°æ®å­˜å‚¨çš„å¸¸ç”¨ç»“æ„æœ‰ï¼šæ ˆã€é˜Ÿåˆ—ã€æ•°ç»„ã€é“¾è¡¨å’Œçº¢é»‘æ ‘</p>
<ul>
<li>
<p>é˜Ÿåˆ—ï¼ˆqueueï¼‰ï¼šå…ˆè¿›å…ˆå‡ºï¼Œåè¿›åå‡ºã€‚(FIFO first in first out)</p>
</li>
<li>
<p>æ ˆï¼ˆstackï¼‰ï¼šåè¿›å…ˆå‡ºï¼Œå…ˆè¿›åå‡º ï¼ˆLIFOï¼‰</p>
</li>
<li>
<p>æ•°ç»„ï¼šæ•°ç»„æ˜¯å†…å­˜ä¸­çš„è¿ç»­å­˜å‚¨åŒºåŸŸï¼Œåˆ†æˆè‹¥å¹²ç­‰åˆ†çš„å°åŒºåŸŸï¼ˆæ¯ä¸ªåŒºåŸŸå¤§å°æ˜¯ä¸€æ ·çš„ï¼‰å…ƒç´ å­˜åœ¨ç´¢å¼•</p>
<p>ç‰¹ç‚¹ï¼š<strong>æŸ¥è¯¢å…ƒç´ å¿«</strong>ï¼ˆæ ¹æ®ç´¢å¼•å¿«é€Ÿè®¡ç®—å‡ºå…ƒç´ çš„åœ°å€ï¼Œç„¶åç«‹å³å»å®šä½ï¼‰ï¼Œ<strong>å¢åˆ å…ƒç´ æ…¢</strong>ï¼ˆåˆ›å»ºæ–°æ•°ç»„ï¼Œè¿ç§»å…ƒç´ ï¼‰</p>
</li>
<li>
<p>é“¾è¡¨ï¼šå…ƒç´ ä¸æ˜¯å†…å­˜ä¸­çš„è¿ç»­åŒºåŸŸå­˜å‚¨ï¼Œå…ƒç´ æ˜¯æ¸¸ç¦»å­˜å‚¨çš„ï¼Œæ¯ä¸ªå…ƒç´ ä¼šè®°å½•ä¸‹ä¸ªå…ƒç´ çš„åœ°å€ ç‰¹ç‚¹ï¼š<strong>æŸ¥è¯¢å…ƒç´ æ…¢ï¼Œå¢åˆ å…ƒç´ å¿«</strong>ï¼ˆé’ˆå¯¹äºé¦–å°¾å…ƒç´ ï¼Œé€Ÿåº¦æå¿«ï¼Œä¸€èˆ¬æ˜¯åŒé“¾è¡¨ï¼‰</p>
</li>
<li>
<p>æ ‘ï¼š</p>
<ul>
<li>
<p>äºŒå‰æ ‘ï¼šbinary tree æ°¸è¿œåªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ˜¯æ¯ä¸ªç»“ç‚¹ä¸è¶…è¿‡2ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼ˆtreeï¼‰</p>
<p>ç‰¹ç‚¹ï¼šäºŒå‰æ’åºæ ‘ï¼šå°çš„å·¦è¾¹ï¼Œå¤§çš„å³è¾¹ï¼Œä½†æ˜¯å¯èƒ½æ ‘å¾ˆé«˜ï¼Œæ€§èƒ½å˜å·®ï¼Œä¸ºäº†åšæ’åºå’Œæœç´¢ä¼šè¿›è¡Œå·¦æ—‹å’Œå³æ—‹å®ç°å¹³è¡¡æŸ¥æ‰¾äºŒå‰æ ‘ï¼Œè®©æ ‘çš„é«˜åº¦å·®ä¸å¤§äº1</p>
</li>
<li>
<p>çº¢é»‘æ ‘ï¼ˆåŸºäºçº¢é»‘è§„åˆ™å®ç°è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰ï¼šæ ‘ä¿è¯åˆ°äº†å¾ˆçŸ®å°ï¼Œä½†æ˜¯åˆæ’å¥½åºï¼Œæ€§èƒ½æœ€é«˜çš„</p>
<p>ç‰¹ç‚¹ï¼š<strong>çº¢é»‘æ ‘çš„å¢åˆ æŸ¥æ”¹æ€§èƒ½éƒ½å¥½</strong></p>
</li>
</ul>
</li>
</ul>
<p>å„æ•°æ®ç»“æ„æ—¶é—´å¤æ‚åº¦å¯¹æ¯”ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%AF%B9%E6%AF%94.png" alt="img"></p>
<p>å›¾ç‰‡æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.bigocheatsheet.com/">https://www.bigocheatsheet.com/</a></p>
<h3 id="Collection">Collection</h3>
<h4 id="æ¦‚è¿°-4">æ¦‚è¿°</h4>
<p>Java ä¸­é›†åˆçš„ä»£è¡¨æ˜¯ Collectionï¼ŒCollection é›†åˆæ˜¯ Java ä¸­é›†åˆçš„ç¥–å®—ç±»</p>
<p>Collection é›†åˆåº•å±‚ä¸ºæ•°ç»„ï¼š<code>[value1, value2, ....]</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Collectioné›†åˆçš„ä½“ç³»:</span><br><span class="line">                      Collection<span class="tag">&lt;<span class="name">E</span>&gt;</span>(æ¥å£)</span><br><span class="line">                 /                         \</span><br><span class="line">          Set<span class="tag">&lt;<span class="name">E</span>&gt;</span>(æ¥å£)                    List<span class="tag">&lt;<span class="name">E</span>&gt;</span>(æ¥å£)</span><br><span class="line">      /               \                  /             \</span><br><span class="line"> HashSet<span class="tag">&lt;<span class="name">E</span>&gt;</span>(å®ç°ç±») TreeSet<span class="tag">&lt;&gt;</span>(å®ç°ç±»)  ArrayList<span class="tag">&lt;<span class="name">E</span>&gt;</span>(å®ç°ç±»)  LinekdList<span class="tag">&lt;&gt;</span>(å®ç°ç±»)</span><br><span class="line"> /</span><br><span class="line">LinkedHashSet<span class="tag">&lt;&gt;</span>(å®ç°ç±»)</span><br></pre></td></tr></table></figure>
<p><strong>é›†åˆçš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>Set ç³»åˆ—é›†åˆï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æ— åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•çš„
<ul>
<li>HashSetï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æ— åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•çš„</li>
<li>LinkedHashSetï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•çš„</li>
<li>TreeSetï¼šä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼ŒæŒ‰ç…§å¤§å°é»˜è®¤å‡åºæ’åº</li>
</ul>
</li>
<li>List ç³»åˆ—é›†åˆï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•
<ul>
<li>ArrayListï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•</li>
<li>LinekdListï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•</li>
</ul>
</li>
</ul>
<h4 id="API-2">API</h4>
<p>Collection æ˜¯é›†åˆçš„ç¥–å®—ç±»ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å…¨éƒ¨é›†åˆéƒ½å¯ä»¥ç»§æ‰¿ä½¿ç”¨çš„ï¼Œæ‰€ä»¥è¦å­¦ä¹ å®ƒã€‚</p>
<p>Collection å­ç±»çš„æ„é€ å™¨éƒ½æœ‰å¯ä»¥åŒ…è£…å…¶ä»–å­ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>public ArrayList(Collection c)</code>ï¼šæ„é€ æ–°é›†åˆï¼Œå…ƒç´ æŒ‰ç…§ç”±é›†åˆçš„è¿­ä»£å™¨è¿”å›çš„é¡ºåº</li>
<li><code>public HashSet(Collection c)</code>ï¼šæ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ çš„æ–°é›†åˆ</li>
</ul>
<p>Collection API å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>public boolean add(E e)</code>ï¼šæŠŠç»™å®šçš„å¯¹è±¡æ·»åŠ åˆ°å½“å‰é›†åˆä¸­ ã€‚</li>
<li><code>public void clear()</code>ï¼šæ¸…ç©ºé›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ ã€‚</li>
<li><code>public boolean remove(E e)</code>ï¼šæŠŠç»™å®šçš„å¯¹è±¡åœ¨å½“å‰é›†åˆä¸­åˆ é™¤ã€‚</li>
<li><code>public boolean contains(Object obj)</code>ï¼šåˆ¤æ–­å½“å‰é›†åˆä¸­æ˜¯å¦åŒ…å«ç»™å®šçš„å¯¹è±¡ã€‚</li>
<li><code>public boolean isEmpty()</code>ï¼šåˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</li>
<li><code>public int size()</code>ï¼šè¿”å›é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚</li>
<li><code>public Object[] toArray()</code>ï¼šæŠŠé›†åˆä¸­çš„å…ƒç´ ï¼Œå­˜å‚¨åˆ°æ•°ç»„ä¸­</li>
<li><code>public boolean addAll(Collection c)</code>ï¼šå°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°æ­¤é›†åˆ</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> CollectionDemo &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">        Collection&lt;String&gt; sets = <span class="built_in">new</span> HashSet&lt;&gt;();</span><br><span class="line">        sets.<span class="keyword">add</span>(&quot;MyBatis&quot;);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(sets.<span class="keyword">add</span>(&quot;Java&quot;));//<span class="keyword">true</span></span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(sets.<span class="keyword">add</span>(&quot;Java&quot;));//<span class="keyword">false</span></span><br><span class="line">        sets.<span class="keyword">add</span>(&quot;Spring&quot;);</span><br><span class="line">        sets.<span class="keyword">add</span>(&quot;MySQL&quot;);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(sets)//[]æ— åºçš„;</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(sets.contains(&quot;java&quot;));//<span class="keyword">true</span> å­˜åœ¨</span><br><span class="line">        <span class="keyword">Object</span>[] arrs = sets.toArray();</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æ•°ç»„ï¼š&quot;+ Arrays.toString(arrs));</span><br><span class="line">        </span><br><span class="line">        Collection&lt;String&gt; c1 = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        c1.<span class="keyword">add</span>(&quot;java&quot;);</span><br><span class="line">        Collection&lt;String&gt; c2 = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        c2.<span class="keyword">add</span>(&quot;ee&quot;);</span><br><span class="line">        c1.addAll(c2);// c1:[java,ee]  c2:[ee];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="éå†">éå†</h4>
<p>Collection é›†åˆçš„éå†æ–¹å¼æœ‰ä¸‰ç§:</p>
<p>é›†åˆå¯ä»¥ç›´æ¥è¾“å‡ºå†…å®¹ï¼Œå› ä¸ºåº•å±‚é‡å†™äº† toString() æ–¹æ³•</p>
<ol>
<li>
<p>è¿­ä»£å™¨</p>
<ul>
<li><code>public Iterator iterator()</code>ï¼šè·å–é›†åˆå¯¹åº”çš„è¿­ä»£å™¨ï¼Œç”¨æ¥éå†é›†åˆä¸­çš„å…ƒç´ çš„</li>
<li><code>E next()</code>ï¼šè·å–ä¸‹ä¸€ä¸ªå…ƒç´ å€¼</li>
<li><code>boolean hasNext()</code>ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæœ‰è¿”å› true ï¼Œåä¹‹è¿”å› false</li>
<li><code>default void remove()</code>ï¼šä»åº•å±‚é›†åˆä¸­åˆ é™¤æ­¤è¿­ä»£å™¨è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿™ç§æ–¹æ³•åªèƒ½åœ¨æ¯æ¬¡è°ƒç”¨ next() æ—¶è°ƒç”¨ä¸€æ¬¡</li>
</ul>
</li>
<li>
<p>å¢å¼º for å¾ªç¯ï¼šå¯ä»¥éå†é›†åˆæˆ–è€…æ•°ç»„ï¼Œéå†é›†åˆå®é™…ä¸Šæ˜¯è¿­ä»£å™¨éå†çš„ç®€åŒ–å†™æ³•</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">for</span><span class="params">(è¢«éå†é›†åˆæˆ–è€…æ•°ç»„ä¸­å…ƒç´ çš„ç±»å‹ å˜é‡åç§° : è¢«éå†é›†åˆæˆ–è€…æ•°ç»„)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼ºç‚¹ï¼šéå†æ— æ³•çŸ¥é“éå†åˆ°äº†å“ªä¸ªå…ƒç´ äº†ï¼Œå› ä¸ºæ²¡æœ‰ç´¢å¼•</p>
</li>
<li>
<p>JDK 1.8 å¼€å§‹ä¹‹åçš„æ–°æŠ€æœ¯ Lambda è¡¨è¾¾å¼</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CollectionDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        Collection&lt;String&gt; lists = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;aa&quot;</span>);</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;bb&quot;</span>);</span><br><span class="line">        lists.<span class="keyword">add</span>(<span class="string">&quot;cc&quot;</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(lists); <span class="comment">// lists = [aa, bb, cc]</span></span><br><span class="line">		<span class="comment">//è¿­ä»£å™¨æµç¨‹</span></span><br><span class="line">        <span class="comment">// 1.å¾—åˆ°é›†åˆçš„è¿­ä»£å™¨å¯¹è±¡ã€‚</span></span><br><span class="line">        Iterator&lt;String&gt; it = lists.iterator();</span><br><span class="line">        <span class="comment">// 2.ä½¿ç”¨whileå¾ªç¯éå†ã€‚</span></span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            String ele = it.next();</span><br><span class="line">            System.<span class="keyword">out</span>.println(ele);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">		<span class="comment">//å¢å¼ºfor</span></span><br><span class="line">        <span class="keyword">for</span> (String ele : lists) &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(ele);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//lambdaè¡¨è¾¾å¼</span></span><br><span class="line">        lists.forEach(s -&gt; &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(s);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="List">List</h4>
<h5 id="æ¦‚è¿°-5">æ¦‚è¿°</h5>
<p>List é›†åˆç»§æ‰¿äº† Collection é›†åˆå…¨éƒ¨çš„åŠŸèƒ½ã€‚</p>
<p>List ç³»åˆ—é›†åˆæœ‰ç´¢å¼•ï¼Œæ‰€ä»¥å¤šäº†å¾ˆå¤šæŒ‰ç…§ç´¢å¼•æ“ä½œå…ƒç´ çš„åŠŸèƒ½ï¼šfor å¾ªç¯éå†ï¼ˆ4 ç§éå†ï¼‰</p>
<p>List ç³»åˆ—é›†åˆï¼š</p>
<ul>
<li>
<p>ArrayListï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•</p>
</li>
<li>
<p>LinekdListï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•</p>
</li>
</ul>
<h5 id="ArrayList">ArrayList</h5>
<h6 id="ä»‹ç»">ä»‹ç»</h6>
<p>ArrayList æ·»åŠ çš„å…ƒç´ ï¼Œæ˜¯æœ‰åºï¼Œå¯é‡å¤ï¼Œæœ‰ç´¢å¼•çš„</p>
<ul>
<li><code>public boolean add(E e)</code>ï¼šå°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤é›†åˆçš„æœ«å°¾</li>
<li><code>public void add(int index, E element)</code>ï¼šå°†æŒ‡å®šçš„å…ƒç´ ï¼Œæ·»åŠ åˆ°è¯¥é›†åˆä¸­çš„æŒ‡å®šä½ç½®ä¸Š</li>
<li><code>public E get(int index)</code>ï¼šè¿”å›é›†åˆä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ </li>
<li><code>public E remove(int index)</code>ï¼šç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œè¿”å›çš„æ˜¯è¢«ç§»é™¤çš„å…ƒç´ </li>
<li><code>public E set(int index, E element)</code>ï¼šç”¨æŒ‡å®šå…ƒç´ æ›¿æ¢é›†åˆä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œè¿”å›æ›´æ–°å‰çš„å…ƒç´ å€¼</li>
<li><code>int indexOf(Object o)</code>ï¼šè¿”å›åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœä¸åŒ…å«æ­¤å…ƒç´ ï¼Œåˆ™è¿”å› -1</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</span><br><span class="line">    List&lt;String&gt; lists = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//å¤šæ€</span></span><br><span class="line">    lists.<span class="keyword">add</span>(<span class="string">&quot;java1&quot;</span>);</span><br><span class="line">    lists.<span class="keyword">add</span>(<span class="string">&quot;java1&quot;</span>);<span class="comment">//å¯ä»¥é‡å¤</span></span><br><span class="line">    lists.<span class="keyword">add</span>(<span class="string">&quot;java2&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span> ; i &lt; lists.size() ; i++ ) &#123;</span><br><span class="line">            String ele = lists.<span class="keyword">get</span>(i);</span><br><span class="line">            System.<span class="keyword">out</span>.println(ele);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="æºç ">æºç </h6>
<p>ArrayList å®ç°ç±»é›†åˆåº•å±‚<strong>åŸºäºæ•°ç»„å­˜å‚¨æ•°æ®</strong>çš„ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ArrayList&lt;E&gt;</span> <span class="keyword">extends</span> <span class="title">AbstractList&lt;E&gt;</span></span></span><br><span class="line">        implements <span class="type">List</span>&lt;<span class="type">E</span>&gt;, <span class="type">RandomAccess</span>, <span class="type">Cloneable</span>, java.io.<span class="type">Serializable</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>RandomAccess</code> æ˜¯ä¸€ä¸ªæ ‡å¿—æ¥å£ï¼Œè¡¨æ˜å®ç°è¿™ä¸ªè¿™ä¸ªæ¥å£çš„ List é›†åˆæ˜¯æ”¯æŒ<strong>å¿«é€Ÿéšæœºè®¿é—®</strong>çš„ã€‚åœ¨ <code>ArrayList</code> ä¸­ï¼Œæˆ‘ä»¬å³å¯ä»¥é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡ï¼Œè¿™å°±æ˜¯å¿«é€Ÿéšæœºè®¿é—®ã€‚</li>
<li><code>ArrayList</code> å®ç°äº† <code>Cloneable</code> æ¥å£ ï¼Œå³è¦†ç›–äº†å‡½æ•° <code>clone()</code>ï¼Œèƒ½è¢«å…‹éš†</li>
<li><code>ArrayList</code> å®ç°äº† <code>Serializable</code> æ¥å£ï¼Œè¿™æ„å‘³ç€ <code>ArrayList</code> æ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“</li>
</ul>
<p>æ ¸å¿ƒæ–¹æ³•ï¼š</p>
<ul>
<li>
<p>æ„é€ å‡½æ•°ï¼šä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ï¼ˆæƒ°æ€§åˆå§‹åŒ–ï¼‰ï¼Œå³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ<strong>æ•°ç»„å®¹é‡æ‰©ä¸º 10</strong></p>
</li>
<li>
<p>æ·»åŠ å…ƒç´ ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// e æ’å…¥çš„å…ƒç´   elementDataåº•å±‚æ•°ç»„   size æ’å…¥çš„ä½ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">ensureCapacityInternal</span>(size + <span class="number">1</span>);	<span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;			<span class="comment">// æ’å…¥sizeä½ç½®ï¼Œç„¶ååŠ ä¸€</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ add ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayListï¼Œsize æ˜¯ 0ï¼Œè¿›å…¥ ensureCapacityInternal æ–¹æ³•ï¼Œ</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> void ensure<span class="constructor">CapacityInternal(<span class="params">int</span> <span class="params">minCapacity</span>)</span> &#123;</span><br><span class="line">    ensure<span class="constructor">ExplicitCapacity(<span class="params">calculateCapacity</span>(<span class="params">elementData</span>, <span class="params">minCapacity</span>)</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­elementDataæ˜¯ä¸æ˜¯ç©ºæ•°ç»„</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="comment">// è¿”å›é»˜è®¤å€¼å’Œæœ€å°éœ€æ±‚å®¹é‡æœ€å¤§çš„ä¸€ä¸ª</span></span><br><span class="line">        <span class="function"><span class="keyword">return</span> Math.<span class="title">max</span><span class="params">(DEFAULT_CAPACITY, minCapacity)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦çš„å®¹é‡å¤§äºæ•°ç»„é•¿åº¦ï¼Œè¿›è¡Œæ‰©å®¹ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span></span><br><span class="line">private void <span class="built_in">ensureExplicitCapacity</span>(int minCapacity) &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// ç´¢å¼•è¶Šç•Œ</span></span><br><span class="line">    if (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†</span></span><br><span class="line">        <span class="built_in">grow</span>(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šç´¢å¼•æ’å…¥ï¼Œ<strong>åœ¨æ—§æ•°ç»„ä¸Šæ“ä½œ</strong>ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="type">void</span> <span class="keyword">add</span>(<span class="type">int</span> <span class="keyword">index</span>, E element) &#123;</span><br><span class="line">    rangeCheckForAdd(<span class="keyword">index</span>);</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  // Increments modCount!!</span><br><span class="line">    // å°†æŒ‡å®šç´¢å¼•åçš„æ•°æ®åç§»</span><br><span class="line">    <span class="keyword">System</span>.arraycopy(elementData, <span class="keyword">index</span>, elementData, <span class="keyword">index</span> + <span class="number">1</span>, size - <span class="keyword">index</span>);</span><br><span class="line">    elementData[<span class="keyword">index</span>] = element;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‰©å®¹ï¼šæ–°å®¹é‡çš„å¤§å°ä¸º <code>oldCapacity + (oldCapacity &gt;&gt; 1)</code>ï¼Œ<code>oldCapacity &gt;&gt; 1</code> éœ€è¦å–æ•´ï¼Œæ‰€ä»¥æ–°å®¹é‡å¤§çº¦æ˜¯æ—§å®¹é‡çš„ 1.5 å€å·¦å³ï¼Œå³ oldCapacity+oldCapacity/2</p>
<p>æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨ <code>Arrays.copyOf()</code>ï¼ˆåº•å±‚ <code>System.arraycopy()</code>ï¼‰æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°<strong>æ–°æ•°ç»„</strong>ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»º ArrayList å¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚çš„å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> void grow(int minCapacity) &#123;</span><br><span class="line">    int oldCapacity = elementData.length;</span><br><span class="line">    int <span class="keyword">new</span><span class="type">Capacity</span> = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//æ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Capacity</span> - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">new</span><span class="type">Capacity</span> = minCapacity;<span class="comment">//ä¸éœ€è¦æ‰©å®¹è®¡ç®—</span></span><br><span class="line">    <span class="comment">//æ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å¤§æ•°ç»„å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span><span class="type">Capacity</span> - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">//å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`</span></span><br><span class="line">        <span class="comment">//å¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`</span></span><br><span class="line">        <span class="keyword">new</span><span class="type">Capacity</span> = hugeCapacity(minCapacity);</span><br><span class="line">    elementData = Arrays.copyOf(elementData, <span class="keyword">new</span><span class="type">Capacity</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MAX_ARRAY_SIZEï¼šè¦åˆ†é…çš„æ•°ç»„çš„æœ€å¤§å¤§å°ï¼Œåˆ†é…æ›´å¤§çš„<strong>å¯èƒ½</strong>ä¼šå¯¼è‡´</p>
<ul>
<li>OutOfMemoryError:Requested array size exceeds VM limitï¼ˆè¯·æ±‚çš„æ•°ç»„å¤§å°è¶…å‡º VM é™åˆ¶ï¼‰</li>
<li>OutOfMemoryError: Java heap spaceï¼ˆå †åŒºå†…å­˜ä¸è¶³ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® JVM å‚æ•° -Xmx æ¥è°ƒèŠ‚ï¼‰</li>
</ul>
</li>
<li>
<p>åˆ é™¤å…ƒç´ ï¼šéœ€è¦è°ƒç”¨ System.arraycopy() å°† index+1 åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ° index ä½ç½®ä¸Šï¼Œåœ¨æ—§æ•°ç»„ä¸Šæ“ä½œï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œå¯ä»¥çœ‹åˆ° ArrayList åˆ é™¤å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> E remove(<span class="type">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">    range<span class="keyword">Check</span>(<span class="keyword">index</span>);</span><br><span class="line">    modCount++;</span><br><span class="line">    E oldValue = elementData(<span class="keyword">index</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> numMoved = size - <span class="keyword">index</span> - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">System</span>.arraycopy(elementData, <span class="keyword">index</span>+<span class="number">1</span>, elementData, <span class="keyword">index</span>, numMoved);</span><br><span class="line">    elementData[<span class="comment">--size] = null; // clear to let GC do its work</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åºåˆ—åŒ–ï¼šArrayList åŸºäºæ•°ç»„å¹¶ä¸”å…·æœ‰åŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œå°±æ²¡å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–ã€‚ä¿å­˜å…ƒç´ çš„æ•°ç»„ elementData ä½¿ç”¨ transient ä¿®é¥°ï¼Œè¯¥å…³é”®å­—å£°æ˜æ•°ç»„é»˜è®¤ä¸ä¼šè¢«åºåˆ—åŒ–</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transient <span class="selector-tag">Object</span><span class="selector-attr">[]</span> elementData;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ensureCapacityï¼šå¢åŠ æ­¤å®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘å¯ä»¥å®¹çº³æœ€å°å®¹é‡å‚æ•°æŒ‡å®šçš„å…ƒç´ æ•°ï¼Œå‡å°‘å¢é‡é‡æ–°åˆ†é…çš„æ¬¡æ•°</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public void <span class="built_in">ensureCapacity</span>(int minCapacity) &#123;</span><br><span class="line">    if (minCapacity &gt; elementData.length</span><br><span class="line">        &amp;&amp; !(elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><br><span class="line">             &amp;&amp; minCapacity &lt;= DEFAULT_CAPACITY)) &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="built_in">grow</span>(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Fail-Fast</strong>ï¼šå¿«é€Ÿå¤±è´¥ï¼ŒmodCount ç”¨æ¥è®°å½• ArrayList <strong>ç»“æ„å‘ç”Ÿå˜åŒ–</strong>çš„æ¬¡æ•°ï¼Œç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„çš„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–</p>
<p>åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰å modCount æ˜¯å¦æ”¹å˜ï¼Œæ”¹å˜äº†æŠ›å‡º ConcurrentModificationException å¼‚å¸¸</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Itr();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> implements Iterator&lt;E&gt; &#123;</span><br><span class="line">    <span class="type">int</span> cursor;       <span class="comment">// index of next element to return</span></span><br><span class="line">    <span class="type">int</span> lastRet = <span class="number">-1</span>; <span class="comment">// index of last element returned; -1 if no such</span></span><br><span class="line">    <span class="type">int</span> expectedModCount = modCount;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Itr</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cursor != size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   	<span class="comment">// è·å–ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶é¦–å…ˆåˆ¤æ–­ç»“æ„æ˜¯å¦å‘ç”Ÿå˜åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">checkForComodification</span>();</span><br><span class="line">       	<span class="comment">// .....</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// modCount è¢«å…¶ä»–çº¿ç¨‹æ”¹å˜æŠ›å‡ºå¹¶å‘ä¿®æ”¹å¼‚å¸¸</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="type">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">ConcurrentModificationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// ã€å…è®¸åˆ é™¤æ“ä½œã€‘</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="built_in">checkForComodification</span>();</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// åˆ é™¤åé‡ç½® expectedModCount</span></span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Vector">Vector</h5>
<p>åŒæ­¥ï¼šVector çš„å®ç°ä¸ ArrayList ç±»ä¼¼ï¼Œä½†æ˜¯æ–¹æ³•ä¸Šä½¿ç”¨äº† synchronized è¿›è¡ŒåŒæ­¥</p>
<p>æ„é€ ï¼šé»˜è®¤é•¿åº¦ä¸º 10 çš„æ•°ç»„</p>
<p>æ‰©å®¹ï¼šVector çš„æ„é€ å‡½æ•°å¯ä»¥ä¼ å…¥ capacityIncrement å‚æ•°ï¼Œä½œç”¨æ˜¯åœ¨æ‰©å®¹æ—¶ä½¿å®¹é‡ capacity å¢é•¿ capacityIncrementï¼Œå¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼å°äºç­‰äº 0ï¼ˆé»˜è®¤0ï¼‰ï¼Œæ‰©å®¹æ—¶æ¯æ¬¡éƒ½ä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€</p>
<p>å¯¹æ¯” ArrayList</p>
<ol>
<li>Vector æ˜¯åŒæ­¥çš„ï¼Œå¼€é”€æ¯” ArrayList è¦å¤§ï¼Œè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚æœ€å¥½ä½¿ç”¨ ArrayList è€Œä¸æ˜¯ Vectorï¼Œå› ä¸ºåŒæ­¥æ“ä½œå®Œå…¨å¯ä»¥ç”±ç¨‹åºæ¥æ§åˆ¶</li>
<li>Vector æ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„ 2 å€ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®å¢é•¿çš„å®¹é‡ï¼‰ï¼Œè€Œ ArrayList æ˜¯ 1.5 å€</li>
<li>åº•å±‚éƒ½æ˜¯ <code>Object[]</code> æ•°ç»„å­˜å‚¨</li>
</ol>
<h5 id="LinkedList">LinkedList</h5>
<h6 id="ä»‹ç»-2">ä»‹ç»</h6>
<p>LinkedList ä¹Ÿæ˜¯ List çš„å®ç°ç±»ï¼šåŸºäº<strong>åŒå‘é“¾è¡¨</strong>å®ç°ï¼Œä½¿ç”¨ Node å­˜å‚¨é“¾è¡¨èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¢åˆ æ¯”è¾ƒå¿«ï¼ŒæŸ¥è¯¢æ…¢</p>
<p>LinkedList é™¤äº†æ‹¥æœ‰ List é›†åˆçš„å…¨éƒ¨åŠŸèƒ½è¿˜å¤šäº†å¾ˆå¤šæ“ä½œé¦–å°¾å…ƒç´ çš„ç‰¹æ®ŠåŠŸèƒ½ï¼š</p>
<ul>
<li><code>public boolean add(E e)</code>ï¼šå°†æŒ‡å®šå…ƒç´ æ·»åŠ åˆ°æ­¤åˆ—è¡¨çš„ç»“å°¾</li>
<li><code>public E poll()</code>ï¼šæ£€ç´¢å¹¶åˆ é™¤æ­¤åˆ—è¡¨çš„å¤´ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</li>
<li><code>public void addFirst(E e)</code>ï¼šå°†æŒ‡å®šå…ƒç´ æ’å…¥æ­¤åˆ—è¡¨çš„å¼€å¤´</li>
<li><code>public void addLast(E e)</code>ï¼šå°†æŒ‡å®šå…ƒç´ æ·»åŠ åˆ°æ­¤åˆ—è¡¨çš„ç»“å°¾</li>
<li><code>public E pop()</code>ï¼šä»æ­¤åˆ—è¡¨æ‰€è¡¨ç¤ºçš„å †æ ˆå¤„å¼¹å‡ºä¸€ä¸ªå…ƒç´ </li>
<li><code>public void push(E e)</code>ï¼šå°†å…ƒç´ æ¨å…¥æ­¤åˆ—è¡¨æ‰€è¡¨ç¤ºçš„å †æ ˆ</li>
<li><code>public int indexOf(Object o)</code>ï¼šè¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœä¸åŒ…å«è¿”å› -1</li>
<li><code>public int lastIndexOf(Object o)</code>ï¼šä»å°¾éå†æ‰¾</li>
<li><code>public boolean remove(Object o)</code>ï¼šä¸€æ¬¡åªåˆ é™¤ä¸€ä¸ªåŒ¹é…çš„å¯¹è±¡ï¼Œå¦‚æœåˆ é™¤äº†åŒ¹é…å¯¹è±¡è¿”å› true</li>
<li><code>public E remove(int index)</code>ï¼šåˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.ç”¨LinkedListåšä¸€ä¸ªé˜Ÿåˆ—:å…ˆè¿›å…ˆå‡ºï¼Œåè¿›åå‡ºã€‚</span></span><br><span class="line">        LinkedList&lt;<span class="type">String</span>&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="comment">// å…¥é˜Ÿ</span></span><br><span class="line">        queue.<span class="built_in">addLast</span>(<span class="string">&quot;1å·&quot;</span>);</span><br><span class="line">        queue.<span class="built_in">addLast</span>(<span class="string">&quot;2å·&quot;</span>);</span><br><span class="line">        queue.<span class="built_in">addLast</span>(<span class="string">&quot;3å·&quot;</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(queue); <span class="comment">// [1å·, 2å·, 3å·]</span></span><br><span class="line">        <span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(queue.<span class="built_in">removeFirst</span>());<span class="comment">//1å·</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(queue.<span class="built_in">removeFirst</span>());<span class="comment">//2å·</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(queue);<span class="comment">//[3å·]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åšä¸€ä¸ªæ ˆ å…ˆè¿›åå‡º</span></span><br><span class="line">        LinkedList&lt;<span class="type">String</span>&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="comment">// å‹æ ˆ</span></span><br><span class="line">        stack.<span class="built_in">push</span>(<span class="string">&quot;ç¬¬1é¢—å­å¼¹&quot;</span>);<span class="comment">//addFirst(e);</span></span><br><span class="line">        stack.<span class="built_in">push</span>(<span class="string">&quot;ç¬¬2é¢—å­å¼¹&quot;</span>);</span><br><span class="line">        stack.<span class="built_in">push</span>(<span class="string">&quot;ç¬¬3é¢—å­å¼¹&quot;</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(stack); <span class="comment">// [ ç¬¬3é¢—å­å¼¹, ç¬¬2é¢—å­å¼¹, ç¬¬1é¢—å­å¼¹]</span></span><br><span class="line">        <span class="comment">// å¼¹æ ˆ</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(stack.<span class="built_in">pop</span>());<span class="comment">//removeFirst(); ç¬¬3é¢—å­å¼¹</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(stack.<span class="built_in">pop</span>());</span><br><span class="line">        System.out.<span class="built_in">println</span>(stack);<span class="comment">// [ç¬¬1é¢—å­å¼¹]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="æºç -2">æºç </h6>
<p>LinkedList æ˜¯ä¸€ä¸ªå®ç°äº† List æ¥å£çš„<strong>åŒç«¯é“¾è¡¨</strong>ï¼Œæ”¯æŒé«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå¦å¤–ä¹Ÿå®ç°äº† Deque æ¥å£ï¼Œä½¿å¾— LinkedList ç±»ä¹Ÿå…·æœ‰é˜Ÿåˆ—çš„ç‰¹æ€§</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/LinkedList%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p>æ ¸å¿ƒæ–¹æ³•ï¼š</p>
<ul>
<li>
<p>ä½¿ LinkedList å˜æˆçº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥è°ƒç”¨é™æ€ç±» Collections ç±»ä¸­çš„ synchronizedList æ–¹æ³•ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List <span class="built_in">list</span> = <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>synchronized<span class="constructor">List(<span class="params">new</span> LinkedList(<span class="operator">...</span>)</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç§æœ‰å†…éƒ¨ç±» Nodeï¼šè¿™ä¸ªç±»ä»£è¡¨åŒç«¯é“¾è¡¨çš„èŠ‚ç‚¹ Node</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private static class <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; next;</span><br><span class="line">    <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; prev;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Node</span><span class="title">(Node</span><span class="tag">&lt;E&gt;</span> prev, E element, <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; next) &#123;</span><br><span class="line">        this.item = element;</span><br><span class="line">        this.next = next;</span><br><span class="line">        this.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ„é€ æ–¹æ³•ï¼šåªæœ‰æ— å‚æ„é€ å’Œç”¨å·²æœ‰çš„é›†åˆåˆ›å»ºé“¾è¡¨çš„æ„é€ æ–¹æ³•</p>
</li>
<li>
<p>æ·»åŠ å…ƒç´ ï¼šé»˜è®¤åŠ åˆ°å°¾éƒ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="title function_">add</span>(<span class="params">E e</span>) &#123;</span><br><span class="line">    <span class="title function_">linkLast</span>(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è·å–å…ƒç´ ï¼š<code>get(int index)</code> æ ¹æ®æŒ‡å®šç´¢å¼•è¿”å›æ•°æ®</p>
<ul>
<li>è·å–å¤´èŠ‚ç‚¹ (index=0)ï¼š<code>getFirst()ã€element()ã€peek()ã€peekFirst()</code> è¿™å››ä¸ªè·å–å¤´ç»“ç‚¹æ–¹æ³•çš„åŒºåˆ«åœ¨äºå¯¹é“¾è¡¨ä¸ºç©ºæ—¶çš„å¤„ç†æ–¹å¼ï¼Œæ˜¯æŠ›å‡ºå¼‚å¸¸è¿˜æ˜¯è¿”å›NULLï¼Œå…¶ä¸­ <code>getFirst() element()</code> æ–¹æ³•å°†ä¼šåœ¨é“¾è¡¨ä¸ºç©ºæ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸</li>
<li>è·å–å°¾èŠ‚ç‚¹ (index=-1)ï¼šgetLast() æ–¹æ³•åœ¨é“¾è¡¨ä¸ºç©ºæ—¶ï¼ŒæŠ›å‡º NoSuchElementExceptionï¼Œè€Œ peekLast() ä¸ä¼šï¼Œåªä¼šè¿”å› null</li>
</ul>
</li>
<li>
<p>åˆ é™¤å…ƒç´ ï¼š</p>
<ul>
<li>remove()ã€removeFirst()ã€pop()ï¼šåˆ é™¤å¤´èŠ‚ç‚¹</li>
<li>removeLast()ã€pollLast()ï¼šåˆ é™¤å°¾èŠ‚ç‚¹ï¼ŒremoveLast()åœ¨é“¾è¡¨ä¸ºç©ºæ—¶æŠ›å‡ºNoSuchElementExceptionï¼Œè€ŒpollLast()æ–¹æ³•è¿”å›null</li>
</ul>
</li>
</ul>
<p>å¯¹æ¯” ArrayList</p>
<ol>
<li>æ˜¯å¦ä¿è¯çº¿ç¨‹å®‰å…¨ï¼šArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨</li>
<li>åº•å±‚æ•°æ®ç»“æ„ï¼š
<ul>
<li>Arraylist åº•å±‚ä½¿ç”¨çš„æ˜¯ <code>Object</code> æ•°ç»„</li>
<li>LinkedList åº•å±‚ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨æ•°æ®ç»“æ„ï¼ˆJDK1.6 ä¹‹å‰ä¸ºå¾ªç¯é“¾è¡¨ï¼ŒJDK1.7 å–æ¶ˆäº†å¾ªç¯ï¼‰</li>
</ul>
</li>
<li>æ’å…¥å’Œåˆ é™¤æ˜¯å¦å—å…ƒç´ ä½ç½®çš„å½±å“ï¼š
<ul>
<li>ArrayList é‡‡ç”¨æ•°ç»„å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´ å—å…ƒç´ ä½ç½®çš„å½±å“</li>
<li>LinkedListé‡‡ ç”¨é“¾è¡¨å­˜å‚¨ï¼Œæ‰€ä»¥å¯¹äº<code>add(E e)</code>æ–¹æ³•çš„æ’å…¥ï¼Œåˆ é™¤å…ƒç´ ä¸å—å…ƒç´ ä½ç½®çš„å½±å“</li>
</ul>
</li>
<li>æ˜¯å¦æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼š
<ul>
<li>LinkedList ä¸æ”¯æŒé«˜æ•ˆçš„éšæœºå…ƒç´ è®¿é—®ï¼ŒArrayList æ”¯æŒ</li>
<li>å¿«é€Ÿéšæœºè®¿é—®å°±æ˜¯é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡(å¯¹åº”äº <code>get(int index)</code> æ–¹æ³•)</li>
</ul>
</li>
<li>å†…å­˜ç©ºé—´å ç”¨ï¼š
<ul>
<li>ArrayList çš„ç©ºé—´æµªè´¹ä¸»è¦ä½“ç°åœ¨åœ¨ list åˆ—è¡¨çš„ç»“å°¾ä¼šé¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´</li>
<li>LinkedList çš„ç©ºé—´èŠ±è´¹åˆ™ä½“ç°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æ¶ˆè€—æ¯” ArrayListæ›´å¤šçš„ç©ºé—´ï¼ˆå› ä¸ºè¦å­˜æ”¾ç›´æ¥åç»§å’Œç›´æ¥å‰é©±ä»¥åŠæ•°æ®ï¼‰</li>
</ul>
</li>
</ol>
<h4 id="Set">Set</h4>
<h5 id="æ¦‚è¿°-6">æ¦‚è¿°</h5>
<p>Set ç³»åˆ—é›†åˆï¼š</p>
<ul>
<li>HashSetï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æ— åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•çš„</li>
<li>LinkedHashSetï¼šæ·»åŠ çš„å…ƒç´ æ˜¯æœ‰åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•çš„</li>
<li>TreeSetï¼šä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼ŒæŒ‰ç…§å¤§å°é»˜è®¤å‡åºæ’åº</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šæ²¡æœ‰ç´¢å¼•ï¼Œä¸èƒ½ä½¿ç”¨æ™®é€š for å¾ªç¯éå†</p>
<h5 id="HashSet">HashSet</h5>
<p>å“ˆå¸Œå€¼ï¼š</p>
<ul>
<li>å“ˆå¸Œå€¼ï¼šJDK æ ¹æ®å¯¹è±¡çš„åœ°å€æˆ–è€…å­—ç¬¦ä¸²æˆ–è€…æ•°å­—è®¡ç®—å‡ºæ¥çš„æ•°å€¼</li>
<li>è·å–å“ˆå¸Œå€¼ï¼šObject ç±»ä¸­çš„ public int hashCode()</li>
<li>å“ˆå¸Œå€¼çš„ç‰¹ç‚¹
<ul>
<li>åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ hashCode() æ–¹æ³•è¿”å›çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŒå¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯ä¸åŒçš„ï¼Œè€Œé‡å†™ hashCode() æ–¹æ³•ï¼Œå¯ä»¥å®ç°è®©ä¸åŒå¯¹è±¡çš„å“ˆå¸Œå€¼ç›¸åŒ</li>
</ul>
</li>
</ul>
<p><strong>HashSet åº•å±‚å°±æ˜¯åŸºäº HashMap å®ç°ï¼Œå€¼æ˜¯  PRESENT = new Object()</strong></p>
<p>Set é›†åˆæ·»åŠ çš„å…ƒç´ æ˜¯æ— åºï¼Œä¸é‡å¤çš„ã€‚</p>
<ul>
<li>
<p>æ˜¯å¦‚ä½•å»é‡å¤çš„ï¼Ÿ</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>å¯¹äºæœ‰å€¼ç‰¹æ€§çš„ï¼Œ<span class="built_in">Set</span>é›†åˆå¯ä»¥ç›´æ¥åˆ¤æ–­è¿›è¡Œå»é‡å¤ã€‚</span><br><span class="line"><span class="number">2.</span>å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹çš„ç±»å¯¹è±¡ï¼Œ<span class="built_in">Set</span>é›†åˆæ˜¯æŒ‰ç…§å¦‚ä¸‹æµç¨‹è¿›è¡Œæ˜¯å¦é‡å¤çš„åˆ¤æ–­ã€‚</span><br><span class="line">    <span class="built_in">Set</span>é›†åˆä¼šè®©ä¸¤ä¸¤å¯¹è±¡ï¼Œå…ˆè°ƒç”¨è‡ªå·±çš„hashCode()æ–¹æ³•å¾—åˆ°å½¼æ­¤çš„å“ˆå¸Œå€¼ï¼ˆæ‰€è°“çš„å†…å­˜åœ°å€ï¼‰</span><br><span class="line">    ç„¶åæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸ç›¸åŒåˆ™ç›´æ¥è®¤ä¸ºä¸¤ä¸ªå¯¹è±¡ä¸é‡å¤ã€‚</span><br><span class="line">    å¦‚æœå“ˆå¸Œå€¼ç›¸åŒï¼Œä¼šç»§ç»­è®©ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œequalsæ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒè®¤ä¸ºçœŸçš„é‡å¤äº†</span><br><span class="line">    å¦‚æœä¸ç›¸åŒè®¤ä¸ºä¸é‡å¤ã€‚</span><br><span class="line"></span><br><span class="line">            <span class="built_in">Set</span>é›†åˆä¼šå…ˆè®©å¯¹è±¡è°ƒç”¨hashCode()æ–¹æ³•è·å–ä¸¤ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼æ¯”è¾ƒ</span><br><span class="line">               /                     <span class="string">\</span></span><br><span class="line">            <span class="literal">false</span>                    <span class="literal">true</span></span><br><span class="line">            /                          <span class="string">\</span></span><br><span class="line">        ä¸é‡å¤                        ç»§ç»­è®©ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œequalsæ¯”è¾ƒ</span><br><span class="line">                                       /          <span class="string">\</span></span><br><span class="line">                                     <span class="literal">false</span>        <span class="literal">true</span></span><br><span class="line">                                      /             <span class="string">\</span></span><br><span class="line">                                    ä¸é‡å¤          é‡å¤äº†</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Set ç³»åˆ—é›†åˆå…ƒç´ æ— åºçš„æ ¹æœ¬åŸå› </p>
<p>Set ç³»åˆ—é›†åˆæ·»åŠ å…ƒç´ æ— åºçš„æ ¹æœ¬åŸå› æ˜¯å› ä¸º<strong>åº•å±‚é‡‡ç”¨äº†å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ </strong>ã€‚</p>
<ul>
<li>JDK 1.8 ä¹‹å‰ï¼šå“ˆå¸Œè¡¨ = æ•°ç»„ï¼ˆåˆå§‹å®¹é‡16) + é“¾è¡¨  + ï¼ˆå“ˆå¸Œç®—æ³•ï¼‰</li>
<li>JDK 1.8 ä¹‹åï¼šå“ˆå¸Œè¡¨ = æ•°ç»„ï¼ˆåˆå§‹å®¹é‡16) + é“¾è¡¨ + çº¢é»‘æ ‘  + ï¼ˆå“ˆå¸Œç®—æ³•ï¼‰
<ul>
<li>å½“é“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼ 8 ä¸”å½“å‰æ•°ç»„çš„é•¿åº¦ &gt; 64æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œå‡å°‘äº†æŸ¥æ‰¾æ—¶é—´</li>
<li>å½“é“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼ 8 ä¸”å½“å‰æ•°ç»„çš„é•¿åº¦ &lt; 64æ—¶ï¼Œæ‰©å®¹</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/HashSet%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84%E5%93%88%E5%B8%8C%E8%A1%A8.png" alt="img"></p>
<p>æ¯ä¸ªå…ƒç´ çš„ hashcode() çš„å€¼è¿›è¡Œå“åº”çš„ç®—æ³•è¿ç®—ï¼Œè®¡ç®—å‡ºçš„å€¼ç›¸åŒçš„å­˜å…¥ä¸€ä¸ªæ•°ç»„å—ä¸­ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜å‚¨ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦è¶…è¿‡8å°±é‡‡å–çº¢é»‘æ ‘å­˜å‚¨ï¼Œæ‰€ä»¥è¾“å‡ºçš„å…ƒç´ æ˜¯æ— åºçš„ã€‚</p>
</li>
<li>
<p>å¦‚ä½•è®¾ç½®åªè¦å¯¹è±¡å†…å®¹ä¸€æ ·ï¼Œå°±å¸Œæœ›é›†åˆè®¤ä¸ºé‡å¤ï¼š<strong>é‡å†™ hashCode å’Œ equals æ–¹æ³•</strong></p>
</li>
</ul>
<h5 id="Linked">Linked</h5>
<p>LinkedHashSet ä¸ºä»€ä¹ˆæ˜¯æœ‰åºçš„ï¼Ÿ</p>
<p>LinkedHashSet åº•å±‚ä¾ç„¶æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ çš„ï¼Œä½†æ˜¯æ¯ä¸ªå…ƒç´ éƒ½é¢å¤–å¸¦ä¸€ä¸ªé“¾æ¥ç»´æŠ¤æ·»åŠ é¡ºåºï¼Œä¸å…‰å¢åˆ æŸ¥å¿«ï¼Œè¿˜æœ‰é¡ºåºï¼Œç¼ºç‚¹æ˜¯å¤šäº†ä¸€ä¸ªå­˜å‚¨é¡ºåºçš„é“¾ä¼š<strong>å å†…å­˜ç©ºé—´</strong>ï¼Œè€Œä¸”ä¸å…è®¸é‡å¤ï¼Œæ— ç´¢å¼•</p>
<h5 id="TreeSet">TreeSet</h5>
<p>TreeSet é›†åˆè‡ªæ’åºçš„æ–¹å¼ï¼š</p>
<ol>
<li>æœ‰å€¼ç‰¹æ€§çš„å…ƒç´ ç›´æ¥å¯ä»¥å‡åºæ’åºï¼ˆæµ®ç‚¹å‹ï¼Œæ•´å‹ï¼‰</li>
<li>å­—ç¬¦ä¸²ç±»å‹çš„å…ƒç´ ä¼šæŒ‰ç…§é¦–å­—ç¬¦çš„ç¼–å·æ’åº</li>
<li>å¯¹äºè‡ªå®šä¹‰çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼ŒTreeSet é»˜è®¤æ— æ³•æ’åºï¼Œæ‰§è¡Œçš„æ—¶å€™æŠ¥é”™ï¼Œå› ä¸ºä¸çŸ¥é“æ’åºè§„åˆ™</li>
</ol>
<p>è‡ªå®šä¹‰çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼ŒTreeSet é»˜è®¤æ— æ³•æ’åºï¼Œéœ€è¦å®šåˆ¶æ’åºçš„è§„åˆ™ï¼Œæ–¹æ¡ˆæœ‰ 2 ç§ï¼š</p>
<ul>
<li>
<p>ç›´æ¥ä¸º<strong>å¯¹è±¡çš„ç±»</strong>å®ç°æ¯”è¾ƒå™¨è§„åˆ™æ¥å£ Comparableï¼Œé‡å†™æ¯”è¾ƒæ–¹æ³•ï¼š</p>
<p>æ–¹æ³•ï¼š<code>public int compareTo(Employee o): this æ˜¯æ¯”è¾ƒè€…, o æ˜¯è¢«æ¯”è¾ƒè€…</code></p>
<ul>
<li>æ¯”è¾ƒè€…å¤§äºè¢«æ¯”è¾ƒè€…ï¼Œè¿”å›æ­£æ•°</li>
<li>æ¯”è¾ƒè€…å°äºè¢«æ¯”è¾ƒè€…ï¼Œè¿”å›è´Ÿæ•°</li>
<li>æ¯”è¾ƒè€…ç­‰äºè¢«æ¯”è¾ƒè€…ï¼Œè¿”å› 0</li>
</ul>
</li>
<li>
<p>ç›´æ¥ä¸º<strong>é›†åˆ</strong>è®¾ç½®æ¯”è¾ƒå™¨ Comparator å¯¹è±¡ï¼Œé‡å†™æ¯”è¾ƒæ–¹æ³•ï¼š</p>
<p>æ–¹æ³•ï¼š<code>public int compare(Employee o1, Employee o2): o1 æ¯”è¾ƒè€…, o2 è¢«æ¯”è¾ƒè€…</code></p>
<ul>
<li>æ¯”è¾ƒè€…å¤§äºè¢«æ¯”è¾ƒè€…ï¼Œè¿”å›æ­£æ•°</li>
<li>æ¯”è¾ƒè€…å°äºè¢«æ¯”è¾ƒè€…ï¼Œè¿”å›è´Ÿæ•°</li>
<li>æ¯”è¾ƒè€…ç­‰äºè¢«æ¯”è¾ƒè€…ï¼Œè¿”å› 0</li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼šå¦‚æœç±»å’Œé›†åˆéƒ½å¸¦æœ‰æ¯”è¾ƒè§„åˆ™ï¼Œä¼˜å…ˆä½¿ç”¨é›†åˆè‡ªå¸¦çš„æ¯”è¾ƒè§„åˆ™</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetDemo</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>)&#123;</span><br><span class="line">        <span class="title class_">Set</span>&lt;<span class="title class_">Student</span>&gt; students = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">		<span class="title class_">Collections</span>.<span class="title function_">add</span>(students,s1,s2,s3);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(students);<span class="comment">//æŒ‰ç…§å¹´é¾„æ¯”è¾ƒ å‡åº</span></span><br><span class="line">        </span><br><span class="line">        <span class="title class_">Set</span>&lt;<span class="title class_">Student</span>&gt; s = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;<span class="title class_">Student</span>&gt;()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> int <span class="title function_">compare</span>(<span class="params">Student o1, Student o2</span>) &#123;</span><br><span class="line">                <span class="comment">// o1æ¯”è¾ƒè€…   o2è¢«æ¯”è¾ƒè€…</span></span><br><span class="line">                <span class="keyword">return</span> o2.<span class="title function_">getAge</span>() - o1.<span class="title function_">getAge</span>();<span class="comment">//é™åº</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;<span class="title class_">Student</span>&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> name;</span><br><span class="line">    <span class="keyword">private</span> int age;</span><br><span class="line">    <span class="comment">// é‡å†™äº†æ¯”è¾ƒæ–¹æ³•ã€‚</span></span><br><span class="line">    <span class="comment">// e1.compareTo(o)</span></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒè€…ï¼šthis</span></span><br><span class="line">    <span class="comment">// è¢«æ¯”è¾ƒè€…ï¼šo</span></span><br><span class="line">    <span class="comment">// éœ€æ±‚ï¼šæŒ‰ç…§å¹´é¾„æ¯”è¾ƒ å‡åºï¼Œå¹´é¾„ç›¸åŒæŒ‰ç…§å§“å</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> int <span class="title function_">compareTo</span>(<span class="params">Student o</span>) &#123;</span><br><span class="line">        int result = <span class="variable language_">this</span>.<span class="property">age</span> - o.<span class="property">age</span>;</span><br><span class="line">        <span class="keyword">return</span> result == <span class="number">0</span> ? <span class="variable language_">this</span>.<span class="title function_">getName</span>().<span class="title function_">compareTo</span>(o.<span class="property">getName</span>):result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¯”è¾ƒå™¨åŸç†ï¼šåº•å±‚æ˜¯ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†ï¼ŒåŠ ä¸€ä¸ªæ–°å…ƒç´ ï¼Œå°±ä¼šå’Œç¬¬ä¸€ä¸ªå…ƒç´ æ¯”ï¼Œå¦‚æœå¤§äºï¼Œå°±ç»§ç»­å’Œå¤§äºçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°é‡åˆ°æ¯”æ–°å…ƒç´ å¤§çš„å…ƒç´ ä¸ºæ­¢ï¼Œæ”¾åœ¨è¯¥ä½ç½®çš„å·¦è¾¹ï¼ˆçº¢é»‘æ ‘ï¼‰</p>
<h4 id="Queue">Queue</h4>
<p>Queueï¼šé˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§</p>
<p>PriorityQueue æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œåº•å±‚å­˜å‚¨ç»“æ„ä¸º Object[]ï¼Œé»˜è®¤å®ç°ä¸ºå°é¡¶å †ï¼Œæ¯æ¬¡å‡ºé˜Ÿæœ€å°çš„å…ƒç´ </p>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>public PriorityQueue()</code>ï¼šæ„é€ é»˜è®¤é•¿åº¦ä¸º 11 çš„é˜Ÿåˆ—ï¼ˆæ•°ç»„ï¼‰</p>
</li>
<li>
<p><code>public PriorityQueue(Comparator comparator)</code>ï¼šåˆ©ç”¨æ¯”è¾ƒå™¨è‡ªå®šä¹‰å †æ’åºçš„è§„åˆ™</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Queue&lt;Integer&gt; pq =<span class="built_in"> new </span>PriorityQueue&lt;&gt;((v1, v2) -&gt; v2 - v1);//å®ç°å¤§é¡¶å †</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å¸¸ç”¨ APIï¼š</p>
<ul>
<li><code>public boolean offer(E e)</code>ï¼šå°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ°æ­¤ä¼˜å…ˆçº§é˜Ÿåˆ—çš„<strong>å°¾éƒ¨</strong></li>
<li><code>public E poll()</code>ï¼šæ£€ç´¢å¹¶åˆ é™¤æ­¤é˜Ÿåˆ—çš„<strong>å¤´å…ƒç´ </strong>ï¼Œå¦‚æœæ­¤é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› null</li>
<li><code>public E peek()</code>ï¼šæ£€ç´¢ä½†ä¸åˆ é™¤æ­¤é˜Ÿåˆ—çš„å¤´ï¼Œå¦‚æœæ­¤é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› null</li>
<li><code>public boolean remove(Object o)</code>ï¼šä»è¯¥é˜Ÿåˆ—ä¸­åˆ é™¤æŒ‡å®šå…ƒç´ ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œåˆ é™¤å…ƒç´  e ä½¿ç”¨ o.equals(e) æ¯”è¾ƒï¼Œå¦‚æœé˜Ÿåˆ—åŒ…å«å¤šä¸ªè¿™æ ·çš„å…ƒç´ ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ª</li>
</ul>
<h4 id="Collections">Collections</h4>
<p>java.utils.Collectionsï¼šé›†åˆ<strong>å·¥å…·ç±»</strong>ï¼ŒCollections å¹¶ä¸å±äºé›†åˆï¼Œæ˜¯ç”¨æ¥æ“ä½œé›†åˆçš„å·¥å…·ç±»</p>
<p>Collections æœ‰å‡ ä¸ªå¸¸ç”¨çš„APIï¼š</p>
<ul>
<li><code>public static  boolean addAll(Collection c, T... e)</code>ï¼šç»™é›†åˆå¯¹è±¡æ‰¹é‡æ·»åŠ å…ƒç´ </li>
<li><code>public static void shuffle(List list)</code>ï¼šæ‰“ä¹±é›†åˆé¡ºåº</li>
<li><code>public static  void sort(List list)</code>ï¼šå°†é›†åˆä¸­å…ƒç´ æŒ‰ç…§é»˜è®¤è§„åˆ™æ’åº</li>
<li><code>public static  void sort(List list,Comparator )</code>ï¼šé›†åˆä¸­å…ƒç´ æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åº</li>
<li><code>public static  List synchronizedList(List list)</code>ï¼šè¿”å›ç”±æŒ‡å®š list æ”¯æŒçš„çº¿ç¨‹å®‰å…¨ list</li>
<li><code>public static  Set singleton(T o)</code>ï¼šè¿”å›ä¸€ä¸ªåªåŒ…å«æŒ‡å®šå¯¹è±¡çš„ä¸å¯å˜ç»„</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> CollectionsDemo &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        Collection&lt;String&gt; names = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>add<span class="constructor">All(<span class="params">names</span>,<span class="string">&quot;å¼ &quot;</span>,<span class="string">&quot;ç‹&quot;</span>,<span class="string">&quot;æ&quot;</span>,<span class="string">&quot;èµµ&quot;</span>)</span>;</span><br><span class="line">        </span><br><span class="line">        List&lt;Double&gt; scores = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>add<span class="constructor">All(<span class="params">scores</span>, 98.5, 66.5 , 59.5 , 66.5 , 99.5 )</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>shuffle(scores);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(scores); <span class="comment">// é»˜è®¤å‡åºæ’åºï¼</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(scores);</span><br><span class="line">        </span><br><span class="line">        List&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>add<span class="constructor">All(<span class="params">students</span>,<span class="params">s1</span>,<span class="params">s2</span>,<span class="params">s3</span>,<span class="params">s4</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(students,<span class="keyword">new</span> Comparator&lt;Student&gt;<span class="literal">()</span>&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> Student&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Map">Map</h3>
<h4 id="æ¦‚è¿°-7">æ¦‚è¿°</h4>
<p>Collection æ˜¯å•å€¼é›†åˆä½“ç³»ï¼ŒMapé›†åˆæ˜¯ä¸€ç§åŒåˆ—é›†åˆï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ä¸¤ä¸ªå€¼ã€‚</p>
<p>Mapé›†åˆçš„æ¯ä¸ªå…ƒç´ çš„æ ¼å¼ï¼škey=valueï¼ˆé”®å€¼å¯¹å…ƒç´ ï¼‰ï¼ŒMapé›†åˆä¹Ÿè¢«ç§°ä¸ºé”®å€¼å¯¹é›†åˆ</p>
<p>Mapé›†åˆçš„å®Œæ•´æ ¼å¼ï¼š<code>&#123;key1=value1, key2=value2, key3=value3, ...&#125;</code></p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>é›†åˆçš„ä½“ç³»ï¼š</span><br><span class="line">        <span class="built_in">Map</span><span class="operator">&lt;</span><span class="built_in">K</span> <span class="operator">,</span> <span class="variable">V</span><span class="operator">&gt;</span><span class="punctuation">(</span>æ¥å£<span class="operator">,</span><span class="built_in">Map</span>é›†åˆçš„ç¥–å®—ç±»<span class="punctuation">)</span></span><br><span class="line">       <span class="operator">/</span>                      \</span><br><span class="line">      <span class="variable">TreeMap</span><span class="operator">&lt;</span><span class="built_in">K</span> <span class="operator">,</span> <span class="variable">V</span><span class="operator">&gt;</span>           <span class="variable">HashMap</span><span class="operator">&lt;</span><span class="built_in">K</span> <span class="operator">,</span> <span class="variable">V</span><span class="operator">&gt;</span><span class="punctuation">(</span>å®ç°ç±»<span class="operator">,</span>ç»å…¸çš„ï¼Œç”¨çš„æœ€å¤š<span class="punctuation">)</span></span><br><span class="line">                                 \</span><br><span class="line">                                  <span class="variable">LinkedHashMap</span><span class="operator">&lt;</span><span class="built_in">K</span><span class="operator">,</span> <span class="variable">V</span><span class="operator">&gt;</span><span class="punctuation">(</span>å®ç°ç±»<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>Map é›†åˆçš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>Map é›†åˆçš„ç‰¹ç‚¹éƒ½æ˜¯ç”±é”®å†³å®šçš„</li>
<li>Map é›†åˆçš„é”®æ˜¯æ— åºï¼Œä¸é‡å¤çš„ï¼Œæ— ç´¢å¼•çš„ï¼ˆSetï¼‰</li>
<li>Map é›†åˆçš„å€¼æ— è¦æ±‚ï¼ˆListï¼‰</li>
<li>Map é›†åˆçš„é”®å€¼å¯¹éƒ½å¯ä»¥ä¸º null</li>
<li>Map é›†åˆåé¢é‡å¤çš„é”®å¯¹åº”å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ </li>
</ol>
<p>HashMapï¼šå…ƒç´ æŒ‰ç…§é”®æ˜¯æ— åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼Œå€¼ä¸åšè¦æ±‚</p>
<p>LinkedHashMapï¼šå…ƒç´ æŒ‰ç…§é”®æ˜¯æœ‰åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼Œå€¼ä¸åšè¦æ±‚</p>
<h4 id="å¸¸ç”¨API">å¸¸ç”¨API</h4>
<p>Map é›†åˆçš„å¸¸ç”¨ API</p>
<ul>
<li><code>public V put(K key, V value)</code>ï¼šæŠŠæŒ‡å®šçš„é”®ä¸å€¼æ·»åŠ åˆ° Map é›†åˆä¸­ï¼Œ<strong>é‡å¤çš„é”®ä¼šè¦†ç›–å‰é¢çš„å€¼å…ƒç´ </strong></li>
<li><code>public V remove(Object key)</code>ï¼šæŠŠæŒ‡å®šçš„é”®å¯¹åº”çš„é”®å€¼å¯¹å…ƒç´ åœ¨é›†åˆä¸­åˆ é™¤ï¼Œè¿”å›è¢«åˆ é™¤å…ƒç´ çš„å€¼</li>
<li><code>public V get(Object key)</code>ï¼šæ ¹æ®æŒ‡å®šçš„é”®ï¼Œåœ¨ Map é›†åˆä¸­è·å–å¯¹åº”çš„å€¼</li>
<li><code>public Set keySet()</code>ï¼šè·å– Map é›†åˆä¸­æ‰€æœ‰çš„é”®ï¼Œå­˜å‚¨åˆ° <strong>Set é›†åˆ</strong>ä¸­</li>
<li><code>public Collection values()</code>ï¼šè·å–å…¨éƒ¨å€¼çš„é›†åˆï¼Œå­˜å‚¨åˆ° <strong>Collection é›†åˆ</strong></li>
<li><code>public Set&gt; entrySet()</code>ï¼šè·å–Mapé›†åˆä¸­æ‰€æœ‰çš„é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</li>
<li><code>public boolean containsKey(Object key)</code>ï¼šåˆ¤æ–­è¯¥é›†åˆä¸­æ˜¯å¦æœ‰æ­¤é”®</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Map</span>&lt;<span class="title class_">String</span> , <span class="title class_">Integer</span>&gt; maps = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        maps.<span class="title function_">put</span>(.....);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(maps.<span class="title function_">isEmpty</span>());<span class="comment">//false</span></span><br><span class="line">        <span class="title class_">Integer</span> value = maps.<span class="title function_">get</span>(<span class="string">&quot;....&quot;</span>);<span class="comment">//è¿”å›é”®å€¼å¯¹è±¡</span></span><br><span class="line">        <span class="title class_">Set</span>&lt;<span class="title class_">String</span>&gt; keys = maps.<span class="title function_">keySet</span>();<span class="comment">//è·å–Mapé›†åˆä¸­æ‰€æœ‰çš„é”®ï¼Œ</span></span><br><span class="line">        <span class="comment">//Mapé›†åˆçš„é”®æ˜¯æ— åºä¸é‡å¤çš„ï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ä¸€ä¸ªSeté›†åˆ</span></span><br><span class="line">        <span class="title class_">Collection</span>&lt;<span class="title class_">Integer</span>&gt; values = maps.<span class="title function_">values</span>();</span><br><span class="line">        <span class="comment">//Mapé›†åˆçš„å€¼æ˜¯ä¸åšè¦æ±‚çš„ï¼Œå¯èƒ½é‡å¤ï¼Œæ‰€ä»¥å€¼è¦ç”¨Collectioné›†åˆæ¥æ”¶!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="éå†æ–¹å¼">éå†æ–¹å¼</h4>
<p>Mapé›†åˆçš„éå†æ–¹å¼æœ‰ï¼š3ç§ã€‚</p>
<ol>
<li>â€œé”®æ‰¾å€¼â€çš„æ–¹å¼éå†ï¼šå…ˆè·å– Map é›†åˆå…¨éƒ¨çš„é”®ï¼Œå†æ ¹æ®éå†é”®æ‰¾å€¼ã€‚</li>
<li>â€œé”®å€¼å¯¹â€çš„æ–¹å¼éå†ï¼šéš¾åº¦è¾ƒå¤§ï¼Œé‡‡ç”¨å¢å¼º for æˆ–è€…è¿­ä»£å™¨</li>
<li>JDK 1.8 å¼€å§‹ä¹‹åçš„æ–°æŠ€æœ¯ï¼šforeachï¼Œé‡‡ç”¨ Lambda è¡¨è¾¾å¼</li>
</ol>
<p>é›†åˆå¯ä»¥ç›´æ¥è¾“å‡ºå†…å®¹ï¼Œå› ä¸ºåº•å±‚é‡å†™äº† toString() æ–¹æ³•</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>)&#123;</span><br><span class="line">    <span class="title class_">Map</span>&lt;<span class="title class_">String</span> , <span class="title class_">Integer</span>&gt; maps = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">	<span class="comment">//(1)é”®æ‰¾å€¼</span></span><br><span class="line">    <span class="title class_">Set</span>&lt;<span class="title class_">String</span>&gt; keys = maps.<span class="title function_">keySet</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="title class_">String</span> key : keys) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(key + <span class="string">&quot;=&quot;</span> + maps.<span class="title function_">get</span>(key));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Iterator&lt;String&gt; iterator = hm.keySet().iterator();</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//(2)é”®å€¼å¯¹</span></span><br><span class="line">    <span class="comment">//(2.1)æ™®é€šæ–¹å¼</span></span><br><span class="line">    <span class="title class_">Set</span>&lt;<span class="title class_">Map</span>.<span class="property">Entry</span>&lt;<span class="title class_">String</span>,<span class="title class_">Integer</span>&gt;&gt; entries = maps.<span class="title function_">entrySet</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="title class_">Map</span>.<span class="property">Entry</span>&lt;<span class="title class_">String</span>, <span class="title class_">Integer</span>&gt; entry : entries) &#123;</span><br><span class="line">             <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(entry.<span class="title function_">getKey</span>() + <span class="string">&quot;=&gt;&quot;</span> + entry.<span class="title function_">getValue</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//(2.2)è¿­ä»£å™¨æ–¹å¼</span></span><br><span class="line">    <span class="title class_">Iterator</span>&lt;<span class="title class_">Map</span>.<span class="property">Entry</span>&lt;<span class="title class_">String</span>, <span class="title class_">Integer</span>&gt;&gt; iterator = maps.<span class="title function_">entrySet</span>().<span class="title function_">iterator</span>();</span><br><span class="line">    <span class="keyword">while</span> (iterator.<span class="title function_">hasNext</span>()) &#123;</span><br><span class="line">        <span class="title class_">Map</span>.<span class="property">Entry</span>&lt;<span class="title class_">String</span>, <span class="title class_">Integer</span>&gt; entry = iterator.<span class="title function_">next</span>();</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(entry.<span class="title function_">getKey</span>() + <span class="string">&quot;=&quot;</span> + entry.<span class="title function_">getValue</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//(3) Lamda</span></span><br><span class="line">    maps.<span class="title function_">forEach</span>((k,v) -&gt; &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(k + <span class="string">&quot;==&gt;&quot;</span> + v);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="HashMap">HashMap</h4>
<h5 id="åŸºæœ¬ä»‹ç»-10">åŸºæœ¬ä»‹ç»</h5>
<p>HashMap åŸºäºå“ˆå¸Œè¡¨çš„ Map æ¥å£å®ç°ï¼Œæ˜¯ä»¥ key-value å­˜å‚¨å½¢å¼å­˜åœ¨ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾é”®å€¼å¯¹</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>HashMap çš„å®ç°ä¸æ˜¯åŒæ­¥çš„ï¼Œè¿™æ„å‘³ç€å®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li>key æ˜¯å”¯ä¸€ä¸é‡å¤çš„ï¼Œåº•å±‚çš„å“ˆå¸Œè¡¨ç»“æ„ï¼Œä¾èµ– hashCode æ–¹æ³•å’Œ equals æ–¹æ³•ä¿è¯é”®çš„å”¯ä¸€</li>
<li>keyã€value éƒ½å¯ä»¥ä¸ºnullï¼Œä½†æ˜¯ key ä½ç½®åªèƒ½æ˜¯ä¸€ä¸ªnull</li>
<li>HashMap ä¸­çš„æ˜ å°„ä¸æ˜¯æœ‰åºçš„ï¼Œå³å­˜å–æ˜¯æ— åºçš„</li>
<li><strong>key è¦å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œéœ€è¦é‡å†™ hashCode å’Œ equals æ–¹æ³•ï¼Œé˜²æ­¢å‡ºç°åœ°å€ä¸åŒå†…å®¹ç›¸åŒçš„ key</strong></li>
</ul>
<p>JDK7 å¯¹æ¯” JDK8ï¼š</p>
<ul>
<li>7 = æ•°ç»„ + é“¾è¡¨ï¼Œ8 = æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘</li>
<li>7 ä¸­æ˜¯å¤´æ’æ³•ï¼Œå¤šçº¿ç¨‹å®¹æ˜“é€ æˆç¯ï¼Œ8 ä¸­æ˜¯å°¾æ’æ³•</li>
<li>7 çš„æ‰©å®¹æ˜¯å…¨éƒ¨æ•°æ®é‡æ–°å®šä½ï¼Œ8 ä¸­æ˜¯ä½ç½®ä¸å˜æˆ–è€…å½“å‰ä½ç½® + æ—§ size å¤§å°æ¥å®ç°</li>
<li>7 æ˜¯å…ˆåˆ¤æ–­æ˜¯å¦è¦æ‰©å®¹å†æ’å…¥ï¼Œ8 ä¸­æ˜¯å…ˆæ’å…¥å†çœ‹æ˜¯å¦è¦æ‰©å®¹</li>
</ul>
<p>åº•å±‚æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li>
<p>å“ˆå¸Œè¡¨ï¼ˆHash tableï¼Œä¹Ÿå«æ•£åˆ—è¡¨ï¼‰ï¼Œæ ¹æ®å…³é”®ç å€¼è€Œç›´æ¥è®¿é—®çš„æ•°æ®ç»“æ„ã€‚é€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ï¼Œè¿™ä¸ªæ˜ å°„å‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšæ•£åˆ—è¡¨</p>
</li>
<li>
<p>JDK1.8 ä¹‹å‰ HashMap ç”±æ•°ç»„+é“¾è¡¨ç»„æˆ</p>
<ul>
<li>æ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“</li>
<li>é“¾è¡¨åˆ™æ˜¯ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆ<strong>æ‹‰é“¾æ³•è§£å†³å†²çª</strong>ï¼‰ï¼Œæ‹‰é“¾æ³•å°±æ˜¯å¤´æ’æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡è°ƒç”¨çš„ hashCode æ–¹æ³•è®¡ç®—çš„å“ˆå¸Œç å€¼ï¼ˆé”®çš„å“ˆå¸Œï¼‰ä¸€è‡´å¯¼è‡´è®¡ç®—çš„æ•°ç»„ç´¢å¼•å€¼ç›¸åŒ</li>
</ul>
</li>
<li>
<p>JDK1.8 ä»¥å HashMap ç”±<strong>æ•°ç»„+é“¾è¡¨ +çº¢é»‘æ ‘</strong>æ•°æ®ç»“æ„ç»„æˆ</p>
<ul>
<li>è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–</li>
<li>å½“é“¾è¡¨é•¿åº¦<strong>è¶…è¿‡ï¼ˆå¤§äºï¼‰é˜ˆå€¼</strong>ï¼ˆæˆ–è€…çº¢é»‘æ ‘çš„è¾¹ç•Œå€¼ï¼Œé»˜è®¤ä¸º 8ï¼‰å¹¶ä¸”å½“å‰æ•°ç»„çš„<strong>é•¿åº¦å¤§äºç­‰äº 64 æ—¶</strong>ï¼Œæ­¤ç´¢å¼•ä½ç½®ä¸Šçš„æ‰€æœ‰æ•°æ®æ”¹ä¸ºçº¢é»‘æ ‘å­˜å‚¨</li>
<li>å³ä½¿å“ˆå¸Œå‡½æ•°å–å¾—å†å¥½ï¼Œä¹Ÿå¾ˆéš¾è¾¾åˆ°å…ƒç´ ç™¾åˆ†ç™¾å‡åŒ€åˆ†å¸ƒã€‚å½“ HashMap ä¸­æœ‰å¤§é‡çš„å…ƒç´ éƒ½å­˜æ”¾åˆ°åŒä¸€ä¸ªæ¡¶ä¸­æ—¶ï¼Œå°±ç›¸å½“äºä¸€ä¸ªé•¿çš„å•é“¾è¡¨ï¼Œå‡å¦‚å•é“¾è¡¨æœ‰ n ä¸ªå…ƒç´ ï¼Œéå†çš„<strong>æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)</strong>ï¼Œæ‰€ä»¥ JDK1.8 ä¸­å¼•å…¥äº† çº¢é»‘æ ‘ï¼ˆæŸ¥æ‰¾<strong>æ—¶é—´å¤æ‚åº¦ä¸º O(logn)</strong>ï¼‰æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼Œä½¿å¾—æŸ¥æ‰¾æ•ˆç‡æ›´é«˜</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/HashMap%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84.png" alt="img"></p>
</li>
</ul>
<p>å‚è€ƒè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1nJ411J7AA">https://www.bilibili.com/video/BV1nJ411J7AA</a></p>
<h5 id="ç»§æ‰¿å…³ç³»">ç»§æ‰¿å…³ç³»</h5>
<p>HashMap ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/HashMap%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB.bmp" alt="img"></p>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>Cloneable ç©ºæ¥å£ï¼Œè¡¨ç¤ºå¯ä»¥å…‹éš†ï¼Œ åˆ›å»ºå¹¶è¿”å› HashMap å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚</li>
<li>Serializable åºåˆ—åŒ–æ¥å£ï¼Œå±äºæ ‡è®°æ€§æ¥å£ï¼ŒHashMap å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li>
<li>AbstractMap çˆ¶ç±»æä¾›äº† Map å®ç°æ¥å£ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å®ç°æ­¤æ¥å£æ‰€éœ€çš„å·¥ä½œ</li>
</ul>
<h5 id="æˆå‘˜å±æ€§">æˆå‘˜å±æ€§</h5>
<ol>
<li>
<p>åºåˆ—åŒ–ç‰ˆæœ¬å·</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">static</span> <span class="keyword">final</span> <span class="type">long</span> serialVersionUID = <span class="number">362498820763181265L</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é›†åˆçš„åˆå§‹åŒ–å®¹é‡ï¼ˆ<strong>å¿…é¡»æ˜¯äºŒçš„ n æ¬¡å¹‚</strong> ï¼‰</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤çš„åˆå§‹å®¹é‡æ˜¯16 -- 1&lt;&lt;4ç›¸å½“äº1*2çš„4æ¬¡æ–¹---1*16</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p>HashMap æ„é€ æ–¹æ³•æŒ‡å®šé›†åˆçš„åˆå§‹åŒ–å®¹é‡å¤§å°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="constructor">HashMap(<span class="params">int</span> <span class="params">initialCapacity</span>)</span><span class="comment">// æ„é€ ä¸€ä¸ªå¸¦æŒ‡å®šåˆå§‹å®¹é‡å’Œé»˜è®¤åŠ è½½å› å­ (0.75) çš„ç©º HashMap</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ 2 çš„ n æ¬¡å¹‚ï¼Ÿç”¨ä½è¿ç®—æ›¿ä»£å–ä½™è®¡ç®—ï¼Œå‡å°‘ rehash çš„ä»£ä»·ï¼ˆç§»åŠ¨çš„èŠ‚ç‚¹å°‘ï¼‰</p>
<p>HashMap ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œéœ€è¦æ ¹æ® key çš„ hash å€¼ç¡®å®šåœ¨æ•°ç»„ä¸­çš„å…·ä½“ä½ç½®ã€‚ä¸ºäº†å‡å°‘ç¢°æ’ï¼ŒæŠŠæ•°æ®åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªé“¾è¡¨é•¿åº¦å¤§è‡´ç›¸åŒï¼Œå®ç°è¯¥æ–¹æ³•å°±æ˜¯å–æ¨¡ <code>hash%length</code>ï¼Œè®¡ç®—æœºä¸­ç›´æ¥æ±‚ä½™æ•ˆç‡ä¸å¦‚ä½ç§»è¿ç®—ï¼Œ <strong><code>hash % length == hash &amp; (length-1)</code> çš„å‰ææ˜¯ length æ˜¯ 2 çš„ n æ¬¡å¹‚</strong></p>
<p>æ•£åˆ—å¹³å‡åˆ†å¸ƒï¼š2 çš„ n æ¬¡æ–¹æ˜¯ 1 åé¢ n ä¸ª 0ï¼Œ2 çš„ n æ¬¡æ–¹ -1 æ˜¯ n ä¸ª 1ï¼Œå¯ä»¥<strong>ä¿è¯æ•£åˆ—çš„å‡åŒ€æ€§</strong>ï¼Œå‡å°‘ç¢°æ’</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹å¦‚é•¿åº¦ä¸º<span class="number">8</span>æ—¶å€™ï¼Œ<span class="number">3</span>&amp;<span class="comment">(8-1)</span>=<span class="number">3</span>  <span class="number">2</span>&amp;<span class="comment">(8-1)</span>=<span class="number">2</span> ï¼Œä¸åŒä½ç½®ä¸Šï¼Œä¸ç¢°æ’ï¼›</span><br><span class="line">ä¾‹å¦‚é•¿åº¦ä¸º<span class="number">9</span>æ—¶å€™ï¼Œ<span class="number">3</span>&amp;<span class="comment">(9-1)</span>=<span class="number">0</span>  <span class="number">2</span>&amp;<span class="comment">(9-1)</span>=<span class="number">0</span> ï¼Œéƒ½åœ¨<span class="number">0</span>ä¸Šï¼Œç¢°æ’äº†ï¼›</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¦‚æœè¾“å…¥å€¼ä¸æ˜¯ 2 çš„å¹‚ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<p>åˆ›å»º HashMap å¯¹è±¡æ—¶ï¼ŒHashMap é€šè¿‡ä½ç§»è¿ç®—å’Œæˆ–è¿ç®—å¾—åˆ°çš„è‚¯å®šæ˜¯ 2 çš„å¹‚æ¬¡æ•°ï¼Œå¹¶ä¸”æ˜¯å¤§äºé‚£ä¸ªæ•°çš„æœ€è¿‘çš„æ•°å­—ï¼Œåº•å±‚é‡‡ç”¨ tableSizeFor() æ–¹æ³•</p>
</li>
</ul>
</li>
<li>
<p>é»˜è®¤çš„è´Ÿè½½å› å­ï¼Œé»˜è®¤å€¼æ˜¯ 0.75</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">final</span> <span class="type">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é›†åˆæœ€å¤§å®¹é‡</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">é›†åˆæœ€å¤§å®¹é‡çš„ä¸Šé™æ˜¯ï¼š2çš„30æ¬¡å¹‚</span></span><br><span class="line"><span class="string">static</span> <span class="string">final</span> <span class="string">int</span> <span class="string">MAXIMUM_CAPACITY</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">30</span><span class="string">;//</span> <span class="number">0100 </span><span class="number">0000 </span><span class="number">0000 </span><span class="number">0000 </span><span class="number">0000 </span><span class="number">0000 </span><span class="number">0000 </span><span class="number">0000</span> <span class="string">=</span> <span class="number">2</span> <span class="string">^</span> <span class="number">30</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å½“é“¾è¡¨çš„å€¼è¶…è¿‡ 8 åˆ™ä¼šè½¬çº¢é»‘æ ‘ï¼ˆJDK1.8 æ–°å¢ï¼‰</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“æ¡¶(bucket)ä¸Šçš„ç»“ç‚¹æ•°å¤§äºè¿™ä¸ªå€¼æ—¶ä¼šè½¬æˆçº¢é»‘æ ‘</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆ Map æ¡¶ä¸­èŠ‚ç‚¹ä¸ªæ•°å¤§äº 8 æ‰è½¬ä¸ºçº¢é»‘æ ‘ï¼Ÿ</p>
<ul>
<li>
<p>åœ¨ HashMap ä¸­æœ‰ä¸€æ®µæ³¨é‡Šè¯´æ˜ï¼š<strong>ç©ºé—´å’Œæ—¶é—´çš„æƒè¡¡</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">TreeNodeså ç”¨ç©ºé—´å¤§çº¦æ˜¯æ™®é€šèŠ‚ç‚¹çš„ä¸¤å€ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåœ¨ç®±å­åŒ…å«è¶³å¤Ÿçš„èŠ‚ç‚¹æ—¶æ‰ä½¿ç”¨æ ‘èŠ‚ç‚¹ã€‚å½“èŠ‚ç‚¹å˜å°‘(ç”±äºåˆ é™¤æˆ–è°ƒæ•´å¤§å°)æ—¶ï¼Œå°±ä¼šè¢«è½¬æ¢å›æ™®é€šçš„æ¡¶ã€‚åœ¨ä½¿ç”¨åˆ†å¸ƒè‰¯å¥½çš„ç”¨æˆ·hashcodeæ—¶ï¼Œå¾ˆå°‘ä½¿ç”¨æ ‘ç®±ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåœ¨éšæœºå“ˆå¸Œç ä¸‹ï¼Œç®±å­ä¸­èŠ‚ç‚¹çš„é¢‘ç‡æœä»<span class="string">&quot;æ³Šæ¾åˆ†å¸ƒ&quot;</span>ï¼Œé»˜è®¤è°ƒæ•´é˜ˆå€¼ä¸º0.75ï¼Œå¹³å‡å‚æ•°çº¦ä¸º0.5ï¼Œå°½ç®¡ç”±äºè°ƒæ•´ç²’åº¦çš„å·®å¼‚å¾ˆå¤§ã€‚å¿½ç•¥æ–¹å·®ï¼Œåˆ—è¡¨å¤§å°kçš„é¢„æœŸå‡ºç°æ¬¡æ•°æ˜¯(exp(-0.5)*pow(0.5, k)/factorial(k))</span><br><span class="line"><span class="section">0:    0.60653066</span></span><br><span class="line"><span class="section">1:    0.30326533</span></span><br><span class="line"><span class="section">2:    0.07581633</span></span><br><span class="line"><span class="section">3:    0.01263606</span></span><br><span class="line"><span class="section">4:    0.00157952</span></span><br><span class="line"><span class="section">5:    0.00015795</span></span><br><span class="line"><span class="section">6:    0.00001316</span></span><br><span class="line"><span class="section">7:    0.00000094</span></span><br><span class="line"><span class="section">8:    0.00000006</span></span><br><span class="line"><span class="section">more: less than 1 in ten million</span></span><br><span class="line">ä¸€ä¸ªbinä¸­é“¾è¡¨é•¿åº¦è¾¾åˆ°8ä¸ªå…ƒç´ çš„æ¦‚ç‡ä¸º0.00000006ï¼Œå‡ ä¹æ˜¯ä¸å¯èƒ½äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©8è¿™ä¸ªæ•°å­—</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å…¶ä»–è¯´æ³• çº¢é»‘æ ‘çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦æ˜¯ log(n)ï¼Œå¦‚æœé•¿åº¦ä¸º 8ï¼Œå¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸º log(8)=3ï¼Œé“¾è¡¨çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸º n/2ï¼Œå½“é•¿åº¦ä¸º 8 æ—¶ï¼Œå¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸º 8/2=4ï¼Œè¿™æ‰æœ‰è½¬æ¢æˆæ ‘çš„å¿…è¦ï¼›é“¾è¡¨é•¿åº¦å¦‚æœæ˜¯å°äºç­‰äº 6ï¼Œ6/2=3ï¼Œè€Œ log(6)=2.6ï¼Œè™½ç„¶é€Ÿåº¦ä¹Ÿå¾ˆå¿«çš„ï¼Œä½†è½¬åŒ–ä¸ºæ ‘ç»“æ„å’Œç”Ÿæˆæ ‘çš„æ—¶é—´å¹¶ä¸çŸ­</p>
</li>
</ul>
</li>
<li>
<p>å½“é“¾è¡¨çš„å€¼å°äº 6 åˆ™ä¼šä»çº¢é»‘æ ‘è½¬å›é“¾è¡¨</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“æ¡¶(bucket)ä¸Šçš„ç»“ç‚¹æ•°å°äºè¿™ä¸ªå€¼æ—¶æ ‘è½¬é“¾è¡¨</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å½“ Map é‡Œé¢çš„æ•°é‡<strong>å¤§äºç­‰äº</strong>è¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œè¡¨ä¸­çš„æ¡¶æ‰èƒ½è¿›è¡Œæ ‘å½¢åŒ– ï¼Œå¦åˆ™æ¡¶å†…å…ƒç´ è¶…è¿‡ 8 æ—¶ä¼šæ‰©å®¹ï¼Œè€Œä¸æ˜¯æ ‘å½¢åŒ–ã€‚ä¸ºäº†é¿å…è¿›è¡Œæ‰©å®¹ã€æ ‘å½¢åŒ–é€‰æ‹©çš„å†²çªï¼Œè¿™ä¸ªå€¼ä¸èƒ½å°äº 4 * TREEIFY_THRESHOLD (8)</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡¶ä¸­ç»“æ„è½¬åŒ–ä¸ºçº¢é»‘æ ‘å¯¹åº”çš„æ•°ç»„é•¿åº¦æœ€å°çš„å€¼ </span></span><br><span class="line"><span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>;</span><br></pre></td></tr></table></figure>
<p>åŸå› ï¼šæ•°ç»„æ¯”è¾ƒå°çš„æƒ…å†µä¸‹å˜ä¸ºçº¢é»‘æ ‘ç»“æ„ï¼Œåè€Œä¼šé™ä½æ•ˆç‡ï¼Œçº¢é»‘æ ‘éœ€è¦è¿›è¡Œå·¦æ—‹ï¼Œå³æ—‹ï¼Œå˜è‰²è¿™äº›æ“ä½œæ¥ä¿æŒå¹³è¡¡</p>
</li>
<li>
<p>table ç”¨æ¥åˆå§‹åŒ–ï¼ˆå¿…é¡»æ˜¯äºŒçš„ n æ¬¡å¹‚ï¼‰</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å­˜å‚¨å…ƒç´ çš„æ•°ç»„ </span><br><span class="line">transient <span class="keyword">Node</span><span class="title">&lt;K</span>,V&gt;[] table;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>HashMap ä¸­<strong>å­˜æ”¾å…ƒç´ çš„ä¸ªæ•°</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜æ”¾å…ƒç´ çš„ä¸ªæ•°ï¼ŒHashMapä¸­K-Vçš„å®æ—¶æ•°é‡ï¼Œä¸æ˜¯tableæ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> <span class="keyword">size</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è®°å½• HashMap çš„ä¿®æ”¹æ¬¡æ•°</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯æ¬¡æ‰©å®¹å’Œæ›´æ”¹mapç»“æ„çš„è®¡æ•°å™¨</span></span><br><span class="line"> <span class="keyword">transient</span> <span class="keyword">int</span> modCount;  </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è°ƒæ•´å¤§å°ä¸‹ä¸€ä¸ªå®¹é‡çš„å€¼è®¡ç®—æ–¹å¼ä¸ºï¼šå®¹é‡ * è´Ÿè½½å› å­ï¼Œå®¹é‡æ˜¯æ•°ç»„çš„é•¿åº¦</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸´ç•Œå€¼ï¼Œå½“å®é™…å¤§å°(å®¹é‡*è´Ÿè½½å› å­)è¶…è¿‡ä¸´ç•Œå€¼æ—¶ï¼Œä¼šè¿›è¡Œæ‰©å®¹</span></span><br><span class="line"><span class="built_in">int</span> threshold;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>å“ˆå¸Œè¡¨çš„åŠ è½½å› å­</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">float</span> loadFactor;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>åŠ è½½å› å­çš„æ¦‚è¿°</p>
<p>loadFactor åŠ è½½å› å­ï¼Œæ˜¯ç”¨æ¥è¡¡é‡ HashMap æ»¡çš„ç¨‹åº¦ï¼Œè¡¨ç¤º HashMap çš„ç–å¯†ç¨‹åº¦ï¼Œå½±å“ hash æ“ä½œåˆ°åŒä¸€ä¸ªæ•°ç»„ä½ç½®çš„æ¦‚ç‡ï¼Œè®¡ç®— HashMap çš„å®æ—¶åŠ è½½å› å­çš„æ–¹æ³•ä¸º <strong>size/capacity</strong>ï¼Œè€Œä¸æ˜¯å ç”¨æ¡¶çš„æ•°é‡å»é™¤ä»¥ capacityï¼Œcapacity æ˜¯æ¡¶çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ table çš„é•¿åº¦ length</p>
<p>å½“ HashMap å®¹çº³çš„å…ƒç´ å·²ç»è¾¾åˆ°æ•°ç»„é•¿åº¦çš„ 75% æ—¶ï¼Œè¡¨ç¤º HashMap æ‹¥æŒ¤éœ€è¦æ‰©å®¹ï¼Œè€Œæ‰©å®¹è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ° rehashã€å¤åˆ¶æ•°æ®ç­‰æ“ä½œï¼Œéå¸¸æ¶ˆè€—æ€§èƒ½ï¼Œæ‰€ä»¥å¼€å‘ä¸­å°½é‡å‡å°‘æ‰©å®¹çš„æ¬¡æ•°ï¼Œé€šè¿‡åˆ›å»º HashMap é›†åˆå¯¹è±¡æ—¶æŒ‡å®šåˆå§‹å®¹é‡æ¥é¿å…</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="constructor">HashMap(<span class="params">int</span> <span class="params">initialCapacity</span>, <span class="params">float</span> <span class="params">loadFactor</span>)</span><span class="comment">//æ„é€ æŒ‡å®šåˆå§‹å®¹é‡å’ŒåŠ è½½å› å­çš„ç©ºHashMap</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸ºä»€ä¹ˆåŠ è½½å› å­è®¾ç½®ä¸º 0.75ï¼Œåˆå§‹åŒ–ä¸´ç•Œå€¼æ˜¯ 12ï¼Ÿ</p>
<p>loadFactor å¤ªå¤§å¯¼è‡´æŸ¥æ‰¾å…ƒç´ æ•ˆç‡ä½ï¼Œå­˜æ”¾çš„æ•°æ®æ‹¥æŒ¤ï¼Œå¤ªå°å¯¼è‡´æ•°ç»„çš„åˆ©ç”¨ç‡ä½ï¼Œå­˜æ”¾çš„æ•°æ®ä¼šå¾ˆåˆ†æ•£ã€‚loadFactor çš„é»˜è®¤å€¼ä¸º <strong>0.75f æ˜¯å®˜æ–¹ç»™å‡ºçš„ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¸´ç•Œå€¼</strong></p>
</li>
<li>
<p>threshold è®¡ç®—å…¬å¼ï¼šcapacityï¼ˆæ•°ç»„é•¿åº¦é»˜è®¤16ï¼‰ * loadFactorï¼ˆé»˜è®¤ 0.75ï¼‰ã€‚å½“ size &gt;= threshold çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘å¯¹æ•°ç»„çš„ resizeï¼ˆæ‰©å®¹ï¼‰ï¼Œè¿™å°±æ˜¯è¡¡é‡æ•°ç»„æ˜¯å¦éœ€è¦æ‰©å¢çš„ä¸€ä¸ªæ ‡å‡†ï¼Œ æ‰©å®¹åçš„ HashMap å®¹é‡æ˜¯ä¹‹å‰å®¹é‡çš„<strong>ä¸¤å€</strong></p>
</li>
</ul>
</li>
</ol>
<h5 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³•</h5>
<ul>
<li>
<p>æ„é€ ä¸€ä¸ªç©ºçš„ HashMap ï¼Œ<strong>é»˜è®¤åˆå§‹å®¹é‡ï¼ˆ16ï¼‰å’Œé»˜è®¤è´Ÿè½½å› å­ï¼ˆ0.75ï¼‰</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span>()</span> &#123;</span><br><span class="line">	<span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; </span><br><span class="line">	<span class="comment">// å°†é»˜è®¤çš„åŠ è½½å› å­0.75èµ‹å€¼ç»™loadFactorï¼Œå¹¶æ²¡æœ‰åˆ›å»ºæ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ„é€ ä¸€ä¸ªå…·æœ‰æŒ‡å®šçš„åˆå§‹å®¹é‡å’Œé»˜è®¤è´Ÿè½½å› å­ï¼ˆ0.75ï¼‰HashMap</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡å®šâ€œå®¹é‡å¤§å°â€çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ„é€ ä¸€ä¸ªå…·æœ‰æŒ‡å®šçš„åˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­çš„ HashMap</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public <span class="constructor">HashMap(<span class="params">int</span> <span class="params">initialCapacity</span>, <span class="params">float</span> <span class="params">loadFactor</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">    <span class="comment">// å°†æŒ‡å®šçš„åŠ è½½å› å­èµ‹å€¼ç»™HashMapæˆå‘˜å˜é‡çš„è´Ÿè½½å› å­loadFactor</span></span><br><span class="line">    this.loadFactor = loadFactor;</span><br><span class="line">  	<span class="comment">// æœ€åè°ƒç”¨äº†tableSizeFor</span></span><br><span class="line">    this.threshold = table<span class="constructor">SizeFor(<span class="params">initialCapacity</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>å¯¹äº <code>this.threshold = tableSizeFor(initialCapacity)</code></p>
<p>JDK8 ä»¥åçš„æ„é€ æ–¹æ³•ä¸­ï¼Œå¹¶æ²¡æœ‰å¯¹ table è¿™ä¸ªæˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œtable çš„åˆå§‹åŒ–è¢«æ¨è¿Ÿåˆ°äº† put æ–¹æ³•ä¸­ï¼Œåœ¨ put æ–¹æ³•ä¸­ä¼šå¯¹ threshold é‡æ–°è®¡ç®—</p>
</li>
</ul>
</li>
<li>
<p>åŒ…å«å¦ä¸€ä¸ª <code>Map</code> çš„æ„é€ å‡½æ•°</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ ä¸€ä¸ªæ˜ å°„å…³ç³»ä¸æŒ‡å®š Map ç›¸åŒçš„æ–° HashMap</span></span><br><span class="line">public <span class="constructor">HashMap(Map&lt;? <span class="params">extends</span> K, ? <span class="params">extends</span> V&gt; <span class="params">m</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è´Ÿè½½å› å­loadFactorå˜ä¸ºé»˜è®¤çš„è´Ÿè½½å› å­0.75</span></span><br><span class="line">    this.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">    put<span class="constructor">MapEntries(<span class="params">m</span>, <span class="params">false</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>putMapEntries æºç åˆ†æï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">final void put<span class="constructor">MapEntries(Map&lt;? <span class="params">extends</span> K, ? <span class="params">extends</span> V&gt; <span class="params">m</span>, <span class="params">boolean</span> <span class="params">evict</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–å‚æ•°é›†åˆçš„é•¿åº¦</span></span><br><span class="line">    <span class="built_in">int</span> s = m.size<span class="literal">()</span>;</span><br><span class="line">    <span class="keyword">if</span> (s &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å‚æ•°é›†åˆçš„é•¿åº¦æ˜¯å¦å¤§äº0</span></span><br><span class="line">        <span class="keyword">if</span> (table<span class="operator"> == </span>null) &#123;  <span class="comment">// åˆ¤æ–­tableæ˜¯å¦å·²ç»åˆå§‹åŒ–</span></span><br><span class="line">            <span class="comment">// pre-size</span></span><br><span class="line">            <span class="comment">// æœªåˆå§‹åŒ–ï¼Œsä¸ºmçš„å®é™…å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">            <span class="built_in">float</span> ft = ((<span class="built_in">float</span>)s<span class="operator"> / </span>loadFactor) + <span class="number">1.0</span>F;</span><br><span class="line">            <span class="built_in">int</span> t = ((ft &lt; (<span class="built_in">float</span>)MAXIMUM_CAPACITY) ?</span><br><span class="line">                     (<span class="built_in">int</span>)ft : MAXIMUM_CAPACITY);</span><br><span class="line">            <span class="comment">// è®¡ç®—å¾—åˆ°çš„tå¤§äºé˜ˆå€¼ï¼Œåˆ™åˆå§‹åŒ–é˜ˆå€¼</span></span><br><span class="line">            <span class="keyword">if</span> (t &gt; threshold)</span><br><span class="line">                threshold = table<span class="constructor">SizeFor(<span class="params">t</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å·²åˆå§‹åŒ–ï¼Œå¹¶ä¸”må…ƒç´ ä¸ªæ•°å¤§äºé˜ˆå€¼ï¼Œè¿›è¡Œæ‰©å®¹å¤„ç†</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s &gt; threshold)</span><br><span class="line">            resize<span class="literal">()</span>;</span><br><span class="line">        <span class="comment">// å°†mä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è‡³HashMapä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entry<span class="constructor">Set()</span>) &#123;</span><br><span class="line">            K key = e.get<span class="constructor">Key()</span>;</span><br><span class="line">            V value = e.get<span class="constructor">Value()</span>;</span><br><span class="line">            put<span class="constructor">Val(<span class="params">hash</span>(<span class="params">key</span>)</span>, key, value, <span class="literal">false</span>, evict);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>float ft = ((float)s / loadFactor) + 1.0F</code> è¿™ä¸€è¡Œä»£ç ä¸­ä¸ºä»€ä¹ˆè¦åŠ  1.0F ï¼Ÿ</p>
<p>s / loadFactor çš„ç»“æœæ˜¯å°æ•°ï¼ŒåŠ  1.0F ç›¸å½“äºæ˜¯å¯¹å°æ•°åšä¸€ä¸ªå‘ä¸Šå–æ•´ä»¥å°½å¯èƒ½çš„ä¿è¯æ›´å¤§å®¹é‡ï¼Œæ›´å¤§çš„å®¹é‡èƒ½å¤Ÿå‡å°‘ resize çš„è°ƒç”¨æ¬¡æ•°ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ•°ç»„çš„æ‰©å®¹</p>
</li>
</ul>
<h5 id="æˆå‘˜æ–¹æ³•">æˆå‘˜æ–¹æ³•</h5>
<ul>
<li>
<p>hash()ï¼šHashMap æ˜¯æ”¯æŒ Key ä¸ºç©ºçš„ï¼›HashTable æ˜¯ç›´æ¥ç”¨ Key æ¥è·å– HashCodeï¼Œkey ä¸ºç©ºä¼šæŠ›å¼‚å¸¸</p>
<ul>
<li>
<p>&amp;ï¼ˆæŒ‰ä½ä¸è¿ç®—ï¼‰ï¼šç›¸åŒçš„äºŒè¿›åˆ¶æ•°ä½ä¸Šï¼Œéƒ½æ˜¯ 1 çš„æ—¶å€™ï¼Œç»“æœä¸º 1ï¼Œå¦åˆ™ä¸ºé›¶</p>
</li>
<li>
<p>^ï¼ˆæŒ‰ä½å¼‚æˆ–è¿ç®—ï¼‰ï¼šç›¸åŒçš„äºŒè¿›åˆ¶æ•°ä½ä¸Šï¼Œæ•°å­—ç›¸åŒï¼Œç»“æœä¸º 0ï¼Œä¸åŒä¸º 1ï¼Œ<strong>ä¸è¿›ä½åŠ æ³•</strong></p>
<p>0 1 ç›¸äº’åš &amp; | ^ è¿ç®—ï¼Œç»“æœå‡ºç° 0 å’Œ 1 çš„æ•°é‡åˆ†åˆ«æ˜¯ 3:1ã€1:3ã€1:1ï¼Œæ‰€ä»¥å¼‚æˆ–æ˜¯æœ€å¹³å‡çš„</p>
</li>
</ul>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">static final int hash(Object <span class="keyword">key</span>) &#123;</span><br><span class="line">    int h;</span><br><span class="line">    // 1ï¼‰å¦‚æœ<span class="keyword">key</span>ç­‰äº<span class="keyword">null</span>ï¼šå¯ä»¥çœ‹åˆ°å½“<span class="keyword">key</span>ç­‰äº<span class="keyword">null</span>çš„æ—¶å€™ä¹Ÿæ˜¯æœ‰å“ˆå¸Œå€¼çš„ï¼Œè¿”å›çš„æ˜¯0</span><br><span class="line">    // 2ï¼‰å¦‚æœ<span class="keyword">key</span>ä¸ç­‰äº<span class="keyword">null</span>ï¼šé¦–å…ˆè®¡ç®—å‡º<span class="keyword">key</span>çš„hashCodeèµ‹å€¼ç»™h,ç„¶åä¸hæ— ç¬¦å·å³ç§»16ä½åçš„äºŒè¿›åˆ¶è¿›è¡ŒæŒ‰ä½å¼‚æˆ–</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">key</span> == <span class="keyword">null</span>) ? 0 : (h = <span class="keyword">key</span>.hashCode()) ^ (h &gt;&gt;&gt; 16);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¡ç®— hash çš„æ–¹æ³•ï¼šå°† hashCode æ— ç¬¦å·å³ç§» 16 ä½ï¼Œé«˜ 16bit å’Œä½ 16bit åšå¼‚æˆ–ï¼Œæ‰°åŠ¨è¿ç®—</p>
<p>åŸå› ï¼šå½“æ•°ç»„é•¿åº¦å¾ˆå°ï¼Œå‡è®¾æ˜¯ 16ï¼Œé‚£ä¹ˆ n-1 å³ä¸º 1111 ï¼Œè¿™æ ·çš„å€¼å’Œ hashCode() ç›´æ¥åšæŒ‰ä½ä¸æ“ä½œï¼Œå®é™…ä¸Šåªä½¿ç”¨äº†å“ˆå¸Œå€¼çš„å 4 ä½ã€‚å¦‚æœå½“å“ˆå¸Œå€¼çš„é«˜ä½å˜åŒ–å¾ˆå¤§ï¼Œä½ä½å˜åŒ–å¾ˆå°ï¼Œå°±å¾ˆå®¹æ˜“é€ æˆå“ˆå¸Œå†²çªäº†ï¼Œæ‰€ä»¥è¿™é‡Œ<strong>æŠŠé«˜ä½ä½éƒ½åˆ©ç”¨èµ·æ¥ï¼Œè®©é«˜16 ä½ä¹Ÿå‚ä¸è¿ç®—</strong>ï¼Œä»è€Œè§£å†³äº†è¿™ä¸ªé—®é¢˜</p>
<p>å“ˆå¸Œå†²çªçš„å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>å¼€æ”¾å®šå€æ³•ï¼šçº¿æ€§æ¢æŸ¥æ³•ï¼ˆThreadLocalMap ä½¿ç”¨ï¼‰ï¼Œå¹³æ–¹æ¢æŸ¥æ³•ï¼ˆi + 1^2ã€i - 1^2ã€i + 2^2â€¦â€¦ï¼‰ã€åŒé‡æ•£åˆ—ï¼ˆå¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼‰</li>
<li>é“¾åœ°å€æ³•ï¼šæ‹‰é“¾æ³•</li>
</ul>
</li>
<li>
<p>put()ï¼šjdk1.8 å‰æ˜¯å¤´æ’æ³• (é“¾åœ°å€æ³•)ï¼Œå¤šçº¿ç¨‹ä¸‹æ‰©å®¹å‡ºç°å¾ªç¯é“¾è¡¨ï¼Œjdk1.8 ä»¥åå¼•å…¥çº¢é»‘æ ‘ï¼Œæ’å…¥æ–¹æ³•å˜æˆå°¾æ’æ³•</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ put æ–¹æ³•æ—¶åˆ›å»ºæ•°ç»„ Node[] tableï¼Œå› ä¸ºæ•£åˆ—è¡¨è€—è´¹å†…å­˜ï¼Œä¸ºäº†é˜²æ­¢å†…å­˜æµªè´¹ï¼Œæ‰€ä»¥<strong>å»¶è¿Ÿåˆå§‹åŒ–</strong></p>
<p>å­˜å‚¨æ•°æ®æ­¥éª¤ï¼ˆå­˜å‚¨è¿‡ç¨‹ï¼‰ï¼š</p>
<ol>
<li>å…ˆé€šè¿‡ hash å€¼è®¡ç®—å‡º key æ˜ å°„åˆ°å“ªä¸ªæ¡¶ï¼Œå“ˆå¸Œå¯»å€</li>
<li>å¦‚æœæ¡¶ä¸Šæ²¡æœ‰ç¢°æ’å†²çªï¼Œåˆ™ç›´æ¥æ’å…¥</li>
<li>å¦‚æœå‡ºç°ç¢°æ’å†²çªï¼šå¦‚æœè¯¥æ¡¶ä½¿ç”¨çº¢é»‘æ ‘å¤„ç†å†²çªï¼Œåˆ™è°ƒç”¨çº¢é»‘æ ‘çš„æ–¹æ³•æ’å…¥æ•°æ®ï¼›å¦åˆ™é‡‡ç”¨ä¼ ç»Ÿçš„é“¾å¼æ–¹æ³•æ’å…¥ï¼Œå¦‚æœé“¾çš„é•¿åº¦è¾¾åˆ°ä¸´ç•Œå€¼ï¼Œåˆ™æŠŠé“¾è½¬å˜ä¸ºçº¢é»‘æ ‘</li>
<li>å¦‚æœæ•°ç»„ä½ç½®ç›¸åŒï¼Œé€šè¿‡ equals æ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸åŒï¼šç›¸åŒåˆ™æ–°çš„ value è¦†ç›–æ—§ valueï¼Œä¸ç›¸åŒåˆ™å°†æ–°çš„é”®å€¼å¯¹æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­</li>
<li>æœ€ååˆ¤æ–­ size æ˜¯å¦å¤§äºé˜ˆå€¼ thresholdï¼Œåˆ™è¿›è¡Œæ‰©å®¹</li>
</ol>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public V <span class="built_in">put</span>(K <span class="built_in">key</span>, V value) &#123;</span><br><span class="line">    <span class="built_in">return</span> putVal(hash(<span class="built_in">key</span>), <span class="built_in">key</span>, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>putVal() æ–¹æ³•ä¸­ key åœ¨è¿™é‡Œæ‰§è¡Œäº†ä¸€ä¸‹ hash()ï¼Œåœ¨ putVal å‡½æ•°ä¸­ä½¿ç”¨åˆ°äº†ä¸Šè¿° hash å‡½æ•°è®¡ç®—çš„å“ˆå¸Œå€¼ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">final V put<span class="constructor">Val(<span class="params">int</span> <span class="params">hash</span>, K <span class="params">key</span>, V <span class="params">value</span>, <span class="params">boolean</span> <span class="params">onlyIfAbsent</span>, <span class="params">boolean</span> <span class="params">evict</span>)</span> &#123;</span><br><span class="line">  	<span class="comment">//ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span></span><br><span class="line">  	<span class="keyword">if</span> ((p = tab<span class="literal">[<span class="identifier">i</span> = (<span class="identifier">n</span> - <span class="number">1</span>) &amp; <span class="identifier">hash</span>]</span>)<span class="operator"> == </span>null)&#123;<span class="comment">//è¿™é‡Œçš„nè¡¨ç¤ºæ•°ç»„é•¿åº¦16</span></span><br><span class="line">  		<span class="comment">//.....</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (e != null) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">              V oldValue = e.value;</span><br><span class="line">              <span class="comment">//onlyIfAbsenté»˜è®¤ä¸ºfalseï¼Œæ‰€ä»¥å¯ä»¥è¦†ç›–å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œå¦‚æœä¸ºtrueè¯´æ˜ä¸èƒ½è¦†ç›–</span></span><br><span class="line">              <span class="keyword">if</span> (!onlyIfAbsent<span class="operator"> || </span>oldValue<span class="operator"> == </span>null)</span><br><span class="line">                  e.value = value;</span><br><span class="line">              after<span class="constructor">NodeAccess(<span class="params">e</span>)</span>;</span><br><span class="line">              <span class="comment">// å¦‚æœè¿™é‡Œå…è®¸è¦†ç›–ï¼Œå°±ç›´æ¥è¿”å›äº†</span></span><br><span class="line">              return oldValue;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯æ·»åŠ æ“ä½œï¼ŒmodCount ++ï¼Œå¦‚æœä¸æ˜¯æ›¿æ¢ï¼Œä¸ä¼šèµ°è¿™é‡Œçš„é€»è¾‘ï¼ŒmodCountç”¨æ¥è®°å½•é€»è¾‘çš„å˜åŒ–</span></span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">// æ•°é‡å¤§äºæ‰©å®¹é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize<span class="literal">()</span>;</span><br><span class="line">    after<span class="constructor">NodeInsertion(<span class="params">evict</span>)</span>;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>(n - 1) &amp; hash</code>ï¼šè®¡ç®—ä¸‹æ ‡ä½ç½®</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/HashMap-putVal%E5%93%88%E5%B8%8C%E8%BF%90%E7%AE%97.png" alt="img"></p>
</li>
<li>
<p>ä½™æ•°æœ¬è´¨æ˜¯ä¸æ–­åšé™¤æ³•ï¼ŒæŠŠå‰©ä½™çš„æ•°å‡å»ï¼Œè¿ç®—æ•ˆç‡è¦æ¯”ä½è¿ç®—ä½</p>
</li>
</ul>
</li>
<li>
<p>treeifyBin()</p>
<p>èŠ‚ç‚¹æ·»åŠ å®Œæˆä¹‹ååˆ¤æ–­æ­¤æ—¶èŠ‚ç‚¹ä¸ªæ•°æ˜¯å¦å¤§äº TREEIFY_THRESHOLD ä¸´ç•Œå€¼ 8ï¼Œå¦‚æœå¤§äºåˆ™å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè½¬æ¢çº¢é»‘æ ‘çš„æ–¹æ³• treeifyBinï¼Œæ•´ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">   <span class="comment">//è½¬æ¢ä¸ºçº¢é»‘æ ‘ tabè¡¨ç¤ºæ•°ç»„å  hashè¡¨ç¤ºå“ˆå¸Œå€¼</span></span><br><span class="line">   treeify<span class="constructor">Bin(<span class="params">tab</span>, <span class="params">hash</span>)</span>;</span><br></pre></td></tr></table></figure>
<ol>
<li>å¦‚æœå½“å‰æ•°ç»„ä¸ºç©ºæˆ–è€…æ•°ç»„çš„é•¿åº¦å°äºè¿›è¡Œæ ‘å½¢åŒ–çš„é˜ˆ MIN_TREEIFY_CAPACITY = 64 å°±å»æ‰©å®¹ï¼Œè€Œä¸æ˜¯å°†èŠ‚ç‚¹å˜ä¸ºçº¢é»‘æ ‘</li>
<li>å¦‚æœæ˜¯æ ‘å½¢åŒ–éå†æ¡¶ä¸­çš„å…ƒç´ ï¼Œåˆ›å»ºç›¸åŒä¸ªæ•°çš„æ ‘å½¢èŠ‚ç‚¹ï¼Œå¤åˆ¶å†…å®¹ï¼Œå»ºç«‹èµ·è”ç³»ï¼Œç±»ä¼¼å•å‘é“¾è¡¨è½¬æ¢ä¸ºåŒå‘é“¾è¡¨</li>
<li>è®©æ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å³æ•°ç»„ä¸­çš„å…ƒç´ æŒ‡å‘æ–°å»ºçš„çº¢é»‘æ ‘çš„èŠ‚ç‚¹ï¼Œä»¥åè¿™ä¸ªæ¡¶é‡Œçš„å…ƒç´ å°±æ˜¯çº¢é»‘æ ‘è€Œä¸æ˜¯é“¾è¡¨æ•°æ®ç»“æ„äº†</li>
</ol>
</li>
<li>
<p>tableSizeFor()ï¼šåˆ›å»º HashMap æŒ‡å®šå®¹é‡æ—¶ï¼ŒHashMap é€šè¿‡ä½ç§»è¿ç®—å’Œæˆ–è¿ç®—å¾—åˆ°æ¯”æŒ‡å®šåˆå§‹åŒ–å®¹é‡å¤§çš„æœ€å°çš„ 2 çš„ n æ¬¡å¹‚</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">static final <span class="built_in">int</span> tableSizeFor(<span class="built_in">int</span> cap) &#123;//<span class="built_in">int</span> cap = <span class="number">10</span></span><br><span class="line">    <span class="built_in">int</span> <span class="built_in">n</span> = cap - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    <span class="built_in">n</span> |= <span class="built_in">n</span> &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    return (<span class="built_in">n</span> &lt; <span class="number">0</span>) ? <span class="number">1</span> <span class="symbol">:</span> (<span class="built_in">n</span> &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY <span class="symbol">:</span> <span class="built_in">n</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ†æç®—æ³•ï¼š</p>
<ol>
<li><code>int n = cap - 1</code>ï¼šé˜²æ­¢ cap å·²ç»æ˜¯ 2 çš„å¹‚ã€‚å¦‚æœ cap å·²ç»æ˜¯ 2 çš„å¹‚ï¼Œ ä¸æ‰§è¡Œå‡ 1 æ“ä½œï¼Œåˆ™æ‰§è¡Œå®Œåé¢çš„æ— ç¬¦å·å³ç§»æ“ä½œä¹‹åï¼Œè¿”å›çš„ capacity å°†æ˜¯è¿™ä¸ª cap çš„ 2 å€</li>
<li>n=0 ï¼ˆcap-1 ä¹‹åï¼‰ï¼Œåˆ™ç»è¿‡åé¢çš„å‡ æ¬¡æ— ç¬¦å·å³ç§»ä¾ç„¶æ˜¯ 0ï¼Œè¿”å›çš„ capacity æ˜¯ 1ï¼Œæœ€åæœ‰ n+1</li>
<li>|ï¼ˆæŒ‰ä½æˆ–è¿ç®—ï¼‰ï¼šç›¸åŒçš„äºŒè¿›åˆ¶æ•°ä½ä¸Šï¼Œéƒ½æ˜¯ 0 çš„æ—¶å€™ï¼Œç»“æœä¸º 0ï¼Œå¦åˆ™ä¸º 1</li>
<li>æ ¸å¿ƒæ€æƒ³ï¼š<strong>æŠŠæœ€é«˜ä½æ˜¯ 1 çš„ä½ä»¥åŠå³è¾¹çš„ä½å…¨éƒ¨ç½® 1</strong>ï¼Œç»“æœåŠ  1 åå°±æ˜¯å¤§äºæŒ‡å®šå®¹é‡çš„æœ€å°çš„ 2 çš„ n æ¬¡å¹‚</li>
</ol>
<p>ä¾‹å¦‚åˆå§‹åŒ–çš„å€¼ä¸º 10ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€æ¬¡å³ç§»</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int n = cap - <span class="number">1</span><span class="comment">;//cap=10  n=9</span></span><br><span class="line">n |= n &gt;&gt;&gt; <span class="number">1</span><span class="comment">;</span></span><br><span class="line"><span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001001</span> //<span class="number">9</span></span><br><span class="line"><span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000100</span> //<span class="number">9</span>å³ç§»ä¹‹åå˜ä¸º<span class="number">4</span></span><br><span class="line">--------------------------------------------------</span><br><span class="line"><span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001101</span> //æŒ‰ä½æˆ–ä¹‹åæ˜¯<span class="number">13</span></span><br><span class="line">//ä½¿å¾—nçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ä¸æœ€é«˜ä½çš„<span class="number">1</span>ç´§é‚»çš„å³è¾¹ä¸€ä½ä¸º<span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç¬¬äºŒæ¬¡å³ç§»</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">n |= n &gt;&gt;&gt; <span class="number">2</span><span class="comment">;//né€šè¿‡ç¬¬ä¸€æ¬¡å³ç§»å˜ä¸ºäº†ï¼šn=13</span></span><br><span class="line"><span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001101</span>  // <span class="number">13</span></span><br><span class="line"><span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000011</span>  // <span class="number">13</span>å³ç§»ä¹‹åå˜ä¸º<span class="number">3</span></span><br><span class="line">-------------------------------------------------</span><br><span class="line"><span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001111</span>	 //æŒ‰ä½æˆ–ä¹‹åæ˜¯<span class="number">15</span></span><br><span class="line">//æ— ç¬¦å·å³ç§»ä¸¤ä½ï¼Œä¼šå°†æœ€é«˜ä½ä¸¤ä¸ªè¿ç»­çš„<span class="number">1</span>å³ç§»ä¸¤ä½ï¼Œç„¶åå†ä¸åŸæ¥çš„nåšæˆ–æ“ä½œï¼Œè¿™æ ·nçš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„é«˜ä½ä¸­ä¼šæœ‰<span class="number">4</span>ä¸ªè¿ç»­çš„<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå®¹é‡æœ€å¤§æ˜¯ 32bit çš„æ­£æ•°ï¼Œå› æ­¤æœ€å <code>n |= n &gt;&gt;&gt; 16</code>ï¼Œæœ€å¤šæ˜¯ 32 ä¸ª 1ï¼ˆä½†æ˜¯è¿™å·²ç»æ˜¯è´Ÿæ•°äº†ï¼‰ã€‚åœ¨æ‰§è¡Œ tableSizeFor ä¹‹å‰ï¼Œå¯¹ initialCapacity åšäº†åˆ¤æ–­ï¼Œå¦‚æœå¤§äº MAXIMUM_CAPACITY(2 ^ 30)ï¼Œåˆ™å– MAXIMUM_CAPACITYï¼›å¦‚æœå°äº MAXIMUM_CAPACITY(2 ^ 30)ï¼Œä¼šæ‰§è¡Œç§»ä½æ“ä½œï¼Œæ‰€ä»¥ç§»ä½æ“ä½œä¹‹åï¼Œæœ€å¤§ 30 ä¸ª 1ï¼ŒåŠ  1 ä¹‹åå¾— 2 ^ 30</p>
</li>
<li>
<p>å¾—åˆ°çš„ capacity è¢«èµ‹å€¼ç»™äº† threshold</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">this.threshold</span> = tableSizeFor(initialCapacity)<span class="comment">;//initialCapacity=10</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>JDK 11</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ— ç¬¦å·å³ç§»ï¼Œé«˜ä½è¡¥0</span></span><br><span class="line">	<span class="comment">//-1è¡¥ç : 11111111 11111111 11111111 11111111</span></span><br><span class="line">    <span class="type">int</span> n = <span class="number">-1</span> &gt;&gt;&gt; Integer.<span class="built_in">numberOfLeadingZeros</span>(cap - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿”å›æœ€é«˜ä½ä¹‹å‰çš„0çš„ä½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">numberOfLeadingZeros</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt;= <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> i == <span class="number">0</span> ? <span class="number">32</span> : <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœi&gt;0ï¼Œé‚£ä¹ˆå°±è¡¨æ˜åœ¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸­å…¶è‡³å°‘æœ‰ä¸€ä½ä¸º1</span></span><br><span class="line">    <span class="type">int</span> n = <span class="number">31</span>;</span><br><span class="line">    <span class="comment">// içš„æœ€é«˜ä½1åœ¨é«˜16ä½ï¼ŒæŠŠiå³ç§»16ä½ï¼Œè®©æœ€é«˜ä½1è¿›å…¥ä½16ä½ç»§ç»­é€’è¿›åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">1</span> &lt;&lt; <span class="number">16</span>) &#123; n -= <span class="number">16</span>; i &gt;&gt;&gt;= <span class="number">16</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">1</span> &lt;&lt;  <span class="number">8</span>) &#123; n -=  <span class="number">8</span>; i &gt;&gt;&gt;=  <span class="number">8</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">1</span> &lt;&lt;  <span class="number">4</span>) &#123; n -=  <span class="number">4</span>; i &gt;&gt;&gt;=  <span class="number">4</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">1</span> &lt;&lt;  <span class="number">2</span>) &#123; n -=  <span class="number">2</span>; i &gt;&gt;&gt;=  <span class="number">2</span>; &#125;</span><br><span class="line">    <span class="keyword">return</span> n - (i &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>resize()ï¼š</p>
<p>å½“ HashMap ä¸­çš„<strong>å…ƒç´ ä¸ªæ•°</strong>è¶…è¿‡ <code>(æ•°ç»„é•¿åº¦)*loadFactor(è´Ÿè½½å› å­)</code> æˆ–è€…é“¾è¡¨è¿‡é•¿æ—¶ï¼ˆé“¾è¡¨é•¿åº¦ &gt; 8ï¼Œæ•°ç»„é•¿åº¦ &lt; 64ï¼‰ï¼Œå°±ä¼šè¿›è¡Œæ•°ç»„æ‰©å®¹ï¼Œåˆ›å»ºæ–°çš„æ•°ç»„ï¼Œä¼´éšä¸€æ¬¡é‡æ–° hash åˆ†é…ï¼Œå¹¶ä¸”éå† hash è¡¨ä¸­æ‰€æœ‰çš„å…ƒç´ éå¸¸è€—æ—¶ï¼Œæ‰€ä»¥è¦å°½é‡é¿å… resize</p>
<p>æ‰©å®¹æœºåˆ¶ä¸ºæ‰©å®¹ä¸ºåŸæ¥å®¹é‡çš„ 2 å€ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">        <span class="comment">// ä»¥å‰çš„å®¹é‡å·²ç»æ˜¯æœ€å¤§å®¹é‡äº†ï¼Œè¿™æ—¶è°ƒå¤§ æ‰©å®¹é˜ˆå€¼ threshold</span></span><br><span class="line">        threshold = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">return</span> oldTab;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((<span class="keyword">new</span><span class="type">Cap</span> = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">             oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">        <span class="keyword">new</span><span class="type">Thr</span> = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// åˆå§‹åŒ–çš„thresholdèµ‹å€¼ç»™newCap</span></span><br><span class="line">    <span class="keyword">new</span><span class="type">Cap</span> = oldThr;</span><br><span class="line"><span class="keyword">else</span> &#123; </span><br><span class="line">    <span class="keyword">new</span><span class="type">Cap</span> = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">    <span class="keyword">new</span><span class="type">Thr</span> = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HashMap åœ¨è¿›è¡Œæ‰©å®¹åï¼ŒèŠ‚ç‚¹<strong>è¦ä¹ˆå°±åœ¨åŸæ¥çš„ä½ç½®ï¼Œè¦ä¹ˆå°±è¢«åˆ†é…åˆ°&quot;åŸä½ç½®+æ—§å®¹é‡&quot;çš„ä½ç½®</strong></p>
<p>åˆ¤æ–­ï¼še.hash ä¸ oldCap å¯¹åº”çš„æœ‰æ•ˆé«˜ä½ä¸Šçš„å€¼æ˜¯ 1ï¼Œå³å½“å‰æ•°ç»„é•¿åº¦ n äºŒè¿›åˆ¶ä¸º 1 çš„ä½ä¸º x ä½ï¼Œå¦‚æœ key çš„å“ˆå¸Œå€¼ x ä½ä¹Ÿä¸º 1ï¼Œåˆ™æ‰©å®¹åçš„ç´¢å¼•ä¸º now + n</p>
<p>æ³¨æ„ï¼šè¿™é‡Œè¦æ±‚<strong>æ•°ç»„é•¿åº¦ 2 çš„å¹‚</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/HashMap-resize%E6%89%A9%E5%AE%B9.png" alt="img"></p>
<p>æ™®é€šèŠ‚ç‚¹ï¼šæŠŠæ‰€æœ‰èŠ‚ç‚¹åˆ†æˆé«˜ä½ä½ä¸¤ä¸ªé“¾è¡¨ï¼Œè½¬ç§»åˆ°æ•°ç»„</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> éå†æ‰€æœ‰çš„èŠ‚ç‚¹</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">next</span> = e.<span class="keyword">next</span>;</span><br><span class="line">    <span class="regexp">//</span> oldCap æ—§æ•°ç»„å¤§å°ï¼Œ<span class="number">2</span> çš„ n æ¬¡å¹‚</span><br><span class="line">    <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (loTail == null)</span><br><span class="line">            loHead = e;	<span class="regexp">//</span>æŒ‡å‘ä½ä½é“¾è¡¨å¤´èŠ‚ç‚¹</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            loTail.<span class="keyword">next</span> = e;</span><br><span class="line">        loTail = e;		<span class="regexp">//</span>æŒ‡å‘ä½ä½é“¾è¡¨å°¾èŠ‚ç‚¹</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (hiTail == null)</span><br><span class="line">            hiHead = e;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            hiTail.<span class="keyword">next</span> = e;</span><br><span class="line">        hiTail = e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">while</span> ((e = <span class="keyword">next</span>) != null);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (loTail != null) &#123;</span><br><span class="line">    loTail.<span class="keyword">next</span> = null;	<span class="regexp">//</span> ä½ä½é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½åœ¨åŸå“ˆå¸Œè¡¨ä¸­æŒ‡å‘å…¶ä»–èŠ‚ç‚¹ï¼Œéœ€è¦æ–­å¼€</span><br><span class="line">    newTab[j] = loHead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çº¢é»‘æ ‘èŠ‚ç‚¹ï¼šæ‰©å®¹æ—¶ split æ–¹æ³•ä¼šå°†æ ‘<strong>æ‹†æˆé«˜ä½å’Œä½ä½ä¸¤ä¸ªé“¾è¡¨</strong>ï¼Œåˆ¤æ–­é•¿åº¦æ˜¯å¦å°äºç­‰äº 6</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœä½ä½é“¾è¡¨é¦–èŠ‚ç‚¹ä¸ä¸ºnullï¼Œè¯´æ˜æœ‰è¿™ä¸ªé“¾è¡¨å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> (loHead != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœé“¾è¡¨ä¸‹çš„å…ƒç´ å°äºç­‰äº6</span></span><br><span class="line">    <span class="keyword">if</span> (lc &lt;= UNTREEIFY_THRESHOLD)</span><br><span class="line">        <span class="comment">//é‚£å°±ä»çº¢é»‘æ ‘è½¬é“¾è¡¨äº†ï¼Œä½ä½é“¾è¡¨ï¼Œè¿ç§»åˆ°æ–°æ•°ç»„ä¸­ä¸‹æ ‡ä¸å˜ï¼Œè¿˜æ˜¯ç­‰äºåŸæ•°ç»„åˆ°ä¸‹æ ‡</span></span><br><span class="line">        <span class="literal">tab</span>[index] = loHead.untreeify(<span class="built_in">map</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//ä½ä½é“¾è¡¨ï¼Œè¿ç§»åˆ°æ–°æ•°ç»„ä¸­ä¸‹æ ‡ä¸å˜ï¼ŒæŠŠä½ä½é“¾è¡¨æ•´ä¸ªèµ‹å€¼åˆ°è¿™ä¸ªä¸‹æ ‡ä¸‹</span></span><br><span class="line">        <span class="literal">tab</span>[index] = loHead;</span><br><span class="line">        <span class="comment">//å¦‚æœé«˜ä½é¦–èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œè¯´æ˜åŸæ¥çš„çº¢é»‘æ ‘å·²ç»è¢«æ‹†åˆ†æˆä¸¤ä¸ªé“¾è¡¨äº†</span></span><br><span class="line">        <span class="keyword">if</span> (hiHead != <span class="literal">null</span>)</span><br><span class="line">            <span class="comment">//éœ€è¦æ„å»ºæ–°çš„çº¢é»‘æ ‘äº†</span></span><br><span class="line">            loHead.treeify(<span class="literal">tab</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>â€‹</p>
<ul>
<li>
<p>remove()ï¼šåˆ é™¤æ˜¯é¦–å…ˆå…ˆæ‰¾åˆ°å…ƒç´ çš„ä½ç½®ï¼Œå¦‚æœæ˜¯é“¾è¡¨å°±éå†é“¾è¡¨æ‰¾åˆ°å…ƒç´ ä¹‹ååˆ é™¤ã€‚å¦‚æœæ˜¯ç”¨çº¢é»‘æ ‘å°±éå†æ ‘ç„¶åæ‰¾åˆ°ä¹‹ååšåˆ é™¤ï¼Œæ ‘å°äº 6 çš„æ—¶å€™é€€åŒ–ä¸ºé“¾è¡¨</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">final Node&lt;K,V&gt; removeNode(int <span class="built_in">hash</span>, Object key, Object value,</span><br><span class="line">                           <span class="built_in">boolean</span> matchValue, <span class="built_in">boolean</span> movable) &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] <span class="literal">tab</span>; Node&lt;K,V&gt; p; int n, index;</span><br><span class="line">    <span class="comment">// èŠ‚ç‚¹æ•°ç»„tabä¸ä¸ºç©ºã€æ•°ç»„é•¿åº¦nå¤§äº0ã€æ ¹æ®hashå®šä½åˆ°çš„èŠ‚ç‚¹å¯¹è±¡pï¼Œ</span></span><br><span class="line">    <span class="comment">// è¯¥èŠ‚ç‚¹ä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹æˆ–é“¾è¡¨çš„é¦–èŠ‚ç‚¹ï¼‰ä¸ä¸ºç©ºï¼Œä»è¯¥èŠ‚ç‚¹på‘ä¸‹éå†ï¼Œæ‰¾åˆ°é‚£ä¸ªå’ŒkeyåŒ¹é…çš„èŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> ((<span class="literal">tab</span> = table) != <span class="literal">null</span> &amp;&amp; (n = <span class="literal">tab</span>.<span class="built_in">length</span>) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (p = <span class="literal">tab</span>[index = (n - <span class="number">1</span>) &amp; <span class="built_in">hash</span>]) != <span class="literal">null</span>) &#123;</span><br><span class="line">        Node&lt;K,V&gt; node = <span class="literal">null</span>, e; K k; V v;<span class="comment">//ä¸´æ—¶å˜é‡ï¼Œå‚¨å­˜è¦è¿”å›çš„èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">//keyå’Œvalueéƒ½ç›¸ç­‰ï¼Œç›´æ¥è¿”å›è¯¥èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (p.<span class="built_in">hash</span> == <span class="built_in">hash</span> &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.<span class="built_in">equals</span>(k))))</span><br><span class="line">            node = p;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((e = p.next) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœæ˜¯æ ‘èŠ‚ç‚¹ï¼Œè°ƒç”¨getTreeNodeæ–¹æ³•ä»æ ‘ç»“æ„ä¸­æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (p instanceof TreeNode)</span><br><span class="line">                node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(<span class="built_in">hash</span>, key);</span><br><span class="line">            <span class="comment">//éå†é“¾è¡¨</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="comment">//eèŠ‚ç‚¹çš„é”®æ˜¯å¦å’Œkeyç›¸ç­‰ï¼ŒeèŠ‚ç‚¹å°±æ˜¯è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œèµ‹å€¼ç»™nodeå˜é‡</span></span><br><span class="line">                    <span class="keyword">if</span> (e.<span class="built_in">hash</span> == <span class="built_in">hash</span> &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key ||</span><br><span class="line">                         (key != <span class="literal">null</span> &amp;&amp; key.<span class="built_in">equals</span>(k)))) &#123;</span><br><span class="line">                        node = e;</span><br><span class="line">                        <span class="comment">//è·³å‡ºå¾ªç¯</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    p = e;<span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹pæŒ‡å‘e ç»§ç»­éå†</span></span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="literal">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœnodeä¸ä¸ºç©ºï¼Œè¯´æ˜æ ¹æ®keyåŒ¹é…åˆ°äº†è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">//å¦‚æœä¸éœ€è¦å¯¹æ¯”valueå€¼æˆ–è€…å¯¹æ¯”valueå€¼ä½†æ˜¯valueå€¼ä¹Ÿç›¸ç­‰ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤</span></span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</span><br><span class="line">                             (value != <span class="literal">null</span> &amp;&amp; value.<span class="built_in">equals</span>(v)))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node instanceof TreeNode)</span><br><span class="line">                ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, <span class="literal">tab</span>, movable);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (node == p)<span class="comment">//nodeæ˜¯é¦–èŠ‚ç‚¹</span></span><br><span class="line">                <span class="literal">tab</span>[index] = node.next;</span><br><span class="line">            <span class="keyword">else</span>	<span class="comment">//nodeä¸æ˜¯é¦–èŠ‚ç‚¹</span></span><br><span class="line">                p.next = node.next;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            <span class="comment">//LinkedHashMap</span></span><br><span class="line">            afterNodeRemoval(node);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>get()</p>
<ol>
<li>é€šè¿‡ hash å€¼è·å–è¯¥ key æ˜ å°„åˆ°çš„æ¡¶</li>
<li>æ¡¶ä¸Šçš„ key å°±æ˜¯è¦æŸ¥æ‰¾çš„ keyï¼Œåˆ™ç›´æ¥æ‰¾åˆ°å¹¶è¿”å›</li>
<li>æ¡¶ä¸Šçš„ key ä¸æ˜¯è¦æ‰¾çš„ keyï¼Œåˆ™æŸ¥çœ‹åç»­çš„èŠ‚ç‚¹ï¼š
<ul>
<li>å¦‚æœåç»­èŠ‚ç‚¹æ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹ï¼Œé€šè¿‡è°ƒç”¨çº¢é»‘æ ‘çš„æ–¹æ³•æ ¹æ® key è·å– value</li>
<li>å¦‚æœåç»­èŠ‚ç‚¹æ˜¯é“¾è¡¨èŠ‚ç‚¹ï¼Œåˆ™é€šè¿‡å¾ªç¯éå†é“¾è¡¨æ ¹æ® key è·å– value</li>
</ul>
</li>
<li>çº¢é»‘æ ‘èŠ‚ç‚¹è°ƒç”¨çš„æ˜¯ getTreeNode æ–¹æ³•é€šè¿‡æ ‘å½¢èŠ‚ç‚¹çš„ find æ–¹æ³•è¿›è¡ŒæŸ¥
<ul>
<li>æŸ¥æ‰¾çº¢é»‘æ ‘ï¼Œä¹‹å‰æ·»åŠ æ—¶å·²ç»ä¿è¯è¿™ä¸ªæ ‘æ˜¯æœ‰åºçš„ï¼Œå› æ­¤æŸ¥æ‰¾æ—¶å°±æ˜¯æŠ˜åŠæŸ¥æ‰¾ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li>
<li>è¿™é‡Œå’Œæ’å…¥æ—¶ä¸€æ ·ï¼Œå¦‚æœå¯¹æ¯”èŠ‚ç‚¹çš„å“ˆå¸Œå€¼ç›¸ç­‰å¹¶ä¸”é€šè¿‡ equals åˆ¤æ–­å€¼ä¹Ÿç›¸ç­‰ï¼Œå°±ä¼šåˆ¤æ–­ key ç›¸ç­‰ï¼Œç›´æ¥è¿”å›ï¼Œä¸ç›¸ç­‰å°±ä»å­æ ‘ä¸­é€’å½’æŸ¥æ‰¾</li>
</ul>
</li>
<li>æ—¶é—´å¤æ‚åº¦ O(1)
<ul>
<li>è‹¥ä¸ºæ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­é€šè¿‡ key.equals(k) æŸ¥æ‰¾ï¼Œ<strong>O(logn)</strong></li>
<li>è‹¥ä¸ºé“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­é€šè¿‡ key.equals(k) æŸ¥æ‰¾ï¼Œ<strong>O(n)</strong></li>
</ul>
</li>
</ol>
</li>
</ul>
<h5 id="å¹¶å‘å¼‚å¸¸">å¹¶å‘å¼‚å¸¸</h5>
<p>HashMap å’Œ ArrayList ä¸€æ ·ï¼Œå†…éƒ¨é‡‡ç”¨ modCount ç”¨æ¥è®°å½•é›†åˆç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ï¼Œç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„çš„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–</p>
<p>åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰å modCount æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœ<strong>å…¶ä»–çº¿ç¨‹æ­¤æ—¶ä¿®æ”¹äº†é›†åˆå†…éƒ¨çš„ç»“æ„</strong>ï¼Œå°±ä¼šç›´æ¥æŠ›å‡º ConcurrentModificationException å¼‚å¸¸</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line">Iterator iterator = map.keySet().iterator();</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">KeySet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">AbstractSet</span>&lt;K&gt; &#123;</span><br><span class="line">    <span class="comment">// åº•å±‚è·å–çš„æ˜¯ KeyIterator</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> Iterator&lt;K&gt; iterator()     &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> KeyIterator(); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">KeyIterator</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HashIterator</span> <span class="keyword">implements</span> Iterator&lt;K&gt; &#123;</span><br><span class="line">    <span class="comment">// å›è°ƒ HashMap.HashIterator#nextNode</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> K <span class="keyword">next</span>() &#123; </span><br><span class="line">        <span class="keyword">return</span> nextNode().key; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">HashIterator</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt; <span class="keyword">next</span>;        <span class="comment">// next entry to return</span></span><br><span class="line">    Node&lt;K,V&gt; current;     <span class="comment">// current entry</span></span><br><span class="line">    <span class="built_in">int</span> expectedModCount;  <span class="comment">// for ã€fast-failã€‘ï¼Œå¿«é€Ÿå¤±è´¥</span></span><br><span class="line">    <span class="built_in">int</span> <span class="keyword">index</span>;             <span class="comment">// current slot</span></span><br><span class="line"></span><br><span class="line">    HashIterator() &#123;</span><br><span class="line">        <span class="comment">// æŠŠå½“å‰ map çš„æ•°é‡èµ‹å€¼ç»™ expectedModCountï¼Œè¿­ä»£æ—¶åˆ¤æ–­</span></span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">        Node&lt;K,V&gt;[] t = table;</span><br><span class="line">        current = <span class="keyword">next</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">index</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (t != <span class="literal">null</span> &amp;&amp; size &gt; <span class="number">0</span>) &#123; <span class="comment">// advance to first entry</span></span><br><span class="line">            <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (<span class="keyword">index</span> &lt; t.length &amp;&amp; (<span class="keyword">next</span> = t[<span class="keyword">index</span>++]) == <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="built_in">boolean</span> hasNext() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">next</span> != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// iterator.next() ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;K,V&gt; nextNode() &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] t;</span><br><span class="line">        Node&lt;K,V&gt; e = <span class="keyword">next</span>;</span><br><span class="line">        <span class="comment">// è¿™é‡Œä¼šåˆ¤æ–­ é›†åˆçš„ç»“æ„æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå˜åŒ–å modCount ä¼šæ”¹å˜ï¼Œç›´æ¥æŠ›å‡ºå¹¶å‘å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        <span class="keyword">if</span> (e == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        <span class="keyword">if</span> ((<span class="keyword">next</span> = (current = e).<span class="keyword">next</span>) == <span class="literal">null</span> &amp;&amp; (t = table) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (<span class="keyword">index</span> &lt; t.length &amp;&amp; (<span class="keyword">next</span> = t[<span class="keyword">index</span>++]) == <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// è¿­ä»£å™¨å…è®¸åˆ é™¤é›†åˆçš„å…ƒç´ ï¼Œã€åˆ é™¤åä¼šé‡ç½® expectedModCount = modCountã€‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> remove() &#123;</span><br><span class="line">        Node&lt;K,V&gt; p = current;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        current = <span class="literal">null</span>;</span><br><span class="line">        K key = p.key;</span><br><span class="line">        removeNode(hash(key), key, <span class="literal">null</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// åŒæ­¥expectedModCount</span></span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="LinkedMap">LinkedMap</h4>
<h5 id="åŸç†åˆ†æ">åŸç†åˆ†æ</h5>
<p>LinkedHashMap æ˜¯ HashMap çš„å­ç±»</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ·»åŠ çš„å…ƒç´ æŒ‰ç…§é”®æœ‰åºä¸é‡å¤çš„ï¼Œæœ‰åºçš„åŸå› æ˜¯åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨</li>
<li>ç¼ºç‚¹ï¼šä¼šå ç”¨ä¸€äº›å†…å­˜ç©ºé—´</li>
</ul>
<p>å¯¹æ¯” Setï¼š</p>
<ul>
<li>HashSet é›†åˆç›¸å½“äºæ˜¯ HashMap é›†åˆçš„é”®ï¼Œä¸å¸¦å€¼</li>
<li>LinkedHashSet é›†åˆç›¸å½“äºæ˜¯ LinkedHashMap é›†åˆçš„é”®ï¼Œä¸å¸¦å€¼</li>
<li>åº•å±‚åŸç†å®Œå…¨ä¸€æ ·ï¼Œéƒ½æ˜¯åŸºäºå“ˆå¸Œè¡¨æŒ‰ç…§é”®å­˜å‚¨æ•°æ®çš„ï¼Œåªæ˜¯ Map å¤šäº†ä¸€ä¸ªé”®çš„å€¼</li>
</ul>
<p>æºç è§£æï¼š</p>
<ul>
<li>
<p><strong>å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨</strong>ï¼Œç”¨æ¥ç»´æŠ¤æ’å…¥é¡ºåºæˆ–è€… LRU é¡ºåº</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">transient LinkedHashMap.<span class="keyword">Entry</span>&lt;K,V&gt; head;</span><br><span class="line">transient LinkedHashMap.<span class="keyword">Entry</span>&lt;K,V&gt; tail;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>accessOrder å†³å®šäº†é¡ºåºï¼Œé»˜è®¤ä¸º false ç»´æŠ¤çš„æ˜¯æ’å…¥é¡ºåºï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼Œtrue ä¸ºè®¿é—®é¡ºåºï¼ˆ<strong>LRU é¡ºåº</strong>ï¼‰</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">bool</span>ean accessOrder;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç»´æŠ¤é¡ºåºçš„å‡½æ•°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">void</span> <span class="title function_">afterNodeAccess</span>(<span class="params">Node&lt;K,V&gt; p</span>) &#123;&#125;</span><br><span class="line"><span class="built_in">void</span> <span class="title function_">afterNodeInsertion</span>(<span class="params"><span class="built_in">boolean</span> evict</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>put()</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨çˆ¶ç±»HashMapçš„putæ–¹æ³•</span></span><br><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">    return put<span class="constructor">Val(<span class="params">hash</span>(<span class="params">key</span>)</span>, key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">final V put<span class="constructor">Val(<span class="params">int</span> <span class="params">hash</span>, K <span class="params">key</span>, V <span class="params">value</span>, <span class="params">boolean</span> <span class="params">onlyIfAbsent</span>, <span class="params">boolean</span> <span class="params">evict</span>)</span></span><br><span class="line">â†’ after<span class="constructor">NodeInsertion(<span class="params">evict</span>)</span>;<span class="comment">// evictä¸ºtrue</span></span><br></pre></td></tr></table></figure>
<p>afterNodeInsertionæ–¹æ³•ï¼Œå½“ removeEldestEntry() æ–¹æ³•è¿”å› true æ—¶ä¼šç§»é™¤æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨é¦–éƒ¨èŠ‚ç‚¹ first</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> afterNodeInsertion(<span class="built_in">boolean</span> evict) &#123;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; <span class="built_in">first</span>;</span><br><span class="line">    <span class="comment">// evict åªæœ‰åœ¨æ„å»º Map çš„æ—¶å€™æ‰ä¸º falseï¼Œè¿™é‡Œä¸º true</span></span><br><span class="line">    <span class="keyword">if</span> (evict &amp;&amp; (<span class="built_in">first</span> = head) != <span class="literal">null</span> &amp;&amp; removeEldestEntry(<span class="built_in">first</span>)) &#123;</span><br><span class="line">        K key = <span class="built_in">first</span>.key;</span><br><span class="line">        removeNode(<span class="built_in">hash</span>(key), key, <span class="literal">null</span>, <span class="literal">false</span>, <span class="literal">true</span>);<span class="comment">//ç§»é™¤å¤´èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>removeEldestEntry() é»˜è®¤ä¸º falseï¼Œå¦‚æœéœ€è¦è®©å®ƒä¸º trueï¼Œéœ€è¦ç»§æ‰¿ LinkedHashMap å¹¶ä¸”è¦†ç›–è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œåœ¨å®ç° LRU çš„ç¼“å­˜ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œé€šè¿‡ç§»é™¤æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œä»è€Œä¿è¯ç¼“å­˜ç©ºé—´è¶³å¤Ÿï¼Œå¹¶ä¸”ç¼“å­˜çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="built_in">boolean</span> <span class="title function_">removeEldestEntry</span>(<span class="params"><span class="built_in">Map</span>.Entry&lt;K,V&gt; eldest</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>get()</p>
<p>å½“ä¸€ä¸ªèŠ‚ç‚¹è¢«è®¿é—®æ—¶ï¼Œå¦‚æœ accessOrder ä¸º trueï¼Œåˆ™ä¼šå°†è¯¥èŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ã€‚ä¹Ÿå°±æ˜¯è¯´æŒ‡å®šä¸º LRU é¡ºåºä¹‹åï¼Œåœ¨æ¯æ¬¡è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ—¶ä¼šå°†è¿™ä¸ªèŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œé‚£ä¹ˆé“¾è¡¨é¦–éƒ¨å°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="built_in">get</span>(<span class="built_in">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">if</span> ((e = <span class="title function_">getNode</span>(<span class="title function_">hash</span>(<span class="built_in">key</span>), <span class="built_in">key</span>)) == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (accessOrder)</span><br><span class="line">        <span class="title function_">afterNodeAccess</span>(e);</span><br><span class="line">    <span class="keyword">return</span> e.<span class="property">value</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">void afterNodeAccess(Node&lt;K,V&gt; e) &#123;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last;</span><br><span class="line">    <span class="keyword">if</span> (accessOrder &amp;&amp; (last = tail) != e) &#123;</span><br><span class="line">        <span class="regexp">//</span> å‘ä¸‹è½¬å‹</span><br><span class="line">        LinkedHashMap.Entry&lt;K,V&gt; p =</span><br><span class="line">            (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;</span><br><span class="line">        p.after = null;</span><br><span class="line">        <span class="regexp">//</span> åˆ¤æ–­ p æ˜¯å¦æ˜¯é¦–èŠ‚ç‚¹</span><br><span class="line">        <span class="keyword">if</span> (b == null)</span><br><span class="line">            <span class="regexp">//</span>æ˜¯å¤´èŠ‚ç‚¹ è®©påç»§èŠ‚ç‚¹æˆä¸ºå¤´èŠ‚ç‚¹</span><br><span class="line">            head = a;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="regexp">//</span>ä¸æ˜¯å¤´èŠ‚ç‚¹ è®©pçš„å‰é©±èŠ‚ç‚¹çš„<span class="keyword">next</span>æŒ‡å‘pçš„åç»§èŠ‚ç‚¹ï¼Œç»´æŠ¤é“¾è¡¨çš„è¿æ¥</span><br><span class="line">            b.after = a;</span><br><span class="line">        <span class="regexp">//</span> åˆ¤æ–­pæ˜¯å¦æ˜¯å°¾èŠ‚ç‚¹</span><br><span class="line">        <span class="keyword">if</span> (a != null)</span><br><span class="line">            <span class="regexp">//</span> ä¸æ˜¯å°¾èŠ‚ç‚¹ è®©påç»§èŠ‚ç‚¹æŒ‡å‘pçš„å‰é©±èŠ‚ç‚¹</span><br><span class="line">            a.before = b;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="regexp">//</span> æ˜¯å°¾èŠ‚ç‚¹ è®©lastæŒ‡å‘pçš„å‰é©±èŠ‚ç‚¹</span><br><span class="line">            last = b;</span><br><span class="line">        <span class="regexp">//</span> åˆ¤æ–­lastæ˜¯å¦æ˜¯ç©º</span><br><span class="line">        <span class="keyword">if</span> (last == null)</span><br><span class="line">            <span class="regexp">//</span> lastä¸ºç©ºè¯´æ˜pæ˜¯å°¾èŠ‚ç‚¹æˆ–è€…åªæœ‰pä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">            head = p;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="regexp">//</span> lastå’Œpç›¸äº’è¿æ¥</span><br><span class="line">            p.before = last;</span><br><span class="line">            last.after = p;</span><br><span class="line">        &#125;</span><br><span class="line">        tail = p;</span><br><span class="line">        ++modCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>remove()</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨HashMapçš„removeæ–¹æ³•</span></span><br><span class="line">final Node&lt;K,V&gt; remove<span class="constructor">Node(<span class="params">int</span> <span class="params">hash</span>, Object <span class="params">key</span>, Object <span class="params">value</span>,<span class="params">boolean</span> <span class="params">matchValue</span>, <span class="params">boolean</span> <span class="params">movable</span>)</span></span><br><span class="line">â†’ after<span class="constructor">NodeRemoval(<span class="params">node</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>å½“ HashMap åˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹æ—¶è°ƒç”¨ï¼Œä¼šæŠŠåœ¨ HashMap ä¸­åˆ é™¤çš„é‚£ä¸ªé”®å€¼å¯¹ä¸€å¹¶ä»é“¾è¡¨ä¸­åˆ é™¤</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">void afterNodeRemoval(Node&lt;K,V&gt; e) &#123;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; p =</span><br><span class="line">        (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;</span><br><span class="line">    <span class="regexp">//</span> è®©pèŠ‚ç‚¹ä¸å‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹æ–­å¼€é“¾æ¥</span><br><span class="line">    p.before = p.after = null;</span><br><span class="line">    <span class="regexp">//</span> åˆ¤æ–­pæ˜¯å¦æ˜¯å¤´èŠ‚ç‚¹</span><br><span class="line">    <span class="keyword">if</span> (b == null)</span><br><span class="line">        <span class="regexp">//</span> pæ˜¯å¤´èŠ‚ç‚¹ è®©headæŒ‡å‘pçš„åç»§èŠ‚ç‚¹</span><br><span class="line">        head = a;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="regexp">//</span> pä¸æ˜¯å¤´èŠ‚ç‚¹ è®©pçš„å‰é©±èŠ‚ç‚¹çš„<span class="keyword">next</span>æŒ‡å‘pçš„åç»§èŠ‚ç‚¹ï¼Œç»´æŠ¤é“¾è¡¨çš„è¿æ¥</span><br><span class="line">        b.after = a;</span><br><span class="line">    <span class="regexp">//</span> åˆ¤æ–­pæ˜¯å¦æ˜¯å°¾èŠ‚ç‚¹ï¼Œæ˜¯å°±è®©tailæŒ‡å‘pçš„å‰é©±èŠ‚ç‚¹ï¼Œä¸æ˜¯å°±è®©p.afteræŒ‡å‘å‰é©±èŠ‚ç‚¹ï¼ŒåŒå‘</span><br><span class="line">    <span class="keyword">if</span> (a == null)</span><br><span class="line">        tail = b;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        a.before = b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="LRU">LRU</h5>
<p>ä½¿ç”¨ LinkedHashMap å®ç°çš„ä¸€ä¸ª LRU ç¼“å­˜ï¼š</p>
<ul>
<li>è®¾å®šæœ€å¤§ç¼“å­˜ç©ºé—´ MAX_ENTRIES ä¸º 3</li>
<li>ä½¿ç”¨ LinkedHashMap çš„æ„é€ å‡½æ•°å°† accessOrder è®¾ç½®ä¸º trueï¼Œå¼€å¯ LRU é¡ºåº</li>
<li>è¦†ç›– removeEldestEntry() æ–¹æ³•å®ç°ï¼Œåœ¨èŠ‚ç‚¹å¤šäº MAX_ENTRIES å°±ä¼šå°†æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ç§»é™¤</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">    <span class="title class_">LRUCache</span>&lt;<span class="title class_">Integer</span>, <span class="title class_">String</span>&gt; cache = <span class="keyword">new</span> <span class="title class_">LRUCache</span>&lt;&gt;();</span><br><span class="line">    cache.<span class="title function_">put</span>(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">    cache.<span class="title function_">put</span>(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line">    cache.<span class="title function_">put</span>(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">    cache.<span class="title function_">get</span>(<span class="number">1</span>);<span class="comment">//æŠŠ1æ”¾å…¥å°¾éƒ¨</span></span><br><span class="line">    cache.<span class="title function_">put</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>);</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(cache.<span class="title function_">keySet</span>());<span class="comment">//[3, 1, 4]åªèƒ½å­˜3ä¸ªï¼Œç§»é™¤2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span>&lt;K, V&gt; <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;K, V&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final int <span class="variable constant_">MAX_ENTRIES</span> = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">boolean</span> <span class="title function_">removeEldestEntry</span>(<span class="params"><span class="built_in">Map</span>.Entry eldest</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">size</span>() &gt; <span class="variable constant_">MAX_ENTRIES</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">LRUCache</span>() &#123;</span><br><span class="line">        <span class="variable language_">super</span>(<span class="variable constant_">MAX_ENTRIES</span>, <span class="number">0.</span>75f, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TreeMap">TreeMap</h4>
<p>TreeMap å®ç°äº† SotredMap æ¥å£ï¼Œæ˜¯æœ‰åºä¸å¯é‡å¤çš„é”®å€¼å¯¹é›†åˆï¼ŒåŸºäºçº¢é»‘æ ‘ï¼ˆRed-Black treeï¼‰å®ç°ï¼Œæ¯ä¸ª key-value éƒ½ä½œä¸ºä¸€ä¸ªçº¢é»‘æ ‘çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ„é€  TreeMap æ²¡æœ‰æŒ‡å®šæ¯”è¾ƒå™¨ï¼Œåˆ™æ ¹æ® key æ‰§è¡Œè‡ªç„¶æ’åºï¼ˆé»˜è®¤å‡åºï¼‰ï¼Œå¦‚æœæŒ‡å®šäº†æ¯”è¾ƒå™¨åˆ™æŒ‰ç…§æ¯”è¾ƒå™¨æ¥è¿›è¡Œæ’åº</p>
<p>TreeMap é›†åˆæŒ‡å®šå¤§å°è§„åˆ™æœ‰ 2 ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç›´æ¥ä¸ºå¯¹è±¡çš„ç±»å®ç°æ¯”è¾ƒå™¨è§„åˆ™æ¥å£ Comparableï¼Œé‡å†™æ¯”è¾ƒæ–¹æ³•</li>
<li>ç›´æ¥ä¸ºé›†åˆè®¾ç½®æ¯”è¾ƒå™¨ Comparator å¯¹è±¡ï¼Œé‡å†™æ¯”è¾ƒæ–¹æ³•</li>
</ul>
<p>è¯´æ˜ï¼šTreeSet é›†åˆçš„åº•å±‚æ˜¯åŸºäº TreeMapï¼Œåªæ˜¯é”®çš„é™„å±å€¼ä¸ºç©ºå¯¹è±¡è€Œå·²</p>
<p>æˆå‘˜å±æ€§ï¼š</p>
<ul>
<li>
<p>Entry èŠ‚ç‚¹</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Entry</span>&lt;K,V&gt; <span class="keyword">implements</span> Map.Entry&lt;K,V&gt; &#123;</span><br><span class="line">    K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K,V&gt; left;		<span class="comment">//å·¦å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    Entry&lt;K,V&gt; right;		<span class="comment">//å³å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    Entry&lt;K,V&gt; parent;		<span class="comment">//çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">boolean</span> color = BLACK;	<span class="comment">//èŠ‚ç‚¹çš„é¢œè‰²ï¼Œåœ¨çº¢é»‘æ ‘ä¸­åªæœ‰ä¸¤ç§é¢œè‰²ï¼Œçº¢è‰²å’Œé»‘è‰²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>compare()</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœcomparatorä¸ºnullï¼Œé‡‡ç”¨comparable.compartToè¿›è¡Œæ¯”è¾ƒï¼Œå¦åˆ™é‡‡ç”¨æŒ‡å®šæ¯”è¾ƒå™¨æ¯”è¾ƒå¤§å°</span></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">int</span> compare(<span class="built_in">Object</span> k1, <span class="built_in">Object</span> k2) &#123;</span><br><span class="line">    <span class="keyword">return</span> comparator == <span class="keyword">null</span> ? ((<span class="built_in">Comparable</span>&lt;? <span class="keyword">super</span> K&gt;)k1).compareTo((K)k2)</span><br><span class="line">        : comparator.compare((K)k1, (K)k2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33991727/article/details/91518677">https://blog.csdn.net/weixin_33991727/article/details/91518677</a></p>
<h4 id="WeakMap">WeakMap</h4>
<p>WeakHashMap æ˜¯åŸºäºå¼±å¼•ç”¨çš„ï¼Œå†…éƒ¨çš„ Entry ç»§æ‰¿ WeakReferenceï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åœ¨<strong>ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶æ—¶ä¼šè¢«å›æ”¶</strong>ï¼Œå¹¶ä¸”æ„é€ æ–¹æ³•ä¼ å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Œç”¨æ¥åœ¨æ¸…ç†å¯¹è±¡å®Œæˆä»¥åæ¸…ç†å¼•ç”¨</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> static <span class="class"><span class="keyword">class</span> <span class="title">Entry&lt;K</span>,<span class="title">V&gt;</span> <span class="keyword">extends</span> <span class="title">WeakReference&lt;Object&gt;</span> <span class="title">implements</span> <span class="title">Map</span>.<span class="title">Entry&lt;K</span>,<span class="title">V&gt;</span> </span>&#123;</span><br><span class="line">    <span class="type">Entry</span>(<span class="type">Object</span> key, <span class="type">V</span> value, <span class="type">ReferenceQueue</span>&lt;<span class="type">Object</span>&gt; queue, int hash, <span class="type">Entry</span>&lt;<span class="type">K</span>,<span class="type">V</span>&gt; next) &#123;</span><br><span class="line">        <span class="keyword">super</span>(key, queue);</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.hash  = hash;</span><br><span class="line">        <span class="keyword">this</span>.next  = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>WeakHashMap ä¸»è¦ç”¨æ¥å®ç°ç¼“å­˜ï¼Œä½¿ç”¨ WeakHashMap æ¥å¼•ç”¨ç¼“å­˜å¯¹è±¡ï¼Œç”± JVM å¯¹è¿™éƒ¨åˆ†ç¼“å­˜è¿›è¡Œå›æ”¶</p>
<p>Tomcat ä¸­çš„ ConcurrentCache ä½¿ç”¨äº† WeakHashMap æ¥å®ç°ç¼“å­˜åŠŸèƒ½ï¼ŒConcurrentCache é‡‡å–åˆ†ä»£ç¼“å­˜ï¼š</p>
<ul>
<li>
<p>ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡æ”¾å…¥ eden ä¸­ï¼Œeden ä½¿ç”¨ ConcurrentHashMap å®ç°ï¼Œä¸ç”¨æ‹…å¿ƒä¼šè¢«å›æ”¶ï¼ˆä¼Šç”¸å›­ï¼‰</p>
</li>
<li>
<p>ä¸å¸¸ç”¨çš„å¯¹è±¡æ”¾å…¥ longtermï¼Œlongterm ä½¿ç”¨ WeakHashMap å®ç°ï¼Œè¿™äº›è€å¯¹è±¡ä¼šè¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶</p>
</li>
<li>
<p>å½“è°ƒç”¨ get() æ–¹æ³•æ—¶ï¼Œä¼šå…ˆä» eden åŒºè·å–ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°çš„è¯å†åˆ° longterm è·å–ï¼Œå½“ä» longterm è·å–åˆ°å°±æŠŠå¯¹è±¡æ”¾å…¥ eden ä¸­ï¼Œä»è€Œä¿è¯ç»å¸¸è¢«è®¿é—®çš„èŠ‚ç‚¹ä¸å®¹æ˜“è¢«å›æ”¶</p>
</li>
<li>
<p>å½“è°ƒç”¨ put() æ–¹æ³•æ—¶ï¼Œå¦‚æœ eden çš„å¤§å°è¶…è¿‡äº† sizeï¼Œé‚£ä¹ˆå°±å°† eden ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ”¾å…¥ longterm ä¸­ï¼Œåˆ©ç”¨è™šæ‹Ÿæœºå›æ”¶æ‰ä¸€éƒ¨åˆ†ä¸ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ConcurrentCache</span>&lt;<span class="type">K, V</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> int size;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;K, V&gt; eden;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;K, V&gt; longterm;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ConcurrentCache(int size) &#123;</span><br><span class="line">        <span class="keyword">this</span>.size = size;</span><br><span class="line">        <span class="keyword">this</span>.eden = new ConcurrentHashMap&lt;&gt;(size);</span><br><span class="line">        <span class="keyword">this</span>.longterm = new WeakHashMap&lt;&gt;(size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> V <span class="keyword">get</span>(K k) &#123;</span><br><span class="line">        V v = <span class="keyword">this</span>.eden.<span class="keyword">get</span>(k);</span><br><span class="line">        <span class="keyword">if</span> (v == <span class="literal">null</span>) &#123;</span><br><span class="line">            v = <span class="keyword">this</span>.longterm.<span class="keyword">get</span>(k);</span><br><span class="line">            <span class="keyword">if</span> (v != <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">this</span>.eden.put(k, v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> void put(K k, V v) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.eden.size() &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">this</span>.longterm.putAll(<span class="keyword">this</span>.eden);</span><br><span class="line">            <span class="keyword">this</span>.eden.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.eden.put(k, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="æ³›å‹">æ³›å‹</h3>
<h4 id="æ¦‚è¿°-8">æ¦‚è¿°</h4>
<p>æ³›å‹ï¼ˆGenericï¼‰ï¼š</p>
<ul>
<li>æ³›å‹å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼š&lt;æ•°æ®ç±»å‹&gt;</li>
<li>æ³›å‹å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µçº¦æŸåªèƒ½æ“ä½œæŸç§æ•°æ®ç±»å‹ã€‚</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>JDK 1.7 å¼€å§‹ä¹‹åï¼Œæ³›å‹åé¢çš„ç”³æ˜å¯ä»¥çœç•¥ä¸å†™</li>
<li><strong>æ³›å‹å’Œé›†åˆéƒ½åªèƒ½æ”¯æŒå¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹</strong></li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; lists = new ArrayList&lt;&gt;(); </span><br><span class="line">lists.<span class="built_in">add</span>(99.9);</span><br><span class="line">lists.<span class="built_in">add</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">lists.<span class="built_in">add</span>(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">lists1.<span class="built_in">add</span>(10);</span><br><span class="line">lists1.<span class="built_in">add</span>(20);</span><br></pre></td></tr></table></figure>
<p>ä¼˜ç‚¹ï¼šæ³›å‹åœ¨ç¼–è¯‘é˜¶æ®µçº¦æŸäº†æ“ä½œçš„æ•°æ®ç±»å‹ï¼Œä»è€Œä¸ä¼šå‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œä½“ç°çš„æ˜¯ Java çš„ä¸¥è°¨æ€§å’Œè§„èŒƒæ€§</p>
<h4 id="è‡ªå®šä¹‰">è‡ªå®šä¹‰</h4>
<h5 id="æ³›å‹ç±»">æ³›å‹ç±»</h5>
<p>æ³›å‹ç±»ï¼šä½¿ç”¨äº†æ³›å‹å®šä¹‰çš„ç±»å°±æ˜¯æ³›å‹ç±»</p>
<p>æ³›å‹ç±»æ ¼å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">class</span> ç±»å&lt;æ³›å‹å˜é‡&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">æ³›å‹å˜é‡å»ºè®®ä½¿ç”¨ E , T , K , V</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">MyArrayList</span>&lt;<span class="title class_">String</span>&gt; list = <span class="keyword">new</span> <span class="title class_">MyArrayList</span>&lt;<span class="title class_">String</span>&gt;();</span><br><span class="line">        <span class="title class_">MyArrayList</span>&lt;<span class="title class_">Integer</span>&gt; list1 = <span class="keyword">new</span> <span class="title class_">MyArrayList</span>&lt;<span class="title class_">Integer</span>&gt;();</span><br><span class="line">        list.<span class="title function_">add</span>(<span class="string">&quot;è‡ªå®šä¹‰æ³›å‹ç±»&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyArrayList</span>&lt;E&gt;&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">add</span>(<span class="params">E e</span>)&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">remove</span>(<span class="params">E e</span>)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ³›å‹æ–¹æ³•">æ³›å‹æ–¹æ³•</h5>
<p>æ³›å‹æ–¹æ³•ï¼šå®šä¹‰äº†æ³›å‹çš„æ–¹æ³•å°±æ˜¯æ³›å‹æ–¹æ³•</p>
<p>æ³›å‹æ–¹æ³•çš„å®šä¹‰æ ¼å¼ï¼š</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">ä¿®é¥°ç¬¦ <span class="tag">&lt;<span class="name">æ³›å‹å˜é‡</span>&gt;</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•åç§°(å½¢å‚åˆ—è¡¨)</span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable"></span></span><br><span class="line"><span class="template-variable">&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•å®šä¹‰äº†æ˜¯ä»€ä¹ˆæ³›å‹å˜é‡ï¼Œåé¢å°±åªèƒ½ç”¨ä»€ä¹ˆæ³›å‹å˜é‡ã€‚</p>
<p>æ³›å‹ç±»çš„æ ¸å¿ƒæ€æƒ³ï¼šæŠŠå‡ºç°æ³›å‹å˜é‡çš„åœ°æ–¹å…¨éƒ¨æ›¿æ¢æˆä¼ è¾“çš„çœŸå®æ•°æ®ç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Integer</span>[] num = &#123;<span class="number">10</span> , <span class="number">20</span> , <span class="number">30</span> , <span class="number">40</span> , <span class="number">50</span>&#125;;</span><br><span class="line">        <span class="title class_">String</span> s1 = <span class="title function_">arrToString</span>(nums);</span><br><span class="line">     </span><br><span class="line">        <span class="title class_">String</span>[] name = &#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;ç‹äº”&quot;</span>&#125;;</span><br><span class="line">        <span class="title class_">String</span> s2 = <span class="title function_">arrToString</span>(names);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="title class_">String</span> <span class="title function_">arrToString</span>(<span class="params">T[] arr</span>)&#123;</span><br><span class="line">        --------------</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰æ³›å‹æ¥å£</p>
<p>æ³›å‹æ¥å£ï¼šä½¿ç”¨äº†æ³›å‹å®šä¹‰çš„æ¥å£å°±æ˜¯æ³›å‹æ¥å£ã€‚</p>
<p>æ³›å‹æ¥å£çš„æ ¼å¼ï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="class"><span class="keyword">interface</span> æ¥å£åç§°&lt;æ³›å‹å˜é‡&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Data d = <span class="keyword">new</span> StudentData();</span><br><span class="line">        d.add(<span class="keyword">new</span> Student());</span><br><span class="line">        ................</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Data</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">query</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentData</span> <span class="keyword">implements</span> <span class="title">Data</span>&lt;<span class="title">Student</span>&gt;</span>&#123;é‡å†™æ‰€æœ‰æ–¹æ³•&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é€šé…ç¬¦">é€šé…ç¬¦</h4>
<p>é€šé…ç¬¦ï¼šï¼Ÿ</p>
<ul>
<li>? å¯ä»¥ç”¨åœ¨ä½¿ç”¨æ³›å‹çš„æ—¶å€™ä»£è¡¨ä¸€åˆ‡ç±»å‹</li>
<li>Eã€Tã€Kã€V æ˜¯åœ¨å®šä¹‰æ³›å‹çš„æ—¶å€™ä½¿ç”¨ä»£è¡¨ä¸€åˆ‡ç±»å‹</li>
</ul>
<p>æ³›å‹çš„ä¸Šä¸‹é™ï¼š</p>
<ul>
<li>? extends Carï¼šé‚£ä¹ˆ ? å¿…é¡»æ˜¯ Car æˆ–è€…å…¶å­ç±»ï¼ˆæ³›å‹çš„ä¸Šé™ï¼‰</li>
<li>? super  Carï¼šé‚£ä¹ˆ ? å¿…é¡»æ˜¯ Car æˆ–è€…å…¶çˆ¶ç±»ï¼ˆæ³›å‹çš„ä¸‹é™ï¼Œä¸æ˜¯å¾ˆå¸¸è§ï¼‰</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éœ€æ±‚ï¼šå¼€å‘ä¸€ä¸ªæå“é£è½¦çš„æ¸¸æˆï¼Œæ‰€æœ‰çš„æ±½è½¦éƒ½èƒ½ä¸€èµ·å‚ä¸æ¯”èµ›ã€‚</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">GenericDemo</span> </span>&#123;</span><br><span class="line">    public static void main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">        <span class="type">ArrayList</span>&lt;<span class="type">BMW</span>&gt; bmws = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">ArrayList</span>&lt;<span class="type">AD</span>&gt; ads = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">ArrayList</span>&lt;<span class="type">Dog</span>&gt; dogs = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;&gt;();</span><br><span class="line">        run(bmws);</span><br><span class="line">        <span class="comment">//run(dogs);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//public static void run(ArrayList&lt;?&gt; car)&#123;&#125;//è¿™æ · douå¯¹è±¡ä¹Ÿèƒ½è¿›å…¥</span></span><br><span class="line">    public static void run(<span class="type">ArrayList</span>&lt;? <span class="keyword">extends</span> <span class="type">Car</span>&gt; car)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMW</span> <span class="keyword">extends</span> <span class="title">Car</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AD</span> <span class="keyword">extends</span> <span class="title">Car</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¼‚å¸¸">å¼‚å¸¸</h2>
<h3 id="åŸºæœ¬ä»‹ç»-11">åŸºæœ¬ä»‹ç»</h3>
<p>å¼‚å¸¸ï¼šç¨‹åºåœ¨ç¼–è¯‘æˆ–è€…æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼ŒJava ä¸ºå¸¸è§çš„ä»£ç å¼‚å¸¸éƒ½è®¾è®¡ä¸€ä¸ªç±»æ¥ä»£è¡¨</p>
<p>é”™è¯¯ï¼šError ï¼Œç¨‹åºå‘˜æ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œåªèƒ½é‡å¯ç³»ç»Ÿï¼Œæ¯”å¦‚å†…å­˜å¥”æºƒï¼ŒJVM æœ¬èº«çš„å¥”æºƒ</p>
<p>Java ä¸­å¼‚å¸¸ç»§æ‰¿çš„æ ¹ç±»æ˜¯ï¼šThrowable</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¼‚å¸¸çš„ä½“ç³»:</span><br><span class="line">         <span class="function"><span class="title">Throwable</span>(æ ¹ç±»ï¼Œä¸æ˜¯å¼‚å¸¸ç±»)</span></span><br><span class="line">      /              \</span><br><span class="line">    <span class="variable">Error</span>           <span class="variable">Exception</span>ï¼ˆå¼‚å¸¸ï¼Œéœ€è¦ç ”ç©¶å’Œå¤„ç†ï¼‰</span><br><span class="line">                    /            \</span><br><span class="line">                   ç¼–è¯‘æ—¶å¼‚å¸¸     <span class="function"><span class="title">RuntimeException</span>(è¿è¡Œæ—¶å¼‚å¸¸)</span></span><br></pre></td></tr></table></figure>
<p>Exception å¼‚å¸¸çš„åˆ†ç±»:</p>
<ul>
<li>ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šç»§æ‰¿è‡ª Exception çš„å¼‚å¸¸æˆ–è€…å…¶å­ç±»ï¼Œç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™</li>
<li>è¿è¡Œæ—¶å¼‚å¸¸ï¼šç»§æ‰¿è‡ª RuntimeException çš„å¼‚å¸¸æˆ–è€…å…¶å­ç±»ï¼Œç¼–è¯‘é˜¶æ®µæ˜¯ä¸ä¼šå‡ºé”™çš„ï¼Œåœ¨è¿è¡Œé˜¶æ®µå‡ºé”™</li>
</ul>
<h3 id="å¤„ç†è¿‡ç¨‹">å¤„ç†è¿‡ç¨‹</h3>
<p>å¼‚å¸¸çš„äº§ç”Ÿé»˜è®¤çš„å¤„ç†è¿‡ç¨‹è§£æï¼šï¼ˆè‡ªåŠ¨å¤„ç†çš„è¿‡ç¨‹ï¼‰</p>
<ol>
<li>é»˜è®¤ä¼šåœ¨å‡ºç°å¼‚å¸¸çš„ä»£ç é‚£é‡Œè‡ªåŠ¨çš„åˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼šArithmeticExceptionï¼ˆç®—æœ¯å¼‚å¸¸ï¼‰</li>
<li>å¼‚å¸¸ä¼šä»æ–¹æ³•ä¸­å‡ºç°çš„ç‚¹è¿™é‡ŒæŠ›å‡ºç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…æœ€ç»ˆæŠ›å‡ºç»™ JVM è™šæ‹Ÿæœº</li>
<li>è™šæ‹Ÿæœºæ¥æ”¶åˆ°å¼‚å¸¸å¯¹è±¡åï¼Œå…ˆåœ¨æ§åˆ¶å°ç›´æ¥è¾“å‡º<strong>å¼‚å¸¸æ ˆ</strong>ä¿¡æ¯æ•°æ®</li>
<li>ç›´æ¥ä»å½“å‰æ‰§è¡Œçš„å¼‚å¸¸ç‚¹ç»ˆæ­¢å½“å‰ç¨‹åº</li>
<li>åç»­ä»£ç æ²¡æœ‰æœºä¼šæ‰§è¡Œäº†ï¼Œå› ä¸ºç¨‹åºå·²ç»æ­»äº¡</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExceptionDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ç¨‹åºå¼€å§‹ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        chu( <span class="number">10</span> ,<span class="number">0</span> );</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ç¨‹åºç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);<span class="comment">//ä¸æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">chu</span>(<span class="params"><span class="built_in">int</span> a , <span class="built_in">int</span> b</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">int</span> c = a / b ;<span class="comment">// å‡ºç°äº†è¿è¡Œæ—¶å¼‚å¸¸,è‡ªåŠ¨åˆ›å»ºå¼‚å¸¸å¯¹è±¡ï¼šArithmeticException</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ç»“æœæ˜¯ï¼š&quot;</span>+c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¼–è¯‘å¼‚å¸¸">ç¼–è¯‘å¼‚å¸¸</h3>
<h4 id="åŸºæœ¬ä»‹ç»-12">åŸºæœ¬ä»‹ç»</h4>
<p>ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šç»§æ‰¿è‡ª Exception çš„å¼‚å¸¸æˆ–è€…å…¶å­ç±»ï¼Œæ²¡æœ‰ç»§æ‰¿ RuntimeExceptionï¼Œç¼–è¯‘æ—¶å¼‚å¸¸æ˜¯ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™</p>
<p>ç¼–è¯‘æ—¶å¼‚å¸¸çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼šåœ¨ç¼–è¯‘é˜¶æ®µå°±çˆ†å‡ºä¸€ä¸ªé”™è¯¯ï¼Œç›®çš„åœ¨äºæé†’ï¼Œè¯·æ£€æŸ¥å¹¶æ³¨æ„ä¸è¦å‡º BUG</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">date</span> <span class="operator">=</span> <span class="string">&quot;2015-01-12 10:23:21&quot;</span>;</span><br><span class="line">	<span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">	<span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> sdf.parse(date);</span><br><span class="line">	System.out.println(d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¤„ç†æœºåˆ¶">å¤„ç†æœºåˆ¶</h4>
<h5 id="throws">throws</h5>
<p>åœ¨å‡ºç°ç¼–è¯‘æ—¶å¼‚å¸¸çš„åœ°æ–¹å±‚å±‚æŠŠå¼‚å¸¸æŠ›å‡ºå»ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…æœ€ç»ˆæŠ›å‡ºç»™ JVM è™šæ‹Ÿæœºï¼ŒJVM è™šæ‹Ÿæœºè¾“å‡ºå¼‚å¸¸ä¿¡æ¯ï¼Œç›´æ¥ç»ˆæ­¢æ‰ç¨‹åºï¼Œè¿™ç§æ–¹å¼ä¸é»˜è®¤æ–¹å¼æ˜¯ä¸€æ ·çš„</p>
<p><strong>Exception æ˜¯å¼‚å¸¸æœ€é«˜ç±»å‹å¯ä»¥æŠ›å‡ºä¸€åˆ‡å¼‚å¸¸</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws <span class="keyword">Exception</span> &#123;</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;ç¨‹åºå¼€å§‹ã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">    String s = &quot;2013-03-23 10:19:23&quot;;</span><br><span class="line">    SimpleDateFormat sdf = <span class="built_in">new</span> SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line">    <span class="type">Date</span> <span class="type">date</span> = sdf.parse(s);</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;ç¨‹åºç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="try-catch">try/catch</h5>
<p>å¯ä»¥å¤„ç†å¼‚å¸¸ï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸åä»£ç ä¹Ÿä¸ä¼šæ­»äº¡</p>
<ul>
<li>
<p>æ•è·å¼‚å¸¸å’Œå¤„ç†å¼‚å¸¸çš„æ ¼å¼ï¼š<strong>æ•è·å¤„ç†</strong></p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">try</span>&#123;</span><br><span class="line">  <span class="comment">// ç›‘è§†å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç ï¼</span></span><br><span class="line">&#125;<span class="title function_">catch</span>(å¼‚å¸¸ç±»å‹1 å˜é‡)&#123;</span><br><span class="line">  <span class="comment">// å¤„ç†å¼‚å¸¸</span></span><br><span class="line">&#125;<span class="title function_">catch</span>(å¼‚å¸¸ç±»å‹2 å˜é‡)&#123;</span><br><span class="line">  <span class="comment">// å¤„ç†å¼‚å¸¸</span></span><br><span class="line">&#125;<span class="operator">...</span><span class="title function_">finall</span>&#123;</span><br><span class="line"><span class="comment">//èµ„æºé‡Šæ”¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç›‘è§†æ•è·å¤„ç†å¼‚å¸¸å†™æ³•ï¼šException å¯ä»¥æ•è·å¤„ç†ä¸€åˆ‡å¼‚å¸¸ç±»å‹</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç ï¼</span></span><br><span class="line">&#125;<span class="keyword">catch</span> (<span class="built_in">Exception</span> e)&#123;</span><br><span class="line">    e.<span class="title function_ invoke__">printStackTrace</span>(); <span class="comment">// **ç›´æ¥æ‰“å°å¼‚å¸¸æ ˆä¿¡æ¯**</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>Throwableæˆå‘˜æ–¹æ³•:</strong></p>
<ul>
<li><code>public String getMessage()</code>ï¼šè¿”å›æ­¤ throwable çš„è¯¦ç»†æ¶ˆæ¯å­—ç¬¦ä¸²</li>
<li><code>public String toString()</code>ï¼šè¿”å›æ­¤å¯æŠ›å‡ºçš„ç®€çŸ­æè¿°</li>
<li><code>public void printStackTrace()</code>ï¼šæŠŠå¼‚å¸¸çš„é”™è¯¯ä¿¡æ¯è¾“å‡ºåœ¨æ§åˆ¶å°</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ç¨‹åºå¼€å§‹ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;2013-03-23 10:19:23&quot;</span>;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> sdf.parse(s);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;D:/meinv.png&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;ç¨‹åºç»“æŸã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="è§„èŒƒåšæ³•">è§„èŒƒåšæ³•</h5>
<p>åœ¨å‡ºç°å¼‚å¸¸çš„åœ°æ–¹æŠŠå¼‚å¸¸ä¸€å±‚ä¸€å±‚çš„æŠ›å‡ºç»™æœ€å¤–å±‚è°ƒç”¨è€…ï¼Œæœ€å¤–å±‚è°ƒç”¨è€…é›†ä¸­æ•è·å¤„ç†</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class <span class="type">ExceptionDemo</span>&#123;</span><br><span class="line">	public <span class="keyword">static</span> <span class="type">void</span> main(<span class="type">String</span>[] args)&#123;</span><br><span class="line">        <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">&quot;ç¨‹åºå¼€å§‹ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            parseDate(<span class="string">&quot;2013-03-23 10:19:23&quot;</span>);</span><br><span class="line">        &#125;catch (<span class="type">Exception</span> e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">&quot;ç¨‹åºç»“æŸã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">static</span> <span class="type">void</span> parseDate(<span class="type">String</span> time) throws <span class="type">Exception</span><span class="meta">&#123;...&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿è¡Œå¼‚å¸¸">è¿è¡Œå¼‚å¸¸</h3>
<h4 id="åŸºæœ¬ä»‹ç»-13">åŸºæœ¬ä»‹ç»</h4>
<p>ç»§æ‰¿è‡ª RuntimeException çš„å¼‚å¸¸æˆ–è€…å…¶å­ç±»ï¼Œç¼–è¯‘é˜¶æ®µæ˜¯ä¸ä¼šå‡ºé”™çš„ï¼Œæ˜¯åœ¨è¿è¡Œæ—¶é˜¶æ®µå¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ç¼–è¯‘é˜¶æ®µå¯ä»¥å¤„ç†ä¹Ÿå¯ä»¥ä¸å¤„ç†ï¼Œä»£ç ç¼–è¯‘éƒ½èƒ½é€šè¿‡</p>
<p><strong>å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸</strong>ï¼š</p>
<ol>
<li>æ•°ç»„ç´¢å¼•è¶Šç•Œå¼‚å¸¸ï¼šArrayIndexOutOfBoundsException</li>
<li>ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼šNullPointerExceptionï¼Œç›´æ¥è¾“å‡ºæ²¡é—®é¢˜ï¼Œè°ƒç”¨ç©ºæŒ‡é’ˆçš„å˜é‡çš„åŠŸèƒ½å°±ä¼šæŠ¥é”™</li>
<li>ç±»å‹è½¬æ¢å¼‚å¸¸ï¼šClassCastException</li>
<li>è¿­ä»£å™¨éå†æ²¡æœ‰æ­¤å…ƒç´ å¼‚å¸¸ï¼šNoSuchElementException</li>
<li>ç®—æœ¯å¼‚å¸¸ï¼ˆæ•°å­¦æ“ä½œå¼‚å¸¸ï¼‰ï¼šArithmeticException</li>
<li>æ•°å­—è½¬æ¢å¼‚å¸¸ï¼šNumberFormatException</li>
</ol>
<h4 id="å¤„ç†æœºåˆ¶-2">å¤„ç†æœºåˆ¶</h4>
<p>è¿è¡Œæ—¶å¼‚å¸¸åœ¨ç¼–è¯‘é˜¶æ®µæ˜¯ä¸ä¼šæŠ¥é”™ï¼Œåœ¨è¿è¡Œé˜¶æ®µæ‰ä¼šå‡ºé”™ï¼Œè¿è¡Œæ—¶å‡ºé”™äº†ç¨‹åºè¿˜æ˜¯ä¼šåœæ­¢ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ä¹Ÿå»ºè®®è¦å¤„ç†ï¼Œè¿è¡Œæ—¶å¼‚å¸¸æ˜¯è‡ªåŠ¨å¾€å¤–æŠ›å‡ºçš„ï¼Œä¸éœ€è¦æ‰‹å·¥æŠ›å‡º</p>
<p><strong>è¿è¡Œæ—¶å¼‚å¸¸çš„å¤„ç†è§„èŒƒ</strong>ï¼šç›´æ¥åœ¨æœ€å¤–å±‚æ•è·å¤„ç†å³å¯ï¼Œåº•å±‚ä¼šè‡ªåŠ¨æŠ›å‡º</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExceptionDemo</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ç¨‹åºå¼€å§‹ã€‚ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            chu(<span class="number">10</span> / <span class="number">0</span>);<span class="comment">//ArithmeticException: / by zero</span></span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;æ“ä½œæˆåŠŸï¼&quot;</span>);<span class="comment">//æ²¡è¾“å‡º</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;æ“ä½œå¤±è´¥ï¼&quot;</span>);<span class="comment">//è¾“å‡ºäº†</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ç¨‹åºç»“æŸã€‚ã€‚ã€‚ã€‚&quot;</span>);<span class="comment">//è¾“å‡ºäº†</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">chu</span>(<span class="params"><span class="built_in">int</span> a , <span class="built_in">int</span> b</span>)</span>  &#123; System.<span class="keyword">out</span>.println( a / b );&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Finally">Finally</h3>
<p>ç”¨åœ¨æ•è·å¤„ç†çš„å¼‚å¸¸æ ¼å¼ä¸­çš„ï¼Œæ”¾åœ¨æœ€åé¢</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç ï¼</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(<span class="built_in">Exception</span> e)&#123;</span><br><span class="line">    e.<span class="title function_ invoke__">printStackTrace</span>();</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="comment">// æ— è®ºä»£ç æ˜¯å‡ºç°å¼‚å¸¸è¿˜æ˜¯æ­£å¸¸æ‰§è¡Œï¼Œæœ€ç»ˆä¸€å®šè¦æ‰§è¡Œè¿™é‡Œçš„ä»£ç ï¼ï¼</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>: <span class="number">1</span>æ¬¡ã€‚</span><br><span class="line"><span class="keyword">catch</span>ï¼š<span class="number">0</span>-Næ¬¡  (å¦‚æœæœ‰<span class="keyword">finally</span>é‚£ä¹ˆ<span class="keyword">catch</span>å¯ä»¥æ²¡æœ‰!!)</span><br><span class="line"><span class="keyword">finally</span>: <span class="number">0</span>-<span class="number">1</span>æ¬¡</span><br></pre></td></tr></table></figure>
<p><strong>finally çš„ä½œç”¨</strong>ï¼šå¯ä»¥åœ¨ä»£ç æ‰§è¡Œå®Œæ¯•ä»¥åè¿›è¡Œèµ„æºçš„é‡Šæ”¾æ“ä½œ</p>
<p>èµ„æºï¼šèµ„æºéƒ½æ˜¯å®ç°äº† Closeable æ¥å£çš„ï¼Œéƒ½è‡ªå¸¦ close() å…³é—­æ–¹æ³•</p>
<p>æ³¨æ„ï¼šå¦‚æœåœ¨ finally ä¸­å‡ºç°äº† returnï¼Œä¼šåæ‰å¼‚å¸¸</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FinallyDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(chu());<span class="comment">//ä¸€å®šä¼šè¾“å‡º finally,ä¼˜å…ˆçº§æ¯”returné«˜</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">chu</span>()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="built_in">int</span> a = <span class="number">10</span> / <span class="number">2</span> ;</span><br><span class="line">            <span class="keyword">return</span> a ;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;=====finallyè¢«æ‰§è¡Œ&quot;</span>);</span><br><span class="line">            <span class="comment">//return 111; // ä¸å»ºè®®åœ¨finallyä¸­å†™returnï¼Œä¼šè¦†ç›–å‰é¢æ‰€æœ‰çš„returnå€¼!</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span>()</span>&#123;</span><br><span class="line">        InputStream <span class="keyword">is</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">is</span> = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;D:/cang.png&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;==finallyè¢«æ‰§è¡Œ===&quot;</span>);</span><br><span class="line">            <span class="comment">// å›æ”¶èµ„æºã€‚ç”¨äºåœ¨ä»£ç æ‰§è¡Œå®Œæ¯•ä»¥åè¿›è¡Œèµ„æºçš„å›æ”¶æ“ä½œï¼</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">is</span>!=<span class="literal">null</span>)<span class="keyword">is</span>.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰-2">è‡ªå®šä¹‰</h3>
<p>è‡ªå®šä¹‰å¼‚å¸¸:</p>
<ul>
<li>è‡ªå®šä¹‰ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»ç»§æ‰¿ Exceptionï¼Œé‡å†™æ„é€ å™¨ï¼Œåœ¨å‡ºç°å¼‚å¸¸çš„åœ°æ–¹ç”¨ throw new è‡ªå®šä¹‰å¯¹è±¡æŠ›å‡º</li>
<li>è‡ªå®šä¹‰è¿è¡Œæ—¶å¼‚å¸¸ï¼šå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»ç»§æ‰¿ RuntimeExceptionï¼Œé‡å†™æ„é€ å™¨ï¼Œåœ¨å‡ºç°å¼‚å¸¸çš„åœ°æ–¹ç”¨ throw new è‡ªå®šä¹‰å¯¹è±¡æŠ›å‡º</li>
</ul>
<p>throwsï¼šç”¨åœ¨æ–¹æ³•ä¸Šï¼Œç”¨äºæŠ›å‡ºæ–¹æ³•ä¸­çš„å¼‚å¸¸</p>
<p>throw:  ç”¨åœ¨å‡ºç°å¼‚å¸¸çš„åœ°æ–¹ï¼Œåˆ›å»ºå¼‚å¸¸å¯¹è±¡ä¸”ç«‹å³ä»æ­¤å¤„æŠ›å‡º</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éœ€æ±‚ï¼šè®¤ä¸ºå¹´é¾„å°äº0å²ï¼Œå¤§äº200å²å°±æ˜¯ä¸€ä¸ªå¼‚å¸¸ã€‚</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ExceptionDemo</span> </span>&#123;</span><br><span class="line">    public static void main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkAge(<span class="number">101</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="type">AgeIllegalException</span> e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void checkAge(int age) <span class="keyword">throws</span> <span class="type">ItheimaAgeIllegalException</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(age &lt; <span class="number">0</span> || age &gt; <span class="number">200</span>)&#123;<span class="comment">//å¹´é¾„åœ¨0-200ä¹‹é—´</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">AgeIllegalException</span>(<span class="string">&quot;/ age is illegal!&quot;</span>);</span><br><span class="line">            <span class="comment">//throw new AgeIllegalRuntimeException(&quot;/ age is illegal!&quot;);</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">System</span>.out.println(<span class="string">&quot;å¹´é¾„æ˜¯ï¼š&quot;</span> + age);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">AgeIllegalException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line">    <span class="type">Alt</span> + <span class="type">Insert</span>-&gt;<span class="type">Constructor</span> </span><br><span class="line">&#125;<span class="comment">//ç¼–è¯‘æ—¶å¼‚å¸¸</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">AgeIllegalRuntimeException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123;</span><br><span class="line">	public <span class="type">AgeIllegalRuntimeException</span>() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="type">AgeIllegalRuntimeException</span>(<span class="type">String</span> message) &#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">//è¿è¡Œæ—¶å¼‚å¸¸</span></span><br></pre></td></tr></table></figure>
<h3 id="å¤„ç†è§„èŒƒ">å¤„ç†è§„èŒƒ</h3>
<p>å¼‚å¸¸çš„è¯­æ³•æ³¨æ„ï¼š</p>
<ol>
<li>è¿è¡Œæ—¶å¼‚å¸¸è¢«æŠ›å‡ºå¯ä»¥ä¸å¤„ç†ï¼Œå¯ä»¥è‡ªåŠ¨æŠ›å‡ºï¼›<strong>ç¼–è¯‘æ—¶å¼‚å¸¸å¿…é¡»å¤„ç†</strong>ï¼›æŒ‰ç…§è§„èŒƒéƒ½åº”è¯¥å¤„ç†</li>
<li><strong>é‡å†™æ–¹æ³•ç”³æ˜æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»æŠ›å‡ºå¼‚å¸¸ç±»å‹æˆ–ä¸ºå…¶å­ç±»å‹</strong></li>
<li>æ–¹æ³•é»˜è®¤éƒ½å¯ä»¥è‡ªåŠ¨æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œ throws RuntimeException å¯ä»¥çœç•¥ä¸å†™</li>
<li>å½“å¤šå¼‚å¸¸å¤„ç†æ—¶ï¼Œæ•è·å¤„ç†ï¼Œå‰é¢çš„å¼‚å¸¸ç±»ä¸èƒ½æ˜¯åé¢å¼‚å¸¸ç±»çš„çˆ¶ç±»</li>
<li>åœ¨ try/catch åå¯ä»¥è¿½åŠ  finally ä»£ç å—ï¼Œå…¶ä¸­çš„ä»£ç ä¸€å®šä¼šè¢«æ‰§è¡Œï¼Œé€šå¸¸ç”¨äºèµ„æºå›æ”¶æ“ä½œ</li>
</ol>
<p>å¼‚å¸¸çš„ä½œç”¨ï¼š</p>
<ol>
<li>å¯ä»¥å¤„ç†ä»£ç é—®é¢˜ï¼Œé˜²æ­¢ç¨‹åºå‡ºç°å¼‚å¸¸åçš„æ­»äº¡</li>
<li>æé«˜äº†ç¨‹åºçš„å¥å£®æ€§å’Œå®‰å…¨æ€§</li>
</ol>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span>&#123;</span><br><span class="line">    <span class="variable">public</span> <span class="keyword">static</span> <span class="variable">void</span> <span class="title function_">main</span>(<span class="params">String</span>[] <span class="params">args</span>)&#123;</span><br><span class="line">        <span class="comment">//è¯·è¾“å…¥ä¸€ä¸ªåˆæ³•çš„å¹´é¾„</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="title function_">try</span>&#123;</span><br><span class="line">                <span class="title class_">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="variable">new</span> <span class="title class_">Scanner</span>(<span class="title class_">System</span>.<span class="property">in</span>);</span><br><span class="line">                <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;è¯·æ‚¨è¾“å…¥æ‚¨çš„å¹´å¹´é¾„ï¼š&quot;</span>);</span><br><span class="line">                int <span class="variable">age</span> <span class="operator">=</span> <span class="variable">sc</span>.<span class="property">nextInt</span>();</span><br><span class="line">                <span class="title class_">System</span>.<span class="property">out</span>.<span class="property">println</span>(<span class="string">&quot;å¹´é¾„ï¼š&quot;</span><span class="operator">+</span><span class="variable">age</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="title function_">catch</span>(<span class="params">Exception</span> <span class="params">e</span>)&#123;</span><br><span class="line">                <span class="title class_">System</span>.<span class="property">err</span>.<span class="property">println</span>(<span class="string">&quot;æ‚¨çš„å¹´é¾„æ˜¯çè¾“å…¥çš„ï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Î»">Î»</h2>
<h3 id="lambda">lambda</h3>
<h4 id="åŸºæœ¬ä»‹ç»-14">åŸºæœ¬ä»‹ç»</h4>
<p>Lambda è¡¨è¾¾å¼æ˜¯ JDK1.8 å¼€å§‹ä¹‹åçš„æ–°æŠ€æœ¯ï¼Œæ˜¯ä¸€ç§ä»£ç çš„æ–°è¯­æ³•ï¼Œä¸€ç§ç‰¹æ®Šå†™æ³•</p>
<p>ä½œç”¨ï¼šä¸ºäº†ç®€åŒ–åŒ¿åå†…éƒ¨ç±»çš„ä»£ç å†™æ³•</p>
<p>Lambda è¡¨è¾¾å¼çš„æ ¼å¼ï¼š</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="params">(åŒ¿åå†…éƒ¨ç±»è¢«é‡å†™æ–¹æ³•çš„å½¢å‚åˆ—è¡¨)</span> -&gt;</span> &#123;</span><br><span class="line">	<span class="regexp">//è¢«é‡å†™æ–¹æ³•çš„æ–¹æ³•ä½“ä»£ç </span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Lambda è¡¨è¾¾å¼å¹¶ä¸èƒ½ç®€åŒ–æ‰€æœ‰åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œåªèƒ½ç®€åŒ–<strong>å‡½æ•°å¼æ¥å£çš„åŒ¿åå†…éƒ¨ç±»</strong></p>
<p>ç®€åŒ–æ¡ä»¶ï¼šé¦–å…ˆå¿…é¡»æ˜¯æ¥å£ï¼Œæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</p>
<p>@FunctionalInterface å‡½æ•°å¼æ¥å£æ³¨è§£ï¼šä¸€æ—¦æŸä¸ªæ¥å£åŠ ä¸Šäº†è¿™ä¸ªæ³¨è§£ï¼Œè¿™ä¸ªæ¥å£åªèƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</p>
<h4 id="ç®€åŒ–æ–¹æ³•">ç®€åŒ–æ–¹æ³•</h4>
<p>Lambda è¡¨è¾¾å¼çš„çœç•¥å†™æ³•ï¼ˆè¿›ä¸€æ­¥åœ¨ Lambda è¡¨è¾¾å¼çš„åŸºç¡€ä¸Šç»§ç»­ç®€åŒ–ï¼‰</p>
<ul>
<li>å¦‚æœ Lambda è¡¨è¾¾å¼çš„æ–¹æ³•ä½“ä»£ç åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·ä¸å†™ï¼ŒåŒæ—¶è¦çœç•¥åˆ†å·ï¼›å¦‚æœè¿™è¡Œä»£ç æ˜¯ return è¯­å¥ï¼Œå¿…é¡»çœç•¥ return ä¸å†™</li>
<li>å‚æ•°ç±»å‹å¯ä»¥çœç•¥ä¸å†™</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼ŒåŒæ—¶ <code>()</code> ä¹Ÿå¯ä»¥çœç•¥</li>
</ul>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">String</span>&gt; names = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">names.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">names.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">names.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"></span><br><span class="line">names.forEach(<span class="keyword">new</span> Consumer&lt;<span class="built_in">String</span>&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public <span class="literal">void</span> accept(<span class="built_in">String</span> s) &#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">names.forEach<span class="function"><span class="params">((<span class="built_in">String</span> s) -&gt; &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">        System.out.println(s);</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;)</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">names</span>.<span class="title">forEach</span><span class="params">((s) -&gt; &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    System.out.println(s);</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;)</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">names</span>.<span class="title">forEach</span><span class="params">(s -&gt; &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    System.out.println(s);</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;)</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">names</span>.<span class="title">forEach</span><span class="params">(s -&gt; System.out.println(s) )</span>;</span></span><br></pre></td></tr></table></figure>
<h4 id="å¸¸ç”¨ç®€åŒ–">å¸¸ç”¨ç®€åŒ–</h4>
<p>Comparator</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> CollectionsDemo &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        List&lt;Student&gt; lists = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;<span class="comment">//...s1 s2 s3</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>add<span class="constructor">All(<span class="params">lists</span> , <span class="params">s1</span> , <span class="params">s2</span> , <span class="params">s3</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(lists, <span class="keyword">new</span> Comparator&lt;Student&gt;<span class="literal">()</span> &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public <span class="built_in">int</span> compare(Student s1, Student s2) &#123;</span><br><span class="line">                return s1.get<span class="constructor">Age()</span> - s2.get<span class="constructor">Age()</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç®€åŒ–å†™æ³•</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(lists ,(Student t1, Student t2) -&gt; &#123;</span><br><span class="line">                return t1.get<span class="constructor">Age()</span> - t2.get<span class="constructor">Age()</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// å‚æ•°ç±»å‹å¯ä»¥çœç•¥,æœ€ç®€å•çš„</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(lists ,(t1,t2) -&gt; t1.get<span class="constructor">Age()</span>-t2.get<span class="constructor">Age()</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•å¼•ç”¨">æ–¹æ³•å¼•ç”¨</h3>
<h4 id="åŸºæœ¬ä»‹ç»-15">åŸºæœ¬ä»‹ç»</h4>
<p>æ–¹æ³•å¼•ç”¨ï¼šæ–¹æ³•å¼•ç”¨æ˜¯ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ– Lambda è¡¨è¾¾å¼çš„å†™æ³•</p>
<p>æ–¹æ³•å¼•ç”¨çš„æ ¼å¼ï¼šç±»å‹æˆ–è€…å¯¹è±¡::å¼•ç”¨çš„æ–¹æ³•</p>
<p>å…³é”®è¯­æ³•æ˜¯ï¼š<code>::</code></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lists.<span class="keyword">for</span><span class="constructor">Each( <span class="params">s</span> -&gt; System.<span class="params">out</span>.<span class="params">println</span>(<span class="params">s</span>)</span>);</span><br><span class="line"><span class="comment">// æ–¹æ³•å¼•ç”¨ï¼</span></span><br><span class="line">lists.<span class="keyword">for</span><span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br></pre></td></tr></table></figure>
<h4 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³•</h4>
<p>å¼•ç”¨æ ¼å¼ï¼š<code>ç±»å::é™æ€æ–¹æ³•</code></p>
<p>ç®€åŒ–æ­¥éª¤ï¼šå®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼ŒæŠŠéœ€è¦ç®€åŒ–çš„ä»£ç æ”¾åˆ°ä¸€ä¸ªé™æ€æ–¹æ³•ä¸­å»</p>
<p>é™æ€æ–¹æ³•å¼•ç”¨çš„æ³¨æ„äº‹é¡¹ï¼šè¢«å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨è¦å’Œå‡½æ•°å¼æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸€è‡´,æ‰èƒ½å¼•ç”¨ç®€åŒ–</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰é›†åˆåŠ å…¥å‡ ä¸ªStudentå…ƒç´ </span></span><br><span class="line"><span class="comment">// ä½¿ç”¨é™æ€æ–¹æ³•è¿›è¡Œç®€åŒ–ï¼</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(lists, (o1, o2) -&gt; <span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span>compare<span class="constructor">ByAge(<span class="params">o1</span> , <span class="params">o2</span>)</span>);</span><br><span class="line"><span class="comment">// å¦‚æœå‰åå‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œæ—¢å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•å¼•ç”¨</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Collections</span>.</span></span>sort(lists, Student::compareByAge);</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> Student &#123;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> age ;</span><br><span class="line"></span><br><span class="line">    public static <span class="built_in">int</span> compare<span class="constructor">ByAge(Student <span class="params">o1</span> , Student <span class="params">o2</span>)</span>&#123;</span><br><span class="line">        return  o1.get<span class="constructor">Age()</span> - o2.get<span class="constructor">Age()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³•</h4>
<p>å¼•ç”¨æ ¼å¼ï¼š<code>å¯¹è±¡::å®ä¾‹æ–¹æ³•</code></p>
<p>ç®€åŒ–æ­¥éª¤ï¼šå®šä¹‰ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼ŒæŠŠéœ€è¦çš„ä»£ç æ”¾åˆ°å®ä¾‹æ–¹æ³•ä¸­å»</p>
<p>å®ä¾‹æ–¹æ³•å¼•ç”¨çš„æ³¨æ„äº‹é¡¹ï¼šè¢«å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨è¦å’Œå‡½æ•°å¼æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸€è‡´ã€‚</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> MethodDemo &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">        List&lt;String&gt; lists = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        lists.<span class="keyword">add</span>(&quot;java1&quot;);</span><br><span class="line">        lists.<span class="keyword">add</span>(&quot;java2&quot;);</span><br><span class="line">        lists.<span class="keyword">add</span>(&quot;java3&quot;);</span><br><span class="line">        // å¯¹è±¡æ˜¯ <span class="keyword">System</span>.<span class="keyword">out</span> = <span class="built_in">new</span> PrintStream();</span><br><span class="line">        // å®ä¾‹æ–¹æ³•ï¼šprintln()</span><br><span class="line">        // å‰åå‚æ•°æ­£å¥½éƒ½æ˜¯ä¸€ä¸ª</span><br><span class="line">        lists.<span class="keyword">forEach</span>(s -&gt; <span class="keyword">System</span>.<span class="keyword">out</span>.println(s));</span><br><span class="line">        lists.<span class="keyword">forEach</span>(<span class="keyword">System</span>.<span class="keyword">out</span>::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç‰¹å®šç±»å‹">ç‰¹å®šç±»å‹</h4>
<p>ç‰¹å®šç±»å‹ï¼šStringï¼Œä»»ä½•ç±»å‹</p>
<p>å¼•ç”¨æ ¼å¼ï¼š<code>ç‰¹å®šç±»å‹::æ–¹æ³•</code></p>
<p>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åˆ—è¡¨ä¸­çš„å½¢å‚ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºäº†åé¢çš„æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå¹¶ä¸”å…¶ä½™å‚æ•°ä½œä¸ºåé¢æ–¹æ³•çš„å½¢å‚ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨ç‰¹å®šç±»å‹æ–¹æ³•å¼•ç”¨äº†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodDemo</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">String</span>[] strs = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;James&quot;</span>, <span class="string">&quot;AA&quot;</span>, <span class="string">&quot;John&quot;</span>,</span><br><span class="line">                <span class="string">&quot;Patricia&quot;</span>,<span class="string">&quot;Dlei&quot;</span> , <span class="string">&quot;Robert&quot;</span>,<span class="string">&quot;Boom&quot;</span>, <span class="string">&quot;Cao&quot;</span> ,<span class="string">&quot;black&quot;</span> ,</span><br><span class="line">                <span class="string">&quot;Michael&quot;</span>, <span class="string">&quot;Linda&quot;</span>,<span class="string">&quot;cao&quot;</span>,<span class="string">&quot;after&quot;</span>,<span class="string">&quot;sa&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// public static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c)</span></span><br><span class="line">        <span class="comment">// éœ€æ±‚ï¼šæŒ‰ç…§å…ƒç´ çš„é¦–å­—ç¬¦(å¿½ç•¥å¤§å°å†™)å‡åºæ’åºï¼ï¼ï¼</span></span><br><span class="line">        <span class="title class_">Arrays</span>.<span class="title function_">sort</span>(strs, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;<span class="title class_">String</span>&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> int <span class="title function_">compare</span>(<span class="params"><span class="built_in">String</span> s1, <span class="built_in">String</span> s2</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> s1.<span class="title function_">compareToIgnoreCase</span>(s2);<span class="comment">//æŒ‰ç…§å…ƒç´ çš„é¦–å­—ç¬¦(å¿½ç•¥å¤§å°å†™)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Arrays</span>.<span class="title function_">sort</span>(strs, ( s1,  s2 ) -&gt;  s1.<span class="title function_">compareToIgnoreCase</span>(s2));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç‰¹å®šç±»å‹çš„æ–¹æ³•å¼•ç”¨ï¼š</span></span><br><span class="line">        <span class="title class_">Arrays</span>.<span class="title function_">sort</span>(strs,  <span class="title class_">String</span>::compareToIgnoreCase);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="title class_">Arrays</span>.<span class="title function_">toString</span>(strs));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ„é€ å™¨-2">æ„é€ å™¨</h4>
<p>æ ¼å¼ï¼š<code>ç±»å::new</code></p>
<p>æ³¨æ„äº‹é¡¹ï¼šå‰åå‚æ•°ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œåˆåœ¨åˆ›å»ºå¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨æ„é€ å™¨å¼•ç”¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">String</span>&gt; lists = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        lists.<span class="title function_">add</span>(<span class="string">&quot;java1&quot;</span>);</span><br><span class="line">        lists.<span class="title function_">add</span>(<span class="string">&quot;java2&quot;</span>);</span><br><span class="line">        lists.<span class="title function_">add</span>(<span class="string">&quot;java3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é›†åˆé»˜è®¤åªèƒ½è½¬æˆObjectç±»å‹çš„æ•°ç»„ã€‚</span></span><br><span class="line">        <span class="title class_">Object</span>[] objs = lists.<span class="title function_">toArray</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æˆ‘ä»¬æƒ³æŒ‡å®šè½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼æœ€æ–°çš„å†™æ³•å¯ä»¥ç»“åˆæ„é€ å™¨å¼•ç”¨å®ç° </span></span><br><span class="line">        <span class="title class_">String</span>[] strs = lists.<span class="title function_">toArray</span>(<span class="keyword">new</span> <span class="title class_">IntFunction</span>&lt;<span class="title class_">String</span>[]&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="title class_">String</span>[] <span class="title function_">apply</span>(<span class="params">int value</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[value];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title class_">String</span>[] strs1 = lists.<span class="title function_">toArray</span>(s -&gt; <span class="keyword">new</span> <span class="title class_">String</span>[s]);</span><br><span class="line">        <span class="title class_">String</span>[] strs2 = lists.<span class="title function_">toArray</span>(<span class="title class_">String</span>[]::<span class="keyword">new</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;Stringç±»å‹çš„æ•°ç»„ï¼š&quot;</span>+ <span class="title class_">Arrays</span>.<span class="title function_">toString</span>(strs2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="I-O">I/O</h2>
<h3 id="Stream">Stream</h3>
<h4 id="æ¦‚è¿°-9">æ¦‚è¿°</h4>
<p>Stream æµå…¶å®å°±æ˜¯ä¸€æ ¹ä¼ é€å¸¦ï¼Œå…ƒç´ åœ¨ä¸Šé¢å¯ä»¥è¢« Stream æµæ“ä½œ</p>
<ul>
<li>å¯ä»¥è§£å†³å·²æœ‰é›†åˆç±»åº“æˆ–è€…æ•°ç»„ API çš„å¼Šç«¯</li>
<li>Stream æµç®€åŒ–é›†åˆå’Œæ•°ç»„çš„æ“ä½œ</li>
<li>é“¾å¼ç¼–ç¨‹</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">list.<span class="title function_">stream</span>().<span class="title function_">filter</span>(<span class="keyword">new</span> <span class="title class_">Predicate</span>&lt;<span class="title class_">String</span>&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="built_in">boolean</span> <span class="title function_">test</span>(<span class="params"><span class="built_in">String</span> s</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> s.<span class="title function_">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">list.<span class="title function_">stream</span>().<span class="title function_">filter</span>(s -&gt; s.<span class="title function_">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>));</span><br></pre></td></tr></table></figure>
<h4 id="è·å–æµ">è·å–æµ</h4>
<p>é›†åˆè·å– Stream æµç”¨ï¼š<code>default Stream stream()</code></p>
<p>æ•°ç»„ï¼šArrays.stream(æ•°ç»„)   /  Stream.of(æ•°ç»„);</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Collectioné›†åˆè·å–Streamæµã€‚</span></span><br><span class="line">Collection&lt;<span class="type">String</span>&gt; c = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; listStream = c.<span class="built_in">stream</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapé›†åˆè·å–æµ</span></span><br><span class="line"><span class="comment">// å…ˆè·å–é”®çš„Streamæµã€‚</span></span><br><span class="line"><span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; keysStream = map.<span class="built_in">keySet</span>().<span class="built_in">stream</span>();</span><br><span class="line"><span class="comment">// åœ¨è·å–å€¼çš„Streamæµ</span></span><br><span class="line"><span class="built_in">Stream</span>&lt;Integer&gt; valuesStream = map.<span class="built_in">values</span>().<span class="built_in">stream</span>();</span><br><span class="line"><span class="comment">// è·å–é”®å€¼å¯¹çš„Streamæµï¼ˆkey=valueï¼š Map.Entry&lt;String,Integer&gt;ï¼‰</span></span><br><span class="line"><span class="built_in">Stream</span>&lt;Map.Entry&lt;<span class="type">String</span>,Integer&gt;&gt; keyAndValues = map.<span class="built_in">entrySet</span>().<span class="built_in">stream</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°ç»„è·å–æµ</span></span><br><span class="line"><span class="type">String</span>[] arr = <span class="keyword">new</span> <span class="type">String</span>[]&#123;<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;JavaEE&quot;</span> ,<span class="string">&quot;Spring Boot&quot;</span>&#125;;</span><br><span class="line"><span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; arrStream1 = Arrays.<span class="built_in">stream</span>(arr);</span><br><span class="line"><span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; arrStream2 = <span class="built_in">Stream</span>.<span class="built_in">of</span>(arr);</span><br></pre></td></tr></table></figure>
<h4 id="å¸¸ç”¨API-2">å¸¸ç”¨API</h4>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>void forEach(Consumer&lt;? super T&gt; action)</td>
<td>é€ä¸€å¤„ç†ï¼ˆéå†ï¼‰</td>
</tr>
<tr>
<td>long count</td>
<td>è¿”å›æµä¸­çš„å…ƒç´ æ•°</td>
</tr>
<tr>
<td>Stream<T> filter(Predicate&lt;? super T&gt; predicate)</td>
<td>ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤</td>
</tr>
<tr>
<td>Stream<T> limit(long maxSize)</td>
<td>è¿”å›æ­¤æµä¸­çš„å…ƒç´ ç»„æˆçš„æµï¼Œæˆªå–å‰æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®</td>
</tr>
<tr>
<td>Stream<T> skip(long n)</td>
<td>è·³è¿‡æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®ï¼Œè¿”å›ç”±è¯¥æµçš„å‰©ä½™å…ƒç´ ç»„æˆçš„æµ</td>
</tr>
<tr>
<td><R> Stream<R> map(Function&lt;? super T,? extends R&gt; mapper)</td>
<td>åŠ å·¥æ–¹æ³•ï¼Œå°†å½“å‰æµä¸­çš„ T ç±»å‹æ•°æ®è½¬æ¢ä¸ºå¦ä¸€ç§ R ç±»å‹çš„æµ</td>
</tr>
<tr>
<td>static <T> Stream<T> concat(Stream a, Stream b)</td>
<td>åˆå¹¶ a å’Œ b ä¸¤ä¸ªæµä¸ºä¸€ä¸ªï¼Œè°ƒç”¨ <code>Stream.concat(s1,s2)</code></td>
</tr>
<tr>
<td>Stream<T> distinct()</td>
<td>è¿”å›ç”±è¯¥æµçš„ä¸åŒå…ƒç´ ç»„æˆçš„æµ</td>
</tr>
</tbody>
</table>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamDemo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;<span class="type">String</span>&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.<span class="built_in">add</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>); list.<span class="built_in">add</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>); list.<span class="built_in">add</span>(<span class="string">&quot;èµµæ•&quot;</span>);</span><br><span class="line">        list.<span class="built_in">add</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>); list.<span class="built_in">add</span>(<span class="string">&quot;å¼ ä¸‰ä¸°&quot;</span>); list.<span class="built_in">add</span>(<span class="string">&quot;å¼ &quot;</span>);</span><br><span class="line">        <span class="comment">//å–ä»¥å¼ å¼€å¤´å¹¶ä¸”åå­—æ˜¯ä¸‰ä½æ•°çš„</span></span><br><span class="line">        list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.<span class="built_in">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>)</span><br><span class="line">                .<span class="built_in">filter</span>(s -&gt; s.length == <span class="number">3</span>).forEach(System.out::println);</span><br><span class="line">        <span class="comment">//ç»Ÿè®¡æ•°é‡</span></span><br><span class="line">		<span class="type">long</span> count = list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.<span class="built_in">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>)</span><br><span class="line">                .<span class="built_in">filter</span>(s -&gt; s.length == <span class="number">3</span>).<span class="built_in">count</span>();</span><br><span class="line">		<span class="comment">//å–å‰ä¸¤ä¸ª</span></span><br><span class="line">		list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.length == <span class="number">3</span>).<span class="built_in">limit</span>(<span class="number">2</span>).forEach(...);</span><br><span class="line">		<span class="comment">//è·³è¿‡å‰ä¸¤ä¸ª</span></span><br><span class="line">		list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.length == <span class="number">3</span>).<span class="built_in">skip</span>(<span class="number">2</span>).forEach(...);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// éœ€æ±‚ï¼šæŠŠåç§°éƒ½åŠ ä¸Šâ€œå¼ ä¸‰çš„:+xxxâ€</span></span><br><span class="line">		list.<span class="built_in">stream</span>().<span class="built_in">map</span>(s -&gt; <span class="string">&quot;å¼ ä¸‰çš„&quot;</span> + s).forEach(System.out::println);</span><br><span class="line">		<span class="comment">// éœ€æ±‚ï¼šæŠŠåç§°éƒ½åŠ å·¥å‚å­¦ç”Ÿå¯¹è±¡æ”¾ä¸Šå»!!</span></span><br><span class="line">		<span class="comment">// list.stream().map(name -&gt; new Student(name));</span></span><br><span class="line">		list.stream.<span class="built_in">map</span>(Student::<span class="keyword">new</span>).forEach(System.out::println);</span><br><span class="line">                                          	</span><br><span class="line">		<span class="comment">//æ•°ç»„æµ</span></span><br><span class="line">		<span class="built_in">Stream</span>&lt;Integer&gt; s1 = <span class="built_in">Stream</span>.<span class="built_in">of</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>);</span><br><span class="line">		<span class="comment">//é›†åˆæµ</span></span><br><span class="line">		<span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; s2 = list.<span class="built_in">stream</span>();</span><br><span class="line">		<span class="comment">//åˆå¹¶æµ</span></span><br><span class="line">		<span class="built_in">Stream</span>&lt;Object&gt; s3 = <span class="built_in">Stream</span>.<span class="built_in">concat</span>(s1,s2);</span><br><span class="line">		s3.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Student&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line">&#125;                                          </span><br></pre></td></tr></table></figure>
<h4 id="ç»ˆç»“æ–¹æ³•">ç»ˆç»“æ–¹æ³•</h4>
<p>ç»ˆç»“æ–¹æ³•ï¼šStream è°ƒç”¨äº†ç»ˆç»“æ–¹æ³•ï¼Œæµçš„æ“ä½œå°±å…¨éƒ¨ç»ˆç»“ï¼Œä¸èƒ½ç»§ç»­ä½¿ç”¨ï¼Œå¦‚ foreachï¼Œcount æ–¹æ³•ç­‰</p>
<p>éç»ˆç»“æ–¹æ³•ï¼šæ¯æ¬¡è°ƒç”¨å®Œæˆä»¥åè¿”å›ä¸€ä¸ªæ–°çš„æµå¯¹è±¡ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œæ”¯æŒ<strong>é“¾å¼ç¼–ç¨‹</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// <span class="keyword">foreach</span>ç»ˆç»“æ–¹æ³•</span><br><span class="line">list.stream().<span class="keyword">filter</span>(s -&gt; s.startsWith(&quot;å¼ &quot;))</span><br><span class="line">    .<span class="keyword">filter</span>(s -&gt; s.length() == <span class="number">3</span>).<span class="keyword">forEach</span>(<span class="keyword">System</span>.<span class="keyword">out</span>::println);</span><br></pre></td></tr></table></figure>
<h4 id="æ”¶é›†æµ">æ”¶é›†æµ</h4>
<p>æ”¶é›† Streamï¼šæŠŠ Stream æµçš„æ•°æ®è½¬å›åˆ°é›†åˆä¸­å»</p>
<ul>
<li>Stream æµï¼šå·¥å…·</li>
<li>é›†åˆï¼šç›®çš„</li>
</ul>
<p>Stream æ”¶é›†æ–¹æ³•ï¼š<code>R collect(Collector collector)</code> æŠŠç»“æœæ”¶é›†åˆ°é›†åˆä¸­</p>
<p>Collectors æ–¹æ³•ï¼š</p>
<ul>
<li><code>public static  Collector toList()</code>ï¼šæŠŠå…ƒç´ æ”¶é›†åˆ° List é›†åˆä¸­</li>
<li><code>public static  Collector toSet()</code>ï¼šæŠŠå…ƒç´ æ”¶é›†åˆ° Set é›†åˆä¸­</li>
<li><code>public static  Collector toMap(Function keyMapper,Function valueMapper)</code>ï¼šæŠŠå…ƒç´ æ”¶é›†åˆ° Map é›†åˆä¸­</li>
<li><code>Object[] toArray()</code>ï¼šæŠŠå…ƒç´ æ”¶é›†æ•°ç»„ä¸­</li>
<li><code>public static Collector groupingBy(Function classifier)</code>ï¼šåˆ†ç»„</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">	List&lt;<span class="type">String</span>&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	<span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; stream = list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.<span class="built_in">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>));    </span><br><span class="line">    <span class="comment">//æŠŠstreamæµè½¬æ¢æˆSeté›†åˆã€‚</span></span><br><span class="line">    Set&lt;<span class="type">String</span>&gt; set = stream.<span class="built_in">collect</span>(Collectors.<span class="built_in">toSet</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æŠŠstreamæµè½¬æ¢æˆListé›†åˆã€‚</span></span><br><span class="line">    <span class="comment">//é‡æ–°å®šä¹‰ï¼Œå› ä¸ºèµ„æºå·²ç»è¢«å…³é—­äº†</span></span><br><span class="line">    <span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; stream1 = list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.<span class="built_in">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>));</span><br><span class="line">    List&lt;<span class="type">String</span>&gt; list = stream.<span class="built_in">collect</span>(Collectors.<span class="built_in">toList</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æŠŠstreamæµè½¬æ¢æˆæ•°ç»„ã€‚</span></span><br><span class="line">    <span class="built_in">Stream</span>&lt;<span class="type">String</span>&gt; stream2 = list.<span class="built_in">stream</span>().<span class="built_in">filter</span>(s -&gt; s.<span class="built_in">startsWith</span>(<span class="string">&quot;å¼ &quot;</span>));</span><br><span class="line">    Object[] arr = stream2.<span class="built_in">toArray</span>();</span><br><span class="line">    <span class="comment">// å¯ä»¥å€Ÿç”¨æ„é€ å™¨å¼•ç”¨ç”³æ˜è½¬æ¢æˆçš„æ•°ç»„ç±»å‹ï¼ï¼ï¼</span></span><br><span class="line">    <span class="type">String</span>[] arr1 = stream2.<span class="built_in">toArray</span>(<span class="type">String</span>[]::<span class="keyword">new</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="File">File</h3>
<h4 id="æ–‡ä»¶ç±»">æ–‡ä»¶ç±»</h4>
<p>File ç±»ï¼šä»£è¡¨æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶å¯¹è±¡ï¼Œæ˜¯ç”¨æ¥æ“ä½œæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶å¯¹è±¡çš„ï¼Œåˆ é™¤æ–‡ä»¶ï¼Œè·å–æ–‡ä»¶ä¿¡æ¯ï¼Œåˆ›å»ºæ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œå¹¿ä¹‰æ¥è¯´æ“ä½œç³»ç»Ÿè®¤ä¸ºæ–‡ä»¶åŒ…å«ï¼ˆæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼‰</p>
<p>File ç±»æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public File(String pathname)</code>ï¼šæ ¹æ®è·¯å¾„è·å–æ–‡ä»¶å¯¹è±¡</li>
<li><code>public File(String parent , String child)</code>ï¼šæ ¹æ®çˆ¶è·¯å¾„å’Œæ–‡ä»¶åç§°è·å–æ–‡ä»¶å¯¹è±¡</li>
</ul>
<p>File ç±»åˆ›å»ºæ–‡ä»¶å¯¹è±¡çš„æ ¼å¼ï¼š</p>
<ul>
<li><code>File f = new File(&quot;ç»å¯¹è·¯å¾„/ç›¸å¯¹è·¯å¾„&quot;);</code>
<ul>
<li>ç»å¯¹è·¯å¾„ï¼šä»ç£ç›˜çš„çš„ç›˜ç¬¦ä¸€è·¯èµ°åˆ°ç›®çš„ä½ç½®çš„è·¯å¾„
<ul>
<li>ç»å¯¹è·¯å¾„ä¾èµ–å…·ä½“çš„ç¯å¢ƒï¼Œä¸€æ—¦è„±ç¦»ç¯å¢ƒï¼Œä»£ç å¯èƒ½å‡ºé”™</li>
<li>ä¸€èˆ¬æ˜¯å®šä½æŸä¸ªæ“ä½œç³»ç»Ÿä¸­çš„æŸä¸ªæ–‡ä»¶å¯¹è±¡</li>
</ul>
</li>
<li><strong>ç›¸å¯¹è·¯å¾„</strong>ï¼šä¸å¸¦ç›˜ç¬¦çš„ï¼ˆé‡ç‚¹ï¼‰
<ul>
<li>é»˜è®¤æ˜¯ç›´æ¥ç›¸å¯¹åˆ°å·¥ç¨‹ç›®å½•ä¸‹å¯»æ‰¾æ–‡ä»¶çš„ã€‚</li>
<li>ç›¸å¯¹è·¯å¾„åªèƒ½ç”¨äºå¯»æ‰¾å·¥ç¨‹ä¸‹çš„æ–‡ä»¶ï¼Œå¯ä»¥è·¨å¹³å°</li>
</ul>
</li>
</ul>
</li>
<li><code>File f = new File(&quot;æ–‡ä»¶å¯¹è±¡/æ–‡ä»¶å¤¹å¯¹è±¡&quot;)</code> å¹¿ä¹‰æ¥è¯´ï¼šæ–‡ä»¶æ˜¯åŒ…å«æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> FileDemo&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„</span></span><br><span class="line">        <span class="comment">// æ–‡ä»¶è·¯å¾„åˆ†éš”ç¬¦ï¼š</span></span><br><span class="line">        <span class="comment">//      -- a.ä½¿ç”¨æ­£æ–œæ ï¼š /</span></span><br><span class="line">        <span class="comment">//      -- b.ä½¿ç”¨åæ–œæ ï¼š \\</span></span><br><span class="line">        <span class="comment">//      -- c.ä½¿ç”¨åˆ†éš”ç¬¦API:File.separator</span></span><br><span class="line">        <span class="comment">//File f1 = new File(&quot;D:&quot;+File.separator+&quot;it&quot;+File.separator</span></span><br><span class="line">		<span class="comment">//+&quot;å›¾ç‰‡èµ„æº&quot;+File.separator+&quot;beautiful.jpg&quot;);</span></span><br><span class="line">        <span class="keyword">File</span> f1 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;D:\\seazean\\å›¾ç‰‡èµ„æº\\beautiful.jpg&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(f1.length()); <span class="comment">// è·å–æ–‡ä»¶çš„å¤§å°ï¼Œå­—èŠ‚å¤§å°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">        <span class="keyword">File</span> f2 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;Day09Demo/src/dlei.txt&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(f2.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.åˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼šä»£è¡¨æ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line">        <span class="keyword">File</span> f3 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;D:\\it\\å›¾ç‰‡èµ„æº&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(f3.exists());<span class="comment">// åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¸¸ç”¨API-3">å¸¸ç”¨API</h4>
<h5 id="å¸¸ç”¨æ–¹æ³•-2">å¸¸ç”¨æ–¹æ³•</h5>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>String getAbsolutePath()</td>
<td>è¿”å›æ­¤ File çš„ç»å¯¹è·¯å¾„åå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>String getPath()</td>
<td>è·å–åˆ›å»ºæ–‡ä»¶å¯¹è±¡çš„æ—¶å€™ç”¨çš„è·¯å¾„</td>
</tr>
<tr>
<td>String getName()</td>
<td>è¿”å›ç”±æ­¤ File è¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°</td>
</tr>
<tr>
<td>long length()</td>
<td>è¿”å›ç”±æ­¤ File è¡¨ç¤ºçš„æ–‡ä»¶çš„é•¿åº¦ï¼ˆå¤§å°ï¼‰</td>
</tr>
<tr>
<td>long length(FileFilter filter)</td>
<td>æ–‡ä»¶è¿‡æ»¤å™¨</td>
</tr>
</tbody>
</table>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> FileDemo &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="comment">// 1.ç»å¯¹è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">        File f1 = <span class="keyword">new</span> <span class="constructor">File(<span class="string">&quot;E:/å›¾ç‰‡/test.jpg&quot;</span>)</span>;</span><br><span class="line">        <span class="comment">// a.è·å–å®ƒçš„ç»å¯¹è·¯å¾„ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f1.get<span class="constructor">AbsolutePath()</span>);</span><br><span class="line">        <span class="comment">// b.è·å–æ–‡ä»¶å®šä¹‰çš„æ—¶å€™ä½¿ç”¨çš„è·¯å¾„ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f1.get<span class="constructor">Path()</span>);</span><br><span class="line">        <span class="comment">// c.è·å–æ–‡ä»¶çš„åç§°ï¼šå¸¦åç¼€ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f1.get<span class="constructor">Name()</span>);</span><br><span class="line">        <span class="comment">// d.è·å–æ–‡ä»¶çš„å¤§å°ï¼šå­—èŠ‚ä¸ªæ•°ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f1.length<span class="literal">()</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">        File f2 = <span class="keyword">new</span> <span class="constructor">File(<span class="string">&quot;Demo/src/test.txt&quot;</span>)</span>;</span><br><span class="line">        <span class="comment">// a.è·å–å®ƒçš„ç»å¯¹è·¯å¾„ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f2.get<span class="constructor">AbsolutePath()</span>);</span><br><span class="line">        <span class="comment">// b.è·å–æ–‡ä»¶å®šä¹‰çš„æ—¶å€™ä½¿ç”¨çš„è·¯å¾„ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f2.get<span class="constructor">Path()</span>);</span><br><span class="line">        <span class="comment">// c.è·å–æ–‡ä»¶çš„åç§°ï¼šå¸¦åç¼€ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f2.get<span class="constructor">Name()</span>);</span><br><span class="line">        <span class="comment">// d.è·å–æ–‡ä»¶çš„å¤§å°ï¼šå­—èŠ‚ä¸ªæ•°ã€‚</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(f2.length<span class="literal">()</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åˆ¤æ–­æ–¹æ³•">åˆ¤æ–­æ–¹æ³•</h5>
<p>æ–¹æ³•åˆ—è¡¨ï¼š</p>
<ul>
<li><code>boolean exists()</code>ï¼šæ­¤ File è¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å®é™…å­˜åœ¨</li>
<li><code>boolean isDirectory()</code>ï¼šæ­¤ File è¡¨ç¤ºçš„æ˜¯å¦ä¸ºç›®å½•</li>
<li><code>boolean isFile()</code>ï¼šæ­¤ File è¡¨ç¤ºçš„æ˜¯å¦ä¸ºæ–‡ä»¶</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">File f = <span class="built_in">new</span> File(&quot;Demo/src/test.txt&quot;);</span><br><span class="line">// a.åˆ¤æ–­æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(f.<span class="keyword">exists</span>()); // <span class="keyword">true</span></span><br><span class="line">// b.åˆ¤æ–­æ–‡ä»¶å¯¹è±¡æ˜¯å¦æ˜¯æ–‡ä»¶,æ˜¯æ–‡ä»¶è¿”å›<span class="keyword">true</span> ,åä¹‹</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(f.isFile()); // <span class="keyword">true</span></span><br><span class="line">// c.åˆ¤æ–­æ–‡ä»¶å¯¹è±¡æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹,æ˜¯æ–‡ä»¶å¤¹è¿”å›<span class="keyword">true</span> ,åä¹‹</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(f.isDirectory()); // <span class="keyword">false</span></span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºåˆ é™¤">åˆ›å»ºåˆ é™¤</h5>
<p>æ–¹æ³•åˆ—è¡¨ï¼š</p>
<ul>
<li><code>boolean createNewFile()</code>ï¼šå½“ä¸”ä»…å½“å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶å°šä¸å­˜åœ¨æ—¶ï¼Œ åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶</li>
<li><code>boolean delete()</code>ï¼šåˆ é™¤ç”±æ­¤ File è¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•ï¼ˆåªèƒ½åˆ é™¤ç©ºç›®å½•ï¼‰</li>
<li><code>boolean mkdir()</code>ï¼šåˆ›å»ºç”±æ­¤ File è¡¨ç¤ºçš„ç›®å½•ï¼ˆåªèƒ½åˆ›å»ºä¸€çº§ç›®å½•ï¼‰</li>
<li><code>boolean mkdirs()</code>ï¼šå¯ä»¥åˆ›å»ºå¤šçº§ç›®å½•ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> FileDemo &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">File</span> f = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// a.åˆ›å»ºæ–°æ–‡ä»¶ï¼Œåˆ›å»ºæˆåŠŸè¿”å›true ,åä¹‹</span></span><br><span class="line">        System.out.<span class="keyword">println</span>(f.createNewFile());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// b.åˆ é™¤æ–‡ä»¶æˆ–è€…ç©ºæ–‡ä»¶å¤¹</span></span><br><span class="line">        System.out.<span class="keyword">println</span>(f.<span class="keyword">delete</span>());</span><br><span class="line">        <span class="comment">// ä¸èƒ½åˆ é™¤éç©ºæ–‡ä»¶å¤¹ï¼Œåªèƒ½åˆ é™¤ç©ºæ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="keyword">File</span> f1 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;E:/it/aaaaa&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(f1.<span class="keyword">delete</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// c.åˆ›å»ºä¸€çº§ç›®å½•</span></span><br><span class="line">        <span class="keyword">File</span> f2 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;E:/bbbb&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(f2.mkdir());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// d.åˆ›å»ºå¤šçº§ç›®å½•</span></span><br><span class="line">        <span class="keyword">File</span> f3 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;D:/it/e/a/d/ds/fas/fas/fas/fas/fas/fas&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(f3.mkdirs());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="éå†ç›®å½•">éå†ç›®å½•</h4>
<ul>
<li><code>public String[] list()</code>ï¼šè·å–å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ä¸€çº§æ–‡ä»¶åç§°åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­å»è¿”å›</li>
<li><code>public File[] listFiles()</code>ï¼šè·å–å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ä¸€çº§æ–‡ä»¶å¯¹è±¡åˆ°ä¸€ä¸ª<strong>æ–‡ä»¶å¯¹è±¡æ•°ç»„</strong>ä¸­å»è¿”å›ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</li>
<li><code>public long lastModified</code>ï¼šè¿”å›æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶ä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> FileDemo &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">        <span class="keyword">File</span> dir = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;D:\\seazean&quot;</span>);</span><br><span class="line">        <span class="comment">// a.è·å–å½“å‰ç›®å½•å¯¹è±¡ä¸‹çš„å…¨éƒ¨ä¸€çº§æ–‡ä»¶åç§°åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„è¿”å›ã€‚</span></span><br><span class="line">        String[] names = dir.list();</span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            System.out.<span class="keyword">println</span>(name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// b.è·å–å½“å‰ç›®å½•å¯¹è±¡ä¸‹çš„å…¨éƒ¨ä¸€çº§æ–‡ä»¶å¯¹è±¡åˆ°ä¸€ä¸ªFileç±»å‹çš„æ•°ç»„è¿”å›ã€‚</span></span><br><span class="line">        <span class="keyword">File</span>[] files = dir.listFiles();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">File</span> <span class="keyword">file</span> : files) &#123;</span><br><span class="line">            System.out.<span class="keyword">println</span>(<span class="keyword">file</span>.getAbsolutePath());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// c</span></span><br><span class="line">        <span class="keyword">File</span> f1 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;D:\\å›¾ç‰‡èµ„æº\\beautiful.jpg&quot;</span>);</span><br><span class="line">        <span class="keyword">long</span> time = f1.lastModified(); <span class="comment">// æœ€åä¿®æ”¹æ—¶é—´ï¼</span></span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(sdf.format(time));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–‡ä»¶æœç´¢">æ–‡ä»¶æœç´¢</h4>
<p>é€’å½’å®ç°æ–‡ä»¶æœç´¢ï¼ˆéè§„å¾‹é€’å½’ï¼‰</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ªæ–¹æ³•ç”¨äºåšæœç´¢</li>
<li>è¿›å…¥æ–¹æ³•ä¸­è¿›è¡Œä¸šåŠ¡æœç´¢åˆ†æ</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å»æŸä¸ªç›®å½•ä¸‹æœç´¢æŸä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * @param dir æœç´¢æ–‡ä»¶çš„ç›®å½•ã€‚</span></span><br><span class="line"><span class="comment"> * @param fileName æœç´¢æ–‡ä»¶çš„åç§°ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public static void search<span class="constructor">Files(File <span class="params">dir</span> , String <span class="params">fileName</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥è·¯å¾„ï¼Œæ˜¯å¦æ˜¯æ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="keyword">if</span>(dir.exists<span class="literal">()</span><span class="operator"> &amp;&amp; </span>dir.is<span class="constructor">Directory()</span>)&#123;</span><br><span class="line">        <span class="comment">// 2.æå–å½“å‰ç›®å½•ä¸‹çš„å…¨éƒ¨ä¸€çº§æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">        File files = dir.<span class="built_in">list</span><span class="constructor">Files()</span>;<span class="comment">// å¯èƒ½æ˜¯null/ä¹Ÿå¯èƒ½æ˜¯ç©ºé›†åˆ[]</span></span><br><span class="line">        <span class="comment">// 3.åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€çº§æ–‡ä»¶å¯¹è±¡,åˆ¤æ–­æ˜¯å¦ä¸ä¸ºç©ºç›®å½•</span></span><br><span class="line">        <span class="keyword">if</span>(files != null<span class="operator"> &amp;&amp; </span>files.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// 4.åˆ¤æ–­ä¸€çº§æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">            <span class="keyword">for</span>(File file : files)&#123;</span><br><span class="line">                <span class="comment">// 5.åˆ¤æ–­fileæ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹</span></span><br><span class="line">                <span class="keyword">if</span>(file.is<span class="constructor">File()</span>)&#123;</span><br><span class="line">                    <span class="comment">// 6.åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦ä¸ºæˆ‘è¦æ‰¾çš„æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">                    <span class="keyword">if</span>(f.get<span class="constructor">Name()</span>.contains(fileName))&#123;<span class="comment">//æ¨¡ç³ŠæŸ¥æ‰¾</span></span><br><span class="line">                        sout(f.get<span class="constructor">AbsolutePath()</span>);</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// å¯åŠ¨å®ƒï¼ˆæ‹“å±•ï¼‰</span></span><br><span class="line">                            Runtime r = <span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>;</span><br><span class="line">                            r.exec(f.get<span class="constructor">AbsolutePath()</span>);</span><br><span class="line">                        &#125; catch (IOException e) &#123;</span><br><span class="line">                            e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 7.è¯¥æ–‡ä»¶æ˜¯æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹è¦é€’å½’è¿›å…¥ç»§ç»­å¯»æ‰¾</span></span><br><span class="line">                    search<span class="constructor">Files(<span class="params">file</span>,<span class="params">fileName</span>)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Character">Character</h3>
<p>å­—ç¬¦é›†ï¼šä¸ºå­—ç¬¦ç¼–åˆ¶çš„ä¸€å¥—ç¼–å·è§„åˆ™</p>
<p>è®¡ç®—æœºçš„åº•å±‚æ˜¯ä¸èƒ½ç›´æ¥å­˜å‚¨å­—ç¬¦çš„ï¼Œåªèƒ½å­˜å‚¨äºŒè¿›åˆ¶ 010101</p>
<p>ASCII ç¼–ç ï¼š8 ä¸ªå¼€å…³ä¸€ç»„å°±å¯ä»¥ç¼–ç å­—ç¬¦ï¼Œ1 ä¸ªå­—èŠ‚ 2^8 = 256ï¼Œ ä¸€ä¸ªå­—èŠ‚å­˜å‚¨ä¸€ä¸ªå­—ç¬¦å®Œå…¨å¤Ÿç”¨ï¼Œè‹±æ–‡å’Œæ•°å­—åœ¨åº•å±‚å­˜å‚¨éƒ½æ˜¯é‡‡ç”¨ 1 ä¸ªå­—èŠ‚å­˜å‚¨çš„</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">a</span>  <span class="number">97</span></span><br><span class="line"><span class="attribute">b</span>  <span class="number">98</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">A</span>  <span class="number">65</span></span><br><span class="line"><span class="attribute">B</span>  <span class="number">66</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">0</span>  <span class="number">48</span></span><br><span class="line"><span class="attribute">1</span>  <span class="number">49</span></span><br></pre></td></tr></table></figure>
<p>ä¸­å›½äººï¼šä¸­å›½äººæœ‰ 9 ä¸‡å·¦å³å­—ç¬¦ï¼Œ2 ä¸ªå­—èŠ‚ç¼–ç ä¸€ä¸ªä¸­æ–‡å­—ç¬¦ï¼Œ1 ä¸ªå­—èŠ‚ç¼–ç ä¸€ä¸ªè‹±æ–‡å­—ç¬¦ï¼Œè¿™å¥—ç¼–ç å«ï¼šGBK ç¼–ç ï¼Œå…¼å®¹ ASCII ç¼–ç è¡¨</p>
<p>ç¾å›½äººï¼šæ”¶é›†å…¨çƒæ‰€æœ‰çš„å­—ç¬¦ï¼Œç»Ÿä¸€ç¼–å·ï¼Œè¿™å¥—ç¼–ç å« Unicode ç¼–ç ï¼ˆä¸‡å›½ç ï¼‰ï¼Œä¸€ä¸ªè‹±æ–‡ç­‰äºä¸¤ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡ï¼ˆå«ç¹ä½“ï¼‰ç­‰äºä¸¤ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡æ ‡ç‚¹å ä¸¤ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡æ ‡ç‚¹å ä¸¤ä¸ªå­—èŠ‚</p>
<ul>
<li>UTF-8 æ˜¯å˜ç§å½¢å¼ï¼Œä¹Ÿå¿…é¡»å…¼å®¹ ASCII ç¼–ç è¡¨</li>
<li>UTF-8 ä¸€ä¸ªä¸­æ–‡ä¸€èˆ¬å  3 ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡æ ‡ç‚¹å  3 ä¸ªï¼Œè‹±æ–‡å­—æ¯å’Œæ•°å­— 1 ä¸ªå­—èŠ‚</li>
</ul>
<p>ç¼–ç å‰ä¸ç¼–ç åçš„ç¼–ç é›†å¿…é¡»ä¸€è‡´æ‰ä¸ä¼šä¹±ç </p>
<h3 id="IOStream">IOStream</h3>
<h4 id="æ¦‚è¿°-10">æ¦‚è¿°</h4>
<p>IO è¾“å…¥è¾“å‡ºæµï¼šè¾“å…¥/è¾“å‡ºæµ</p>
<ul>
<li>Inputï¼šè¾“å…¥</li>
<li>Outputï¼šè¾“å‡º</li>
</ul>
<p>å¼•å…¥ï¼šFile ç±»åªèƒ½æ“ä½œæ–‡ä»¶å¯¹è±¡æœ¬èº«ï¼Œä¸èƒ½è¯»å†™æ–‡ä»¶å¯¹è±¡çš„å†…å®¹ï¼Œè¯»å†™æ•°æ®å†…å®¹ï¼Œåº”è¯¥ä½¿ç”¨ IO æµ</p>
<p>IO æµæ˜¯ä¸€ä¸ªæ°´æµæ¨¡å‹ï¼šIO ç†è§£æˆæ°´ç®¡ï¼ŒæŠŠæ•°æ®ç†è§£æˆæ°´æµ</p>
<p>IO æµçš„åˆ†ç±»ï¼š</p>
<ul>
<li>æŒ‰ç…§æµçš„æ–¹å‘åˆ†ä¸ºï¼šè¾“å…¥æµï¼Œè¾“å‡ºæµã€‚
<ul>
<li>è¾“å‡ºæµï¼šä»¥å†…å­˜ä¸ºåŸºå‡†ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®<strong>å†™å‡ºåˆ°ç£ç›˜æ–‡ä»¶</strong>æˆ–è€…ç½‘ç»œä»‹è´¨ä¸­å»çš„æµç§°ä¸ºè¾“å‡ºæµ</li>
<li>è¾“å…¥æµï¼šä»¥å†…å­˜ä¸ºåŸºå‡†ï¼ŒæŠŠç£ç›˜æ–‡ä»¶ä¸­çš„æ•°æ®æˆ–è€…ç½‘ç»œä¸­çš„æ•°æ®<strong>è¯»å…¥åˆ°å†…å­˜</strong>ä¸­çš„æµç§°ä¸ºè¾“å…¥æµ</li>
</ul>
</li>
<li>æŒ‰ç…§æµçš„å†…å®¹åˆ†ä¸ºï¼šå­—èŠ‚æµï¼Œå­—ç¬¦æµ
<ul>
<li>å­—èŠ‚æµï¼šæµä¸­çš„æ•°æ®çš„æœ€å°å•ä½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„å­—èŠ‚ï¼Œè¿™ä¸ªæµå°±æ˜¯å­—èŠ‚æµ</li>
<li>å­—ç¬¦æµï¼šæµä¸­çš„æ•°æ®çš„æœ€å°å•ä½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„å­—ç¬¦ï¼Œè¿™ä¸ªæµå°±æ˜¯å­—ç¬¦æµï¼ˆ<strong>é’ˆå¯¹äºæ–‡æœ¬å†…å®¹</strong>ï¼‰</li>
</ul>
</li>
</ul>
<p>æµå¤§ä½“åˆ†ä¸ºå››å¤§ç±»ï¼šå­—èŠ‚è¾“å…¥æµã€å­—èŠ‚è¾“å‡ºæµã€å­—ç¬¦è¾“å…¥æµã€å­—ç¬¦è¾“å‡ºæµ</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">IO æµçš„ä½“ç³»ï¼š</span><br><span class="line">        å­—èŠ‚æµ                                   å­—ç¬¦æµ</span><br><span class="line">  å­—èŠ‚è¾“å…¥æµ              å­—èŠ‚è¾“å‡ºæµ            å­—ç¬¦è¾“å…¥æµ         å­—ç¬¦è¾“å‡ºæµ</span><br><span class="line">InputStream           OutputStream          Reader            Writer   (æŠ½è±¡ç±»)</span><br><span class="line">FileInputStream       FileOutputStream      FileReader        <span class="built_in">FileWriter</span>(å®ç°ç±»)</span><br><span class="line">BufferedInputStream  BufferedOutputStream  BufferedReader   <span class="built_in">BufferedWriter</span>(å®ç°ç±»ç¼“å†²æµ)</span><br><span class="line">                                           InputStreamReader OutputStreamWriter</span><br><span class="line">ObjectInputStream     ObjectOutputStream</span><br></pre></td></tr></table></figure>
<h4 id="å­—èŠ‚æµ">å­—èŠ‚æµ</h4>
<h5 id="å­—èŠ‚è¾“å…¥">å­—èŠ‚è¾“å…¥</h5>
<p>FileInputStream æ–‡ä»¶å­—èŠ‚è¾“å…¥æµï¼šä»¥å†…å­˜ä¸ºåŸºå‡†ï¼ŒæŠŠç£ç›˜æ–‡ä»¶ä¸­çš„æ•°æ®æŒ‰ç…§å­—èŠ‚çš„å½¢å¼è¯»å…¥åˆ°å†…å­˜ä¸­çš„æµ</p>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li><code>public FileInputStream(File path)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµç®¡é“ä¸æºæ–‡ä»¶å¯¹è±¡æ¥é€š</li>
<li><code>public FileInputStream(String pathName)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµç®¡é“ä¸æ–‡ä»¶è·¯å¾„å¯¹æ¥ï¼Œåº•å±‚å®è´¨ä¸Šåˆ›å»º File å¯¹è±¡</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li><code>public int read()</code>ï¼šæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚è¿”å›ï¼Œè¯»å–å®Œæ¯•ä¼šè¿”å› -1</li>
<li><code>public int read(byte[] buffer)</code>ï¼šä»å­—èŠ‚è¾“å…¥æµä¸­è¯»å–å­—èŠ‚åˆ°å­—èŠ‚æ•°ç»„ä¸­å»ï¼Œè¿”å›è¯»å–çš„å­—èŠ‚æ•°é‡ï¼Œæ²¡æœ‰å­—èŠ‚å¯è¯»è¿”å› -1ï¼Œ<strong>byte ä¸­æ–°è¯»å–çš„æ•°æ®é»˜è®¤æ˜¯è¦†ç›–åŸæ•°æ®</strong>ï¼Œæ„é€  String éœ€è¦è®¾å®šé•¿åº¦</li>
<li><code>public String(byte[] bytes,int offset,int length)</code>ï¼šæ„é€ æ–°çš„ String</li>
<li><code>public long transferTo(OutputStream out)</code>ï¼šä»è¾“å…¥æµä¸­è¯»å–æ‰€æœ‰å­—èŠ‚ï¼Œå¹¶æŒ‰è¯»å–çš„é¡ºåºï¼Œå°†å­—èŠ‚å†™å…¥ç»™å®šçš„è¾“å‡ºæµ</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> FileInputStreamDemo01 &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºæ–‡ä»¶å¯¹è±¡å®šä½dlei01.txt</span></span><br><span class="line">        <span class="keyword">File</span> <span class="keyword">file</span> = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;Demo/src/dlei01.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµç®¡é“ä¸æºæ–‡ä»¶æ¥é€š</span></span><br><span class="line">        InputStream is = <span class="keyword">new</span> FileInputStream(<span class="keyword">file</span>);</span><br><span class="line">        <span class="comment">// 3.è¯»å–ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·è¿”å›ï¼Œè¯»å–å®Œæ¯•è¿”å›-1</span></span><br><span class="line">		<span class="comment">//int code1 = is.read(); // è¯»å–ä¸€æ»´æ°´ï¼Œä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">		<span class="comment">//System.out.println((char)code1);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.ä½¿ç”¨whileè¯»å–å­—èŠ‚æ•°</span></span><br><span class="line">        <span class="comment">// å®šä¹‰ä¸€ä¸ªæ•´æ•°å˜é‡å­˜å‚¨å­—èŠ‚</span></span><br><span class="line">        <span class="keyword">int</span> ch = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">while</span>((ch = is.<span class="keyword">read</span>())!= -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.<span class="keyword">print</span>((<span class="keyword">char</span>) ch);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚è¯»å–è‹±æ–‡å’Œæ•°å­—æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¯»å–ä¸­æ–‡è¾“å‡ºæ— æ³•é¿å…ä¹±ç ï¼Œå› ä¸ºä¼šæˆªæ–­ä¸­æ–‡çš„å­—èŠ‚ã€‚ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„è¯»å–æ•°æ®ï¼Œæ€§èƒ½ä¹Ÿè¾ƒå·®ï¼Œæ‰€ä»¥<strong>ç¦æ­¢ä½¿ç”¨ä¸Šé¢çš„æ–¹æ¡ˆ</strong></p>
<p>é‡‡å–ä¸‹é¢çš„æ–¹æ¡ˆï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> throws Exception </span>&#123;</span><br><span class="line">    <span class="comment">//ç®€åŒ–å†™æ³•ï¼Œåº•å±‚å®è´¨ä¸Šåˆ›å»ºäº†Fileå¯¹è±¡</span></span><br><span class="line">    InputStream is = <span class="keyword">new</span> <span class="built_in">FileInputStream</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="type">byte</span>[<span class="number">3</span>];<span class="comment">//å¼€å‘ä¸­ä½¿ç”¨byte[1024]</span></span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = is.<span class="built_in">read</span>(buffer)) !=<span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="comment">// è¯»å–äº†å¤šå°‘å°±å€’å‡ºå¤šå°‘ï¼</span></span><br><span class="line">        <span class="type">String</span> rs = <span class="keyword">new</span> <span class="built_in">String</span>(buffer, <span class="number">0</span>, len);</span><br><span class="line">        System.out.<span class="built_in">print</span>(rs);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">File</span> f = <span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">InputStream is = <span class="keyword">new</span> <span class="built_in">FileInputStream</span>(f);</span><br><span class="line"><span class="comment">// è¯»å–å…¨éƒ¨çš„</span></span><br><span class="line"><span class="type">byte</span>[] buffer = is.<span class="built_in">readAllBytes</span>();</span><br><span class="line"><span class="type">String</span> rs = <span class="keyword">new</span> <span class="built_in">String</span>(buffer);</span><br><span class="line">System.out.<span class="built_in">println</span>(rs);</span><br></pre></td></tr></table></figure>
<h5 id="å­—èŠ‚è¾“å‡º">å­—èŠ‚è¾“å‡º</h5>
<p>FileOutputStream æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµï¼šä»¥å†…å­˜ä¸ºåŸºå‡†ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®ï¼ŒæŒ‰ç…§å­—èŠ‚çš„å½¢å¼å†™å‡ºåˆ°ç£ç›˜æ–‡ä»¶ä¸­å»</p>
<p>æ„é€ æ–¹æ³•ï¼š</p>
<ul>
<li><code>public FileOutputStream(File file)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµç®¡é“é€šå‘ç›®æ ‡æ–‡ä»¶å¯¹è±¡</li>
<li><code>public FileOutputStream(String file)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµç®¡é“é€šå‘ç›®æ ‡æ–‡ä»¶è·¯å¾„</li>
<li><code>public FileOutputStream(File file, boolean append)</code> : åˆ›å»ºä¸€ä¸ªè¿½åŠ æ•°æ®çš„å­—èŠ‚è¾“å‡ºæµç®¡é“åˆ°ç›®æ ‡æ–‡ä»¶å¯¹è±¡</li>
<li><code>public FileOutputStream(String file, boolean append)</code> : åˆ›å»ºä¸€ä¸ªè¿½åŠ æ•°æ®çš„å­—èŠ‚è¾“å‡ºæµç®¡é“é€šå‘ç›®æ ‡æ–‡ä»¶è·¯å¾„</li>
</ul>
<p>APIï¼š</p>
<ul>
<li><code>public void write(int a)</code>ï¼šå†™ä¸€ä¸ªå­—èŠ‚å‡ºå»</li>
<li><code>public void write(byte[] buffer)</code>ï¼šå†™ä¸€ä¸ªå­—èŠ‚æ•°ç»„å‡ºå»</li>
<li><code>public void write(byte[] buffer , int pos , int len)</code>ï¼šå†™ä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„ä¸€éƒ¨åˆ†å‡ºå»ï¼Œä» pos ä½ç½®ï¼Œå†™å‡º len é•¿åº¦</li>
<li>FileOutputStream å­—èŠ‚è¾“å‡ºæµæ¯æ¬¡å¯åŠ¨å†™æ•°æ®çš„æ—¶å€™éƒ½ä¼šå…ˆæ¸…ç©ºä¹‹å‰çš„å…¨éƒ¨æ•°æ®ï¼Œé‡æ–°å†™å…¥ï¼š
<ul>
<li><code>OutputStream os = new FileOutputStream(&quot;Demo/out05&quot;)</code>ï¼šè¦†ç›–æ•°æ®ç®¡é“</li>
<li><code>OutputStream os = new FileOutputStream(&quot;Demo/out05&quot; , true)</code>ï¼šè¿½åŠ æ•°æ®çš„ç®¡é“</li>
</ul>
</li>
</ul>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>å­—èŠ‚è¾“å‡ºæµåªèƒ½å†™å­—èŠ‚å‡ºå»ï¼Œå­—èŠ‚è¾“å‡ºæµé»˜è®¤æ˜¯<strong>è¦†ç›–</strong>æ•°æ®ç®¡é“</li>
<li>æ¢è¡Œç”¨ï¼š<strong>os.write(â€œ\r\nâ€.getBytes())</strong></li>
<li>å…³é—­å’Œåˆ·æ–°ï¼šåˆ·æ–°æµå¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œå…³é—­åŒ…å«åˆ·æ–°æ•°æ®ä½†æ˜¯æµå°±ä¸èƒ½ä½¿ç”¨äº†</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">OutputStream <span class="built_in">os</span> = new FileOutputStream(<span class="string">&quot;Demo/out05&quot;</span>);</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">write</span>(<span class="number">97</span>);//a</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">write</span>(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">write</span>(<span class="string">&quot;\r\n&quot;</span>.getBytes());</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">write</span>(<span class="string">&quot;æˆ‘çˆ±Java&quot;</span>.getBytes());</span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">close</span>();</span><br></pre></td></tr></table></figure>
<h5 id="æ–‡ä»¶å¤åˆ¶">æ–‡ä»¶å¤åˆ¶</h5>
<p>å­—èŠ‚æ˜¯è®¡ç®—æœºä¸­ä¸€åˆ‡æ–‡ä»¶çš„ç»„æˆï¼Œæ‰€ä»¥å­—èŠ‚æµé€‚åˆåšä¸€åˆ‡æ–‡ä»¶çš„å¤åˆ¶</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CopyDemo01</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        InputStream <span class="keyword">is</span> = <span class="literal">null</span> ;</span><br><span class="line">        OutputStream os = <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµç®¡é“ä¸æºæ–‡ä»¶æ¥é€šã€‚</span></span><br><span class="line">            <span class="keyword">is</span> = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;D:\\seazean\\å›¾ç‰‡èµ„æº\\test.jpg&quot;</span>);</span><br><span class="line">            <span class="comment">//ï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµä¸ç›®æ ‡æ–‡ä»¶æ¥é€šã€‚</span></span><br><span class="line">            os = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;D:\\seazean\\test.jpg&quot;</span>);</span><br><span class="line">            <span class="comment">//ï¼ˆ3ï¼‰åˆ›å»ºä¸€ä¸ªå­—èŠ‚æ•°ç»„ä½œä¸ºæ¡¶</span></span><br><span class="line">            <span class="built_in">byte</span> buffer = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="comment">//ï¼ˆ4ï¼‰ä»å­—èŠ‚è¾“å…¥æµç®¡é“ä¸­è¯»å–æ•°æ®ï¼Œå†™å‡ºåˆ°å­—èŠ‚è¾“å‡ºæµç®¡é“å³å¯</span></span><br><span class="line">            <span class="built_in">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((len = <span class="keyword">is</span>.read(buffer)) != <span class="number">-1</span>)&#123;</span><br><span class="line">                os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;å¤åˆ¶å®Œæˆï¼&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">/**ï¼ˆ5ï¼‰å…³é—­èµ„æºï¼ */</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(os!=<span class="literal">null</span>)os.close();</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">is</span>!=<span class="literal">null</span>)<span class="keyword">is</span>.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å­—ç¬¦æµ">å­—ç¬¦æµ</h4>
<h5 id="å­—ç¬¦è¾“å…¥">å­—ç¬¦è¾“å…¥</h5>
<p>FileReaderï¼šæ–‡ä»¶å­—ç¬¦è¾“å…¥æµï¼Œä»¥å†…å­˜ä¸ºåŸºå‡†ï¼ŒæŠŠç£ç›˜æ–‡ä»¶çš„æ•°æ®ä»¥å­—ç¬¦çš„å½¢å¼è¯»å…¥åˆ°å†…å­˜ï¼Œè¯»å–æ–‡æœ¬æ–‡ä»¶å†…å®¹åˆ°å†…å­˜ä¸­å»</p>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public FileReader(File file)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—ç¬¦è¾“å…¥æµä¸æºæ–‡ä»¶å¯¹è±¡æ¥é€šã€‚</li>
<li><code>public FileReader(String filePath)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—ç¬¦è¾“å…¥æµä¸æºæ–‡ä»¶è·¯å¾„æ¥é€šã€‚</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li><code>public int read()</code>ï¼šè¯»å–ä¸€ä¸ªå­—ç¬¦çš„ç¼–å·è¿”å›ï¼Œè¯»å–å®Œæ¯•è¿”å› -1</li>
<li><code>public int read(char[] buffer)</code>ï¼šè¯»å–ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œè¯»å–å¤šå°‘ä¸ªå°±è¿”å›å¤šå°‘ä¸ªï¼Œè¯»å–å®Œæ¯•è¿”å› -1</li>
</ul>
<p>ç»“è®ºï¼š</p>
<ul>
<li>å­—ç¬¦æµä¸€ä¸ªä¸€ä¸ªå­—ç¬¦çš„è¯»å–æ–‡æœ¬å†…å®¹è¾“å‡ºï¼Œå¯ä»¥è§£å†³ä¸­æ–‡è¯»å–è¾“å‡ºä¹±ç çš„é—®é¢˜ï¼Œé€‚åˆæ“ä½œæ–‡æœ¬æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦çš„è¯»å–æ–‡æœ¬å†…å®¹æ€§èƒ½è¾ƒå·®</li>
<li>å­—ç¬¦æµæŒ‰ç…§<strong>å­—ç¬¦æ•°ç»„å¾ªç¯è¯»å–æ•°æ®</strong>ï¼Œå¯ä»¥è§£å†³ä¸­æ–‡è¯»å–è¾“å‡ºä¹±ç çš„é—®é¢˜ï¼Œè€Œä¸”æ€§èƒ½ä¹Ÿè¾ƒå¥½</li>
</ul>
<p><strong>å­—ç¬¦æµä¸èƒ½å¤åˆ¶å›¾ç‰‡ï¼Œè§†é¢‘ç­‰ç±»å‹çš„æ–‡ä»¶</strong>ã€‚å­—ç¬¦æµåœ¨è¯»å–å®Œäº†å­—èŠ‚æ•°æ®åå¹¶æ²¡æœ‰ç›´æ¥å¾€ç›®çš„åœ°å†™ï¼Œè€Œæ˜¯å…ˆæŸ¥ç¼–ç è¡¨ï¼ŒæŸ¥åˆ°å¯¹åº”çš„æ•°æ®å°±å°†è¯¥æ•°æ®å†™å…¥ç›®çš„åœ°ã€‚å¦‚æœæŸ¥ä¸åˆ°ï¼Œåˆ™ç è¡¨ä¼šå°†ä¸€äº›æœªçŸ¥åŒºåŸŸä¸­çš„æ•°æ®å» map è¿™äº›å­—èŠ‚æ•°æ®ï¼Œç„¶åå†™åˆ°ç›®çš„åœ°ï¼Œè¿™æ ·çš„è¯å°±é€ æˆäº†æºæ•°æ®å’Œç›®çš„æ•°æ®çš„ä¸ä¸€è‡´ã€‚</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReaderDemo01</span>&#123;<span class="comment">//å­—ç¬¦</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> throws Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå­—ç¬¦è¾“å…¥æµç®¡é“ä¸æºæ–‡ä»¶è·¯å¾„æ¥é€š</span></span><br><span class="line">        Reader fr = <span class="keyword">new</span> <span class="built_in">FileReader</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">        <span class="type">int</span> ch;</span><br><span class="line">        <span class="keyword">while</span>((ch = fr.<span class="built_in">read</span>()) != <span class="number">-1</span>)&#123;</span><br><span class="line">            System.out.<span class="built_in">print</span>((<span class="type">char</span>)ch);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReaderDemo02</span> &#123;<span class="comment">//å­—ç¬¦æ•°ç»„</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> throws Exception </span>&#123;</span><br><span class="line">        Reader fr = <span class="keyword">new</span> <span class="built_in">FileReader</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">char</span>[] buffer = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fr.<span class="built_in">read</span>(buffer)) != <span class="number">-1</span>) &#123;</span><br><span class="line">            System.out.<span class="built_in">print</span>(<span class="keyword">new</span> <span class="built_in">String</span>(buffer, <span class="number">0</span> , len));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å­—ç¬¦è¾“å‡º">å­—ç¬¦è¾“å‡º</h5>
<p>FileWriterï¼šæ–‡ä»¶å­—ç¬¦è¾“å‡ºæµï¼Œä»¥å†…å­˜ä¸ºåŸºå‡†ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®æŒ‰ç…§å­—ç¬¦çš„å½¢å¼å†™å‡ºåˆ°ç£ç›˜æ–‡ä»¶ä¸­å»</p>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public FileWriter(File file)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—ç¬¦è¾“å‡ºæµç®¡é“é€šå‘ç›®æ ‡æ–‡ä»¶å¯¹è±¡ï¼ˆè¦†ç›–æ•°æ®ç®¡é“ï¼‰</li>
<li><code>public FileWriter(String filePath)</code>ï¼šåˆ›å»ºä¸€ä¸ªå­—ç¬¦è¾“å‡ºæµç®¡é“é€šå‘ç›®æ ‡æ–‡ä»¶è·¯å¾„</li>
<li><code>public FileWriter(File file, boolean append)</code>ï¼šåˆ›å»ºä¸€ä¸ªè¿½åŠ æ•°æ®çš„å­—ç¬¦è¾“å‡ºæµç®¡é“é€šå‘æ–‡ä»¶å¯¹è±¡ï¼ˆè¿½åŠ æ•°æ®ç®¡é“ï¼‰</li>
<li><code>public FileWriter(String filePath, boolean append)</code>ï¼šåˆ›å»ºä¸€ä¸ªè¿½åŠ æ•°æ®çš„å­—ç¬¦è¾“å‡ºæµç®¡é“é€šå‘ç›®æ ‡æ–‡ä»¶è·¯å¾„</li>
</ul>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li><code>public void write(int c)</code>ï¼šå†™ä¸€ä¸ªå­—ç¬¦å‡ºå»</li>
<li><code>public void write(char[] buffer)</code>ï¼šå†™ä¸€ä¸ªå­—ç¬¦æ•°ç»„å‡ºå»</li>
<li><code>public void write(String c, int pos, int len)</code>ï¼šå†™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‡ºå»</li>
<li><code>public void write(char[] buffer, int pos, int len)</code>ï¼šå†™å­—ç¬¦æ•°ç»„çš„ä¸€éƒ¨åˆ†å‡ºå»</li>
<li><code>fw.write(&quot;\r\n&quot;)</code>ï¼šæ¢è¡Œ</li>
</ul>
<p>è¯»å†™å­—ç¬¦æ–‡ä»¶æ•°æ®å»ºè®®ä½¿ç”¨å­—ç¬¦æµ</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Writer fw = <span class="keyword">new</span> FileWriter(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">fw.<span class="keyword">write</span>(<span class="number">97</span>);   <span class="comment">// å­—ç¬¦a</span></span><br><span class="line">fw.<span class="keyword">write</span>(<span class="string">&#x27;b&#x27;</span>);  <span class="comment">// å­—ç¬¦b</span></span><br><span class="line">fw.<span class="keyword">write</span>(<span class="string">&quot;Javaæ˜¯æœ€ä¼˜ç¾çš„è¯­è¨€ï¼&quot;</span>);</span><br><span class="line">fw.<span class="keyword">write</span>(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">fw.close;</span><br></pre></td></tr></table></figure>
<h4 id="ç¼“å†²æµ">ç¼“å†²æµ</h4>
<h5 id="åŸºæœ¬ä»‹ç»-16">åŸºæœ¬ä»‹ç»</h5>
<p>ç¼“å†²æµå¯ä»¥æé«˜å­—èŠ‚æµå’Œå­—ç¬¦æµçš„è¯»å†™æ•°æ®çš„æ€§èƒ½</p>
<p>ç¼“å†²æµåˆ†ä¸ºå››ç±»ï¼š</p>
<ul>
<li>BufferedInputStreamï¼šå­—èŠ‚ç¼“å†²è¾“å…¥æµï¼Œå¯ä»¥æé«˜å­—èŠ‚è¾“å…¥æµè¯»æ•°æ®çš„æ€§èƒ½</li>
<li>BufferedOutStreamï¼šå­—èŠ‚ç¼“å†²è¾“å‡ºæµï¼Œå¯ä»¥æé«˜å­—èŠ‚è¾“å‡ºæµå†™æ•°æ®çš„æ€§èƒ½</li>
<li>BufferedReaderï¼šå­—ç¬¦ç¼“å†²è¾“å…¥æµï¼Œå¯ä»¥æé«˜å­—ç¬¦è¾“å…¥æµè¯»æ•°æ®çš„æ€§èƒ½</li>
<li>BufferedWriterï¼šå­—ç¬¦ç¼“å†²è¾“å‡ºæµï¼Œå¯ä»¥æé«˜å­—ç¬¦è¾“å‡ºæµå†™æ•°æ®çš„æ€§èƒ½</li>
</ul>
<h5 id="å­—èŠ‚ç¼“å†²è¾“å…¥">å­—èŠ‚ç¼“å†²è¾“å…¥</h5>
<p>å­—èŠ‚ç¼“å†²è¾“å…¥æµï¼šBufferedInputStream</p>
<p>ä½œç”¨ï¼šå¯ä»¥æŠŠä½çº§çš„å­—èŠ‚è¾“å…¥æµåŒ…è£…æˆä¸€ä¸ªé«˜çº§çš„ç¼“å†²å­—èŠ‚è¾“å…¥æµç®¡é“ï¼Œæé«˜å­—èŠ‚è¾“å…¥æµè¯»æ•°æ®çš„æ€§èƒ½</p>
<p>æ„é€ å™¨ï¼š<code>public BufferedInputStream(InputStream in)</code></p>
<p>åŸç†ï¼šç¼“å†²å­—èŠ‚è¾“å…¥æµç®¡é“è‡ªå¸¦äº†ä¸€ä¸ª 8KB çš„ç¼“å†²æ± ï¼Œæ¯æ¬¡å¯ä»¥ç›´æ¥å€Ÿç”¨æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æœ€å¤šæå– 8KB çš„æ•°æ®åˆ°ç¼“å†²æ± ä¸­å»ï¼Œä»¥åæˆ‘ä»¬ç›´æ¥ä»ç¼“å†²æ± è¯»å–æ•°æ®ï¼Œæ‰€ä»¥æ€§èƒ½è¾ƒå¥½</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BufferedInputStreamDemo01</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> throws Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1.å®šä¹‰ä¸€ä¸ªä½çº§çš„å­—èŠ‚è¾“å…¥æµä¸æºæ–‡ä»¶æ¥é€š</span></span><br><span class="line">        InputStream is = <span class="keyword">new</span> <span class="built_in">FileInputStream</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.æŠŠä½çº§çš„å­—èŠ‚è¾“å…¥æµåŒ…è£…æˆä¸€ä¸ªé«˜çº§çš„ç¼“å†²å­—èŠ‚è¾“å…¥æµã€‚</span></span><br><span class="line">        BufferInputStream bis = <span class="keyword">new</span> <span class="built_in">BufferInputStream</span>(is);</span><br><span class="line">        <span class="comment">// 3.å®šä¹‰ä¸€ä¸ªå­—èŠ‚æ•°ç»„æŒ‰ç…§å¾ªç¯è¯»å–ã€‚</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="type">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = bis.<span class="built_in">read</span>(buffer)) != <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="type">String</span> rs = <span class="keyword">new</span> <span class="built_in">String</span>(buffer, <span class="number">0</span> , len);</span><br><span class="line">            System.out.<span class="built_in">print</span>(rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å­—èŠ‚ç¼“å†²è¾“å‡º">å­—èŠ‚ç¼“å†²è¾“å‡º</h5>
<p>å­—èŠ‚ç¼“å†²è¾“å‡ºæµï¼šBufferedOutputStream</p>
<p>ä½œç”¨ï¼šå¯ä»¥æŠŠä½çº§çš„å­—èŠ‚è¾“å‡ºæµåŒ…è£…æˆä¸€ä¸ªé«˜çº§çš„ç¼“å†²å­—èŠ‚è¾“å‡ºæµï¼Œä»è€Œæé«˜å†™æ•°æ®çš„æ€§èƒ½</p>
<p>æ„é€ å™¨ï¼š<code>public BufferedOutputStream(OutputStream os)</code></p>
<p>åŸç†ï¼šç¼“å†²å­—èŠ‚è¾“å‡ºæµè‡ªå¸¦äº† 8KB ç¼“å†²æ± ,æ•°æ®å°±ç›´æ¥å†™å…¥åˆ°ç¼“å†²æ± ä¸­å»ï¼Œæ€§èƒ½æé«˜äº†</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> BufferedOutputStreamDemo02 &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1.å†™ä¸€ä¸ªåŸå§‹çš„å­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        OutputStream os = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.æŠŠä½çº§çš„å­—èŠ‚è¾“å‡ºæµåŒ…è£…æˆä¸€ä¸ªé«˜çº§çš„ç¼“å†²å­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        BufferedOutputStream bos =  <span class="keyword">new</span> BufferedOutputStream(os);</span><br><span class="line">        <span class="comment">// 3.å†™æ•°æ®å‡ºå»</span></span><br><span class="line">        bos.<span class="keyword">write</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">        bos.<span class="keyword">write</span>(<span class="number">100</span>);</span><br><span class="line">        bos.<span class="keyword">write</span>(<span class="string">&quot;æˆ‘çˆ±ä¸­å›½&quot;</span>.getBytes());</span><br><span class="line">        bos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å­—èŠ‚æµæ€§èƒ½">å­—èŠ‚æµæ€§èƒ½</h5>
<p>åˆ©ç”¨å­—èŠ‚æµçš„å¤åˆ¶ç»Ÿè®¡å„ç§å†™æ³•å½¢å¼ä¸‹ç¼“å†²æµçš„æ€§èƒ½æ‰§è¡Œæƒ…å†µ</p>
<p>å¤åˆ¶æµï¼š</p>
<ul>
<li>ä½¿ç”¨ä½çº§çš„å­—èŠ‚æµæŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„å½¢å¼å¤åˆ¶æ–‡ä»¶</li>
<li>ä½¿ç”¨ä½çº§çš„å­—èŠ‚æµæŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„å½¢å¼å¤åˆ¶æ–‡ä»¶</li>
<li>ä½¿ç”¨é«˜çº§çš„ç¼“å†²å­—èŠ‚æµæŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„å½¢å¼å¤åˆ¶æ–‡ä»¶</li>
<li>ä½¿ç”¨é«˜çº§çš„ç¼“å†²å­—èŠ‚æµæŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„å½¢å¼å¤åˆ¶æ–‡ä»¶</li>
</ul>
<p>é«˜çº§çš„ç¼“å†²å­—èŠ‚æµæŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„å½¢å¼å¤åˆ¶æ–‡ä»¶ï¼Œæ€§èƒ½æœ€é«˜ï¼Œå»ºè®®ä½¿ç”¨</p>
<h5 id="å­—ç¬¦ç¼“å†²è¾“å…¥">å­—ç¬¦ç¼“å†²è¾“å…¥</h5>
<p>å­—ç¬¦ç¼“å†²è¾“å…¥æµï¼šBufferedReader</p>
<p>ä½œç”¨ï¼šå­—ç¬¦ç¼“å†²è¾“å…¥æµæŠŠå­—ç¬¦è¾“å…¥æµåŒ…è£…æˆé«˜çº§çš„ç¼“å†²å­—ç¬¦è¾“å…¥æµï¼Œå¯ä»¥æé«˜å­—ç¬¦è¾“å…¥æµè¯»æ•°æ®çš„æ€§èƒ½ã€‚</p>
<p>æ„é€ å™¨ï¼š<code>public BufferedReader(Reader reader)</code></p>
<p>åŸç†ï¼šç¼“å†²å­—ç¬¦è¾“å…¥æµé»˜è®¤ä¼šæœ‰ä¸€ä¸ª 8K çš„å­—ç¬¦ç¼“å†²æ± ,å¯ä»¥æé«˜è¯»å­—ç¬¦çš„æ€§èƒ½</p>
<p>æŒ‰ç…§è¡Œè¯»å–æ•°æ®çš„åŠŸèƒ½ï¼š<code>public String readLine()</code>  è¯»å–ä¸€è¡Œæ•°æ®è¿”å›ï¼Œè¯»å–å®Œæ¯•è¿”å› null</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws <span class="keyword">Exception</span> &#123;</span><br><span class="line">    // <span class="number">1.</span>å®šä¹‰ä¸€ä¸ªåŸå§‹çš„å­—ç¬¦è¾“å…¥æµè¯»å–æºæ–‡ä»¶</span><br><span class="line">    Reader fr = <span class="built_in">new</span> FileReader(&quot;Demo/src/test.txt&quot;);</span><br><span class="line">    // <span class="number">2.</span>æŠŠä½çº§çš„å­—ç¬¦è¾“å…¥æµç®¡é“åŒ…è£…æˆä¸€ä¸ªé«˜çº§çš„ç¼“å†²å­—ç¬¦è¾“å…¥æµç®¡é“</span><br><span class="line">    BufferedReader br = <span class="built_in">new</span> BufferedReader(fr);</span><br><span class="line">    // å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡å­˜å‚¨æ¯è¡Œæ•°æ®</span><br><span class="line">    String <span class="type">line</span>;</span><br><span class="line">    <span class="keyword">while</span>((<span class="type">line</span> = br.readLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="type">line</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    br.<span class="keyword">close</span>();</span><br><span class="line">    //æ·˜æ±°æ•°ç»„å¾ªç¯è¯»å–</span><br><span class="line">    //<span class="type">char</span>[] buffer = <span class="built_in">new</span> <span class="type">char</span>[<span class="number">1024</span>];</span><br><span class="line">    //<span class="type">int</span> len;</span><br><span class="line">    //<span class="keyword">while</span>((len = br.<span class="keyword">read</span>(buffer)) != <span class="number">-1</span>)&#123;</span><br><span class="line">    //<span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="built_in">new</span> String(buffer , <span class="number">0</span> , len));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å­—ç¬¦ç¼“å†²è¾“å‡º">å­—ç¬¦ç¼“å†²è¾“å‡º</h5>
<p>ç¬¦ç¼“å†²è¾“å‡ºæµï¼šBufferedWriter</p>
<p>ä½œç”¨ï¼šæŠŠä½çº§çš„å­—ç¬¦è¾“å‡ºæµåŒ…è£…æˆä¸€ä¸ªé«˜çº§çš„ç¼“å†²å­—ç¬¦è¾“å‡ºæµï¼Œæé«˜å†™å­—ç¬¦æ•°æ®çš„æ€§èƒ½ã€‚</p>
<p>æ„é€ å™¨ï¼š<code>public BufferedWriter(Writer writer)</code></p>
<p>åŸç†ï¼šé«˜çº§çš„å­—ç¬¦ç¼“å†²è¾“å‡ºæµå¤šäº†ä¸€ä¸ª 8K çš„å­—ç¬¦ç¼“å†²æ± ï¼Œå†™æ•°æ®æ€§èƒ½æå¤§æé«˜äº†</p>
<p>å­—ç¬¦ç¼“å†²è¾“å‡ºæµå¤šäº†ä¸€ä¸ªæ¢è¡Œçš„ç‰¹æœ‰åŠŸèƒ½ï¼š<code>public void newLine()</code>  <strong>æ–°å»ºä¸€è¡Œ</strong></p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">    Writer fw = <span class="keyword">new</span> <span class="type">FileWriter</span>(<span class="string">&quot;Demo/src/test.txt&quot;</span>,<span class="literal">true</span>);<span class="comment">//è¿½åŠ </span></span><br><span class="line">    BufferedWriter bw = <span class="keyword">new</span> <span class="type">BufferedWriter</span>(fw);</span><br><span class="line">    </span><br><span class="line">    bw.write(<span class="string">&quot;æˆ‘çˆ±å­¦ä¹ Java&quot;</span>);</span><br><span class="line">    bw.<span class="keyword">new</span><span class="type">Line</span>();<span class="comment">//æ¢è¡Œ</span></span><br><span class="line">    bw.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="é«˜æ•ˆåŸå› ">é«˜æ•ˆåŸå› </h5>
<p>å­—ç¬¦å‹ç¼“å†²æµé«˜æ•ˆçš„åŸå› ï¼šï¼ˆç©ºé—´æ¢æ—¶é—´ï¼‰</p>
<ul>
<li>BufferedReaderï¼šæ¯æ¬¡è°ƒç”¨ read æ–¹æ³•ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä»ç£ç›˜ä¸­è¯»å–äº† 8192ï¼ˆ<strong>8k</strong>ï¼‰ä¸ªå­—ç¬¦ï¼Œå­˜å‚¨åˆ°è¯¥ç±»å‹å¯¹è±¡çš„ç¼“å†²åŒºæ•°ç»„ä¸­ï¼Œå°†å…¶ä¸­ä¸€ä¸ªè¿”å›ç»™è°ƒç”¨è€…ï¼Œå†æ¬¡è°ƒç”¨ read æ–¹æ³•æ—¶ï¼Œå°±ä¸éœ€è¦è®¿é—®ç£ç›˜ï¼Œç›´æ¥ä»ç¼“å†²åŒºä¸­æ‹¿å‡ºä¸€ä¸ªæ•°æ®å³å¯ï¼Œæå‡äº†æ•ˆç‡</li>
<li>BufferedWriterï¼šæ¯æ¬¡è°ƒç”¨ write æ–¹æ³•ï¼Œä¸ä¼šç›´æ¥å°†å­—ç¬¦åˆ·æ–°åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å­˜å‚¨åˆ°å­—ç¬¦æ•°ç»„ä¸­ï¼Œç­‰å­—ç¬¦æ•°ç»„å†™æ»¡äº†ï¼Œæ‰ä¸€æ¬¡æ€§åˆ·æ–°åˆ°æ–‡ä»¶ä¸­ï¼Œå‡å°‘äº†å’Œç£ç›˜äº¤äº’çš„æ¬¡æ•°ï¼Œæå‡äº†æ•ˆç‡</li>
</ul>
<p>å­—èŠ‚å‹ç¼“å†²æµé«˜æ•ˆçš„åŸå› ï¼š</p>
<ul>
<li>BufferedInputStreamï¼šåœ¨è¯¥ç±»å‹ä¸­å‡†å¤‡äº†ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨å­—èŠ‚ä¿¡æ¯ï¼Œå½“å¤–ç•Œè°ƒç”¨ read() æ–¹æ³•æƒ³è·å–ä¸€ä¸ªå­—èŠ‚çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ä»æ–‡ä»¶ä¸­ä¸€æ¬¡æ€§è¯»å–äº† 8192 ä¸ªå­—èŠ‚åˆ°æ•°ç»„ä¸­ï¼Œåªè¿”å›äº†ç¬¬ä¸€ä¸ªå­—èŠ‚ç»™è°ƒç”¨è€…ã€‚å°†æ¥è°ƒç”¨è€…å†æ¬¡è°ƒç”¨ read æ–¹æ³•æ—¶ï¼Œå½“å‰å¯¹è±¡å°±ä¸éœ€è¦å†æ¬¡è®¿é—®ç£ç›˜ï¼Œåªéœ€è¦ä»æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªå­—èŠ‚è¿”å›ç»™è°ƒç”¨è€…å³å¯ï¼Œç”±äºè¯»å–çš„æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥é€Ÿåº¦éå¸¸å¿«ã€‚å½“ 8192 ä¸ªå­—èŠ‚å…¨éƒ½è¯»å–å®Œæˆä¹‹åï¼Œå†éœ€è¦è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œå°±å¾—è®©è¯¥å¯¹è±¡åˆ°æ–‡ä»¶ä¸­è¯»å–ä¸‹ä¸€ä¸ª 8192 ä¸ªå­—èŠ‚</li>
<li>BufferedOutputStreamï¼šåœ¨è¯¥ç±»å‹ä¸­å‡†å¤‡äº†ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨å­—èŠ‚ä¿¡æ¯ï¼Œå½“å¤–ç•Œè°ƒç”¨ write æ–¹æ³•æƒ³å†™å‡ºä¸€ä¸ªå­—èŠ‚çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ç›´æ¥å°†è¿™ä¸ªå­—èŠ‚å­˜å‚¨åˆ°äº†è‡ªå·±çš„æ•°ç»„ä¸­ï¼Œè€Œä¸åˆ·æ–°åˆ°æ–‡ä»¶ä¸­ã€‚ä¸€ç›´åˆ°è¯¥æ•°ç»„æ‰€æœ‰ 8192 ä¸ªä½ç½®å…¨éƒ½å æ»¡ï¼Œè¯¥å¯¹è±¡æ‰æŠŠè¿™ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰æ•°æ®ä¸€æ¬¡æ€§å†™å‡ºåˆ°ç›®æ ‡æ–‡ä»¶ä¸­ã€‚å¦‚æœæœ€åä¸€æ¬¡å¾ªç¯æ²¡æœ‰å°†æ•°ç»„å†™æ»¡ï¼Œæœ€ç»ˆåœ¨å…³é—­æµå¯¹è±¡çš„æ—¶å€™ï¼Œä¹Ÿä¼šå°†è¯¥æ•°ç»„ä¸­çš„æ•°æ®åˆ·æ–°åˆ°æ–‡ä»¶ä¸­ã€‚</li>
</ul>
<p>æ³¨æ„ï¼š<strong>å­—èŠ‚æµå’Œå­—ç¬¦æµï¼Œéƒ½æ˜¯è£…æ»¡æ—¶è‡ªåŠ¨å†™å‡ºï¼Œæˆ–è€…æ²¡æ»¡æ—¶æ‰‹åŠ¨ flush å†™å‡ºï¼Œæˆ– close æ—¶åˆ·æ–°å†™å‡º</strong></p>
<h4 id="è½¬æ¢æµ">è½¬æ¢æµ</h4>
<h5 id="ä¹±ç é—®é¢˜">ä¹±ç é—®é¢˜</h5>
<p>å­—ç¬¦æµè¯»å–ï¼š</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä»£ç ç¼–ç             æ–‡ä»¶ç¼–ç          ä¸­æ–‡æƒ…å†µã€‚</span><br><span class="line">UTF-<span class="number">8</span>              UTF-<span class="number">8</span>           ä¸ä¹±ç !</span><br><span class="line">GBK                GBK             ä¸ä¹±ç !</span><br><span class="line">UTF-<span class="number">8</span>              GBK             ä¹±ç !</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœä»£ç ç¼–ç å’Œè¯»å–çš„æ–‡ä»¶ç¼–ç ä¸€è‡´ï¼Œå­—ç¬¦æµè¯»å–çš„æ—¶å€™ä¸ä¼šä¹±ç </li>
<li>å¦‚æœä»£ç ç¼–ç å’Œè¯»å–çš„æ–‡ä»¶ç¼–ç ä¸ä¸€è‡´ï¼Œå­—ç¬¦æµè¯»å–çš„æ—¶å€™ä¼šä¹±ç </li>
</ul>
<h5 id="å­—ç¬¦è¾“å…¥-2">å­—ç¬¦è¾“å…¥</h5>
<p>å­—ç¬¦è¾“å…¥è½¬æ¢æµï¼šInputStreamReader</p>
<p>ä½œç”¨ï¼šè§£å†³å­—ç¬¦æµè¯»å–ä¸åŒç¼–ç çš„ä¹±ç é—®é¢˜ï¼ŒæŠŠåŸå§‹çš„<strong>å­—èŠ‚æµ</strong>æŒ‰ç…§é»˜è®¤çš„ç¼–ç æˆ–æŒ‡å®šçš„ç¼–ç <strong>è½¬æ¢æˆå­—ç¬¦è¾“å…¥æµ</strong></p>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public InputStreamReader(InputStream is)</code>ï¼šä½¿ç”¨å½“å‰ä»£ç é»˜è®¤ç¼–ç  UTF-8 è½¬æ¢æˆå­—ç¬¦æµ</li>
<li><code>public InputStreamReader(InputStream is, String charset)</code>ï¼šæŒ‡å®šç¼–ç æŠŠå­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ</li>
</ul>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputStreamReaderDemo</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span>(<span class="built_in">String</span>[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1.æå–GBKæ–‡ä»¶çš„åŸå§‹å­—èŠ‚æµ</span></span><br><span class="line">        InputStream is = <span class="keyword">new </span><span class="class title_">FileInputStream</span>(<span class="string">&quot;D:\\seazean\\Netty.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.æŠŠåŸå§‹å­—èŠ‚è¾“å…¥æµé€šè¿‡è½¬æ¢æµï¼Œè½¬æ¢æˆ å­—ç¬¦è¾“å…¥è½¬æ¢æµInputStreamReader</span></span><br><span class="line">        InputStreamReader isr = <span class="keyword">new </span><span class="class title_">InputStreamReader</span>(is, <span class="string">&quot;GBK&quot;</span>); </span><br><span class="line">        <span class="comment">// 3.åŒ…è£…æˆç¼“å†²æµ</span></span><br><span class="line">        <span class="built_in">BufferedReader</span> br = <span class="keyword">new </span><span class="class title_">BufferedReader</span>(isr);</span><br><span class="line">        <span class="comment">//å¾ªç¯è¯»å–</span></span><br><span class="line">        <span class="built_in">String</span> <span class="built_in">line</span>;</span><br><span class="line">        <span class="keyword">while</span>((<span class="built_in">line</span> = br.<span class="property">readLine</span>()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.<span class="property">out</span>.<span class="property">println</span>(<span class="built_in">line</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å­—ç¬¦è¾“å‡º-2">å­—ç¬¦è¾“å‡º</h5>
<p>å­—ç¬¦è¾“å‡ºè½¬æ¢æµï¼šOutputStreamWriter</p>
<p>ä½œç”¨ï¼šå¯ä»¥æŒ‡å®šç¼–ç <strong>æŠŠå­—èŠ‚è¾“å‡ºæµè½¬æ¢æˆå­—ç¬¦è¾“å‡ºæµ</strong>ï¼Œå¯ä»¥æŒ‡å®šå†™å‡ºå»çš„å­—ç¬¦çš„ç¼–ç </p>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public OutputStreamWriter(OutputStream os)</code>ï¼šç”¨é»˜è®¤ç¼–ç  UTF-8 æŠŠå­—èŠ‚è¾“å‡ºæµè½¬æ¢æˆå­—ç¬¦è¾“å‡ºæµ</li>
<li><code>public OutputStreamWriter(OutputStream os, String charset)</code>ï¼šæŒ‡å®šç¼–ç æŠŠå­—èŠ‚è¾“å‡ºæµè½¬æ¢æˆ</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OutputStream os = <span class="keyword">new</span> <span class="constructor">FileOutputStream(<span class="string">&quot;Demo/src/test.txt&quot;</span>)</span>;</span><br><span class="line">OutputStreamWriter osw = <span class="keyword">new</span> <span class="constructor">OutputStreamWriter(<span class="params">os</span>,<span class="string">&quot;GBK&quot;</span>)</span>;</span><br><span class="line">osw.write(<span class="string">&quot;æˆ‘åœ¨å­¦ä¹ Java&quot;</span>);   </span><br><span class="line">osw.close<span class="literal">()</span>;</span><br></pre></td></tr></table></figure>
<h4 id="åºåˆ—åŒ–">åºåˆ—åŒ–</h4>
<h5 id="åŸºæœ¬ä»‹ç»-17">åŸºæœ¬ä»‹ç»</h5>
<p>å¯¹è±¡åºåˆ—åŒ–ï¼šæŠŠ Java å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œå°†å¯¹è±¡å†™å…¥åˆ° IO æµä¸­ï¼Œå¯¹è±¡ =&gt; æ–‡ä»¶ä¸­</p>
<p>å¯¹è±¡ååºåˆ—åŒ–ï¼šæŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸º Java å¯¹è±¡çš„è¿‡ç¨‹ï¼Œä» IO æµä¸­æ¢å¤å¯¹è±¡ï¼Œæ–‡ä»¶ä¸­ =&gt; å¯¹è±¡</p>
<p>transient å…³é”®å­—ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå°†ä¸å‚ä¸åºåˆ—åŒ–</p>
<h5 id="åºåˆ—åŒ–-2">åºåˆ—åŒ–</h5>
<p>å¯¹è±¡åºåˆ—åŒ–æµï¼ˆå¯¹è±¡å­—èŠ‚è¾“å‡ºæµï¼‰ï¼šObjectOutputStream</p>
<p>ä½œç”¨ï¼šæŠŠå†…å­˜ä¸­çš„ Java å¯¹è±¡æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ä¸­å»</p>
<p>æ„é€ å™¨ï¼š<code>public ObjectOutputStream(OutputStream out)</code></p>
<p>åºåˆ—åŒ–æ–¹æ³•ï¼š<code>public final void writeObject(Object obj)</code></p>
<p>æ³¨æ„ï¼šå¯¹è±¡å¦‚æœæƒ³å‚ä¸åºåˆ—åŒ–ï¼Œå¯¹è±¡å¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£ <strong>implements Serializable</strong> ï¼Œå¦åˆ™åºåˆ—åŒ–å¤±è´¥</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializeDemo01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºUserç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">        User user = <span class="keyword">new</span> <span class="type">User</span>(<span class="string">&quot;seazean&quot;</span>,<span class="string">&quot;980823&quot;</span>,<span class="string">&quot;ä¸ƒåä¸€&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.åˆ›å»ºä½çº§çš„å­—èŠ‚è¾“å‡ºæµé€šå‘ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line">        OutputStream os = <span class="keyword">new</span> <span class="type">FileOutputStream</span>(<span class="string">&quot;Demo/src/obj.dat&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.æŠŠä½çº§çš„å­—èŠ‚è¾“å‡ºæµåŒ…è£…æˆé«˜çº§çš„å¯¹è±¡å­—èŠ‚è¾“å‡ºæµ ObjectOutputStream</span></span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> <span class="type">ObjectOutputStream</span>(os);</span><br><span class="line">        <span class="comment">// 4.é€šè¿‡å¯¹è±¡å­—èŠ‚è¾“å‡ºæµåºåˆ—åŒ–å¯¹è±¡ï¼š</span></span><br><span class="line">        oos.writeObject(user);</span><br><span class="line">        <span class="comment">// 5.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        oos.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;åºåˆ—åŒ–å¯¹è±¡æˆåŠŸ~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">Serializable</span></span> </span>&#123;</span><br><span class="line">    <span class="comment">// åŠ å…¥åºåˆ—ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final long serialVersionUID = <span class="number">1</span>L;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> loginName;</span><br><span class="line">    <span class="keyword">private</span> transient <span class="keyword">String</span> passWord;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> userName;</span><br><span class="line">    <span class="comment">// get+set</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">ByteArrayOutputStream bos = <span class="keyword">new</span> <span class="type">ByteArrayOutputStream</span>();</span><br><span class="line">ObjectOutputStream oos = <span class="keyword">new</span> <span class="type">ObjectOutputStream</span>(bos);</span><br><span class="line">oos.writeObject(obj);	<span class="comment">// å°†è¯¥å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">oos.flush();</span><br><span class="line">byte[] bytes = bos.toByteArray();</span><br></pre></td></tr></table></figure>
<h5 id="ååºåˆ—">ååºåˆ—</h5>
<p>å¯¹è±¡ååºåˆ—åŒ–ï¼ˆå¯¹è±¡å­—èŠ‚è¾“å…¥æµï¼‰ï¼šObjectInputStream</p>
<p>ä½œç”¨ï¼šè¯»å–åºåˆ—åŒ–çš„å¯¹è±¡æ–‡ä»¶æ¢å¤åˆ° Java å¯¹è±¡ä¸­</p>
<p>æ„é€ å™¨ï¼š<code>public ObjectInputStream(InputStream is)</code></p>
<p>æ–¹æ³•ï¼š<code>public final Object readObject()</code></p>
<p>åºåˆ—åŒ–ç‰ˆæœ¬å·ï¼š<code>private static final long serialVersionUID = 2L</code></p>
<p>æ³¨æ„ï¼šåºåˆ—åŒ–ä½¿ç”¨çš„ç‰ˆæœ¬å·å’Œååºåˆ—åŒ–ä½¿ç”¨çš„ç‰ˆæœ¬å·ä¸€è‡´æ‰å¯ä»¥æ­£å¸¸ååºåˆ—åŒ–ï¼Œå¦åˆ™æŠ¥é”™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerializeDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;Demo/src/obj.dat&quot;</span>);</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(is);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User)ois.readObject();<span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        System.out.println(<span class="string">&quot;ååºåˆ—åŒ–å®Œæˆï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">// åŠ å…¥åºåˆ—ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">//........</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ‰“å°æµ">æ‰“å°æµ</h4>
<p>æ‰“å°æµ PrintStream / PrintWriter</p>
<p>æ‰“å°æµçš„ä½œç”¨ï¼š</p>
<ul>
<li>å¯ä»¥æ–¹ä¾¿ï¼Œå¿«é€Ÿçš„å†™æ•°æ®å‡ºå»ï¼Œå¯ä»¥å®ç°æ‰“å°ä»€ä¹ˆç±»å‹ï¼Œå°±æ˜¯ä»€ä¹ˆç±»å‹</li>
<li>PrintStream/PrintWriter ä¸å…‰å¯ä»¥æ‰“å°æ•°æ®ï¼Œè¿˜å¯ä»¥å†™å­—èŠ‚æ•°æ®å’Œå­—ç¬¦æ•°æ®å‡ºå»</li>
<li><strong>System.out.print() åº•å±‚åŸºäºæ‰“å°æµå®ç°çš„</strong></li>
</ul>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>public PrintStream(OutputStream os)</code></li>
<li><code>public PrintStream(String filepath)</code></li>
</ul>
<p>System ç±»ï¼š</p>
<ul>
<li><code>public static void setOut(PrintStream out)</code>ï¼šè®©ç³»ç»Ÿçš„è¾“å‡ºæµå‘æ‰“å°æµ</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> PrintStreamDemo01 &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        PrintStream ps = <span class="keyword">new</span>  PrintStream(<span class="string">&quot;Demo/src/test.txt&quot;</span>);</span><br><span class="line">        ps.<span class="keyword">println</span>(ä»»ä½•ç±»å‹çš„æ•°æ®);</span><br><span class="line">        ps.<span class="keyword">print</span>(ä¸æ¢è¡Œ);</span><br><span class="line">        ps.<span class="keyword">write</span>(<span class="string">&quot;æˆ‘çˆ±ä½ &quot;</span>.getBytes());</span><br><span class="line">        ps.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> PrintStreamDemo02 &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.<span class="keyword">println</span>(<span class="string">&quot;==seazean0==&quot;</span>);</span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(<span class="string">&quot;Demo/src/log.txt&quot;</span>);</span><br><span class="line">        System.setOut(ps); <span class="comment">// è®©ç³»ç»Ÿçš„è¾“å‡ºæµå‘æ‰“å°æµ</span></span><br><span class="line">		<span class="comment">//ä¸è¾“å‡ºåœ¨æ§åˆ¶å°ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶é‡Œ</span></span><br><span class="line">        System.out.<span class="keyword">println</span>(<span class="string">&quot;==seazean1==&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(<span class="string">&quot;==seazean2==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Close">Close</h3>
<p>try-with-resourcesï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">try</span>(</span><br><span class="line">    // è¿™é‡Œåªèƒ½æ”¾ç½®èµ„æºå¯¹è±¡ï¼Œç”¨å®Œä¼šè‡ªåŠ¨è°ƒç”¨close()å…³é—­</span><br><span class="line">)&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="built_in">catch</span>(Exception e)&#123;</span><br><span class="line"> 	e<span class="selector-class">.printStackTrace</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>èµ„æºç±»ä¸€å®šæ˜¯å®ç°äº† Closeable æ¥å£ï¼Œå®ç°è¿™ä¸ªæ¥å£çš„ç±»å°±æ˜¯èµ„æº</p>
<p>æœ‰ close() æ–¹æ³•ï¼Œtry-with-resources ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒçš„ close() å…³é—­èµ„æº</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>(</span><br><span class="line">	<span class="comment">/** ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµç®¡é“ä¸æºæ–‡ä»¶æ¥é€šã€‚ */</span></span><br><span class="line">	InputStream <span class="keyword">is</span>  = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;D:\\seazean\\å›¾ç‰‡èµ„æº\\meinv.jpg&quot;</span>);</span><br><span class="line">	<span class="comment">/** ï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµä¸ç›®æ ‡æ–‡ä»¶æ¥é€šã€‚*/</span></span><br><span class="line">	OutputStream os = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;D:\\seazean\\meimei.jpg&quot;</span>);</span><br><span class="line">	<span class="comment">/** ï¼ˆ5ï¼‰å…³é—­èµ„æºï¼æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ */</span></span><br><span class="line">)&#123;</span><br><span class="line">	<span class="built_in">byte</span>[] buffer = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line">	<span class="built_in">int</span> len = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>((len = <span class="keyword">is</span>.read(buffer)) != <span class="number">-1</span>)&#123;</span><br><span class="line">		os.write(buffer, <span class="number">0</span> , len);</span><br><span class="line">	&#125;</span><br><span class="line">	System.<span class="keyword">out</span>.println(<span class="string">&quot;å¤åˆ¶å®Œæˆï¼&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Properties">Properties</h3>
<p>Propertiesï¼šå±æ€§é›†å¯¹è±¡ã€‚å°±æ˜¯ä¸€ä¸ª Map é›†åˆï¼Œä¸€ä¸ªé”®å€¼å¯¹é›†åˆ</p>
<p>æ ¸å¿ƒä½œç”¨ï¼šProperties ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå±æ€§æ–‡ä»¶ï¼Œå¯ä»¥æŠŠé”®å€¼å¯¹æ•°æ®å­˜å…¥åˆ°ä¸€ä¸ªå±æ€§æ–‡ä»¶</p>
<p>å±æ€§æ–‡ä»¶ï¼šåç¼€æ˜¯ <code>.properties</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹éƒ½æ˜¯ key=value</p>
<p>Properties æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Object setProperty(String key, String value)</td>
<td>è®¾ç½®é›†åˆçš„é”®å’Œå€¼ï¼Œåº•å±‚è°ƒç”¨ Hashtable æ–¹æ³• put</td>
</tr>
<tr>
<td>String getProperty(String key)</td>
<td>ä½¿ç”¨æ­¤å±æ€§åˆ—è¡¨ä¸­æŒ‡å®šçš„é”®æœç´¢å±æ€§</td>
</tr>
<tr>
<td>Set<String>   stringPropertyNames()</td>
<td>æ‰€æœ‰é”®çš„åç§°çš„é›†åˆ</td>
</tr>
<tr>
<td>synchronized void load(Reader r)</td>
<td>ä»è¾“å…¥å­—ç¬¦æµè¯»å–å±æ€§åˆ—è¡¨ï¼ˆé”®å’Œå…ƒç´ å¯¹ï¼‰</td>
</tr>
<tr>
<td>synchronized void load(InputStream in)</td>
<td>åŠ è½½å±æ€§æ–‡ä»¶çš„æ•°æ®åˆ°å±æ€§é›†å¯¹è±¡ä¸­å»</td>
</tr>
<tr>
<td>void store(Writer w, String comments)</td>
<td>å°†æ­¤å±æ€§åˆ—è¡¨(é”®å’Œå…ƒç´ å¯¹)å†™å…¥ Properties è¡¨</td>
</tr>
<tr>
<td>void store(OutputStream os, String comments)</td>
<td>ä¿å­˜æ•°æ®åˆ°å±æ€§æ–‡ä»¶ä¸­å»</td>
</tr>
</tbody>
</table>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">        <span class="comment">// a.åˆ›å»ºä¸€ä¸ªå±æ€§é›†å¯¹è±¡ï¼šPropertiesçš„å¯¹è±¡ã€‚</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> <span class="type">Properties</span>();<span class="comment">//&#123;&#125;</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;admin&quot;</span> , <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">// b.æŠŠå±æ€§é›†å¯¹è±¡çš„æ•°æ®å­˜å…¥åˆ°å±æ€§æ–‡ä»¶ä¸­å»ï¼ˆé‡ç‚¹ï¼‰</span></span><br><span class="line">        OutputStream os = <span class="keyword">new</span> <span class="type">FileOutputStream</span>(<span class="string">&quot;Demo/src/users.properties&quot;</span>);</span><br><span class="line">        properties.store(os,<span class="string">&quot;i am very happy!!æˆ‘ä¿å­˜äº†ç”¨æˆ·æ•°æ®!&quot;</span>);</span><br><span class="line">        <span class="comment">//å‚æ•°ä¸€ï¼šè¢«ä¿å­˜æ•°æ®çš„è¾“å‡ºç®¡é“</span></span><br><span class="line">        <span class="comment">//å‚æ•°äºŒï¼šä¿å­˜å¿ƒå¾—ã€‚å°±æ˜¯å¯¹è±¡ä¿å­˜çš„æ•°æ®è¿›è¡Œè§£é‡Šè¯´æ˜ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesDemo02</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> <span class="type">Properties</span>();<span class="comment">//åº•å±‚åŸºäºmapé›†åˆ</span></span><br><span class="line">        properties.load(<span class="keyword">new</span> <span class="type">FileInputStream</span>(<span class="string">&quot;Demo/src/users.properties&quot;</span>));</span><br><span class="line">        System.out.println(properties);</span><br><span class="line">        System.out.println(properties.getProperty(<span class="string">&quot;admin&quot;</span>));</span><br><span class="line">        </span><br><span class="line">		Set&lt;<span class="keyword">String</span>&gt; <span class="keyword">set</span> = properties.stringPropertyNames();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">String</span> s : <span class="type">set</span>) &#123;</span><br><span class="line">            <span class="keyword">String</span> value = properties.getProperty(s);</span><br><span class="line">            System.out.println(s + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="RandomIO">RandomIO</h3>
<p>RandomAccessFile ç±»ï¼šè¯¥ç±»çš„å®ä¾‹æ”¯æŒè¯»å–å’Œå†™å…¥éšæœºè®¿é—®æ–‡ä»¶</p>
<p>æ„é€ å™¨ï¼š</p>
<ul>
<li><code>RandomAccessFile(File file, String mode)</code>ï¼šåˆ›å»ºéšæœºè®¿é—®æ–‡ä»¶æµï¼Œä» File å‚æ•°æŒ‡å®šçš„æ–‡ä»¶è¯»å–ï¼Œå¯é€‰æ‹©å†™å…¥</li>
<li><code>RandomAccessFile(String name, String mode)</code>ï¼šåˆ›å»ºéšæœºè®¿é—®æ–‡ä»¶æµï¼Œä»æŒ‡å®šåç§°æ–‡ä»¶è¯»å–ï¼Œå¯é€‰æ‹©å†™å…¥æ–‡ä»¶</li>
</ul>
<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><code>public void seek(long pos)</code>ï¼šè®¾ç½®æ–‡ä»¶æŒ‡é’ˆåç§»ï¼Œä»è¯¥æ–‡ä»¶å¼€å¤´æµ‹é‡ï¼Œå‘ç”Ÿä¸‹ä¸€æ¬¡è¯»å–æˆ–å†™å…¥(æ’å…¥+è¦†ç›–)</li>
<li><code>public void write(byte[] b)</code>ï¼šä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥ b.length ä¸ªå­—èŠ‚åˆ°è¯¥æ–‡ä»¶</li>
<li><code>public int read(byte[] b)</code>ï¼šä»è¯¥æ–‡ä»¶è¯»å–æœ€å¤š b.length ä¸ªå­—èŠ‚çš„æ•°æ®åˆ°å­—èŠ‚æ•°ç»„</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    RandomAccessFile rf = <span class="keyword">new</span> RandomAccessFile(<span class="keyword">new</span> <span class="keyword">File</span>(),<span class="string">&quot;rw&quot;</span>);</span><br><span class="line">    rf.<span class="keyword">write</span>(<span class="string">&quot;hello world&quot;</span>.getBytes());</span><br><span class="line">    rf.seek(<span class="number">5</span>);<span class="comment">//helloxxxxld</span></span><br><span class="line">    rf.<span class="keyword">write</span>(<span class="string">&quot;xxxx&quot;</span>.getBytes());</span><br><span class="line">    rf.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Commons">Commons</h3>
<p>commons-io æ˜¯ apache æä¾›çš„ä¸€ç»„æœ‰å…³ IO æ“ä½œçš„ç±»åº“ï¼Œå¯ä»¥æé«˜ IO åŠŸèƒ½å¼€å‘çš„æ•ˆç‡</p>
<p>commons-io å·¥å…·åŒ…æä¾›äº†å¾ˆå¤šæœ‰å…³ IO æ“ä½œçš„ç±»ï¼š</p>
<table>
<thead>
<tr>
<th>åŒ…</th>
<th style="text-align:left">åŠŸèƒ½æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="http://org.apache.commons.io">org.apache.commons.io</a></td>
<td style="text-align:left">æœ‰å…³ Streamsã€Readersã€Writersã€Files çš„å·¥å…·ç±»</td>
</tr>
<tr>
<td>org.apache.commons.io.input</td>
<td style="text-align:left">è¾“å…¥æµç›¸å…³çš„å®ç°ç±»ï¼ŒåŒ…å« Reader å’Œ InputStream</td>
</tr>
<tr>
<td>org.apache.commons.io.output</td>
<td style="text-align:left">è¾“å‡ºæµç›¸å…³çš„å®ç°ç±»ï¼ŒåŒ…å« Writer å’Œ OutputStream</td>
</tr>
<tr>
<td>org.apache.commons.io.serialization</td>
<td style="text-align:left">åºåˆ—åŒ–ç›¸å…³çš„ç±»</td>
</tr>
</tbody>
</table>
<p>IOUtils å’Œ FileUtils å¯ä»¥æ–¹ä¾¿çš„å¤åˆ¶æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonsIODemo01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">        <span class="comment">// 1.å®Œæˆæ–‡ä»¶å¤åˆ¶ï¼</span></span><br><span class="line">        IOUtils.copy(<span class="keyword">new</span> <span class="type">FileInputStream</span>(<span class="string">&quot;Demo/src/books.xml&quot;</span>), </span><br><span class="line">                     <span class="keyword">new</span> <span class="type">FileOutputStream</span>(<span class="string">&quot;Demo/new.xml&quot;</span>));</span><br><span class="line">        <span class="comment">// 2.å®Œæˆæ–‡ä»¶å¤åˆ¶åˆ°æŸä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼</span></span><br><span class="line">        FileUtils.copyFileToDirectory(<span class="keyword">new</span> <span class="type">File</span>(<span class="string">&quot;Demo/src/books.xml&quot;</span>),</span><br><span class="line">                                      <span class="keyword">new</span> <span class="type">File</span>(<span class="string">&quot;D:/it&quot;</span>));</span><br><span class="line">        <span class="comment">// 3.å®Œæˆæ–‡ä»¶å¤¹å¤åˆ¶åˆ°æŸä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼</span></span><br><span class="line">        FileUtils.copyDirectoryToDirectory(<span class="keyword">new</span> <span class="type">File</span>(<span class="string">&quot;D:\\it\\å›¾ç‰‡æœåŠ¡å™¨&quot;</span>) ,</span><br><span class="line">                                           <span class="keyword">new</span> <span class="type">File</span>(<span class="string">&quot;D:\\&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  Javaä»1.7å¼€å§‹æä¾›äº†ä¸€äº›nio, è‡ªå·±ä¹Ÿæœ‰ä¸€è¡Œä»£ç å®Œæˆå¤åˆ¶çš„æŠ€æœ¯ã€‚</span></span><br><span class="line">        Files.copy(Paths.<span class="keyword">get</span>(<span class="string">&quot;Demo/src/books.xml&quot;</span>)</span><br><span class="line">                , <span class="keyword">new</span> <span class="type">FileOutputStream</span>(<span class="string">&quot;Demo/new11.txt&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åå°„">åå°„</h2>
<h3 id="æµ‹è¯•æ¡†æ¶">æµ‹è¯•æ¡†æ¶</h3>
<p>å•å…ƒæµ‹è¯•çš„ç»å…¸æ¡†æ¶ï¼šJunitï¼Œæ˜¯ Java è¯­è¨€ç¼–å†™çš„ç¬¬ä¸‰æ–¹å•å…ƒæµ‹è¯•æ¡†æ¶</p>
<p>å•å…ƒæµ‹è¯•ï¼š</p>
<ul>
<li>å•å…ƒï¼šåœ¨ Java ä¸­ï¼Œä¸€ä¸ªç±»å°±æ˜¯ä¸€ä¸ªå•å…ƒ</li>
<li>å•å…ƒæµ‹è¯•ï¼šJunit ç¼–å†™çš„ä¸€å°æ®µä»£ç ï¼Œç”¨æ¥å¯¹æŸä¸ªç±»ä¸­çš„æŸä¸ªæ–¹æ³•è¿›è¡ŒåŠŸèƒ½æµ‹è¯•æˆ–ä¸šåŠ¡é€»è¾‘æµ‹è¯•</li>
</ul>
<p>Junit å•å…ƒæµ‹è¯•æ¡†æ¶çš„ä½œç”¨ï¼š</p>
<ul>
<li>ç”¨æ¥å¯¹ç±»ä¸­çš„æ–¹æ³•åŠŸèƒ½è¿›è¡Œæœ‰ç›®çš„çš„æµ‹è¯•ï¼Œä»¥ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§</li>
<li>èƒ½å¤Ÿ<strong>ç‹¬ç«‹çš„</strong>æµ‹è¯•æŸä¸ªæ–¹æ³•æˆ–è€…æ‰€æœ‰æ–¹æ³•çš„é¢„æœŸæ­£ç¡®æ€§</li>
</ul>
<p>æµ‹è¯•æ–¹æ³•æ³¨æ„äº‹é¡¹ï¼š<strong>å¿…é¡»æ˜¯ public ä¿®é¥°çš„ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œæ²¡æœ‰å‚æ•°ï¼Œä½¿ç”¨æ³¨è§£@Testä¿®é¥°</strong></p>
<p>Junitå¸¸ç”¨æ³¨è§£ï¼ˆJunit 4.xxxx ç‰ˆæœ¬ï¼‰ï¼Œ@Test æµ‹è¯•æ–¹æ³•ï¼š</p>
<ul>
<li>@Beforeï¼šç”¨æ¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡</li>
<li>@Afterï¼šç”¨æ¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œä¸€æ¬¡</li>
<li>@BeforeClassï¼šç”¨æ¥é™æ€ä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹å‰<strong>åª</strong>æ‰§è¡Œä¸€æ¬¡</li>
<li>@AfterClassï¼šç”¨æ¥é™æ€ä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹å<strong>åª</strong>æ‰§è¡Œä¸€æ¬¡</li>
</ul>
<p>Junit å¸¸ç”¨æ³¨è§£ï¼ˆJunit5.xxxx ç‰ˆæœ¬ï¼‰ï¼Œ@Test æµ‹è¯•æ–¹æ³•ï¼š</p>
<ul>
<li>@BeforeEachï¼šç”¨æ¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡</li>
<li>@AfterEachï¼šç”¨æ¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œä¸€æ¬¡</li>
<li>@BeforeAllï¼šç”¨æ¥é™æ€ä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡</li>
<li>@AfterAllï¼šç”¨æ¥é™æ€ä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹ååªæ‰§è¡Œä¸€æ¬¡</li>
</ul>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>å¼€å§‹æ‰§è¡Œçš„æ–¹æ³•ï¼šåˆå§‹åŒ–èµ„æº</li>
<li>æ‰§è¡Œå®Œä¹‹åçš„æ–¹æ³•ï¼šé‡Šæ”¾èµ„æº</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">login</span>(<span class="params"><span class="built_in">String</span> loginName , <span class="built_in">String</span> passWord</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>.<span class="title function_">equals</span>(loginName)&amp;&amp;<span class="string">&quot;123456&quot;</span>.<span class="title function_">equals</span>(passWord))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">chu</span>(<span class="params">int a , int b</span>)&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(a / b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æµ‹è¯•æ–¹æ³•çš„è¦æ±‚ï¼š1.å¿…é¡»publicä¿®é¥° 2.æ²¡æœ‰è¿”å›å€¼æ²¡æœ‰å‚æ•° 3. å¿…é¡»ä½¿æ³¨è§£@Testä¿®é¥°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceTest</span> &#123;</span><br><span class="line">     <span class="comment">// @Beforeï¼šç”¨æ¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œä¸€æ¬¡ã€‚</span></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">before</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;===before===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// @Afterï¼šç”¨æ¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œä¸€æ¬¡ã€‚</span></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">after</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;===after===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// @BeforeClassï¼šç”¨æ¥é™æ€ä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡ã€‚</span></span><br><span class="line">    <span class="meta">@BeforeClass</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">beforeClass</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;===beforeClass===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// @AfterClassï¼šç”¨æ¥é™æ€ä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ä¹‹ååªæ‰§è¡Œä¸€æ¬¡ã€‚</span></span><br><span class="line">    <span class="meta">@AfterClass</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">afterClass</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;===afterClass===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">testLogin</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">UserService</span> userService = <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">        <span class="title class_">String</span> rs = userService.<span class="title function_">login</span>(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">/**æ–­è¨€é¢„æœŸç»“æœçš„æ­£ç¡®æ€§ã€‚</span></span><br><span class="line"><span class="comment">         * å‚æ•°ä¸€ï¼šæµ‹è¯•å¤±è´¥çš„æç¤ºä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">         * å‚æ•°äºŒï¼šæœŸæœ›å€¼ã€‚</span></span><br><span class="line"><span class="comment">         * å‚æ•°ä¸‰ï¼šå®é™…å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="title class_">Assert</span>.<span class="title function_">assertEquals</span>(<span class="string">&quot;ç™»å½•ä¸šåŠ¡åŠŸèƒ½æ–¹æ³•æœ‰é”™è¯¯ï¼Œè¯·æ£€æŸ¥ï¼&quot;</span>,<span class="string">&quot;success&quot;</span>,rs);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">testChu</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">UserService</span> userService = <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">        userService.<span class="title function_">chu</span>(<span class="number">10</span> , <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä»‹ç»åå°„">ä»‹ç»åå°„</h3>
<p>åå°„æ˜¯æŒ‡å¯¹äºä»»ä½•ä¸€ä¸ªç±»ï¼Œåœ¨&quot;è¿è¡Œçš„æ—¶å€™&quot;éƒ½å¯ä»¥ç›´æ¥å¾—åˆ°è¿™ä¸ªç±»å…¨éƒ¨æˆåˆ†</p>
<ul>
<li>æ„é€ å™¨å¯¹è±¡ï¼šConstructor</li>
<li>æˆå‘˜å˜é‡å¯¹è±¡ï¼šField</li>
<li>æˆå‘˜æ–¹æ³•å¯¹è±¡ï¼šMethod</li>
</ul>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåœ¨è¿è¡Œæ—¶è·å–ç±»ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼Œç„¶åè§£æç±»ä¸­çš„å…¨éƒ¨æˆåˆ†</p>
<p>åå°„æä¾›äº†ä¸€ä¸ª Class ç±»å‹ï¼šHelloWorld.java â†’ javac â†’ HelloWorld.class</p>
<ul>
<li><code>Class c = HelloWorld.class</code></li>
</ul>
<p>æ³¨æ„ï¼šåå°„æ˜¯å·¥ä½œåœ¨<strong>è¿è¡Œæ—¶</strong>çš„æŠ€æœ¯ï¼Œåªæœ‰è¿è¡Œä¹‹åæ‰ä¼šæœ‰ class ç±»å¯¹è±¡</p>
<p>ä½œç”¨ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶å¾—åˆ°ä¸€ä¸ªç±»çš„å…¨éƒ¨æˆåˆ†ç„¶åæ“ä½œï¼Œç ´åå°è£…æ€§ï¼Œä¹Ÿå¯ä»¥ç ´åæ³›å‹çš„çº¦æŸæ€§ã€‚</p>
<p>åå°„çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¯æ‰©å±•æ€§ï¼šåº”ç”¨ç¨‹åºå¯ä»¥åˆ©ç”¨å…¨é™å®šååˆ›å»ºå¯æ‰©å±•å¯¹è±¡çš„å®ä¾‹ï¼Œæ¥ä½¿ç”¨æ¥è‡ªå¤–éƒ¨çš„ç”¨æˆ·è‡ªå®šä¹‰ç±»</li>
<li>ç±»æµè§ˆå™¨å’Œå¯è§†åŒ–å¼€å‘ç¯å¢ƒï¼šä¸€ä¸ªç±»æµè§ˆå™¨éœ€è¦å¯ä»¥æšä¸¾ç±»çš„æˆå‘˜ï¼Œå¯è§†åŒ–å¼€å‘ç¯å¢ƒï¼ˆå¦‚ IDEï¼‰å¯ä»¥ä»åˆ©ç”¨åå°„ä¸­å¯ç”¨çš„ç±»å‹ä¿¡æ¯ä¸­å—ç›Šï¼Œä»¥å¸®åŠ©ç¨‹åºå‘˜ç¼–å†™æ­£ç¡®çš„ä»£ç </li>
<li>è°ƒè¯•å™¨å’Œæµ‹è¯•å·¥å…·ï¼š è°ƒè¯•å™¨éœ€è¦èƒ½å¤Ÿæ£€æŸ¥ä¸€ä¸ªç±»é‡Œçš„ç§æœ‰æˆå‘˜ï¼Œæµ‹è¯•å·¥å…·å¯ä»¥åˆ©ç”¨åå°„æ¥è‡ªåŠ¨åœ°è°ƒç”¨ç±»é‡Œå®šä¹‰çš„å¯è¢«å‘ç°çš„ API å®šä¹‰ï¼Œä»¥ç¡®ä¿ä¸€ç»„æµ‹è¯•ä¸­æœ‰è¾ƒé«˜çš„ä»£ç è¦†ç›–ç‡</li>
</ul>
<p>åå°„çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šåå°„æ¶‰åŠäº†åŠ¨æ€ç±»å‹çš„è§£æï¼Œæ‰€ä»¥ JVM æ— æ³•å¯¹è¿™äº›ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œåå°„æ“ä½œçš„æ•ˆç‡è¦æ¯”é‚£äº›éå°„æ“ä½œä½å¾—å¤šï¼Œåº”è¯¥é¿å…åœ¨ç»å¸¸è¢«æ‰§è¡Œçš„ä»£ç æˆ–å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„ç¨‹åºä¸­ä½¿ç”¨åå°„</li>
<li>å®‰å…¨é™åˆ¶ï¼šä½¿ç”¨åå°„æŠ€æœ¯è¦æ±‚ç¨‹åºå¿…é¡»åœ¨ä¸€ä¸ªæ²¡æœ‰å®‰å…¨é™åˆ¶çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå¦‚æœä¸€ä¸ªç¨‹åºå¿…é¡»åœ¨æœ‰å®‰å…¨é™åˆ¶çš„ç¯å¢ƒä¸­è¿è¡Œ</li>
<li>å†…éƒ¨æš´éœ²ï¼šç”±äºåå°„å…è®¸ä»£ç æ‰§è¡Œä¸€äº›åœ¨æ­£å¸¸æƒ…å†µä¸‹ä¸è¢«å…è®¸çš„æ“ä½œï¼ˆæ¯”å¦‚è®¿é—®ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨åå°„å¯èƒ½ä¼šå¯¼è‡´æ„æ–™ä¹‹å¤–çš„å‰¯ä½œç”¨ï¼Œè¿™å¯èƒ½å¯¼è‡´ä»£ç åŠŸèƒ½å¤±è°ƒå¹¶ç ´åå¯ç§»æ¤æ€§ã€‚åå°„ä»£ç ç ´åäº†æŠ½è±¡æ€§ï¼Œå› æ­¤å½“å¹³å°å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä»£ç çš„è¡Œä¸ºå°±æœ‰å¯èƒ½ä¹Ÿéšç€å˜åŒ–</li>
</ul>
<h3 id="è·å–å…ƒç´ ">è·å–å…ƒç´ </h3>
<h4 id="è·å–ç±»">è·å–ç±»</h4>
<p>åå°„æŠ€æœ¯çš„ç¬¬ä¸€æ­¥æ˜¯å…ˆå¾—åˆ° Class ç±»å¯¹è±¡ï¼Œæœ‰ä¸‰ç§æ–¹å¼è·å–ï¼š</p>
<ul>
<li>ç±»å.class</li>
<li>ç±»çš„å¯¹è±¡.getClass()</li>
<li>Class.forName(â€œç±»çš„å…¨é™åâ€)ï¼š<code>public static Class forName(String className)</code></li>
</ul>
<p>Class ç±»ä¸‹çš„æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>String getSimpleName()</td>
<td>è·å¾—ç±»åå­—ç¬¦ä¸²ï¼šç±»å</td>
</tr>
<tr>
<td>String getName()</td>
<td>è·å¾—ç±»å…¨åï¼šåŒ…å+ç±»å</td>
</tr>
<tr>
<td>T newInstance()</td>
<td>åˆ›å»º Class å¯¹è±¡å…³è”ç±»çš„å¯¹è±¡ï¼Œåº•å±‚æ˜¯è°ƒç”¨æ— å‚æ•°æ„é€ å™¨ï¼Œå·²ç»è¢«æ·˜æ±°</td>
</tr>
</tbody>
</table>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> ReflectDemo&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åå°„çš„ç¬¬ä¸€æ­¥æ°¸è¿œæ˜¯å…ˆå¾—åˆ°ç±»çš„Classæ–‡ä»¶å¯¹è±¡: å­—èŠ‚ç æ–‡ä»¶ã€‚</span></span><br><span class="line">        <span class="comment">// 1.ç±»å.class</span></span><br><span class="line">        <span class="keyword">Class</span> c1 = Student.<span class="keyword">class</span>;</span><br><span class="line">        System.out.<span class="keyword">println</span>(c1);<span class="comment">//class _03åå°„_è·å–Classç±»å¯¹è±¡.Student</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.å¯¹è±¡.getClass()</span></span><br><span class="line">        Student swk = <span class="keyword">new</span> Student();</span><br><span class="line">        <span class="keyword">Class</span> c2 = swk.getClass();</span><br><span class="line">        System.out.<span class="keyword">println</span>(c2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.Class.forName(&quot;ç±»çš„å…¨é™å&quot;)</span></span><br><span class="line">        <span class="comment">// ç›´æ¥å»åŠ è½½è¯¥ç±»çš„classæ–‡ä»¶ã€‚</span></span><br><span class="line">        <span class="keyword">Class</span> c3 = <span class="keyword">Class</span>.forName(<span class="string">&quot;_03åå°„_è·å–Classç±»å¯¹è±¡.Student&quot;</span>);</span><br><span class="line">        System.out.<span class="keyword">println</span>(c3);</span><br><span class="line"></span><br><span class="line">        System.out.<span class="keyword">println</span>(c1.getSimpleName()); <span class="comment">// è·å–ç±»åæœ¬èº«ï¼ˆç®€åï¼‰Student</span></span><br><span class="line">        System.out.<span class="keyword">println</span>(c1.getName()); <span class="comment">//è·å–ç±»çš„å…¨é™å_03åå°„_è·å–Classç±»å¯¹è±¡.Student</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Student&#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è·å–æ„é€ ">è·å–æ„é€ </h4>
<p>è·å–æ„é€ å™¨çš„ APIï¼š</p>
<ul>
<li>Constructor getConstructor(Classâ€¦ parameterTypes)ï¼šæ ¹æ®å‚æ•°åŒ¹é…è·å–æŸä¸ªæ„é€ å™¨ï¼Œåªèƒ½æ‹¿ public ä¿®é¥°çš„æ„é€ å™¨</li>
<li>Constructor getDeclaredConstructor(Classâ€¦ parameterTypes)ï¼šæ ¹æ®å‚æ•°åŒ¹é…è·å–æŸä¸ªæ„é€ å™¨ï¼Œåªè¦ç”³æ˜å°±å¯ä»¥å®šä½ï¼Œä¸å…³å¿ƒæƒé™ä¿®é¥°ç¬¦</li>
<li>Constructor[] getConstructors()ï¼šè·å–æ‰€æœ‰çš„æ„é€ å™¨ï¼Œåªèƒ½æ‹¿ public ä¿®é¥°çš„æ„é€ å™¨</li>
<li>Constructor[] getDeclaredConstructors()ï¼šè·å–æ‰€æœ‰æ„é€ å™¨ï¼Œåªè¦ç”³æ˜å°±å¯ä»¥å®šä½ï¼Œä¸å…³å¿ƒæƒé™ä¿®é¥°ç¬¦</li>
</ul>
<p>Constructor çš„å¸¸ç”¨ APIï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>T newInstance(Objectâ€¦ initargs)</td>
<td>åˆ›å»ºå¯¹è±¡ï¼Œæ³¨å…¥æ„é€ å™¨éœ€è¦çš„æ•°æ®</td>
</tr>
<tr>
<td>void setAccessible(true)</td>
<td>ä¿®æ”¹è®¿é—®æƒé™ï¼Œtrue æ”»ç ´æƒé™ï¼ˆæš´åŠ›åå°„ï¼‰</td>
</tr>
<tr>
<td>String getName()</td>
<td>ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›æ­¤æ„é€ å‡½æ•°çš„åç§°</td>
</tr>
<tr>
<td>int getParameterCount()</td>
<td>è¿”å›å‚æ•°æ•°é‡</td>
</tr>
<tr>
<td>Class&lt;?&gt;[] getParameterTypes</td>
<td>è¿”å›å‚æ•°ç±»å‹æ•°ç»„</td>
</tr>
</tbody>
</table>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> TestStudent01 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void get<span class="constructor">DeclaredConstructors()</span>&#123;</span><br><span class="line">        <span class="comment">// a.åå°„ç¬¬ä¸€æ­¥å…ˆå¾—åˆ°Classç±»å¯¹è±¡</span></span><br><span class="line">        Class c = <span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span><span class="keyword">class</span> ;</span><br><span class="line">        <span class="comment">// b.å®šä½å…¨éƒ¨æ„é€ å™¨ï¼Œåªè¦ç”³æ˜äº†å°±å¯ä»¥æ‹¿åˆ°</span></span><br><span class="line">        Constructor<span class="literal">[]</span> cons = c.get<span class="constructor">DeclaredConstructors()</span>;</span><br><span class="line">        <span class="comment">// c.éå†è¿™äº›æ„é€ å™¨</span></span><br><span class="line">        <span class="keyword">for</span> (Constructor con : cons) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(con.get<span class="constructor">Name()</span>+<span class="string">&quot;-&gt;&quot;</span>+con.get<span class="constructor">ParameterCount()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void get<span class="constructor">DeclaredConstructor()</span> throws Exception &#123;</span><br><span class="line">        <span class="comment">// a.åå°„ç¬¬ä¸€æ­¥å…ˆå¾—åˆ°Classç±»å¯¹è±¡</span></span><br><span class="line">        Class c = <span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span><span class="keyword">class</span> ;</span><br><span class="line">        <span class="comment">// b.å®šä½æŸä¸ªæ„é€ å™¨ï¼Œæ ¹æ®å‚æ•°åŒ¹é…ï¼Œåªè¦ç”³æ˜äº†å°±å¯ä»¥è·å–</span></span><br><span class="line">        <span class="comment">//Constructor con = c.getDeclaredConstructor(); // å¯ä»¥æ‹¿åˆ°ï¼å®šä½æ— å‚æ•°æ„é€ å™¨ï¼</span></span><br><span class="line">        Constructor con = c.get<span class="constructor">DeclaredConstructor(String.<span class="params">class</span>, <span class="params">int</span>.<span class="params">class</span>)</span>; <span class="comment">//æœ‰å‚æ•°çš„ï¼!</span></span><br><span class="line">        <span class="comment">// c.æ„é€ å™¨åç§°å’Œå‚æ•°</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(con.get<span class="constructor">Name()</span>+<span class="string">&quot;-&gt;&quot;</span>+con.get<span class="constructor">ParameterCount()</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public <span class="keyword">class</span> Student &#123;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> age ;</span><br><span class="line">    <span class="keyword">private</span> <span class="constructor">Student()</span>&#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;æ— å‚æ•°æ„é€ å™¨è¢«æ‰§è¡Œ~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="constructor">Student(String <span class="params">name</span>, <span class="params">int</span> <span class="params">age</span>)</span> &#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;æœ‰å‚æ•°æ„é€ å™¨è¢«æ‰§è¡Œ~~~~&quot;</span>);</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æµ‹è¯•æ–¹æ³•</span></span><br><span class="line">public <span class="keyword">class</span> TestStudent02 &#123;</span><br><span class="line">    <span class="comment">// 1.è°ƒç”¨æ— å‚æ•°æ„é€ å™¨å¾—åˆ°ä¸€ä¸ªç±»çš„å¯¹è±¡è¿”å›ã€‚</span></span><br><span class="line">    @Test</span><br><span class="line">    public void create<span class="constructor">Obj01()</span> throws Exception &#123;</span><br><span class="line">        <span class="comment">// a.åå°„ç¬¬ä¸€æ­¥æ˜¯å…ˆå¾—åˆ°Classç±»å¯¹è±¡</span></span><br><span class="line">        Class c = <span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span><span class="keyword">class</span> ;</span><br><span class="line">        <span class="comment">// b.å®šä½æ— å‚æ•°æ„é€ å™¨å¯¹è±¡</span></span><br><span class="line">        Constructor constructor = c.get<span class="constructor">DeclaredConstructor()</span>;</span><br><span class="line">        <span class="comment">// c.æš´åŠ›æ‰“å¼€ç§æœ‰æ„é€ å™¨çš„è®¿é—®æƒé™</span></span><br><span class="line">        constructor.set<span class="constructor">Accessible(<span class="params">true</span>)</span>;</span><br><span class="line">        <span class="comment">// d.é€šè¿‡æ— å‚æ•°æ„é€ å™¨åˆå§‹åŒ–å¯¹è±¡è¿”å›</span></span><br><span class="line">        Student swk = (Student) constructor.<span class="keyword">new</span><span class="constructor">Instance()</span>; <span class="comment">// æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨æ— å‚æ•°æ„é€ å™¨çš„ï¼</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(swk);<span class="comment">//Student&#123;name=&#x27;null&#x27;, age=0&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨æœ‰å‚æ•°æ„é€ å™¨å¾—åˆ°ä¸€ä¸ªç±»çš„å¯¹è±¡è¿”å›ã€‚</span></span><br><span class="line">    @Test</span><br><span class="line">    public void create<span class="constructor">Obj02()</span> throws Exception &#123;</span><br><span class="line">        <span class="comment">// a.åå°„ç¬¬ä¸€æ­¥æ˜¯å…ˆå¾—åˆ°Classç±»å¯¹è±¡</span></span><br><span class="line">        Class c = <span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span><span class="keyword">class</span> ;</span><br><span class="line">        <span class="comment">// b.å®šä½æœ‰å‚æ•°æ„é€ å™¨å¯¹è±¡</span></span><br><span class="line">        Constructor constructor = c.get<span class="constructor">DeclaredConstructor(String.<span class="params">class</span> , <span class="params">int</span>.<span class="params">class</span>)</span>;</span><br><span class="line">        <span class="comment">// c.é€šè¿‡æ— å‚æ•°æ„é€ å™¨åˆå§‹åŒ–å¯¹è±¡è¿”å›</span></span><br><span class="line">        Student swk = (Student) constructor.<span class="keyword">new</span><span class="constructor">Instance(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>,500)</span>; <span class="comment">// æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨æœ‰å‚æ•°æ„é€ å™¨çš„ï¼</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(swk);<span class="comment">//Student&#123;name=&#x27;å­™æ‚Ÿç©º&#x27;, age=500&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è·å–å˜é‡">è·å–å˜é‡</h4>
<p>è·å– Field æˆå‘˜å˜é‡ APIï¼š</p>
<ul>
<li>Field getField(String name)ï¼šæ ¹æ®æˆå‘˜å˜é‡åè·å¾—å¯¹åº” Field å¯¹è±¡ï¼Œåªèƒ½è·å¾— public ä¿®é¥°</li>
<li>Field getDeclaredField(String name)ï¼šæ ¹æ®æˆå‘˜å˜é‡åè·å¾—å¯¹åº” Field å¯¹è±¡ï¼Œæ‰€æœ‰ç”³æ˜çš„å˜é‡</li>
<li>Field[] getFields()ï¼šè·å¾—æ‰€æœ‰çš„æˆå‘˜å˜é‡å¯¹åº”çš„ Field å¯¹è±¡ï¼Œåªèƒ½è·å¾— public çš„</li>
<li>Field[] getDeclaredFields()ï¼šè·å¾—æ‰€æœ‰çš„æˆå‘˜å˜é‡å¯¹åº”çš„ Field å¯¹è±¡ï¼Œåªè¦ç”³æ˜äº†å°±å¯ä»¥å¾—åˆ°</li>
</ul>
<p>Field çš„æ–¹æ³•ï¼šç»™æˆå‘˜å˜é‡èµ‹å€¼å’Œå–å€¼</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>void set(Object obj, Object value)</td>
<td>ç»™å¯¹è±¡æ³¨å…¥æŸä¸ªæˆå‘˜å˜é‡æ•°æ®ï¼Œ<strong>obj æ˜¯å¯¹è±¡</strong>ï¼Œvalue æ˜¯å€¼</td>
</tr>
<tr>
<td>Object get(Object obj)</td>
<td>è·å–æŒ‡å®šå¯¹è±¡çš„æˆå‘˜å˜é‡çš„å€¼ï¼Œ<strong>obj æ˜¯å¯¹è±¡</strong>ï¼Œæ²¡æœ‰å¯¹è±¡ä¸º null</td>
</tr>
<tr>
<td>void setAccessible(true)</td>
<td>æš´åŠ›åå°„ï¼Œè®¾ç½®ä¸ºå¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰ç±»å‹çš„å±æ€§</td>
</tr>
<tr>
<td>Class getType()</td>
<td>è·å–å±æ€§çš„ç±»å‹ï¼Œè¿”å› Class å¯¹è±¡</td>
</tr>
<tr>
<td>String getName()</td>
<td>è·å–å±æ€§çš„åç§°</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FieldDemo</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–å…¨éƒ¨æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getDeclaredFields</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// a.å…ˆè·å–classç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Dog.class;</span><br><span class="line">        <span class="comment">// b.è·å–å…¨éƒ¨ç”³æ˜çš„æˆå‘˜å˜é‡å¯¹è±¡</span></span><br><span class="line">        Field[] fields = c.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            System.out.println(field.getName()+<span class="string">&quot;-&gt;&quot;</span>+field.getType());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–æŸä¸ªæˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getDeclaredField</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// a.å…ˆè·å–classç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Dog.class;</span><br><span class="line">        <span class="comment">// b.å®šä½æŸä¸ªæˆå‘˜å˜é‡å¯¹è±¡ :æ ¹æ®åç§°å®šä½ï¼ï¼</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">ageF</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        System.out.println(ageF.getName()+<span class="string">&quot;-&gt;&quot;</span>+ageF.getType());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age ;</span><br><span class="line">    <span class="keyword">private</span> String color ;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String school;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SCHOOL_1</span> <span class="operator">=</span> <span class="string">&quot;å® ç‰©å­¦æ ¡&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, <span class="type">int</span> age, String color)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æµ‹è¯•æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FieldDemo02</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setField</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// a.åå°„çš„ç¬¬ä¸€æ­¥è·å–Classç±»å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Dog.class ;</span><br><span class="line">        <span class="comment">// b.å®šä½nameæˆå‘˜å˜é‡</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">name</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="comment">// c.ä¸ºè¿™ä¸ªæˆå‘˜å˜é‡èµ‹å€¼ï¼</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        name.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        name.set(d,<span class="string">&quot;æ³°è¿ª&quot;</span>);</span><br><span class="line">        System.out.println(d);<span class="comment">//Dog&#123;name=&#x27;æ³°è¿ª&#x27;, age=0, color=&#x27;null&#x27;&#125;</span></span><br><span class="line">        <span class="comment">// d.è·å–æˆå‘˜å˜é‡çš„å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> name.get(d)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(value);<span class="comment">//æ³°è¿ª</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è·å–æ–¹æ³•">è·å–æ–¹æ³•</h4>
<p>è·å– Method æ–¹æ³• APIï¼š</p>
<ul>
<li>Method getMethod(String name,Classâ€¦args)ï¼šæ ¹æ®æ–¹æ³•åå’Œå‚æ•°ç±»å‹è·å¾—æ–¹æ³•å¯¹è±¡ï¼Œpublic ä¿®é¥°</li>
<li>Method getDeclaredMethod(String name,Classâ€¦args)ï¼šæ ¹æ®æ–¹æ³•åå’Œå‚æ•°ç±»å‹è·å¾—æ–¹æ³•å¯¹è±¡ï¼ŒåŒ…æ‹¬ private</li>
<li>Method[] getMethods()ï¼šè·å¾—ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡è¿”å›æ•°ç»„ï¼Œåªèƒ½è·å¾— public ä¿®é¥°ä¸”åŒ…å«çˆ¶ç±»çš„</li>
<li>Method[] getDeclaredMethods()ï¼šè·å¾—ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡ï¼Œè¿”å›æ•°ç»„ï¼Œåªè·å¾—æœ¬ç±»ç”³æ˜çš„æ–¹æ³•</li>
</ul>
<p>Method å¸¸ç”¨ APIï¼š</p>
<ul>
<li>public Object invoke(Object obj, Objectâ€¦ args)ï¼šä½¿ç”¨æŒ‡å®šçš„å‚æ•°è°ƒç”¨ç”±æ­¤æ–¹æ³•å¯¹è±¡ï¼Œobj å¯¹è±¡å</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MethodDemo</span>&#123;</span><br><span class="line">    <span class="comment">//è·å¾—ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">    @Test</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDeclaredMethods</span>()</span>&#123;</span><br><span class="line">        <span class="comment">// a.å…ˆè·å–classç±»å¯¹è±¡</span></span><br><span class="line">        Class c = Dog.<span class="keyword">class</span> ;</span><br><span class="line">        <span class="comment">// b.è·å–å…¨éƒ¨ç”³æ˜çš„æ–¹æ³•!</span></span><br><span class="line">        Method[] methods = c.getDeclaredMethods();</span><br><span class="line">        <span class="comment">// c.éå†è¿™äº›æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(method.getName()+<span class="string">&quot;-&gt;&quot;</span></span><br><span class="line">                    + method.getParameterCount()+<span class="string">&quot;-&gt;&quot;</span> + method.getReturnType());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDeclardMethod</span>() throws Exception</span> &#123;</span><br><span class="line">        Class c = Dog.<span class="keyword">class</span>;</span><br><span class="line">        Method run = c.getDeclaredMethod(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">        <span class="comment">// c.è§¦å‘æ–¹æ³•æ‰§è¡Œ!</span></span><br><span class="line">        Dog d = <span class="keyword">new</span> Dog();</span><br><span class="line">        Object o = run.invoke(d);</span><br><span class="line">        System.<span class="keyword">out</span>.println(o);<span class="comment">// å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œç»“æœæ˜¯null</span></span><br><span class="line">        </span><br><span class="line">		<span class="comment">//å‚æ•°ä¸€ï¼šæ–¹æ³•åç§°   å‚æ•°äºŒï¼šæ–¹æ³•çš„å‚æ•°ä¸ªæ•°å’Œç±»å‹(å¯å˜å‚æ•°ï¼)</span></span><br><span class="line">        Method eat = c.getDeclaredMethod(<span class="string">&quot;eat&quot;</span>,String.<span class="keyword">class</span>);</span><br><span class="line">        eat.setAccessible(<span class="literal">true</span>); <span class="comment">// æš´åŠ›åå°„ï¼</span></span><br><span class="line">        </span><br><span class="line">       	<span class="comment">//å‚æ•°ä¸€ï¼šè¢«è§¦å‘æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡  å‚æ•°äºŒï¼šæ–¹æ³•éœ€è¦çš„å…¥å‚å€¼</span></span><br><span class="line">        Object o1 = eat.invoke(d,<span class="string">&quot;è‚‰&quot;</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(o1);<span class="comment">// å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œç»“æœæ˜¯null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span>()</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span>&#123;System.<span class="keyword">out</span>.println(<span class="string">&quot;ç‹—è·‘çš„è´¼å¿«~~&quot;</span>);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span>()</span>&#123;System.<span class="keyword">out</span>.println(<span class="string">&quot;ç‹—åƒéª¨å¤´&quot;</span>);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">eat</span>(<span class="params">String name</span>)</span>&#123;System.<span class="keyword">out</span>.println(<span class="string">&quot;ç‹—åƒ&quot;</span>+name);&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">inAddr</span>()</span>&#123;System.<span class="keyword">out</span>.println(<span class="string">&quot;åœ¨å‰å±±åŒºæœ‰ä¸€åªå•èº«ç‹—ï¼&quot;</span>);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æš´åŠ›æ”»å‡»">æš´åŠ›æ”»å‡»</h3>
<p>æ³›å‹åªèƒ½å·¥ä½œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œè¿è¡Œé˜¶æ®µæ³›å‹å°±æ¶ˆå¤±äº†ï¼Œåå°„å·¥ä½œåœ¨è¿è¡Œæ—¶é˜¶æ®µ</p>
<ol>
<li>åå°„å¯ä»¥ç ´åé¢å‘å¯¹è±¡çš„å°è£…æ€§ï¼ˆæš´åŠ›åå°„ï¼‰</li>
<li>åŒæ—¶å¯ä»¥ç ´åæ³›å‹çš„çº¦æŸæ€§</li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> ReflectDemo &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws <span class="keyword">Exception</span> &#123;</span><br><span class="line">        List&lt;<span class="type">Double</span>&gt; scores = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        scores.<span class="keyword">add</span>(<span class="number">99.3</span>);</span><br><span class="line">        scores.<span class="keyword">add</span>(<span class="number">199.3</span>);</span><br><span class="line">        scores.<span class="keyword">add</span>(<span class="number">89.5</span>);</span><br><span class="line">        // æ‹“å±•ï¼šé€šè¿‡åå°„æš´åŠ›çš„æ³¨å…¥ä¸€ä¸ªå…¶ä»–ç±»å‹çš„æ•°æ®è¿›å»ã€‚</span><br><span class="line">        // a.å…ˆå¾—åˆ°é›†åˆå¯¹è±¡çš„<span class="keyword">Class</span>æ–‡ä»¶å¯¹è±¡</span><br><span class="line">        <span class="keyword">Class</span> c = scores.getClass();</span><br><span class="line">        // b.ä»ArrayListçš„<span class="keyword">Class</span>å¯¹è±¡ä¸­å®šä½<span class="keyword">add</span>æ–¹æ³•</span><br><span class="line">        <span class="keyword">Method</span> <span class="keyword">add</span> = c.getDeclaredMethod(&quot;add&quot;, <span class="keyword">Object</span>.<span class="keyword">class</span>);</span><br><span class="line">        // c.è§¦å‘scoresé›†åˆå¯¹è±¡ä¸­çš„<span class="keyword">add</span>æ‰§è¡Œï¼ˆè¿è¡Œé˜¶æ®µï¼Œæ³›å‹ä¸èƒ½çº¦æŸäº†ï¼‰</span><br><span class="line">        <span class="keyword">add</span>.invoke(scores, &quot;å­—ç¬¦ä¸²&quot;);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(scores);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ³¨è§£">æ³¨è§£</h2>
<h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3>
<p>æ³¨è§£ï¼šç±»çš„ç»„æˆéƒ¨åˆ†ï¼Œå¯ä»¥ç»™ç±»æºå¸¦ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œæä¾›ä¸€ç§å®‰å…¨çš„ç±»ä¼¼æ³¨é‡Šæ ‡è®°çš„æœºåˆ¶ï¼Œç”¨æ¥å°†ä»»ä½•ä¿¡æ¯æˆ–å…ƒæ•°æ®ï¼ˆmetadataï¼‰ä¸ç¨‹åºå…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ç­‰ï¼‰è¿›è¡Œå…³è”</p>
<ul>
<li>æ³¨è§£æ˜¯ç»™ç¼–è¯‘å™¨æˆ– JVM çœ‹çš„ï¼Œç¼–è¯‘å™¨æˆ– JVM å¯ä»¥æ ¹æ®æ³¨è§£æ¥å®Œæˆå¯¹åº”çš„åŠŸèƒ½</li>
<li>æ³¨è§£ç±»ä¼¼ä¿®é¥°ç¬¦ï¼Œåº”ç”¨äºåŒ…ã€ç±»å‹ã€æ„é€ æ–¹æ³•ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ã€å‚æ•°åŠæœ¬åœ°å˜é‡çš„å£°æ˜è¯­å¥ä¸­</li>
<li><strong>çˆ¶ç±»ä¸­çš„æ³¨è§£æ˜¯ä¸èƒ½è¢«å­ç±»ç»§æ‰¿çš„</strong></li>
</ul>
<p>æ³¨è§£ä½œç”¨ï¼š</p>
<ul>
<li>æ ‡è®°</li>
<li>æ¡†æ¶æŠ€æœ¯å¤šåŠéƒ½æ˜¯åœ¨ä½¿ç”¨æ³¨è§£å’Œåå°„ï¼Œéƒ½æ˜¯å±äºæ¡†æ¶çš„åº•å±‚åŸºç¡€æŠ€æœ¯</li>
<li>åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ ¼å¼æ£€æŸ¥ï¼Œæ¯”å¦‚æ–¹æ³•é‡å†™çº¦æŸ @Overrideã€å‡½æ•°å¼æ¥å£çº¦æŸ @FunctionalInterface.</li>
</ul>
<h3 id="æ³¨è§£æ ¼å¼">æ³¨è§£æ ¼å¼</h3>
<p>å®šä¹‰æ ¼å¼ï¼šè‡ªå®šä¹‰æ³¨è§£ç”¨ @interface å…³é”®å­—ï¼Œæ³¨è§£é»˜è®¤å¯ä»¥æ ‡è®°å¾ˆå¤šåœ°æ–¹</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ @<span class="class"><span class="keyword">interface</span> æ³¨è§£å</span>&#123;</span><br><span class="line">     <span class="comment">// æ³¨è§£å±æ€§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ³¨è§£çš„æ ¼å¼ï¼š@æ³¨è§£å</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Book</span></span><br><span class="line"><span class="variable">@MyTest</span></span><br><span class="line">public class MyBook &#123;</span><br><span class="line">    <span class="comment">//æ–¹æ³•å˜é‡éƒ½å¯ä»¥æ³¨è§£</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@interface</span> Book&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">@interface</span> MyTest&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨è§£å±æ€§">æ³¨è§£å±æ€§</h3>
<h4 id="æ™®é€šå±æ€§">æ™®é€šå±æ€§</h4>
<p>æ³¨è§£å¯ä»¥æœ‰å±æ€§ï¼Œ<strong>å±æ€§åå¿…é¡»å¸¦ ()</strong>ï¼Œåœ¨ç”¨æ³¨è§£çš„æ—¶å€™ï¼Œå±æ€§å¿…é¡»èµ‹å€¼ï¼Œé™¤éå±æ€§æœ‰é»˜è®¤å€¼</p>
<p>å±æ€§çš„æ ¼å¼ï¼š</p>
<ul>
<li>æ ¼å¼ 1ï¼šæ•°æ®ç±»å‹ å±æ€§å()</li>
<li>æ ¼å¼ 2ï¼šæ•°æ®ç±»å‹ å±æ€§å() default é»˜è®¤å€¼</li>
</ul>
<p>å±æ€§é€‚ç”¨çš„æ•°æ®ç±»å‹:</p>
<ul>
<li>å…«ç§æ•°æ®æ•°æ®ç±»å‹ï¼ˆintï¼Œshortï¼Œlongï¼Œdoubleï¼Œbyteï¼Œcharï¼Œbooleanï¼Œfloatï¼‰å’Œ Stringã€Class</li>
<li>ä»¥ä¸Šç±»å‹çš„æ•°ç»„å½¢å¼éƒ½æ”¯æŒ</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@MyBook(name=<span class="string">&quot;ã€Šç²¾é€šJavaåŸºç¡€ã€‹&quot;</span>,authors = &#123;<span class="string">&quot;æ’­ä»”&quot;</span>,<span class="string">&quot;Dlei&quot;</span>,<span class="string">&quot;æ’­å¦&quot;</span>&#125; , price = <span class="number">99.9</span> )</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AnnotationDemo01</span> &#123;</span><br><span class="line">    @MyBook(name=<span class="string">&quot;ã€Šç²¾é€šMySQLæ•°æ®åº“å…¥é—¨åˆ°åˆ åº“è·‘è·¯ã€‹&quot;</span>,authors = &#123;<span class="string">&quot;å°ç™½&quot;</span>,<span class="string">&quot;å°é»‘&quot;</span>&#125; ,</span><br><span class="line">     					price = <span class="number">19.9</span> , address = <span class="string">&quot;åŒ—äº¬&quot;</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£</span></span><br><span class="line">@interface MyBook&#123;</span><br><span class="line">    <span class="function">String <span class="title">name</span>()</span>;</span><br><span class="line">    <span class="function">String[] <span class="title">authors</span>()</span>; <span class="comment">// æ•°ç»„</span></span><br><span class="line">    <span class="function"><span class="built_in">double</span> <span class="title">price</span>()</span>;</span><br><span class="line">    <span class="function">String <span class="title">address</span>() <span class="literal">default</span> &quot;æ­¦æ±‰&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç‰¹æ®Šå±æ€§">ç‰¹æ®Šå±æ€§</h4>
<p>æ³¨è§£çš„ç‰¹æ®Šå±æ€§åç§°ï¼švalue</p>
<ul>
<li>å¦‚æœåªæœ‰ä¸€ä¸ª value å±æ€§çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ value å±æ€§çš„æ—¶å€™å¯ä»¥çœç•¥ value åç§°ä¸å†™</li>
<li>å¦‚æœæœ‰å¤šä¸ªå±æ€§ï¼Œä¸”å¤šä¸ªå±æ€§æ²¡æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆ value æ˜¯ä¸èƒ½çœç•¥çš„</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Book(&quot;/deleteBook.action&quot;)</span></span><br><span class="line"><span class="variable">@Book</span>(value = <span class="string">&quot;/deleteBook.action&quot;</span> , age = <span class="number">12</span>)</span><br><span class="line">public class AnnotationDemo01&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@interface</span> Book&#123;</span><br><span class="line">    <span class="selector-tag">String</span> <span class="selector-tag">value</span>();</span><br><span class="line">    <span class="selector-tag">int</span> <span class="selector-tag">age</span>() <span class="selector-tag">default</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…ƒæ³¨è§£">å…ƒæ³¨è§£</h3>
<p>å…ƒæ³¨è§£æ˜¯ sun å…¬å¸æä¾›çš„ï¼Œç”¨æ¥æ³¨è§£è‡ªå®šä¹‰æ³¨è§£</p>
<p>å…ƒæ³¨è§£æœ‰å››ä¸ªï¼š</p>
<ul>
<li>@Targetï¼šçº¦æŸè‡ªå®šä¹‰æ³¨è§£å¯ä»¥æ ‡è®°çš„èŒƒå›´ï¼Œé»˜è®¤å€¼ä¸ºä»»ä½•å…ƒç´ ï¼Œè¡¨ç¤ºè¯¥æ³¨è§£ç”¨äºä»€ä¹ˆåœ°æ–¹ï¼Œå¯ç”¨å€¼å®šä¹‰åœ¨ ElementType ç±»ä¸­ï¼š
<ul>
<li><code>ElementType.CONSTRUCTOR</code>ï¼šç”¨äºæè¿°æ„é€ å™¨</li>
<li><code>ElementType.FIELD</code>ï¼šæˆå‘˜å˜é‡ã€å¯¹è±¡ã€å±æ€§ï¼ˆåŒ…æ‹¬ enum å®ä¾‹ï¼‰</li>
<li><code>ElementType.LOCAL_VARIABLE</code>ï¼šç”¨äºæè¿°å±€éƒ¨å˜é‡</li>
<li><code>ElementType.METHOD</code>ï¼šç”¨äºæè¿°æ–¹æ³•</li>
<li><code>ElementType.PACKAGE</code>ï¼šç”¨äºæè¿°åŒ…</li>
<li><code>ElementType.PARAMETER</code>ï¼šç”¨äºæè¿°å‚æ•°</li>
<li><code>ElementType.TYPE</code>ï¼šç”¨äºæè¿°ç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬æ³¨è§£ç±»å‹ï¼‰æˆ– enum å£°æ˜</li>
</ul>
</li>
<li>@Retentionï¼šå®šä¹‰è¯¥æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œç”³æ˜æ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼šç¼–è¯‘æ—¶ï¼Œè¿è¡Œæ—¶ï¼Œå¯ä½¿ç”¨çš„å€¼å®šä¹‰åœ¨ RetentionPolicy æšä¸¾ç±»ä¸­ï¼š
<ul>
<li><code>RetentionPolicy.SOURCE</code>ï¼šåœ¨ç¼–è¯‘é˜¶æ®µä¸¢å¼ƒï¼Œè¿™äº›æ³¨è§£åœ¨ç¼–è¯‘ç»“æŸä¹‹åå°±ä¸å†æœ‰ä»»ä½•æ„ä¹‰ï¼Œåªä½œç”¨åœ¨æºç é˜¶æ®µï¼Œç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ä¸å­˜åœ¨ï¼Œ<code>@Override</code>ã€<code>@SuppressWarnings</code> éƒ½å±äºè¿™ç±»æ³¨è§£</li>
<li><code>RetentionPolicy.CLASS</code>ï¼šåœ¨ç±»åŠ è½½æ—¶ä¸¢å¼ƒï¼Œåœ¨å­—èŠ‚ç æ–‡ä»¶çš„å¤„ç†ä¸­æœ‰ç”¨ï¼Œè¿è¡Œé˜¶æ®µä¸å­˜åœ¨ï¼Œé»˜è®¤å€¼</li>
<li><code>RetentionPolicy.RUNTIME</code> : å§‹ç»ˆä¸ä¼šä¸¢å¼ƒï¼Œè¿è¡ŒæœŸä¹Ÿä¿ç•™è¯¥æ³¨è§£ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åå°„æœºåˆ¶è¯»å–è¯¥æ³¨è§£çš„ä¿¡æ¯ï¼Œè‡ªå®šä¹‰çš„æ³¨è§£é€šå¸¸ä½¿ç”¨è¿™ç§æ–¹å¼</li>
</ul>
</li>
<li>@Inheritedï¼šè¡¨ç¤ºä¿®é¥°çš„è‡ªå®šä¹‰æ³¨è§£å¯ä»¥è¢«å­ç±»ç»§æ‰¿</li>
<li>@Documentedï¼šè¡¨ç¤ºæ˜¯å¦å°†è‡ªå®šä¹‰çš„æ³¨è§£ä¿¡æ¯æ·»åŠ åœ¨ Java æ–‡æ¡£ä¸­</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">public</span> <span class="selector-tag">class</span> <span class="selector-tag">AnnotationDemo01</span>&#123;</span><br><span class="line">    <span class="comment">// @MyTest // åªèƒ½æ³¨è§£æ–¹æ³•</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">name</span>;</span><br><span class="line"></span><br><span class="line">    @<span class="selector-tag">MyTest</span></span><br><span class="line">    <span class="selector-tag">public</span> <span class="selector-tag">static</span> <span class="selector-tag">void</span> <span class="selector-tag">main</span>( String[] args) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">@Target</span>(ElementType.METHOD) <span class="comment">// ç”³æ˜åªèƒ½æ³¨è§£æ–¹æ³•</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME) <span class="comment">// ç”³æ˜æ³¨è§£ä»å†™ä»£ç ä¸€ç›´åˆ°è¿è¡Œè¿˜åœ¨ï¼Œæ°¸è¿œå­˜æ´»ï¼ï¼</span></span><br><span class="line"><span class="variable">@interface</span> MyTest&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨è§£è§£æ">æ³¨è§£è§£æ</h3>
<p>å¼€å‘ä¸­ç»å¸¸è¦çŸ¥é“ä¸€ä¸ªç±»çš„æˆåˆ†ä¸Šé¢åˆ°åº•æœ‰å“ªäº›æ³¨è§£ï¼Œæ³¨è§£æœ‰å“ªäº›å±æ€§æ•°æ®ï¼Œè¿™éƒ½éœ€è¦è¿›è¡Œæ³¨è§£çš„è§£æ</p>
<p>æ³¨è§£è§£æç›¸å…³çš„æ¥å£ï¼š</p>
<ul>
<li>Annotationï¼šæ³¨è§£ç±»å‹ï¼Œè¯¥ç±»æ˜¯æ‰€æœ‰æ³¨è§£çš„çˆ¶ç±»ï¼Œæ³¨è§£éƒ½æ˜¯ä¸€ä¸ª Annotation çš„å¯¹è±¡</li>
<li>AnnotatedElementï¼šè¯¥æ¥å£å®šä¹‰äº†ä¸æ³¨è§£è§£æç›¸å…³çš„æ–¹æ³•</li>
<li>Classã€Methodã€Fieldã€Constructor ç±»æˆåˆ†ï¼šå®ç° AnnotatedElement æ¥å£ï¼Œæ‹¥æœ‰è§£ææ³¨è§£çš„èƒ½åŠ›</li>
</ul>
<p>Class ç±» API ï¼š</p>
<ul>
<li><code>Annotation[] getDeclaredAnnotations()</code>ï¼šè·å¾—å½“å‰å¯¹è±¡ä¸Šä½¿ç”¨çš„æ‰€æœ‰æ³¨è§£ï¼Œè¿”å›æ³¨è§£æ•°ç»„</li>
<li><code>T getDeclaredAnnotation(Class annotationClass)</code>ï¼šæ ¹æ®æ³¨è§£ç±»å‹è·å¾—å¯¹åº”æ³¨è§£å¯¹è±¡</li>
<li><code>T getAnnotation(Class annotationClass)</code>ï¼šæ ¹æ®æ³¨è§£ç±»å‹è·å¾—å¯¹åº”æ³¨è§£å¯¹è±¡</li>
<li><code>boolean isAnnotationPresent(Class class)</code>ï¼šåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†æŒ‡å®šçš„æ³¨è§£</li>
<li><code>boolean isAnnotation()</code>ï¼šæ­¤ Class å¯¹è±¡æ˜¯å¦è¡¨ç¤ºæ³¨é‡Šç±»å‹</li>
</ul>
<p>æ³¨è§£åŸç†ï¼šæ³¨è§£æœ¬è´¨æ˜¯<strong>ç‰¹æ®Šæ¥å£</strong>ï¼Œç»§æ‰¿äº† <code>Annotation</code> ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯ Java è¿è¡Œæ—¶ç”Ÿæˆçš„<strong>åŠ¨æ€ä»£ç†ç±»</strong>ï¼Œé€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ <code>$Proxy1</code>ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£ï¼ˆæ¥å£ï¼‰çš„æ–¹æ³•ï¼Œå›è°ƒ <code>AnnotationInvocationHandler</code> çš„ <code>invoke</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šä» <code>memberValues</code>  è¿™ä¸ª Map ä¸­æ‰¾å‡ºå¯¹åº”çš„å€¼ï¼Œè€Œ <code>memberValues</code> çš„æ¥æºæ˜¯ Java å¸¸é‡æ± </p>
<p>è§£ææ³¨è§£æ•°æ®çš„åŸç†ï¼šæ³¨è§£åœ¨å“ªä¸ªæˆåˆ†ä¸Šï¼Œå°±å…ˆæ‹¿å“ªä¸ªæˆåˆ†å¯¹è±¡ï¼Œæ¯”å¦‚æ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šï¼Œåˆ™è¦è¯¥ç±»çš„ Class å¯¹è±¡ï¼Œå†æ¥æ‹¿ä¸Šé¢çš„æ³¨è§£</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> AnnotationDemo&#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void parse<span class="constructor">Class()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.å®šä½Classç±»å¯¹è±¡</span></span><br><span class="line">        Class c = <span class="module-access"><span class="module"><span class="identifier">BookStore</span>.</span></span><span class="keyword">class</span>;</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­è¿™ä¸ªç±»ä¸Šæ˜¯å¦ä½¿ç”¨äº†æŸä¸ªæ³¨è§£</span></span><br><span class="line">        <span class="keyword">if</span>(c.is<span class="constructor">AnnotationPresent(Book.<span class="params">class</span>)</span>)&#123;</span><br><span class="line">            <span class="comment">// 3.è·å–è¿™ä¸ªæ³¨è§£å¯¹è±¡</span></span><br><span class="line">            Book b = (Book)c.get<span class="constructor">DeclarAnnotation(Book.<span class="params">class</span>)</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(book.value<span class="literal">()</span>);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(book.price<span class="literal">()</span>);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">book</span>.<span class="params">authors</span>()</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void parse<span class="constructor">Method()</span> throws Exception &#123;</span><br><span class="line">        Class c = <span class="module-access"><span class="module"><span class="identifier">BookStore</span>.</span></span><span class="keyword">class</span>;</span><br><span class="line">        Method run = c.get<span class="constructor">DeclaredMethod(<span class="string">&quot;run&quot;</span>)</span>;</span><br><span class="line">        <span class="keyword">if</span>(run.is<span class="constructor">AnnotationPresent(Book.<span class="params">class</span>)</span>)&#123;</span><br><span class="line">            Book b = (Book)run.get<span class="constructor">DeclaredAnnotation(Book.<span class="params">class</span>)</span>;</span><br><span class="line">           	sout(ä¸Šé¢çš„ä¸‰ä¸ª);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="constructor">Book(<span class="params">value</span> = <span class="string">&quot;ã€ŠJavaåŸºç¡€åˆ°ç²¾é€šã€‹&quot;</span>, <span class="params">price</span> = 99.5, <span class="params">authors</span> = &#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;æå››&quot;</span>&#125;)</span></span><br><span class="line"><span class="keyword">class</span> BookStore&#123;</span><br><span class="line">    @<span class="constructor">Book(<span class="params">value</span> = <span class="string">&quot;ã€ŠMybatisæŒä¹…å±‚æ¡†æ¶ã€‹&quot;</span>, <span class="params">price</span> = 199.5, <span class="params">authors</span> = &#123;<span class="string">&quot;ç‹äº”&quot;</span>,<span class="string">&quot;å°å…­&quot;</span>&#125;)</span></span><br><span class="line">    public void run<span class="literal">()</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="constructor">Target(&#123;ElementType.TYPE,ElementType.METHOD&#125;)</span> <span class="comment">// ç±»å’Œæˆå‘˜æ–¹æ³•ä¸Šä½¿ç”¨</span></span><br><span class="line">@<span class="constructor">Retention(RetentionPolicy.RUNTIME)</span> <span class="comment">// æ³¨è§£æ°¸ä¹…å­˜æ´»</span></span><br><span class="line">@interface Book&#123;</span><br><span class="line">    String value<span class="literal">()</span>;</span><br><span class="line">    double price<span class="literal">()</span> default <span class="number">100</span>;</span><br><span class="line">    String<span class="literal">[]</span> authors<span class="literal">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="XML">XML</h2>
<h3 id="æ¦‚è¿°-11">æ¦‚è¿°</h3>
<p>XMLä»‹ç»ï¼š</p>
<ul>
<li>XML æŒ‡å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆEXtensible Markup Languageï¼‰</li>
<li>XML æ˜¯ä¸€ç§<strong>æ ‡è®°è¯­è¨€</strong>ï¼Œå¾ˆç±»ä¼¼ HTMLï¼ŒHTMLæ–‡ä»¶ä¹Ÿæ˜¯XMLæ–‡æ¡£</li>
<li>XML çš„è®¾è®¡å®—æ—¨æ˜¯<strong>ä¼ è¾“æ•°æ®</strong>ï¼Œè€Œéæ˜¾ç¤ºæ•°æ®</li>
<li>XML æ ‡ç­¾æ²¡æœ‰è¢«é¢„å®šä¹‰ï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰æ ‡ç­¾</li>
<li>XML è¢«è®¾è®¡ä¸ºå…·æœ‰è‡ªæˆ‘æè¿°æ€§ï¼Œæ˜“äºé˜…è¯»</li>
<li>XML æ˜¯ W3C çš„æ¨èæ ‡å‡†</li>
</ul>
<p><strong>XML ä¸ HTML çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li>XML ä¸æ˜¯ HTML çš„æ›¿ä»£ï¼ŒXML å’Œ HTML ä¸ºä¸åŒçš„ç›®çš„è€Œè®¾è®¡</li>
<li>XML è¢«è®¾è®¡ä¸ºä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œå…¶ç„¦ç‚¹æ˜¯æ•°æ®çš„å†…å®¹ï¼›XMlæ ‡ç­¾å¯è‡ªå®šä¹‰ï¼Œä¾¿äºé˜…è¯»</li>
<li>HTML è¢«è®¾è®¡ç”¨æ¥æ˜¾ç¤ºæ•°æ®ï¼Œå…¶ç„¦ç‚¹æ˜¯æ•°æ®çš„å¤–è§‚ï¼›HTMLæ ‡ç­¾è¢«é¢„è®¾å¥½ï¼Œä¾¿äºæµè§ˆå™¨è¯†åˆ«</li>
<li>HTML æ—¨åœ¨æ˜¾ç¤ºä¿¡æ¯ï¼Œè€Œ XML æ—¨åœ¨ä¼ è¾“ä¿¡æ¯</li>
</ul>
<h3 id="åˆ›å»º">åˆ›å»º</h3>
<p>person.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">person</span> <span class="attr">id</span>=<span class="string">&quot;110&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span>		<span class="comment">&lt;!--å¹´é¾„--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>å¼ ä¸‰<span class="tag">&lt;/<span class="name">name</span>&gt;</span>	  <span class="comment">&lt;!--å§“å--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">sex</span>/&gt;</span>				<span class="comment">&lt;!--æ€§åˆ«--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ç»„æˆ">ç»„æˆ</h3>
<p>XML æ–‡ä»¶ä¸­å¸¸è§çš„ç»„æˆå…ƒç´ æœ‰:æ–‡æ¡£å£°æ˜ã€å…ƒç´ ã€å±æ€§ã€æ³¨é‡Šã€è½¬ä¹‰å­—ç¬¦ã€å­—ç¬¦åŒºã€‚æ–‡ä»¶åç¼€åä¸º xml</p>
<ul>
<li>
<p><strong>æ–‡æ¡£å£°æ˜</strong>  ``ï¼Œæ–‡æ¡£å£°æ˜å¿…é¡»åœ¨ç¬¬ä¸€è¡Œï¼Œä»¥ <code>å¼€å¤´ï¼Œä»¥</code>?&gt;` ç»“æŸï¼Œ</p>
<ul>
<li>versionï¼šæŒ‡å®š XML æ–‡æ¡£ç‰ˆæœ¬ã€‚å¿…é¡»å±æ€§ï¼Œè¿™é‡Œä¸€èˆ¬é€‰æ‹© 1.0</li>
<li>encondingï¼šæŒ‡å®šå½“å‰æ–‡æ¡£çš„ç¼–ç ï¼Œå¯é€‰å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯ utf-8</li>
<li>standaloneï¼šè¯¥å±æ€§ä¸æ˜¯å¿…é¡»çš„ï¼Œæè¿° XML æ–‡ä»¶æ˜¯å¦ä¾èµ–å…¶ä»–çš„ xml æ–‡ä»¶ï¼Œå–å€¼ä¸º yes/no</li>
</ul>
</li>
<li>
<p><strong>å…ƒç´ </strong></p>
<ul>
<li>æ ¼å¼ 1ï¼š``</li>
<li>æ ¼å¼ 2ï¼š``</li>
<li>æ™®é€šå…ƒç´ çš„ç»“æ„ç”±å¼€å§‹æ ‡ç­¾ã€å…ƒç´ ä½“ã€ç»“æŸæ ‡ç­¾ç»„æˆ</li>
<li>æ ‡ç­¾ç”±ä¸€å¯¹å°–æ‹¬å·å’Œåˆæ³•æ ‡è¯†ç¬¦ç»„æˆï¼Œæ ‡ç­¾å¿…é¡»æˆå¯¹å‡ºç°ã€‚ç‰¹æ®Šçš„æ ‡ç­¾å¯ä»¥ä¸æˆå¯¹ï¼Œå¿…é¡»æœ‰ç»“æŸæ ‡è®° &lt;/&gt;</li>
</ul>
</li>
<li>
<p>å…ƒç´ ä½“ï¼šå¯ä»¥æ˜¯å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¾‹å¦‚ï¼š<code>å¼ ä¸‰</code></p>
<ul>
<li>ç©ºå…ƒç´ ï¼šç©ºå…ƒç´ åªæœ‰æ ‡ç­¾ï¼Œè€Œæ²¡æœ‰ç»“æŸæ ‡ç­¾ï¼Œä½†<strong>å…ƒç´ å¿…é¡»è‡ªå·±é—­åˆ</strong>ï¼Œä¾‹å¦‚ï¼š``</li>
<li>å…ƒç´ å‘½åï¼šåŒºåˆ†å¤§å°å†™ã€ä¸èƒ½ä½¿ç”¨ç©ºæ ¼å†’å·ã€ä¸å»ºè®®ç”¨ XMLã€xmlã€Xml ç­‰å¼€å¤´</li>
<li>å¿…é¡»å­˜åœ¨ä¸€ä¸ªæ ¹æ ‡ç­¾ï¼Œæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ª</li>
</ul>
</li>
<li>
<p><strong>å±æ€§</strong>ï¼š``</p>
<ul>
<li>å±æ€§æ˜¯å…ƒç´ çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¿…é¡»å‡ºç°åœ¨å…ƒç´ çš„å¼€å§‹æ ‡ç­¾ä¸­</li>
<li>å±æ€§çš„å®šä¹‰æ ¼å¼ï¼š<code>å±æ€§å=â€œå±æ€§å€¼â€</code>ï¼Œå…¶ä¸­å±æ€§å€¼å¿…é¡»ä½¿ç”¨å•å¼•æˆ–åŒå¼•å·æ‹¬èµ·æ¥</li>
<li>ä¸€ä¸ªå…ƒç´ å¯ä»¥æœ‰ 0~N ä¸ªå±æ€§ï¼Œä½†ä¸€ä¸ªå…ƒç´ ä¸­ä¸èƒ½å‡ºç°åŒåå±æ€§</li>
<li>å±æ€§åä¸èƒ½ä½¿ç”¨ç©ºæ ¼ , ä¸è¦ä½¿ç”¨å†’å·ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œä¸”å¿…é¡»ä»¥å­—æ¯å¼€å¤´</li>
</ul>
</li>
<li>
<p><strong>æ³¨é‡Š</strong>ï¼š<!--æ³¨é‡Šå†…å®¹--> XMLçš„æ³¨é‡Šä¸HTMLç›¸åŒï¼Œæ—¢ä»¥ <code> å¼€å§‹ï¼Œ</code>â€“&gt;` ç»“æŸã€‚</p>
</li>
<li>
<p><strong>è½¬ä¹‰å­—ç¬¦</strong> XML ä¸­çš„è½¬ä¹‰å­—ç¬¦ä¸ HTML ä¸€æ ·ã€‚å› ä¸ºå¾ˆå¤šç¬¦å·å·²ç»è¢«æ–‡æ¡£ç»“æ„æ‰€ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨å…ƒç´ ä½“æˆ–å±æ€§å€¼ä¸­æƒ³ä½¿ç”¨è¿™äº›ç¬¦å·å°±å¿…é¡»ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼ˆä¹Ÿå«å®ä½“å­—ç¬¦ï¼‰ï¼Œä¾‹å¦‚ï¼šâ€œ&gt;â€ã€â€œ&lt;â€ã€â€œ'â€ã€â€œâ€â€œã€â€&amp;&quot; XML ä¸­ä»…æœ‰å­—ç¬¦ &lt; å’Œ &amp; æ˜¯éæ³•çš„ã€‚çœç•¥å·ã€å¼•å·å’Œå¤§äºå·æ˜¯åˆæ³•çš„ï¼ŒæŠŠå®ƒä»¬æ›¿æ¢ä¸ºå®ä½“å¼•ç”¨</p>
<table>
<thead>
<tr>
<th style="text-align:center">å­—ç¬¦</th>
<th style="text-align:center">é¢„å®šä¹‰çš„è½¬ä¹‰å­—ç¬¦</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center"><code>&lt;</code></td>
<td style="text-align:center">å°äº</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center"><code>&gt;</code></td>
<td style="text-align:center">å¤§äº</td>
</tr>
<tr>
<td style="text-align:center">&quot;</td>
<td style="text-align:center"><code>&quot;</code></td>
<td style="text-align:center">åŒå¼•å·</td>
</tr>
<tr>
<td style="text-align:center">â€™</td>
<td style="text-align:center"><code>'</code></td>
<td style="text-align:center">å•å¼•å·</td>
</tr>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:center"><code>&amp;</code></td>
<td style="text-align:center">å’Œå·</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>å­—ç¬¦åŒº</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;![CDATA[</span><br><span class="line">	æ–‡æœ¬æ•°æ®</span><br><span class="line">]]&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>CDATA æŒ‡çš„æ˜¯ä¸åº”ç”± XML è§£æå™¨è¿›è¡Œè§£æçš„æ–‡æœ¬æ•°æ®ï¼ˆUnparsed Character Dataï¼‰</li>
</ul>
</li>
<li>
<p>CDATA éƒ¨åˆ†ç”± â€œ<![CDATA[" å¼€å§‹ï¼Œç”± "]]>â€ ç»“æŸï¼›</p>
<ul>
<li>å¤§é‡çš„è½¬ä¹‰å­—ç¬¦åœ¨xmlæ–‡æ¡£ä¸­æ—¶ï¼Œä¼šä½¿XMLæ–‡æ¡£çš„å¯è¯»æ€§å¤§å¹…åº¦é™ä½ã€‚è¿™æ—¶ä½¿ç”¨CDATAæ®µå°±ä¼šå¥½ä¸€äº›</li>
<li>è§„åˆ™ï¼š
<ul>
<li>CDATA éƒ¨åˆ†ä¸èƒ½åŒ…å«å­—ç¬¦ä¸² ]]&gt;ï¼Œä¹Ÿä¸å…è®¸åµŒå¥—çš„ CDATA éƒ¨åˆ†</li>
<li>æ ‡è®° CDATA éƒ¨åˆ†ç»“å°¾çš„ ]]&gt; ä¸èƒ½åŒ…å«ç©ºæ ¼æˆ–æŠ˜è¡Œ</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;../css/xml.css&quot;</span> ?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 7.å¤„ç†æŒ‡ä»¤ï¼šå¯¼å…¥å¤–éƒ¨çš„cssæ ·å¼æ§åˆ¶xmlçš„ç•Œé¢æ•ˆæœï¼Œæ²¡æœ‰å•¥ç”¨ï¼Œxmlä¸æ˜¯ä¸ºäº†å±•ç¤ºå¥½çœ‹çš„ï¼--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1.ç”³æ˜ æŠ¬å¤´ å¿…é¡»åœ¨ç¬¬ä¸€è¡Œ--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2.æ³¨é‡Šï¼Œæœ¬å¤„å°±æ˜¯æ³¨é‡Šï¼Œå¿…é¡»ç”¨å‰åå°–æ‹¬å·å›´èµ·æ¥ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 3.æ ‡ç­¾ï¼ˆå…ƒç´ ï¼‰ï¼Œæ³¨æ„ä¸€ä¸ªXMLæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 4.å±æ€§ä¿¡æ¯ï¼šid , desc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;é«˜å¯Œå¸…&quot;</span>&gt;</span>è¥¿é—¨åº†<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>32<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 5.å®ä½“å­—ç¬¦ï¼šåœ¨xmlæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥å†™å°äºå·ï¼Œç­‰ä¸€äº›ç‰¹æ®Šå­—ç¬¦</span></span><br><span class="line"><span class="comment">        ä¼šä¸xmlæ–‡ä»¶æœ¬èº«çš„å†…å®¹å†²çªæŠ¥é”™ï¼Œæ­¤æ—¶å¿…é¡»ç”¨è½¬ä¹‰çš„å®ä½“å­—ç¬¦ã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- select * from student where age &lt; 18 &amp;&amp; age &gt; 10; --&gt;</span></span><br><span class="line">        select * from student where age <span class="symbol">&amp;lt;</span> 18 <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> age <span class="symbol">&amp;gt;</span> 10;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 6.å­—ç¬¦æ•°æ®åŒºï¼šåœ¨xmlæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥å†™å°äºå·ï¼Œç­‰ä¸€äº›ç‰¹æ®Šå­—ç¬¦</span></span><br><span class="line"><span class="comment">        ä¼šä¸xmlæ–‡ä»¶æœ¬èº«çš„å†…å®¹å†²çªæŠ¥é”™ï¼Œæ­¤æ—¶å¿…é¡»ç”¨è½¬ä¹‰çš„å®ä½“å­—ç¬¦</span></span><br><span class="line"><span class="comment">        æˆ–è€…ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨å­—ç¬¦æ•°æ®åŒºï¼Œé‡Œé¢çš„å†…å®¹å¯ä»¥éšä¾¿äº†ï¼</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql2</span>&gt;</span></span><br><span class="line">        &lt;![CDATA[</span><br><span class="line">             select * from student where age &lt; 18 &amp;&amp; age &gt; 10;</span><br><span class="line">        ]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="çº¦æŸ">çº¦æŸ</h3>
<h4 id="DTD">DTD</h4>
<p>DTD æ˜¯æ–‡æ¡£ç±»å‹å®šä¹‰ï¼ˆDocument Type Definitionï¼‰ã€‚DTD å¯ä»¥å®šä¹‰åœ¨ XML æ–‡æ¡£ä¸­å‡ºç°çš„å…ƒç´ ã€è¿™äº›å…ƒç´ å‡ºç°çš„æ¬¡åºã€å®ƒä»¬å¦‚ä½•ç›¸äº’åµŒå¥—ä»¥åŠ XML æ–‡æ¡£ç»“æ„çš„å…¶å®ƒè¯¦ç»†ä¿¡æ¯ã€‚</p>
<p>DTD è§„åˆ™ï¼š</p>
<ul>
<li>
<p>çº¦æŸå…ƒç´ çš„åµŒå¥—å±‚çº§</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ELEMENT çˆ¶æ ‡ç­¾ ï¼ˆå­æ ‡ç­¾1ï¼Œå­æ ‡ç­¾2ï¼Œâ€¦ï¼‰&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>çº¦æŸå…ƒç´ ä½“é‡Œé¢çš„æ•°æ®</p>
</li>
<li>
<p>è¯­æ³•</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ELEMENT æ ‡ç­¾åå­— æ ‡ç­¾ç±»å‹&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ¤æ–­å…ƒç´     ç®€å•å…ƒç´ ï¼šæ²¡æœ‰å­å…ƒç´ ã€‚    å¤æ‚å…ƒç´ ï¼šæœ‰å­å…ƒç´ çš„å…ƒç´ ï¼›</p>
<ul>
<li>æ ‡ç­¾ç±»å‹</li>
</ul>
<table>
<thead>
<tr>
<th>æ ‡ç­¾ç±»å‹</th>
<th>ä»£ç å†™æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>PCDATA</td>
<td>(#PCDATA)</td>
<td>è¢«è§£é‡Šçš„å­—ç¬¦ä¸²æ•°æ®</td>
</tr>
<tr>
<td>EMPTY</td>
<td>EMPTY</td>
<td>å³ç©ºå…ƒç´ ï¼Œä¾‹å¦‚<hr/></td>
</tr>
<tr>
<td>ANY</td>
<td>ANY</td>
<td>å³ä»»æ„ç±»å‹</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ELEMENT <span class="keyword">persons</span> (<span class="keyword">person</span>+)&gt;</span>   	<span class="comment">&lt;!--çº¦æŸäººä»¬è‡³å°‘ä¸€ä¸ªäºº--&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT <span class="keyword">person</span> (<span class="keyword">name</span>,<span class="keyword">age</span>)&gt;</span>	<span class="comment">&lt;!--çº¦æŸå…ƒç´ äººçš„å­å…ƒç´ å¿…é¡»ä¸ºå§“åã€å¹´é¾„ï¼Œå¹¶ä¸”æŒ‰é¡ºåº--&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT <span class="keyword">name</span> (<span class="keyword">#PCDATA</span>)&gt;</span>		<span class="comment">&lt;!--&quot;å§“å&quot;å…ƒç´ ä½“ä¸ºå­—ç¬¦ä¸²æ•°æ®--&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT <span class="keyword">age</span> <span class="keyword">ANY</span>&gt;</span>       		<span class="comment">&lt;!--&quot;å¹´é¾„&quot;å…ƒç´ ä½“ä¸ºä»»æ„ç±»å‹--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ•°é‡è¯</p>
<table>
<thead>
<tr>
<th>æ•°é‡è¯ç¬¦å·</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç©º</td>
<td>è¡¨ç¤ºå…ƒç´ å‡ºç°ä¸€æ¬¡</td>
</tr>
<tr>
<td>*</td>
<td>è¡¨ç¤ºå…ƒç´ å¯ä»¥å‡ºç°0åˆ°å¤šä¸ª</td>
</tr>
<tr>
<td>+</td>
<td>è¡¨ç¤ºå…ƒç´ å¯ä»¥å‡ºç°è‡³å°‘1ä¸ª</td>
</tr>
<tr>
<td>?</td>
<td>è¡¨ç¤ºå…ƒç´ å¯ä»¥æ˜¯0æˆ–1ä¸ª</td>
</tr>
<tr>
<td>,</td>
<td>è¡¨ç¤ºå…ƒç´ éœ€è¦æŒ‰ç…§é¡ºåºæ˜¾ç¤º</td>
</tr>
<tr>
<td>|</td>
<td>è¡¨ç¤ºå…ƒç´ éœ€è¦é€‰æ‹©å…¶ä¸­çš„æŸä¸€ä¸ª</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<p>å±æ€§å£°æ˜</p>
<ul>
<li>
<p>è¯­æ³•</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ATTLIST æ ‡ç­¾åç§° </span></span><br><span class="line"><span class="meta">		å±æ€§åç§°1 å±æ€§ç±»å‹1 å±æ€§è¯´æ˜1</span></span><br><span class="line"><span class="meta">		å±æ€§åç§°2 å±æ€§ç±»å‹2 å±æ€§è¯´æ˜2</span></span><br><span class="line"><span class="meta">		â€¦</span></span><br><span class="line"><span class="meta">&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å±æ€§ç±»å‹</p>
<table>
<thead>
<tr>
<th>å±æ€§ç±»å‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>CDATA</td>
<td>ä»£è¡¨å±æ€§æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œ eg:<!ATTLIST å±æ€§å CDATA å±æ€§è¯´æ˜></td>
</tr>
<tr>
<td>ID</td>
<td>ä»£ç è¯¥å±æ€§å€¼å”¯ä¸€ï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œ eg:<!ATTLIST å±æ€§å ID å±æ€§è¯´æ˜></td>
</tr>
<tr>
<td>ENUMERATED</td>
<td>ä»£è¡¨å±æ€§å€¼åœ¨æŒ‡å®šèŒƒå›´å†…è¿›è¡Œæšä¸¾ Eg:&lt;!ATTLISTå±æ€§å (ç¤¾ç§‘ç±»|å·¥ç¨‹ç±»|æ•™è‚²ç±») â€œç¤¾ç§‘ç±»â€&gt; â€œç¤¾ç§‘ç±»&quot;æ˜¯é»˜è®¤å€¼ï¼Œå±æ€§å¦‚æœä¸è®¾ç½®é»˜è®¤å€¼å°±æ˜¯&quot;ç¤¾ç§‘ç±»â€</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>å±æ€§è¯´æ˜</p>
<table>
<thead>
<tr>
<th>å±æ€§è¯´æ˜</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>#REQUIRED</td>
<td>ä»£è¡¨å±æ€§æ˜¯å¿…é¡»æœ‰çš„</td>
</tr>
<tr>
<td>#IMPLIED</td>
<td>ä»£è¡¨å±æ€§å¯æœ‰å¯æ— </td>
</tr>
<tr>
<td>#FIXED</td>
<td>ä»£è¡¨å±æ€§ä¸ºå›ºå®šå€¼ï¼Œå®ç°æ–¹å¼ï¼šbook_info CDATA #FIXED â€œå›ºå®šå€¼â€</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ATTLIST ä¹¦					   &lt;!--è®¾ç½®<span class="string">&quot;ä¹¦&quot;</span>å…ƒç´ çš„çš„å±æ€§åˆ—è¡¨--&gt;</span></span><br><span class="line">	id ID #REQUIRED				<span class="comment">&lt;!--&quot;id&quot;å±æ€§å€¼ä¸ºå¿…é¡»æœ‰--&gt;</span></span><br><span class="line">	ç¼–å· CDATA #IMPLIED		   <span class="comment">&lt;!--&quot;ç¼–å·&quot;å±æ€§å¯æœ‰å¯æ— --&gt;</span></span><br><span class="line">	å‡ºç‰ˆç¤¾ (æ¸…å|åŒ—å¤§) &quot;æ¸…å&quot; 	  <span class="comment">&lt;!--&quot;å‡ºç‰ˆç¤¾&quot;å±æ€§å€¼æ˜¯æšä¸¾å€¼ï¼Œé»˜è®¤ä¸ºâ€œ123â€--&gt;</span></span><br><span class="line">	type CDATA #FIXED &quot;IT&quot;		<span class="comment">&lt;!--&quot;type&quot;å±æ€§ä¸ºæ–‡æœ¬å­—ç¬¦ä¸²å¹¶ä¸”å›ºå®šå€¼ä¸º&quot;IT&quot;--&gt;</span></span><br><span class="line">&gt;</span><br><span class="line"><span class="meta">&lt;!ATTLIST <span class="keyword">person</span> <span class="keyword">id</span> <span class="keyword">CDATA</span> <span class="keyword">#REQUIRED</span>&gt;</span>  <span class="comment">&lt;!--idæ˜¯æ–‡æœ¬å­—ç¬¦ä¸²å¿…é¡»æœ‰--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="Schema">Schema</h4>
<p>XSD å®šä¹‰ï¼š</p>
<ol>
<li>Schema è¯­è¨€ä¹Ÿå¯ä½œä¸º XSDï¼ˆXML Schema Definitionï¼‰</li>
<li>Schema çº¦æŸæ–‡ä»¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª XML æ–‡ä»¶ï¼Œç¬¦åˆ XML çš„è¯­æ³•ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åç¼€å .xsd</li>
<li>ä¸€ä¸ª XML ä¸­å¯ä»¥å¼•ç”¨å¤šä¸ª Schema çº¦æŸæ–‡ä»¶ï¼Œå¤šä¸ª Schema ä½¿ç”¨åç§°ç©ºé—´åŒºåˆ†ï¼ˆåç§°ç©ºé—´ç±»ä¼¼äº Java åŒ…åï¼‰</li>
<li>dtd é‡Œé¢å…ƒç´ ç±»å‹çš„å–å€¼æ¯”è¾ƒå•ä¸€å¸¸è§çš„æ˜¯ PCDATA ç±»å‹ï¼Œä½†æ˜¯åœ¨ Schema é‡Œé¢å¯ä»¥æ”¯æŒå¾ˆå¤šä¸ªæ•°æ®ç±»å‹</li>
<li><strong>Schema æ–‡ä»¶çº¦æŸ XML æ–‡ä»¶çš„åŒæ—¶ä¹Ÿè¢«åˆ«çš„æ–‡ä»¶çº¦æŸç€</strong></li>
</ol>
<p>XSD è§„åˆ™ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åç¼€åä¸º .xsd</li>
<li>å®šä¹‰æ–‡æ¡£å£°æ˜</li>
<li>schema æ–‡ä»¶çš„æ ¹æ ‡ç­¾ä¸ºï¼š <schema></li>
<li>åœ¨ <schema> ä¸­å®šä¹‰å±æ€§ï¼š
<ul>
<li>xmlns=http://www.w3.org/2001/XMLSchema</li>
<li>ä»£è¡¨å½“å‰æ–‡ä»¶æ—¶çº¦æŸåˆ«äººçš„ï¼ŒåŒæ—¶è¿™ä¸ªæ–‡ä»¶ä¹Ÿå¯¹è¯¥ Schema è¿›è¡Œçº¦æŸ</li>
</ul>
</li>
<li>åœ¨<schema>ä¸­å®šä¹‰å±æ€§ ï¼š
<ul>
<li>targetNamespace = å”¯ä¸€çš„ url åœ°å€ï¼ŒæŒ‡å®šå½“å‰è¿™ä¸ª schema æ–‡ä»¶çš„åç§°ç©ºé—´ã€‚</li>
<li><strong>åç§°ç©ºé—´</strong>ï¼šå½“å…¶ä»– xml ä½¿ç”¨è¯¥ schema æ–‡ä»¶ï¼Œéœ€è¦å¼•å…¥æ­¤ç©ºé—´</li>
</ul>
</li>
<li>åœ¨<schema>ä¸­å®šä¹‰å±æ€§ ï¼š
<ul>
<li>elementFormDefault=&quot;qualifiedâ€œï¼Œè¡¨ç¤ºå½“å‰ schema æ–‡ä»¶æ˜¯ä¸€ä¸ªè´¨é‡è‰¯å¥½çš„æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>é€šè¿‡ element å®šä¹‰å…ƒç´ </li>
<li><strong>åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯ç®€å•å…ƒç´ è¿˜æ˜¯å¤æ‚å…ƒç´ </strong></li>
</ol>
<p>person.xsd</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">schema</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>     &lt;!<span class="attr">--æœ¬æ–‡ä»¶æ˜¯çº¦æŸåˆ«äººçš„</span>ï¼Œ<span class="attr">ä¹Ÿè¢«çº¦æŸ--</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    targetNamespace=&quot;http://www.seazean.cn/javase&quot;<span class="comment">&lt;!--è‡ªå·±çš„åç§°ç©ºé—´--&gt;</span></span></span><br><span class="line"><span class="language-xml">    elementFormDefault=&quot;qualified&quot;				  <span class="comment">&lt;!--æœ¬æ–‡ä»¶æ˜¯è´¨é‡å¥½çš„--&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">element</span> <span class="attr">name</span>=<span class="string">&quot;persons&quot;</span>&gt;</span>    		  <span class="comment">&lt;!--å®šä¹‰personså¤æ‚å…ƒç´ --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">complexType</span>&gt;</span>           		  <span class="comment">&lt;!--å¤æ‚çš„å…ƒç´ --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">sequence</span>&gt;</span>					  <span class="comment">&lt;!--é‡Œé¢çš„å…ƒç´ å¿…é¡»æŒ‰ç…§é¡ºåºå®šä¹‰--&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">element</span> <span class="attr">name</span> = <span class="string">&quot;person&quot;</span>&gt;</span> <span class="comment">&lt;!--å®šä¹‰personå¤æ‚å…ƒç´ --&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">complexType</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">sequence</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="comment">&lt;!--å®šä¹‰nameå’Œageç®€å•å…ƒç´ --&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">element</span> <span class="attr">name</span> = <span class="string">&quot;name&quot;</span> <span class="attr">type</span> = <span class="string">&quot;string&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">element</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">element</span> <span class="attr">name</span> = <span class="string">&quot;age&quot;</span> <span class="attr">type</span> = <span class="string">&quot;string&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">element</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">sequence</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">complexType</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">element</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">sequence</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">complexType</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">element</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">schema</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Dom4J">Dom4J</h3>
<h4 id="è§£æ">è§£æ</h4>
<p>XML è§£æå°±æ˜¯ä» XML ä¸­è·å–åˆ°æ•°æ®ï¼ŒDOM æ˜¯è§£ææ€æƒ³</p>
<p>DOMï¼ˆDocument Object Modelï¼‰ï¼šæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ŒæŠŠæ–‡æ¡£çš„å„ä¸ªç»„æˆéƒ¨åˆ†çœ‹åšæˆå¯¹åº”çš„å¯¹è±¡ï¼ŒæŠŠ XML æ–‡ä»¶å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ï¼Œåœ¨å†…å­˜ä¸­å½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œå†è·å–å¯¹åº”çš„å€¼</p>
<p>Dom4J å®ç°ï¼š</p>
<ul>
<li>Dom4J è§£æå™¨æ„é€ æ–¹æ³•ï¼š<code>SAXReader saxReader = new SAXReader()</code></li>
<li>SAXReader å¸¸ç”¨ APIï¼š
<ul>
<li><code>public Document read(File file)</code>ï¼šReads a Document from the given File</li>
<li><code>public Document read(InputStream in)</code>ï¼šReads a Document from the given stream using SAX</li>
</ul>
</li>
<li>Java Class ç±» APIï¼š
<ul>
<li><code>public InputStream getResourceAsStream(String path)</code>ï¼šåŠ è½½æ–‡ä»¶æˆä¸ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµè¿”å›</li>
</ul>
</li>
</ul>
<h4 id="æ ¹å…ƒç´ ">æ ¹å…ƒç´ </h4>
<p>Document æ–¹æ³•ï¼š<code>Element getRootElement()</code> è·å–æ ¹å…ƒç´ </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€æ±‚ï¼šè§£æbooks.xmlæ–‡ä»¶æˆä¸ºä¸€ä¸ªDocumentæ–‡æ¡£æ ‘å¯¹è±¡ï¼Œå¾—åˆ°æ ¹å…ƒç´ å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dom4JDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="title class_">String</span>[] args) throws <span class="title class_">Exception</span> &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºä¸€ä¸ªdom4jçš„è§£æå™¨å¯¹è±¡ï¼šä»£è¡¨æ•´ä¸ªdom4jæ¡†æ¶ã€‚</span></span><br><span class="line">        <span class="title class_">SAXReader</span> saxReader = <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="comment">// 2.ç¬¬ä¸€ç§æ–¹å¼ï¼ˆç®€å•ï¼‰ï¼šé€šè¿‡è§£æå™¨å¯¹è±¡å»åŠ è½½xmlæ–‡ä»¶æ•°æ®ï¼Œæˆä¸ºä¸€ä¸ªDocumentæ–‡æ¡£æ ‘å¯¹è±¡ã€‚</span></span><br><span class="line">        <span class="comment">//Document document = saxReader.read(new File(&quot;Day13Demo/src/books.xml&quot;));</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3.ç¬¬äºŒç§æ–¹å¼ï¼ˆä»£ç å¤šç‚¹ï¼‰å…ˆæŠŠxmlæ–‡ä»¶è¯»æˆä¸€ä¸ªå­—èŠ‚è¾“å…¥æµ</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„â€œ/â€æ˜¯ç›´æ¥å»srcç±»è·¯å¾„ä¸‹å¯»æ‰¾æ–‡ä»¶ã€‚</span></span><br><span class="line">        <span class="title class_">InputStream</span> is = <span class="title class_">Dom4JDemo01</span>.<span class="property">class</span>.<span class="title function_">getResourceAsStream</span>(<span class="string">&quot;/books.xml&quot;</span>);</span><br><span class="line">        <span class="title class_">Document</span> <span class="variable language_">document</span> = saxReader.<span class="title function_">read</span>(is);</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="variable language_">document</span>);</span><br><span class="line">		<span class="comment">//org.dom4j.tree.DefaultDocument@27a5f880 [Document: name null]</span></span><br><span class="line">		<span class="comment">// 4.ä»documentæ–‡æ¡£æ ‘å¯¹è±¡ä¸­æå–æ ¹å…ƒç´ å¯¹è±¡</span></span><br><span class="line">        <span class="title class_">Element</span> root = <span class="variable language_">document</span>.<span class="title function_">getRootElement</span>();</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(root.<span class="title function_">getName</span>());<span class="comment">//books</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">books</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">id</span>=<span class="string">&quot;0001&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;ç¬¬ä¸€æœ¬ä¹¦&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>  JavaWebå¼€å‘æ•™ç¨‹<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>    å¼ ä¸‰<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">sale</span>&gt;</span>100.00å…ƒ   <span class="tag">&lt;/<span class="name">sale</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">id</span>=<span class="string">&quot;0002&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>ç½—è´¯ä¸­<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">sale</span>&gt;</span>100.00å…ƒ<span class="tag">&lt;/<span class="name">sale</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">user</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="å­å…ƒç´ ">å­å…ƒç´ </h4>
<p>Element å…ƒç´ çš„ API:</p>
<ul>
<li>String getName()ï¼šå–å…ƒç´ çš„åç§°ã€‚</li>
<li>List<Element> elements()ï¼šè·å–å½“å‰å…ƒç´ ä¸‹çš„å…¨éƒ¨å­å…ƒç´ ï¼ˆä¸€çº§ï¼‰</li>
<li>List<Element> elements(String name)ï¼šè·å–å½“å‰å…ƒç´ ä¸‹çš„æŒ‡å®šåç§°çš„å…¨éƒ¨å­å…ƒç´ ï¼ˆä¸€çº§ï¼‰</li>
<li>Element element(String name)ï¼šè·å–å½“å‰å…ƒç´ ä¸‹çš„æŒ‡å®šåç§°çš„æŸä¸ªå­å…ƒç´ ï¼Œé»˜è®¤å–ç¬¬ä¸€ä¸ªï¼ˆä¸€çº§ï¼‰</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> Dom4JDemo &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) throws Exception &#123;</span><br><span class="line">        SAXReader saxReader = <span class="keyword">new</span> <span class="constructor">SAXReader()</span>;</span><br><span class="line">        Document document = saxReader.read(<span class="keyword">new</span> <span class="constructor">File(<span class="string">&quot;Day13Demo/src/books.xml&quot;</span>)</span>);</span><br><span class="line">        <span class="comment">// 3.è·å–æ ¹å…ƒç´ å¯¹è±¡</span></span><br><span class="line">        Element root = document.get<span class="constructor">RootElement()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(root.get<span class="constructor">Name()</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.è·å–æ ¹å…ƒç´ ä¸‹çš„å…¨éƒ¨å­å…ƒç´ </span></span><br><span class="line">        List&lt;Element&gt; sonElements = root.elements<span class="literal">()</span>;</span><br><span class="line">        <span class="keyword">for</span> (Element sonElement : sonElements) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(sonElement.get<span class="constructor">Name()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5.è·å–æ ¹æºä¸‹çš„å…¨éƒ¨bookå­å…ƒç´ </span></span><br><span class="line">        List&lt;Element&gt; sonElements1 = root.elements(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element sonElement : sonElements1) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(sonElement.get<span class="constructor">Name()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 6.è·å–æ ¹æºä¸‹çš„æŒ‡å®šçš„æŸä¸ªå…ƒç´ </span></span><br><span class="line">        Element son = root.element(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(son.get<span class="constructor">Name()</span>);</span><br><span class="line">        <span class="comment">// é»˜è®¤ä¼šæå–ç¬¬ä¸€ä¸ªåç§°ä¸€æ ·çš„å­å…ƒç´ å¯¹è±¡è¿”å›ï¼</span></span><br><span class="line">        Element son1 = root.element(<span class="string">&quot;book&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(son1.attribute<span class="constructor">Value(<span class="string">&quot;id&quot;</span>)</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å±æ€§">å±æ€§</h4>
<p>Element å…ƒç´ çš„ APIï¼š</p>
<ul>
<li>List<Attribute> attributes()ï¼šè·å–å…ƒç´ çš„å…¨éƒ¨å±æ€§å¯¹è±¡</li>
<li>Attribute attribute(String name)ï¼šæ ¹æ®åç§°è·å–æŸä¸ªå…ƒç´ çš„å±æ€§å¯¹è±¡</li>
<li>String attributeValue(String var)ï¼šç›´æ¥è·å–æŸä¸ªå…ƒç´ çš„æŸä¸ªå±æ€§åç§°çš„å€¼</li>
</ul>
<p>Attribute å¯¹è±¡çš„ APIï¼š</p>
<ul>
<li>String getName()ï¼šè·å–å±æ€§åç§°</li>
<li>String getValue()ï¼šè·å–å±æ€§å€¼</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> Dom4JDemo &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws <span class="keyword">Exception</span> &#123;</span><br><span class="line">        SAXReader saxReader = <span class="built_in">new</span> SAXReader();</span><br><span class="line">        Document document = saxReader.<span class="keyword">read</span>(<span class="built_in">new</span> File(&quot;Day13Demo/src/books.xml&quot;));</span><br><span class="line">        Element root = document.getRootElement();</span><br><span class="line">        // <span class="number">4.</span>è·å–bookå­å…ƒç´ </span><br><span class="line">        Element bookEle = root.element(&quot;book&quot;);</span><br><span class="line"></span><br><span class="line">        // <span class="number">5.</span>è·å–bookå…ƒç´ çš„å…¨éƒ¨å±æ€§å¯¹è±¡</span><br><span class="line">        List&lt;<span class="keyword">Attribute</span>&gt; attributes = bookEle.attributes();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">Attribute</span> <span class="keyword">attribute</span> : attributes) &#123;</span><br><span class="line">            <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">attribute</span>.getName()+&quot;-&gt;&quot;+<span class="keyword">attribute</span>.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // <span class="number">6.</span>è·å–Bookå…ƒç´ çš„æŸä¸ªå±æ€§å¯¹è±¡</span><br><span class="line">        <span class="keyword">Attribute</span> descAttr = bookEle.<span class="keyword">attribute</span>(&quot;desc&quot;);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(descAttr.getName()+&quot;-&gt;&quot;+descAttr.getValue());</span><br><span class="line"></span><br><span class="line">        // <span class="number">7.</span>å¯ä»¥ç›´æ¥è·å–å…ƒç´ çš„å±æ€§å€¼</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(bookEle.attributeValue(&quot;id&quot;));</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(bookEle.attributeValue(&quot;desc&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–‡æœ¬">æ–‡æœ¬</h4>
<p>Elementï¼š</p>
<ul>
<li>String elementText(String name)ï¼šå¯ä»¥ç›´æ¥è·å–å½“å‰å…ƒç´ çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹</li>
<li>String elementTextTrim(String name)ï¼šå»å‰åç©ºæ ¼,ç›´æ¥è·å–å½“å‰å…ƒç´ çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹</li>
<li>String getText()ï¼šç›´æ¥è·å–å½“å‰å…ƒç´ çš„æ–‡æœ¬å†…å®¹</li>
<li>String getTextTrim()ï¼šå»å‰åç©ºæ ¼,ç›´æ¥è·å–å½“å‰å…ƒç´ çš„æ–‡æœ¬å†…å®¹</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> Dom4JDemo &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) throws Exception &#123;</span><br><span class="line">        SAXReader saxReader = <span class="keyword">new</span> <span class="constructor">SAXReader()</span>;</span><br><span class="line">        Document document = saxReader.read(<span class="keyword">new</span> <span class="constructor">File(<span class="string">&quot;Day13Demo/src/books.xml&quot;</span>)</span>);</span><br><span class="line">        Element root = document.get<span class="constructor">RootElement()</span>;</span><br><span class="line">        <span class="comment">// 4.å¾—åˆ°ç¬¬ä¸€ä¸ªå­å…ƒç´ book</span></span><br><span class="line">        Element bookEle = root.element(<span class="string">&quot;book&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.ç›´æ¥æ‹¿åˆ°å½“å‰bookå…ƒç´ ä¸‹çš„å­å…ƒç´ æ–‡æœ¬å€¼</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bookEle.element<span class="constructor">Text(<span class="string">&quot;name&quot;</span>)</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bookEle.element<span class="constructor">TextTrim(<span class="string">&quot;name&quot;</span>)</span>); <span class="comment">// å»å‰åç©ºæ ¼</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bookEle.element<span class="constructor">Text(<span class="string">&quot;author&quot;</span>)</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bookEle.element<span class="constructor">TextTrim(<span class="string">&quot;author&quot;</span>)</span>); <span class="comment">// å»å‰åç©ºæ ¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.å…ˆè·å–åˆ°å­å…ƒç´ å¯¹è±¡ï¼Œå†è·å–è¯¥æ–‡æœ¬å€¼</span></span><br><span class="line">        Element bookNameEle = bookEle.element(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bookNameEle.get<span class="constructor">Text()</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bookNameEle.get<span class="constructor">TextTrim()</span>);<span class="comment">// å»å‰åç©ºæ ¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="XPath">XPath</h3>
<p>Dom4J å¯ä»¥ç”¨äºè§£ææ•´ä¸ª XML çš„æ•°æ®ï¼Œä½†æ˜¯å¦‚æœè¦æ£€ç´¢ XML ä¸­çš„æŸäº›ä¿¡æ¯ï¼Œå»ºè®®ä½¿ç”¨ XPath</p>
<p>XPath å¸¸ç”¨APIï¼š</p>
<ul>
<li>List<Node> selectNodes(String var1) : æ£€ç´¢å‡ºä¸€æ‰¹èŠ‚ç‚¹é›†åˆ</li>
<li>Node selectSingleNode(String var1) : æ£€ç´¢å‡ºä¸€ä¸ªèŠ‚ç‚¹è¿”å›</li>
</ul>
<p>XPath æä¾›çš„å››ç§æ£€ç´¢æ•°æ®çš„å†™æ³•ï¼š</p>
<ol>
<li>ç»å¯¹è·¯å¾„ï¼š/æ ¹å…ƒç´ /å­å…ƒç´ /å­å…ƒç´ </li>
<li>ç›¸å¯¹è·¯å¾„ï¼š./å­å…ƒç´ /å­å…ƒç´  (.ä»£è¡¨äº†å½“å‰å…ƒç´ )</li>
<li>å…¨æ–‡æœç´¢ï¼š
<ul>
<li>//å…ƒç´ ï¼šåœ¨å…¨æ–‡æ‰¾è¿™ä¸ªå…ƒç´ </li>
<li>//å…ƒç´ 1/å…ƒç´ 2ï¼šåœ¨å…¨æ–‡æ‰¾å…ƒç´ 1ä¸‹é¢çš„ä¸€çº§å…ƒç´  2</li>
<li>//å…ƒç´ 1//å…ƒç´ 2ï¼šåœ¨å…¨æ–‡æ‰¾å…ƒç´ 1ä¸‹é¢çš„å…¨éƒ¨å…ƒç´  2</li>
</ul>
</li>
<li>å±æ€§æŸ¥æ‰¾ï¼š
<ul>
<li>//@å±æ€§åç§°ï¼šåœ¨å…¨æ–‡æ£€ç´¢å±æ€§å¯¹è±¡</li>
<li>//å…ƒç´ [@å±æ€§åç§°]ï¼šåœ¨å…¨æ–‡æ£€ç´¢åŒ…å«è¯¥å±æ€§çš„å…ƒç´ å¯¹è±¡</li>
<li>//å…ƒç´ [@å±æ€§åç§°=å€¼]ï¼šåœ¨å…¨æ–‡æ£€ç´¢åŒ…å«è¯¥å±æ€§çš„å…ƒç´ ä¸”å±æ€§å€¼ä¸ºè¯¥å€¼çš„å…ƒç´ å¯¹è±¡</li>
</ul>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XPathDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="title class_">String</span>[] args) throws <span class="title class_">Exception</span> &#123;</span><br><span class="line">        <span class="title class_">SAXReader</span> saxReader = <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">        <span class="title class_">InputStream</span> is = <span class="title class_">XPathDemo</span>.<span class="property">class</span>.<span class="title function_">getResourceAsStream</span>(<span class="string">&quot;/Contact.xml&quot;</span>);</span><br><span class="line">        <span class="title class_">Document</span> <span class="variable language_">document</span> = saxReader.<span class="title function_">read</span>(is);</span><br><span class="line">        <span class="comment">//1.ä½¿ç”¨ç»å¯¹è·¯å¾„å®šä½å…¨éƒ¨çš„nameåç§°</span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; nameNodes1 = <span class="variable language_">document</span>.<span class="title function_">selectNodes</span>(<span class="string">&quot;/contactList/contact/name&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="title class_">Node</span> nameNode : nameNodes) &#123;</span><br><span class="line">            <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(nameNode.<span class="title function_">getText</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2.ç›¸å¯¹è·¯å¾„ã€‚ä»æ ¹å…ƒç´ å¼€å§‹æ£€ç´¢ï¼Œ.ä»£è¡¨å¾ˆæ ¹å…ƒç´ </span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; nameNodes2 = root.<span class="title function_">selectNodes</span>(<span class="string">&quot;./contact/name&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3.1 åœ¨å…¨æ–‡ä¸­æ£€ç´¢nameèŠ‚ç‚¹</span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; nameNodes3 = root.<span class="title function_">selectNodes</span>(<span class="string">&quot;//name&quot;</span>);<span class="comment">//å…¨éƒ¨çš„</span></span><br><span class="line">        <span class="comment">//3.2 åœ¨å…¨æ–‡ä¸­æ£€ç´¢æ‰€æœ‰contactä¸‹çš„æ‰€æœ‰nameèŠ‚ç‚¹  //åŒ…æ‹¬sqlï¼Œä¸å¤–é¢çš„</span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; nameNodes3 = root.<span class="title function_">selectNodes</span>(<span class="string">&quot;//contact//name&quot;</span>);</span><br><span class="line">        <span class="comment">//3.3 åœ¨å…¨æ–‡ä¸­æ£€ç´¢æ‰€æœ‰contactä¸‹çš„ç›´æ¥nameèŠ‚ç‚¹</span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; nameNodes3 = root.<span class="title function_">selectNodes</span>(<span class="string">&quot;//contact/name&quot;</span>);<span class="comment">//ä¸åŒ…æ‹¬sqlå’Œå¤–é¢</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4.1 æ£€ç´¢å…¨éƒ¨å±æ€§å¯¹è±¡</span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; attributes1 = root.<span class="title function_">selectNodes</span>(<span class="string">&quot;//@id&quot;</span>);<span class="comment">//åŒ…æ‹¬sql4</span></span><br><span class="line">        <span class="comment">//4.2 åœ¨å…¨æ–‡æ£€ç´¢åŒ…å«è¯¥å±æ€§çš„å…ƒç´ å¯¹è±¡</span></span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Node</span>&gt; attributes1 = root.<span class="title function_">selectNodes</span>(<span class="string">&quot;//contact[@id]&quot;</span>);</span><br><span class="line">        <span class="comment">//4.3 åœ¨å…¨æ–‡æ£€ç´¢åŒ…å«è¯¥å±æ€§çš„å…ƒç´ ä¸”å±æ€§å€¼ä¸ºè¯¥å€¼çš„å…ƒç´ å¯¹è±¡</span></span><br><span class="line">        <span class="title class_">Node</span> nodeEle = <span class="variable language_">document</span>.<span class="title function_">selectSingleNode</span>(<span class="string">&quot;//contact[@id=2]&quot;</span>);</span><br><span class="line">        <span class="title class_">Element</span> ele = (<span class="title class_">Element</span>)nodeEle;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(ele.<span class="title function_">elementTextTrim</span>(<span class="string">&quot;name&quot;</span>));<span class="comment">//xi</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">contactList</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">contact</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>å°ç™½<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">email</span>&gt;</span>bai@seazean.cn<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">contact</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">contact</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>å°é»‘<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">email</span>&gt;</span>hei@seazean.cn<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;sql4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>sqlè¯­å¥<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">contact</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">contact</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>å°è™<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">email</span>&gt;</span>hu@seazean.cn<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">contact</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">contact</span>&gt;</span><span class="tag">&lt;/<span class="name">contact</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">name</span>&gt;</span>å¤–é¢çš„åç§°<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">contactList</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="SDP">SDP</h2>
<h3 id="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</h3>
<h4 id="åŸºæœ¬ä»‹ç»-18">åŸºæœ¬ä»‹ç»</h4>
<p>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼</p>
<p>å•ä¾‹è®¾è®¡æ¨¡å¼åˆ†ç±»ä¸¤ç§ï¼š</p>
<ul>
<li>é¥¿æ±‰å¼ï¼šç±»åŠ è½½å°±ä¼šå¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»º</li>
<li>æ‡’æ±‰å¼ï¼šç±»åŠ è½½ä¸ä¼šå¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»ºï¼Œè€Œæ˜¯é¦–æ¬¡ä½¿ç”¨è¯¥å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»º</li>
</ul>
<h4 id="é¥¿æ±‰å¼">é¥¿æ±‰å¼</h4>
<p>é¥¿æ±‰å¼åœ¨ç±»åŠ è½½çš„è¿‡ç¨‹å¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»ºï¼Œ<strong>è™šæ‹Ÿæœºä¼šä¿è¯ç±»åŠ è½½çš„çº¿ç¨‹å®‰å…¨</strong>ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ä¸ºäº†åŠ è½½è¯¥ç±»ä¸éœ€è¦å®ä¾‹ï¼Œåˆ™ä¼šé€ æˆå†…å­˜çš„æµªè´¹</p>
<ul>
<li>
<p>é™æ€å˜é‡çš„æ–¹å¼ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> final <span class="keyword">class</span> <span class="title">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>()</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è§£å†³åºåˆ—åŒ–é—®é¢˜</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">readResolve</span>()</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>åŠ  final ä¿®é¥°ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å­ç±»ç»§æ‰¿ï¼Œé˜²æ­¢å­ç±»ä¸­ä¸é€‚å½“çš„è¡Œä¸ºè¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œç ´åäº†å•ä¾‹</p>
</li>
<li>
<p>é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹çš„æ–¹å¼ï¼š</p>
<ul>
<li>
<p>å¯¹å•ä¾‹å£°æ˜ transientï¼Œç„¶åå®ç° readObject(ObjectInputStream in) æ–¹æ³•ï¼Œå¤ç”¨åŸæ¥çš„å•ä¾‹</p>
<p>æ¡ä»¶ï¼šè®¿é—®æƒé™ä¸º private/protectedã€è¿”å›å€¼å¿…é¡»æ˜¯ Objectã€å¼‚å¸¸å¯ä»¥ä¸æŠ›</p>
</li>
<li>
<p>å®ç° readResolve() æ–¹æ³•ï¼Œå½“ JVM ä»å†…å­˜ä¸­ååºåˆ—åŒ–åœ°ç»„è£…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨ readResolve æ–¹æ³•è¿”å›åŸæ¥å•ä¾‹</p>
</li>
</ul>
</li>
<li>
<p>æ„é€ æ–¹æ³•è®¾ç½®ä¸ºç§æœ‰ï¼Œé˜²æ­¢å…¶ä»–ç±»æ— é™åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯ä¸èƒ½é˜²æ­¢åå°„ç ´å</p>
</li>
<li>
<p>é™æ€å˜é‡åˆå§‹åŒ–åœ¨ç±»åŠ è½½æ—¶å®Œæˆï¼Œ<strong>ç”± JVM ä¿è¯çº¿ç¨‹å®‰å…¨</strong>ï¼Œèƒ½ä¿è¯å•ä¾‹å¯¹è±¡åˆ›å»ºæ—¶çš„å®‰å…¨</p>
</li>
<li>
<p>æä¾›é™æ€æ–¹æ³•è€Œä¸æ˜¯ç›´æ¥å°† INSTANCE è®¾ç½®ä¸º publicï¼Œä½“ç°äº†æ›´å¥½çš„å°è£…æ€§ã€æä¾›æ³›å‹æ”¯æŒã€å¯ä»¥æ”¹è¿›æˆæ‡’æ±‰å•ä¾‹è®¾è®¡</p>
</li>
</ul>
</li>
<li>
<p>é™æ€ä»£ç å—çš„æ–¹å¼ï¼š</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">    // ç§æœ‰æ„é€ æ–¹æ³•</span><br><span class="line">   <span class="keyword"> private</span> Singleton() &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    // åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span><br><span class="line">   <span class="keyword"> private</span><span class="keyword"> static</span> Singleton instance;</span><br><span class="line">   <span class="keyword"> static</span> &#123;</span><br><span class="line">       <span class="built_in"> instance </span>=<span class="built_in"> new </span>Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span><br><span class="line">   <span class="keyword"> public</span><span class="keyword"> static</span> Singleton getInstance() &#123;</span><br><span class="line">       <span class="built_in"> return </span>instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æšä¸¾æ–¹å¼ï¼šæšä¸¾ç±»å‹æ˜¯æ‰€ç”¨å•ä¾‹å®ç°ä¸­<strong>å”¯ä¸€ä¸€ç§ä¸ä¼šè¢«ç ´å</strong>çš„å•ä¾‹å®ç°æ¨¡å¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="variable constant_">INSTANCE</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">doSomething</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;doSomething&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">    <span class="title class_">Singleton</span>.<span class="property">INSTANCE</span>.<span class="title function_">doSomething</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é—®é¢˜1ï¼šæšä¸¾å•ä¾‹æ˜¯å¦‚ä½•é™åˆ¶å®ä¾‹ä¸ªæ•°çš„ï¼Ÿæ¯ä¸ªæšä¸¾é¡¹éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œæ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡</li>
<li>é—®é¢˜2ï¼šæšä¸¾å•ä¾‹åœ¨åˆ›å»ºæ—¶æ˜¯å¦æœ‰å¹¶å‘é—®é¢˜ï¼Ÿå¦</li>
<li>é—®é¢˜3ï¼šæšä¸¾å•ä¾‹èƒ½å¦è¢«åå°„ç ´åå•ä¾‹ï¼Ÿå¦ï¼Œåå°„åˆ›å»ºå¯¹è±¡æ—¶åˆ¤æ–­æ˜¯æšä¸¾ç±»å‹å°±ç›´æ¥æŠ›å‡ºå¼‚å¸¸</li>
<li>é—®é¢˜4ï¼šæšä¸¾å•ä¾‹èƒ½å¦è¢«ååºåˆ—åŒ–ç ´åå•ä¾‹ï¼Ÿå¦</li>
<li>é—®é¢˜5ï¼šæšä¸¾å•ä¾‹å±äºæ‡’æ±‰å¼è¿˜æ˜¯é¥¿æ±‰å¼ï¼Ÿ<strong>é¥¿æ±‰å¼</strong></li>
<li>é—®é¢˜6ï¼šæšä¸¾å•ä¾‹å¦‚æœå¸Œæœ›åŠ å…¥ä¸€äº›å•ä¾‹åˆ›å»ºæ—¶çš„åˆå§‹åŒ–é€»è¾‘è¯¥å¦‚ä½•åšï¼Ÿæ·»åŠ æ„é€ æ–¹æ³•</li>
</ul>
<p>åç¼–è¯‘ç»“æœï¼š</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">extends</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Enum&lt;Singleton&gt;</span> </span>&#123; <span class="comment">// Enumå®ç°åºåˆ—åŒ–æ¥å£</span></span><br><span class="line">	public static <span class="keyword">final</span> <span class="type">Singleton</span> <span class="type">INSTANCE</span> = <span class="keyword">new</span> <span class="type">Singleton</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="æ‡’æ±‰å¼">æ‡’æ±‰å¼</h4>
<ul>
<li>
<p>çº¿ç¨‹ä¸å®‰å…¨</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¤šçº¿ç¨‹ç¯å¢ƒï¼Œä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯èƒ½å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥è¿™é‡Œ</span></span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åŒç«¯æ£€é”æœºåˆ¶</p>
<p>åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°ç©ºæŒ‡é’ˆé—®é¢˜ï¼Œå‡ºç°é—®é¢˜çš„åŸå› æ˜¯ JVM åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ä¼šè¿›è¡Œä¼˜åŒ–å’ŒæŒ‡ä»¤é‡æ’åºæ“ä½œï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>volatile</code> å…³é”®å­—</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span> &#123; </span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span>()</span> &#123;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœinstanceä¸ä¸ºnullï¼Œä¸è¿›å…¥æŠ¢é”é˜¶æ®µï¼Œç›´æ¥è¿”å›å®ä¾‹</span></span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            synchronized (Singleton.<span class="keyword">class</span>) &#123;</span><br><span class="line">                <span class="comment">// æŠ¢åˆ°é”ä¹‹åå†æ¬¡åˆ¤æ–­æ˜¯å¦ä¸ºnull</span></span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é™æ€å†…éƒ¨ç±»æ–¹å¼</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">SingletonHolder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> final Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>å†…éƒ¨ç±»å±äºæ‡’æ±‰å¼ï¼Œç±»åŠ è½½æœ¬èº«å°±æ˜¯æ‡’æƒ°çš„ï¼Œé¦–æ¬¡è°ƒç”¨æ—¶åŠ è½½ï¼Œç„¶åå¯¹å•ä¾‹è¿›è¡Œåˆå§‹åŒ–</p>
<p>ç±»åŠ è½½çš„æ—¶å€™æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘ getInstance æ–¹æ³•è°ƒç”¨ invokestatic æŒ‡ä»¤å¯¹å†…éƒ¨ç±»è¿›è¡ŒåŠ è½½ï¼›åŠ è½½çš„æ—¶å€™å­—èŠ‚ç å¸¸é‡æ± ä¼šè¢«åŠ å…¥ç±»çš„è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè§£æå·¥ä½œæ˜¯å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è§£ææˆç›´æ¥å¼•ç”¨ï¼Œä½†æ˜¯è§£æè¿‡ç¨‹ä¸ä¸€å®šéå¾—åœ¨ç±»åŠ è½½æ—¶å®Œæˆï¼Œå¯ä»¥å»¶è¿Ÿåˆ°è¿è¡Œæ—¶è¿›è¡Œï¼Œæ‰€ä»¥é™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹ä¼š<strong>å»¶è¿ŸåŠ è½½</strong></p>
</li>
<li>
<p>æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé™æ€å˜é‡åˆå§‹åŒ–åœ¨ç±»åŠ è½½æ—¶å®Œæˆï¼Œç”± JVM ä¿è¯çº¿ç¨‹å®‰å…¨</p>
</li>
</ul>
</li>
</ul>
<h4 id="ç ´åå•ä¾‹">ç ´åå•ä¾‹</h4>
<h5 id="ååºåˆ—åŒ–">ååºåˆ—åŒ–</h5>
<p>å°†å•ä¾‹å¯¹è±¡åºåˆ—åŒ–å†ååºåˆ—åŒ–ï¼Œå¯¹è±¡ä»å†…å­˜ååºåˆ—åŒ–åˆ°ç¨‹åºä¸­ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ååºåˆ—åŒ–å¾—åˆ°çš„å¯¹è±¡æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œè€Œä¸”å¾—åˆ°çš„å¯¹è±¡ä¸æ˜¯é€šè¿‡æ„é€ å™¨å¾—åˆ°çš„ï¼Œ<strong>ååºåˆ—åŒ–å¾—åˆ°çš„å¯¹è±¡ä¸æ‰§è¡Œæ„é€ å™¨</strong></p>
<ul>
<li>
<p>Singleton</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">Serializable</span></span> </span>&#123;	<span class="comment">//å®ç°åºåˆ—åŒ–æ¥å£</span></span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> Singleton() &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> final Singleton INSTANCE = <span class="keyword">new</span> <span class="type">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton getInstance() &#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åºåˆ—åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//å¾€æ–‡ä»¶ä¸­å†™å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//writeObject2File();</span></span><br><span class="line">        <span class="comment">//ä»æ–‡ä»¶ä¸­è¯»å–å¯¹è±¡</span></span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s1</span> <span class="operator">=</span> readObjectFromFile();</span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s2</span> <span class="operator">=</span> readObjectFromFile();</span><br><span class="line">        <span class="comment">//åˆ¤æ–­ä¸¤ä¸ªååºåˆ—åŒ–åçš„å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton <span class="title function_">readObjectFromFile</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¯¹è±¡è¾“å…¥æµå¯¹è±¡</span></span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C://a.txt&quot;</span>));</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ä¸ªè¯»å–Singletonå¯¹è±¡</span></span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> (Singleton) ois.readObject();</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeObject2File</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//è·å–Singletonç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> Singleton.getInstance();</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¯¹è±¡è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;C://a.txt&quot;</span>));</span><br><span class="line">        <span class="comment">//å°†instanceå¯¹è±¡å†™å‡ºåˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">        oos.writeObject(instance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>åœ¨ Singleton ç±»ä¸­æ·»åŠ  <code>readResolve()</code> æ–¹æ³•ï¼Œåœ¨ååºåˆ—åŒ–æ—¶è¢«åå°„è°ƒç”¨ï¼Œå¦‚æœå®šä¹‰äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°±è¿”å›è¿™ä¸ªæ–¹æ³•çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œåˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title class_">Object</span> <span class="title function_">readResolve</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">SingletonHolder</span>.<span class="property">INSTANCE</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ObjectInputStream ç±»æºç åˆ†æï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> Object <span class="title function_">readObject</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">	<span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> readObject0(<span class="literal">false</span>);<span class="comment">//é‡ç‚¹æŸ¥çœ‹readObject0æ–¹æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object <span class="title function_">readObject0</span><span class="params">(<span class="type">boolean</span> unshared)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="keyword">switch</span> (tc) &#123;</span><br><span class="line">			<span class="keyword">case</span> TC_OBJECT:</span><br><span class="line">				<span class="keyword">return</span> checkResolve(readOrdinaryObject(unshared));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> Object <span class="title function_">readOrdinaryObject</span><span class="params">(<span class="type">boolean</span> unshared)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">	<span class="comment">// isInstantiable è¿”å›trueï¼Œæ‰§è¡Œ desc.newInstance()ï¼Œé€šè¿‡åå°„åˆ›å»ºæ–°çš„å•ä¾‹ç±»</span></span><br><span class="line">    obj = desc.isInstantiable() ? desc.newInstance() : <span class="literal">null</span>; </span><br><span class="line">    <span class="comment">// æ·»åŠ  readResolve æ–¹æ³•å desc.hasReadResolveMethod() æ–¹æ³•æ‰§è¡Œç»“æœä¸ºtrue</span></span><br><span class="line">    <span class="keyword">if</span> (obj != <span class="literal">null</span> &amp;&amp; handles.lookupException(passHandle) == <span class="literal">null</span> &amp;&amp; desc.hasReadResolveMethod()) &#123;</span><br><span class="line">    	<span class="comment">// é€šè¿‡åå°„è°ƒç”¨ Singleton ç±»ä¸­çš„ readResolve æ–¹æ³•ï¼Œå°†è¿”å›å€¼èµ‹å€¼ç»™repå˜é‡</span></span><br><span class="line">    	<span class="comment">// å¤šæ¬¡è°ƒç”¨ObjectInputStreamç±»ä¸­çš„readObjectæ–¹æ³•ï¼Œæœ¬è´¨è°ƒç”¨å®šä¹‰çš„readResolveæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</span></span><br><span class="line">    	<span class="type">Object</span> <span class="variable">rep</span> <span class="operator">=</span> desc.invokeReadResolve(obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="åå°„ç ´è§£">åå°„ç ´è§£</h5>
<ul>
<li>
<p>åå°„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//è·å–Singletonç±»çš„å­—èŠ‚ç å¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Singleton.class;</span><br><span class="line">        <span class="comment">//è·å–Singletonç±»çš„ç§æœ‰æ— å‚æ„é€ æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getDeclaredConstructor();</span><br><span class="line">        <span class="comment">//å–æ¶ˆè®¿é—®æ£€æŸ¥</span></span><br><span class="line">        constructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºSingletonç±»çš„å¯¹è±¡s1</span></span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s1</span> <span class="operator">=</span> (Singleton) constructor.newInstance();</span><br><span class="line">        <span class="comment">//åˆ›å»ºSingletonç±»çš„å¯¹è±¡s2</span></span><br><span class="line">        <span class="type">Singleton</span> <span class="variable">s2</span> <span class="operator">=</span> (Singleton) constructor.newInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­é€šè¿‡åå°„åˆ›å»ºçš„ä¸¤ä¸ªSingletonå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        System.out.println(s1 == s2);	<span class="comment">//false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åå°„æ–¹å¼ç ´è§£å•ä¾‹çš„è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span>()</span> &#123;</span><br><span class="line">        <span class="comment">// åå°„ç ´è§£å•ä¾‹æ¨¡å¼éœ€è¦æ·»åŠ çš„ä»£ç </span></span><br><span class="line">        <span class="keyword">if</span>(instance != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">        synchronized (Singleton.<span class="keyword">class</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(instance != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> instance;</span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Runtime">Runtime</h4>
<p>Runtime ç±»å°±æ˜¯ä½¿ç”¨çš„å•ä¾‹è®¾è®¡æ¨¡å¼ä¸­çš„é¥¿æ±‰å¼</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="keyword">Runtime</span> &#123;    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">Runtime</span> currentRuntime = <span class="keyword">new</span> <span class="keyword">Runtime</span>();    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">Runtime</span> getRuntime() &#123;        </span><br><span class="line">        <span class="keyword">return</span> currentRuntime;    </span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">Runtime</span>() &#123;&#125;    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ Runtime</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> RuntimeDemo &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//è·å–Runtimeç±»å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">Runtime</span> <span class="keyword">runtime</span> = <span class="keyword">Runtime</span>.getRuntime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿”å› Java è™šæ‹Ÿæœºä¸­çš„å†…å­˜æ€»é‡ã€‚</span></span><br><span class="line">        System.out.<span class="keyword">println</span>(<span class="keyword">runtime</span>.totalMemory());</span><br><span class="line">        <span class="comment">//è¿”å› Java è™šæ‹Ÿæœºè¯•å›¾ä½¿ç”¨çš„æœ€å¤§å†…å­˜é‡ã€‚</span></span><br><span class="line">        System.out.<span class="keyword">println</span>(<span class="keyword">runtime</span>.maxMemory());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æ‰§è¡ŒæŒ‡å®šçš„å­—ç¬¦ä¸²å‘½ä»¤ï¼Œè¿”å›è¿›ç¨‹å¯¹è±¡</span></span><br><span class="line">        Process process = <span class="keyword">runtime</span>.exec(<span class="string">&quot;ipconfig&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–å‘½ä»¤æ‰§è¡Œåçš„ç»“æœï¼Œé€šè¿‡è¾“å…¥æµè·å–</span></span><br><span class="line">        InputStream inputStream = process.getInputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] arr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>* <span class="number">100</span>];</span><br><span class="line">        <span class="keyword">int</span> b = inputStream.<span class="keyword">read</span>(arr);</span><br><span class="line">        System.out.<span class="keyword">println</span>(<span class="keyword">new</span> String(arr,<span class="number">0</span>,b,<span class="string">&quot;gbk&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</h3>
<h4 id="é™æ€ä»£ç†">é™æ€ä»£ç†</h4>
<p>ä»£ç†æ¨¡å¼ï¼šç”±äºæŸäº›åŸå› éœ€è¦ç»™æŸå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œè®¿é—®å¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ä¸ºç›®æ ‡å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡ä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´çš„ä¸­ä»‹</p>
<p>Java ä¸­çš„ä»£ç†æŒ‰ç…§ä»£ç†ç±»ç”Ÿæˆæ—¶æœºä¸åŒåˆåˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ï¼Œé™æ€ä»£ç†ä»£ç†ç±»åœ¨ç¼–è¯‘æœŸå°±ç”Ÿæˆï¼Œè€ŒåŠ¨æ€ä»£ç†ä»£ç†ç±»åˆ™æ˜¯åœ¨ Java è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆï¼ŒåŠ¨æ€ä»£ç†åˆæœ‰ JDK ä»£ç†å’Œ CGLib ä»£ç†ä¸¤ç§</p>
<p>ä»£ç†ï¼ˆProxyï¼‰æ¨¡å¼åˆ†ä¸ºä¸‰ç§è§’è‰²ï¼š</p>
<ul>
<li>æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰ç±»ï¼šé€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»å£°æ˜çœŸå®ä¸»é¢˜å’Œä»£ç†å¯¹è±¡å®ç°çš„ä¸šåŠ¡æ–¹æ³•</li>
<li>çœŸå®ä¸»é¢˜ï¼ˆReal Subjectï¼‰ç±»ï¼š å®ç°äº†æŠ½è±¡ä¸»é¢˜ä¸­çš„å…·ä½“ä¸šåŠ¡ï¼Œæ˜¯ä»£ç†å¯¹è±¡æ‰€ä»£è¡¨çš„çœŸå®å¯¹è±¡ï¼Œæ˜¯æœ€ç»ˆè¦å¼•ç”¨çš„å¯¹è±¡</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ç±»ï¼šæä¾›äº†ä¸çœŸå®ä¸»é¢˜ç›¸åŒçš„æ¥å£ï¼Œå…¶å†…éƒ¨å«æœ‰å¯¹çœŸå®ä¸»é¢˜çš„å¼•ç”¨ï¼Œå¯ä»¥è®¿é—®ã€æ§åˆ¶æˆ–æ‰©å±•çœŸå®ä¸»é¢˜çš„åŠŸèƒ½</li>
</ul>
<p>ä¹°ç¥¨æ¡ˆä¾‹ï¼Œç«è½¦ç«™æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œä»£å”®ç‚¹æ˜¯ä»£ç†å¯¹è±¡</p>
<ul>
<li>
<p>å–ç¥¨æ¥å£ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">SellTickets</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sell</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç«è½¦ç«™ï¼Œå…·æœ‰å–ç¥¨åŠŸèƒ½ï¼Œéœ€è¦å®ç°SellTicketsæ¥å£</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">TrainStation</span> <span class="symbol">implements</span> <span class="symbol">SellTickets</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> sell() &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ç«è½¦ç«™å–ç¥¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä»£å”®ç‚¹ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProxyPoint</span> <span class="title">implements</span> <span class="title">SellTickets</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TrainStation station = <span class="keyword">new</span> TrainStation();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span>()</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨&quot;</span>);</span><br><span class="line">        station.sell();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">ProxyPoint</span> pp = <span class="keyword">new</span> <span class="title class_">ProxyPoint</span>();</span><br><span class="line">        pp.<span class="title function_">sell</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç±»ç›´æ¥è®¿é—®çš„æ˜¯ ProxyPoint ç±»å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ ProxyPoint ä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡çš„ä¸­ä»‹</p>
</li>
</ul>
<h4 id="JDK">JDK</h4>
<h5 id="ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼</h5>
<p>Java ä¸­æä¾›äº†ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±» Proxyï¼ŒProxy å¹¶ä¸æ˜¯ä»£ç†å¯¹è±¡çš„ç±»ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªåˆ›å»ºä»£ç†å¯¹è±¡çš„é™æ€æ–¹æ³• newProxyInstance() æ¥è·å–ä»£ç†å¯¹è±¡</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static Object <span class="keyword">new</span><span class="constructor">ProxyInstance(ClassLoader <span class="params">loader</span>,Class[] <span class="params">interfaces</span>,InvocationHandler <span class="params">h</span>)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å‚æ•°ä¸€ï¼šç±»åŠ è½½å™¨ï¼Œè´Ÿè´£åŠ è½½ä»£ç†ç±»ã€‚ä¼ å…¥ç±»åŠ è½½å™¨ï¼Œä»£ç†å’Œè¢«ä»£ç†å¯¹è±¡è¦ç”¨ä¸€ä¸ªç±»åŠ è½½å™¨æ‰æ˜¯çˆ¶å­å…³ç³»ï¼Œä¸åŒç±»åŠ è½½å™¨åŠ è½½ç›¸åŒçš„ç±»åœ¨ JVM ä¸­éƒ½ä¸æ˜¯åŒä¸€ä¸ªç±»å¯¹è±¡</li>
<li>å‚æ•°äºŒï¼šè¢«ä»£ç†ä¸šåŠ¡å¯¹è±¡çš„<strong>å…¨éƒ¨å®ç°çš„æ¥å£</strong>ï¼Œä»£ç†å¯¹è±¡ä¸çœŸå®å¯¹è±¡å®ç°ç›¸åŒæ¥å£ï¼ŒçŸ¥é“ä¸ºå“ªäº›æ–¹æ³•åšä»£ç†</li>
<li>å‚æ•°ä¸‰ï¼šä»£ç†çœŸæ­£çš„æ‰§è¡Œæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä»£ç†çš„å¤„ç†é€»è¾‘</li>
</ul>
<p>ä»£ç å®ç°ï¼š</p>
<ul>
<li>
<p>ä»£ç†å·¥å‚ï¼šåˆ›å»ºä»£ç†å¯¹è±¡</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">TrainStation</span> station = <span class="keyword">new</span> <span class="title class_">TrainStation</span>();</span><br><span class="line">	<span class="comment">//ä¹Ÿå¯ä»¥åœ¨å‚æ•°ä¸­æä¾› getProxyObject(TrainStation station)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">SellTickets</span> <span class="title function_">getProxyObject</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨ Proxy è·å–ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="title class_">SellTickets</span> sellTickets = (<span class="title class_">SellTickets</span>) <span class="title class_">Proxy</span>.<span class="title function_">newProxyInstance</span>(</span><br><span class="line">            	station.<span class="title function_">getClass</span>().<span class="title function_">getClassLoader</span>(),</span><br><span class="line">                station.<span class="title function_">getClass</span>().<span class="title function_">getInterfaces</span>(),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">                    <span class="keyword">public</span> <span class="title class_">Object</span> <span class="title function_">invoke</span>(<span class="params"><span class="built_in">Object</span> proxy, Method method, <span class="built_in">Object</span>[] args</span>) &#123;</span><br><span class="line">                        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;ä»£ç†ç‚¹(JDKåŠ¨æ€ä»£ç†æ–¹å¼)&quot;</span>);</span><br><span class="line">                        <span class="comment">//æ‰§è¡ŒçœŸå®å¯¹è±¡</span></span><br><span class="line">                        <span class="title class_">Object</span> result = method.<span class="title function_">invoke</span>(station, args);</span><br><span class="line">                        <span class="keyword">return</span> result;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="keyword">return</span> sellTickets;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">ProxyFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyFactory</span>();</span><br><span class="line">        <span class="comment">//å¿…é¡»æ—¶ä»£ç†ji</span></span><br><span class="line">        <span class="type">SellTickets</span> <span class="variable">proxyObject</span> <span class="operator">=</span> factory.getProxyObject();</span><br><span class="line">        proxyObject.sell();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="å®ç°åŸç†">å®ç°åŸç†</h5>
<p>JDK åŠ¨æ€ä»£ç†æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå¯ä»¥ä¸ºä»»æ„çš„æ¥å£å®ç°ç±»å¯¹è±¡åšä»£ç†ï¼Œä¹Ÿå¯ä»¥ä¸ºè¢«ä»£ç†å¯¹è±¡çš„æ‰€æœ‰æ¥å£çš„æ‰€æœ‰æ–¹æ³•åšä»£ç†ï¼ŒåŠ¨æ€ä»£ç†å¯ä»¥åœ¨ä¸æ”¹å˜æ–¹æ³•æºç çš„æƒ…å†µä¸‹ï¼Œå®ç°å¯¹æ–¹æ³•åŠŸèƒ½çš„å¢å¼ºï¼Œæé«˜äº†è½¯ä»¶çš„å¯æ‰©å±•æ€§ï¼ŒJava åå°„æœºåˆ¶å¯ä»¥ç”Ÿæˆä»»æ„ç±»å‹çš„åŠ¨æ€ä»£ç†ç±»</li>
<li>ç¼ºç‚¹ï¼š<strong>åªèƒ½é’ˆå¯¹æ¥å£æˆ–è€…æ¥å£çš„å®ç°ç±»å¯¹è±¡åšä»£ç†å¯¹è±¡</strong>ï¼Œæ™®é€šç±»æ˜¯ä¸èƒ½åšä»£ç†å¯¹è±¡çš„</li>
<li>åŸå› ï¼š<strong>ç”Ÿæˆçš„ä»£ç†ç±»ç»§æ‰¿äº† Proxy</strong>ï¼ŒJava æ˜¯å•ç»§æ‰¿çš„ï¼Œæ‰€ä»¥ JDK åŠ¨æ€ä»£ç†åªèƒ½ä»£ç†æ¥å£</li>
</ul>
<p>ProxyFactory ä¸æ˜¯ä»£ç†æ¨¡å¼ä¸­çš„ä»£ç†ç±»ï¼Œè€Œä»£ç†ç±»æ˜¯ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€çš„åœ¨å†…å­˜ä¸­ç”Ÿæˆçš„ç±»ï¼Œå¯ä»¥é€šè¿‡ Arthas å·¥å…·æŸ¥çœ‹ä»£ç†ç±»ç»“æ„ï¼š</p>
<ul>
<li>ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰å®ç°äº† SellTickets æ¥å£ï¼ŒçœŸå®ç±»å’Œä»£ç†ç±»å®ç°åŒæ ·çš„æ¥å£</li>
<li>ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰å°†æä¾›äº†çš„åŒ¿åå†…éƒ¨ç±»å¯¹è±¡ä¼ é€’ç»™äº†çˆ¶ç±»</li>
<li>ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰çš„ä¿®é¥°ç¬¦æ˜¯ public final</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> $<span class="title">Proxy0</span> <span class="keyword">extends</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">SellTickets</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m3;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $Proxy0(InvocationHandler invocationHandler) &#123;</span><br><span class="line">        <span class="keyword">super</span>(invocationHandler);<span class="comment">//InvocationHandlerå¯¹è±¡ä¼ é€’ç»™çˆ¶ç±»</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        m3 = Class.forName(<span class="string">&quot;proxy.dynamic.jdk.SellTickets&quot;</span>).getMethod(<span class="string">&quot;sell&quot;</span>, <span class="keyword">new</span> Class[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨InvocationHandlerçš„invokeæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">this</span>.h.invoke(<span class="keyword">this</span>, m3, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Javaæä¾›çš„åŠ¨æ€ä»£ç†ç›¸å…³ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> InvocationHandler h;</span><br><span class="line">	 </span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="title">Proxy</span><span class="params">(InvocationHandler h)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.h = h;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>åœ¨æµ‹è¯•ç±»ä¸­é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ sell() æ–¹æ³•</li>
<li>æ ¹æ®å¤šæ€çš„ç‰¹æ€§ï¼Œæ‰§è¡Œçš„æ˜¯ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰ä¸­çš„ sell() æ–¹æ³•</li>
<li>ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰ä¸­çš„ sell() æ–¹æ³•ä¸­åˆè°ƒç”¨äº† InvocationHandler æ¥å£çš„å­å®ç°ç±»å¯¹è±¡çš„ invoke æ–¹æ³•</li>
<li>invoke æ–¹æ³•é€šè¿‡åå°„æ‰§è¡Œäº†çœŸå®å¯¹è±¡æ‰€å±ç±»ï¼ˆTrainStationï¼‰ä¸­çš„ sell() æ–¹æ³•</li>
</ol>
<h5 id="æºç è§£æ">æºç è§£æ</h5>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object newProxyInstance(ClassLoader loader,</span><br><span class="line">                                      <span class="keyword">Class</span>&lt;?&gt;[] interfaces,</span><br><span class="line">                                      InvocationHandler h)&#123;</span><br><span class="line">    <span class="comment">// InvocationHandler ä¸ºç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    Objects.requireNonNull(h);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤åˆ¶ä¸€ä»½ interfaces</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">Class</span>&lt;?&gt;[] intfs = interfaces.clone();</span><br><span class="line">    <span class="keyword">final</span> SecurityManager sm = System.getSecurityManager();</span><br><span class="line">    <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">        checkProxyAccess(Reflection.getCallerClass(), loader, intfs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»ç¼“å­˜ä¸­æŸ¥æ‰¾ class ç±»å‹çš„ä»£ç†å¯¹è±¡ï¼Œä¼šè°ƒç”¨ ProxyClassFactory#apply æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">Class</span>&lt;?&gt; cl = getProxyClass0(loader, intfs);</span><br><span class="line">	<span class="comment">//proxyClassCache = new WeakCache&lt;&gt;(new KeyFactory(), new ProxyClassFactory())</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">            checkNewProxyPermission(Reflection.getCallerClass(), cl);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–ä»£ç†ç±»çš„æ„é€ æ–¹æ³•ï¼Œæ ¹æ®å‚æ•° InvocationHandler åŒ¹é…è·å–æŸä¸ªæ„é€ å™¨</span></span><br><span class="line">        <span class="keyword">final</span> Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams);</span><br><span class="line">        <span class="keyword">final</span> InvocationHandler ih = h;</span><br><span class="line">        <span class="comment">// æ„é€ æ–¹æ³•ä¸æ˜¯ pubic çš„éœ€è¦å¯ç”¨æƒé™ï¼Œæš´åŠ›p</span></span><br><span class="line">        <span class="keyword">if</span> (!Modifier.isPublic(cl.getModifiers())) &#123;</span><br><span class="line">            AccessController.doPrivileged(<span class="keyword">new</span> PrivilegedAction&lt;<span class="keyword">Void</span>&gt;() &#123;</span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">Void</span> run() &#123;</span><br><span class="line">                    <span class="comment">// è®¾ç½®å¯è®¿é—®çš„æƒé™</span></span><br><span class="line">                    cons.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">       	<span class="comment">// cons æ˜¯æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”å†…éƒ¨æŒæœ‰ InvocationHandlerï¼Œåœ¨ InvocationHandler ä¸­æŒæœ‰ target ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> cons.newInstance(<span class="keyword">new</span> Object[]&#123;h&#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException|InstantiationException e) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Proxy çš„é™æ€å†…éƒ¨ç±»ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> ProxyClassFactory &#123;</span><br><span class="line">    <span class="comment">// ä»£ç†ç±»å‹çš„åç§°å‰ç¼€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String proxyClassNamePrefix = <span class="string">&quot;$Proxy&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆå”¯ä¸€æ•°å­—ä½¿ç”¨ï¼Œç»“åˆä¸Šé¢çš„ä»£ç†ç±»å‹åç§°å‰ç¼€ä¸€èµ·ç”Ÿæˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicLong nextUniqueNumber = <span class="keyword">new</span> AtomicLong();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å‚æ•°ä¸€ï¼šProxy.newInstance æ—¶ä¼ é€’çš„</span></span><br><span class="line">    <span class="comment">//å‚æ•°äºŒï¼šProxy.newInstance æ—¶ä¼ é€’çš„æ¥å£é›†åˆ</span></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">Class</span>&lt;?&gt; apply(ClassLoader loader, <span class="keyword">Class</span>&lt;?&gt;[] interfaces) &#123;</span><br><span class="line">		</span><br><span class="line">        Map&lt;<span class="keyword">Class</span>&lt;?&gt;, <span class="keyword">Boolean</span>&gt; interfaceSet = <span class="keyword">new</span> IdentityHashMap&lt;&gt;(interfaces.length);</span><br><span class="line">        <span class="comment">// éå†æ¥å£é›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">Class</span>&lt;?&gt; intf : interfaces) &#123;</span><br><span class="line">            <span class="keyword">Class</span>&lt;?&gt; interfaceClass = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// åŠ è½½æ¥å£ç±»åˆ° JVM</span></span><br><span class="line">                interfaceClass = <span class="keyword">Class</span>.forName(intf.getName(), <span class="keyword">false</span>, loader);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (interfaceClass != intf) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                    intf + <span class="string">&quot; is not visible from class loader&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœ interfaceClass ä¸æ˜¯æ¥å£ ç›´æ¥æŠ¥é”™ï¼Œä¿è¯é›†åˆå†…éƒ½æ˜¯æ¥å£</span></span><br><span class="line">            <span class="keyword">if</span> (!interfaceClass.isInterface()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                    interfaceClass.getName() + <span class="string">&quot; is not an interface&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¿è¯æ¥å£ interfaces é›†åˆä¸­æ²¡æœ‰é‡å¤çš„æ¥å£</span></span><br><span class="line">            <span class="keyword">if</span> (interfaceSet.put(interfaceClass, <span class="keyword">Boolean</span>.<span class="keyword">TRUE</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                    <span class="string">&quot;repeated interface: &quot;</span> + interfaceClass.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆçš„ä»£ç†ç±»çš„åŒ…å</span></span><br><span class="line">        String proxyPkg = <span class="keyword">null</span>;   </span><br><span class="line">        <span class="comment">// ã€ç”Ÿæˆçš„ä»£ç†ç±»è®¿é—®ä¿®é¥°ç¬¦ public finalã€‘ </span></span><br><span class="line">        <span class="keyword">int</span> accessFlags = Modifier.<span class="keyword">PUBLIC</span> | Modifier.<span class="keyword">FINAL</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ¥å£é›†åˆå†…çš„æ¥å£ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŸä¸ªæ¥å£çš„è®¿é—®ä¿®é¥°ç¬¦ä¸æ˜¯ public çš„  å¦‚æœä¸æ˜¯ public çš„æ¥å£ï¼Œ</span></span><br><span class="line">        <span class="comment">// ç”Ÿæˆçš„ä»£ç†ç±» class å°±å¿…é¡»å’Œå®ƒåœ¨ä¸€ä¸ªåŒ…ä¸‹ï¼Œå¦åˆ™è®¿é—®å‡ºç°é—®é¢˜</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">Class</span>&lt;?&gt; intf : interfaces) &#123;</span><br><span class="line">            <span class="comment">// è·å–è®¿é—®ä¿®é¥°ç¬¦</span></span><br><span class="line">            <span class="keyword">int</span> flags = intf.getModifiers();</span><br><span class="line">            <span class="keyword">if</span> (!Modifier.isPublic(flags)) &#123;</span><br><span class="line">                accessFlags = Modifier.<span class="keyword">FINAL</span>;</span><br><span class="line">                <span class="comment">// è·å–å½“å‰æ¥å£çš„å…¨é™å®šå åŒ…å.ç±»å</span></span><br><span class="line">                String name = intf.getName();</span><br><span class="line">                <span class="keyword">int</span> n = name.lastIndexOf(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">                <span class="comment">// è·å–åŒ…å</span></span><br><span class="line">                String pkg = ((n == -<span class="number">1</span>) ? <span class="string">&quot;&quot;</span> : name.substring(<span class="number">0</span>, n + <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">if</span> (proxyPkg == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    proxyPkg = pkg;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!pkg.equals(proxyPkg)) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                        <span class="string">&quot;non-public interfaces from different packages&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (proxyPkg == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// if no non-public proxy interfaces, use com.sun.proxy package</span></span><br><span class="line">            proxyPkg = ReflectUtil.PROXY_PACKAGE + <span class="string">&quot;.&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–å”¯ä¸€çš„ç¼–å·</span></span><br><span class="line">        <span class="keyword">long</span> num = nextUniqueNumber.getAndIncrement();</span><br><span class="line">        <span class="comment">// åŒ…å+ $proxy + æ•°å­—ï¼Œæ¯”å¦‚ $proxy1</span></span><br><span class="line">        String proxyName = proxyPkg + proxyClassNamePrefix + num;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ã€ç”ŸæˆäºŒè¿›åˆ¶å­—èŠ‚ç ï¼Œè¿™ä¸ªå­—èŠ‚ç å†™å…¥åˆ°æ–‡ä»¶å†…ã€‘ï¼Œå°±æ˜¯ç¼–è¯‘å¥½çš„ class æ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">byte</span>[] proxyClassFile = ProxyGenerator.generateProxyClass(proxyName, interfaces, accessFlags);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ã€ä½¿ç”¨åŠ è½½å™¨åŠ è½½äºŒè¿›åˆ¶åˆ° jvmã€‘ï¼Œå¹¶ä¸”è¿”å› class</span></span><br><span class="line">            <span class="keyword">return</span> defineClass0(loader, proxyName, proxyClassFile, <span class="number">0</span>, proxyClassFile.length);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassFormatError e) &#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="CGLIB">CGLIB</h4>
<p>CGLIB æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ï¼Œé«˜æ€§èƒ½çš„ä»£ç ç”ŸæˆåŒ…ï¼Œä¸ºæ²¡æœ‰å®ç°æ¥å£çš„ç±»æä¾›ä»£ç†ï¼Œä¸º JDK åŠ¨æ€ä»£ç†æä¾›äº†è¡¥å……ï¼ˆ$$Proxyï¼‰</p>
<ul>
<li>
<p>CGLIB æ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„åŒ…ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ jar åŒ…çš„åæ ‡ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä»£ç†å·¥å‚ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">TrainStation</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TrainStation</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TrainStation <span class="title function_">getProxyObject</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºEnhancerå¯¹è±¡ï¼Œç±»ä¼¼äºJDKåŠ¨æ€ä»£ç†çš„Proxyç±»ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è®¾ç½®å‡ ä¸ªå‚æ•°</span></span><br><span class="line">        <span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®çˆ¶ç±»çš„å­—èŠ‚ç å¯¹è±¡</span></span><br><span class="line">        enhancer.setSuperclass(target.getClass());</span><br><span class="line">        <span class="comment">//è®¾ç½®å›è°ƒå‡½æ•°</span></span><br><span class="line">        enhancer.setCallback(<span class="keyword">new</span> <span class="title class_">MethodInterceptor</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object obj, Method method, Object[] args, MethodProxy proxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">				System.out.println(<span class="string">&quot;ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨(CGLIBåŠ¨æ€ä»£ç†æ–¹å¼)&quot;</span>);</span><br><span class="line">        		<span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> methodProxy.invokeSuper(obj, args);</span><br><span class="line">        		<span class="keyword">return</span> <span class="literal">null</span>;<span class="comment">//å› ä¸ºè¿”å›å€¼ä¸ºvoid</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">TrainStation</span> <span class="variable">obj</span> <span class="operator">=</span> (TrainStation) enhancer.create();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>CGLIB çš„ä¼˜ç¼ºç‚¹</p>
<ul>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>CGLIB åŠ¨æ€ä»£ç†<strong>ä¸é™å®š</strong>æ˜¯å¦å…·æœ‰æ¥å£ï¼Œå¯ä»¥å¯¹ä»»æ„æ“ä½œè¿›è¡Œå¢å¼º</li>
<li>CGLIB åŠ¨æ€ä»£ç†æ— éœ€è¦åŸå§‹è¢«ä»£ç†å¯¹è±¡ï¼ŒåŠ¨æ€åˆ›å»ºå‡ºæ–°çš„ä»£ç†å¯¹è±¡</li>
<li><strong>JDKProxy ä»…å¯¹æ¥å£æ–¹æ³•åšå¢å¼ºï¼ŒCGLIB å¯¹æ‰€æœ‰æ–¹æ³•åšå¢å¼º</strong>ï¼ŒåŒ…æ‹¬ Object ç±»ä¸­çš„æ–¹æ³•ï¼ŒtoStringã€hashCode ç­‰</li>
</ul>
</li>
<li>ç¼ºç‚¹ï¼šCGLIB ä¸èƒ½å¯¹å£°æ˜ä¸º final çš„ç±»æˆ–è€…æ–¹æ³•è¿›è¡Œä»£ç†ï¼Œå› ä¸º CGLIB åŸç†æ˜¯<strong>åŠ¨æ€ç”Ÿæˆè¢«ä»£ç†ç±»çš„å­ç±»ï¼Œç»§æ‰¿è¢«ä»£ç†ç±»</strong></li>
</ul>
<h4 id="æ–¹å¼å¯¹æ¯”">æ–¹å¼å¯¹æ¯”</h4>
<p>ä¸‰ç§æ–¹å¼å¯¹æ¯”ï¼š</p>
<ul>
<li>
<p>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†ï¼š</p>
<ul>
<li>åŠ¨æ€ä»£ç†å°†æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•éƒ½è¢«è½¬ç§»åˆ°ä¸€ä¸ªé›†ä¸­çš„æ–¹æ³•ä¸­å¤„ç†ï¼ˆInvocationHandler.invokeï¼‰ï¼Œåœ¨æ¥å£æ–¹æ³•æ•°é‡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œçµæ´»å¤„ç†ï¼Œä¸éœ€è¦åƒé™æ€ä»£ç†é‚£æ ·æ¯ä¸€ä¸ªæ–¹æ³•è¿›è¡Œä¸­è½¬</li>
<li>é™æ€ä»£ç†æ˜¯åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å°†æ¥å£ã€ä»£ç†ç±»ã€è¢«ä»£ç†ç±»çš„å­—èŠ‚ç æ–‡ä»¶ç¡®å®šä¸‹æ¥</li>
<li>åŠ¨æ€ä»£ç†æ˜¯ç¨‹åº<strong>åœ¨è¿è¡Œåé€šè¿‡åå°„åˆ›å»ºå­—èŠ‚ç æ–‡ä»¶</strong>äº¤ç”± JVM åŠ è½½</li>
</ul>
</li>
<li>
<p>JDK ä»£ç†å’Œ CGLIB ä»£ç†ï¼š</p>
<p>JDK åŠ¨æ€ä»£ç†é‡‡ç”¨ <code>ProxyGenerator.generateProxyClass()</code> æ–¹æ³•åœ¨è¿è¡Œæ—¶ç”Ÿæˆå­—èŠ‚ç ï¼›CGLIB åº•å±‚é‡‡ç”¨ ASM å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œä½¿ç”¨å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä»£ç†ç±»ã€‚åœ¨ JDK1.6ä¹‹å‰æ¯”ä½¿ç”¨ Java åå°„æ•ˆç‡è¦é«˜ï¼Œåˆ° JDK1.8 çš„æ—¶å€™ï¼ŒJDK ä»£ç†æ•ˆç‡é«˜äº CGLIB ä»£ç†ã€‚æ‰€ä»¥å¦‚æœæœ‰æ¥å£æˆ–è€…å½“å‰ç±»å°±æ˜¯æ¥å£ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦‚æœæ²¡æœ‰æ¥å£ä½¿ç”¨ CGLIB ä»£ç†</p>
</li>
</ul>
<p>ä»£ç†æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>ä»£ç†æ¨¡å¼åœ¨å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸€ä¸ªä¸­ä»‹ä½œç”¨å’Œä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œç”¨</li>
<li><strong>ä»£ç†å¯¹è±¡å¯ä»¥å¢å¼ºç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼Œè¢«ç”¨æ¥é—´æ¥è®¿é—®åº•å±‚å¯¹è±¡ï¼Œä¸åŸå§‹å¯¹è±¡å…·æœ‰ç›¸åŒçš„ hashCode</strong></li>
<li>ä»£ç†æ¨¡å¼èƒ½å°†å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦</li>
</ul>
</li>
<li>ç¼ºç‚¹ï¼šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦</li>
</ul>
<p>ä»£ç†æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è¿œç¨‹ï¼ˆRemoteï¼‰ä»£ç†ï¼šæœ¬åœ°æœåŠ¡é€šè¿‡ç½‘ç»œè¯·æ±‚è¿œç¨‹æœåŠ¡ï¼Œéœ€è¦å®ç°ç½‘ç»œé€šä¿¡ï¼Œå¤„ç†å…¶ä¸­å¯èƒ½çš„å¼‚å¸¸ã€‚ä¸ºäº†è‰¯å¥½çš„ä»£ç è®¾è®¡å’Œå¯ç»´æŠ¤æ€§ï¼Œå°†ç½‘ç»œé€šä¿¡éƒ¨åˆ†éšè—èµ·æ¥ï¼Œåªæš´éœ²ç»™æœ¬åœ°æœåŠ¡ä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡è¯¥æ¥å£å³å¯è®¿é—®è¿œç¨‹æœåŠ¡æä¾›çš„åŠŸèƒ½</li>
<li>é˜²ç«å¢™ï¼ˆFirewallï¼‰ä»£ç†ï¼šå½“ä½ å°†æµè§ˆå™¨é…ç½®æˆä½¿ç”¨ä»£ç†åŠŸèƒ½æ—¶ï¼Œé˜²ç«å¢™å°±å°†ä½ çš„æµè§ˆå™¨çš„è¯·æ±‚è½¬ç»™äº’è”ç½‘ï¼Œå½“äº’è”ç½‘è¿”å›å“åº”æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å†æŠŠå®ƒè½¬ç»™ä½ çš„æµè§ˆå™¨</li>
<li>ä¿æŠ¤ï¼ˆProtect or Accessï¼‰ä»£ç†ï¼šæ§åˆ¶å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„ä½¿ç”¨æƒé™</li>
</ul>
<h1>JVM</h1>
<h2 id="JVMæ¦‚è¿°">JVMæ¦‚è¿°</h2>
<h3 id="åŸºæœ¬ä»‹ç»-19">åŸºæœ¬ä»‹ç»</h3>
<p>JVMï¼šå…¨ç§° Java Virtual Machineï¼Œå³ Java è™šæ‹Ÿæœºï¼Œä¸€ç§è§„èŒƒï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªè™šæ‹Ÿè®¡ç®—æœºï¼Œç›´æ¥å’Œæ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œä¸ç¡¬ä»¶ä¸ç›´æ¥äº¤äº’ï¼Œè€Œæ“ä½œç³»ç»Ÿå¯ä»¥å¸®æˆ‘ä»¬å®Œæˆå’Œç¡¬ä»¶è¿›è¡Œäº¤äº’çš„å·¥ä½œ</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>Java è™šæ‹ŸæœºåŸºäº<strong>äºŒè¿›åˆ¶å­—èŠ‚ç </strong>æ‰§è¡Œï¼Œç”±ä¸€å¥—å­—èŠ‚ç æŒ‡ä»¤é›†ã€ä¸€ç»„å¯„å­˜å™¨ã€ä¸€ä¸ªæ ˆã€ä¸€ä¸ªåƒåœ¾å›æ”¶å †ã€ä¸€ä¸ªæ–¹æ³•åŒºç­‰ç»„æˆ</li>
<li>JVM å±è”½äº†ä¸æ“ä½œç³»ç»Ÿå¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä»è€Œèƒ½å¤Ÿè®© Java ç¨‹åºåªéœ€è¦ç”Ÿæˆèƒ½å¤Ÿåœ¨ JVM ä¸Šè¿è¡Œçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œé€šè¿‡è¯¥æœºåˆ¶å®ç°çš„<strong>è·¨å¹³å°æ€§</strong></li>
</ul>
<p>Java ä»£ç æ‰§è¡Œæµç¨‹ï¼š<code>Java ç¨‹åº --ï¼ˆç¼–è¯‘ï¼‰--&gt; å­—èŠ‚ç æ–‡ä»¶ --ï¼ˆè§£é‡Šæ‰§è¡Œï¼‰--&gt; æ“ä½œç³»ç»Ÿï¼ˆWinï¼ŒLinuxï¼‰</code></p>
<p>JVM ç»“æ„ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%A6%82%E8%BF%B0%E5%9B%BE.png" alt="img"></p>
<p>JVMã€JREã€JDK å¯¹æ¯”ï¼š</p>
<ul>
<li>JDK(Java SE Development Kit)ï¼šJava æ ‡å‡†å¼€å‘åŒ…ï¼Œæä¾›äº†ç¼–è¯‘ã€è¿è¡Œ Java ç¨‹åºæ‰€éœ€çš„å„ç§å·¥å…·å’Œèµ„æº</li>
<li>JRE( Java Runtime Environment)ï¼šJava è¿è¡Œç¯å¢ƒï¼Œç”¨äºè§£é‡Šæ‰§è¡Œ Java çš„å­—èŠ‚ç æ–‡ä»¶</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-JRE%E5%85%B3%E7%B3%BB.png" alt="img"></p>
<p>å‚è€ƒä¹¦ç±ï¼š<a target="_blank" rel="noopener" href="https://book.douban.com/subject/34907497/">https://book.douban.com/subject/34907497/</a></p>
<p>å‚è€ƒè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PJ411n7xZ">https://www.bilibili.com/video/BV1PJ411n7xZ</a></p>
<p>å‚è€ƒè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yE411Z7AP">https://www.bilibili.com/video/BV1yE411Z7AP</a></p>
<h3 id="æ¶æ„æ¨¡å‹">æ¶æ„æ¨¡å‹</h3>
<p>Java ç¼–è¯‘å™¨è¾“å…¥çš„æŒ‡ä»¤æµæ˜¯ä¸€ç§åŸºäºæ ˆçš„æŒ‡ä»¤é›†æ¶æ„ã€‚å› ä¸ºè·¨å¹³å°çš„è®¾è®¡ï¼ŒJava çš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ï¼Œä¸åŒå¹³å° CPU æ¶æ„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºå¯„å­˜å™¨æ¶æ„</p>
<ul>
<li>åŸºäºæ ˆå¼æ¶æ„çš„ç‰¹ç‚¹ï¼š
<ul>
<li>è®¾è®¡å’Œå®ç°ç®€å•ï¼Œé€‚ç”¨äºèµ„æºå—é™çš„ç³»ç»Ÿ</li>
<li>ä½¿ç”¨é›¶åœ°å€æŒ‡ä»¤æ–¹å¼åˆ†é…ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¾èµ–æ“ä½œæ ˆï¼ŒæŒ‡ä»¤é›†æ›´å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°
<ul>
<li>é›¶åœ°å€æŒ‡ä»¤ï¼šæœºå™¨æŒ‡ä»¤çš„ä¸€ç§ï¼Œæ˜¯æŒ‡ä»¤ç³»ç»Ÿä¸­çš„ä¸€ç§ä¸è®¾åœ°å€å­—æ®µçš„æŒ‡ä»¤ï¼Œåªæœ‰æ“ä½œç è€Œæ²¡æœ‰åœ°å€ç ã€‚è¿™ç§æŒ‡ä»¤æœ‰ä¸¤ç§æƒ…å†µï¼šä¸€æ˜¯æ— éœ€æ“ä½œæ•°ï¼Œå¦ä¸€ç§æ˜¯æ“ä½œæ•°ä¸ºé»˜è®¤çš„ï¼ˆéšå«çš„ï¼‰ï¼Œé»˜è®¤ä¸ºæ“ä½œæ•°åœ¨å¯„å­˜å™¨ï¼ˆACCï¼‰ä¸­ï¼ŒæŒ‡ä»¤å¯ç›´æ¥è®¿é—®å¯„å­˜å™¨</li>
<li>ä¸€åœ°å€æŒ‡ä»¤ï¼šä¸€ä¸ªæ“ä½œç å¯¹åº”ä¸€ä¸ªåœ°å€ç ï¼Œé€šè¿‡åœ°å€ç å¯»æ‰¾æ“ä½œæ•°</li>
</ul>
</li>
<li>ä¸éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œå¯ç§»æ¤æ€§æ›´å¥½ï¼Œæ›´å¥½å®ç°è·¨å¹³å°</li>
</ul>
</li>
<li>åŸºäºå¯„å­˜å™¨æ¶æ„çš„ç‰¹ç‚¹ï¼š
<ul>
<li>éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œå¯ç§»æ¤æ€§å·®</li>
<li>æ€§èƒ½æ›´å¥½ï¼Œæ‰§è¡Œæ›´é«˜æ•ˆï¼Œå¯„å­˜å™¨æ¯”å†…å­˜å¿«</li>
<li>ä»¥ä¸€åœ°å€æŒ‡ä»¤ã€äºŒåœ°å€æŒ‡ä»¤ã€ä¸‰åœ°å€æŒ‡ä»¤ä¸ºä¸»</li>
</ul>
</li>
</ul>
<h3 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h3>
<p>JVM çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸ºï¼šå¯åŠ¨ã€è¿è¡Œã€æ­»äº¡</p>
<ul>
<li>
<p><strong>å¯åŠ¨</strong>ï¼šå½“å¯åŠ¨ä¸€ä¸ª Java ç¨‹åºæ—¶ï¼Œé€šè¿‡å¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆbootstrap class loaderï¼‰åˆ›å»ºä¸€ä¸ªåˆå§‹ç±»ï¼ˆinitial classï¼‰ï¼Œå¯¹äºæ‹¥æœ‰ main å‡½æ•°çš„ç±»å°±æ˜¯ JVM å®ä¾‹è¿è¡Œçš„èµ·ç‚¹</p>
</li>
<li>
<p><strong>è¿è¡Œ</strong>ï¼š</p>
<ul>
<li>
<p>main() æ–¹æ³•æ˜¯ä¸€ä¸ªç¨‹åºçš„åˆå§‹èµ·ç‚¹ï¼Œä»»ä½•çº¿ç¨‹å‡å¯ç”±åœ¨æ­¤å¤„å¯åŠ¨</p>
</li>
<li>
<p>åœ¨ JVM å†…éƒ¨æœ‰ä¸¤ç§çº¿ç¨‹ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼šç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹ï¼Œ<strong>JVM ä½¿ç”¨çš„æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œmain() å’Œå…¶ä»–çº¿ç¨‹ä½¿ç”¨çš„æ˜¯ç”¨æˆ·çº¿ç¨‹</strong>ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéšç€ç”¨æˆ·çº¿ç¨‹çš„ç»“æŸè€Œç»“æŸ</p>
</li>
<li>
<p>æ‰§è¡Œä¸€ä¸ª Java ç¨‹åºæ—¶ï¼ŒçœŸçœŸæ­£æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª <strong>Java è™šæ‹Ÿæœºçš„è¿›ç¨‹</strong></p>
</li>
<li>
<p>JVM æœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ Server ä¸ Clientï¼Œä¸¤ç§æ¨¡å¼çš„åŒºåˆ«åœ¨äºï¼šClient æ¨¡å¼å¯åŠ¨é€Ÿåº¦è¾ƒå¿«ï¼ŒServer æ¨¡å¼å¯åŠ¨è¾ƒæ…¢ï¼›ä½†æ˜¯å¯åŠ¨è¿›å…¥ç¨³å®šæœŸé•¿æœŸè¿è¡Œä¹‹å Server æ¨¡å¼çš„ç¨‹åºè¿è¡Œé€Ÿåº¦æ¯” Client è¦å¿«å¾ˆå¤š</p>
<p>Server æ¨¡å¼å¯åŠ¨çš„ JVM é‡‡ç”¨çš„æ˜¯é‡é‡çº§çš„è™šæ‹Ÿæœºï¼Œå¯¹ç¨‹åºé‡‡ç”¨äº†æ›´å¤šçš„ä¼˜åŒ–ï¼›Client æ¨¡å¼å¯åŠ¨çš„ JVM é‡‡ç”¨çš„æ˜¯è½»é‡çº§çš„è™šæ‹Ÿæœº</p>
</li>
</ul>
</li>
<li>
<p><strong>æ­»äº¡</strong>ï¼š</p>
<ul>
<li>å½“ç¨‹åºä¸­çš„ç”¨æˆ·çº¿ç¨‹éƒ½ä¸­æ­¢ï¼ŒJVM æ‰ä¼šé€€å‡º</li>
<li>ç¨‹åºæ­£å¸¸æ‰§è¡Œç»“æŸã€ç¨‹åºå¼‚å¸¸æˆ–é”™è¯¯è€Œå¼‚å¸¸ç»ˆæ­¢ã€æ“ä½œç³»ç»Ÿé”™è¯¯å¯¼è‡´ç»ˆæ­¢</li>
<li>çº¿ç¨‹è°ƒç”¨ Runtime ç±» halt æ–¹æ³•æˆ– System ç±» exit æ–¹æ³•ï¼Œå¹¶ä¸” Java å®‰å…¨ç®¡ç†å™¨å…è®¸è¿™æ¬¡ exit æˆ– halt æ“ä½œ</li>
</ul>
</li>
</ul>
<h2 id="å†…å­˜ç»“æ„">å†…å­˜ç»“æ„</h2>
<h3 id="å†…å­˜æ¦‚è¿°">å†…å­˜æ¦‚è¿°</h3>
<p>å†…å­˜ç»“æ„æ˜¯ JVM ä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯éå¸¸é‡è¦çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯ç¡¬ç›˜å’Œ CPU çš„æ¡¥æ¢ï¼Œæ‰¿è½½ç€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®æ—¶è¿è¡Œï¼Œåˆå«è¿è¡Œæ—¶æ•°æ®åŒº</p>
<p>JVM å†…å­˜ç»“æ„è§„å®šäº† Java åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å†…å­˜ç”³è¯·ã€åˆ†é…ã€ç®¡ç†çš„ç­–ç•¥ï¼Œä¿è¯äº† JVM çš„é«˜æ•ˆç¨³å®šè¿è¡Œ</p>
<ul>
<li>
<p>Java1.8 ä»¥å‰çš„å†…å­˜ç»“æ„å›¾ï¼š <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-Java7%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="img"></p>
</li>
<li>
<p>Java1.8 ä¹‹åçš„å†…å­˜ç»“æœå›¾ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-Java8%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="img"></p>
</li>
</ul>
<p>çº¿ç¨‹è¿è¡Œè¯Šæ–­ï¼š</p>
<ul>
<li>å®šä½ï¼šjps å®šä½è¿›ç¨‹ ID</li>
<li>jstack è¿›ç¨‹ IDï¼šç”¨äºæ‰“å°å‡ºç»™å®šçš„ Java è¿›ç¨‹ ID æˆ– core file æˆ–è¿œç¨‹è°ƒè¯•æœåŠ¡çš„ Java å †æ ˆä¿¡æ¯</li>
</ul>
<p>å¸¸è§ OOM é”™è¯¯ï¼š</p>
<ul>
<li>java.lang.StackOverflowError</li>
<li>java.lang.OutOfMemoryErrorï¼šjava heap space</li>
<li>java.lang.OutOfMemoryErrorï¼šGC overhead limit exceeded</li>
<li>java.lang.OutOfMemoryErrorï¼šDirect buffer memory</li>
<li>java.lang.OutOfMemoryErrorï¼šunable to create new native thread</li>
<li>java.lang.OutOfMemoryErrorï¼šMetaspace</li>
</ul>
<h3 id="JVMå†…å­˜">JVMå†…å­˜</h3>
<h4 id="è™šæ‹Ÿæœºæ ˆ">è™šæ‹Ÿæœºæ ˆ</h4>
<h5 id="Java-æ ˆ">Java æ ˆ</h5>
<p>Java è™šæ‹Ÿæœºæ ˆï¼šJava Virtual Machine Stacksï¼Œ<strong>æ¯ä¸ªçº¿ç¨‹</strong>è¿è¡Œæ—¶æ‰€éœ€è¦çš„å†…å­˜</p>
<ul>
<li>
<p>æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šåœ¨è™šæ‹Ÿæœºæ ˆä¸­åˆ›å»ºä¸€ä¸ªæ ˆå¸§ stack frameï¼ˆ<strong>ä¸€ä¸ªæ–¹æ³•ä¸€ä¸ªæ ˆå¸§</strong>ï¼‰</p>
</li>
<li>
<p>Java è™šæ‹Ÿæœºè§„èŒƒå…è®¸ <strong>Java æ ˆçš„å¤§å°æ˜¯åŠ¨æ€çš„æˆ–è€…æ˜¯å›ºå®šä¸å˜çš„</strong></p>
</li>
<li>
<p>è™šæ‹Ÿæœºæ ˆæ˜¯<strong>æ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„</strong>ï¼Œæ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªæ´»åŠ¨æ ˆå¸§ï¼Œå¯¹åº”æ–¹æ³•è°ƒç”¨åˆ°æ‰§è¡Œå®Œæˆçš„æ•´ä¸ªè¿‡ç¨‹</p>
</li>
<li>
<p>æ¯ä¸ªæ ˆç”±å¤šä¸ªæ ˆå¸§ï¼ˆFrameï¼‰ç»„æˆï¼Œå¯¹åº”ç€æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶æ‰€å ç”¨çš„å†…å­˜ï¼Œæ¯ä¸ªæ ˆå¸§ä¸­å­˜å‚¨ç€ï¼š</p>
<ul>
<li>å±€éƒ¨å˜é‡è¡¨ï¼šå­˜å‚¨æ–¹æ³•é‡Œçš„ Java åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠå¯¹è±¡çš„å¼•ç”¨</li>
<li>åŠ¨æ€é“¾æ¥ï¼šä¹Ÿå«æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨</li>
<li>æ–¹æ³•è¿”å›åœ°å€ï¼šæ–¹æ³•æ­£å¸¸é€€å‡ºæˆ–è€…å¼‚å¸¸é€€å‡ºçš„å®šä¹‰</li>
<li>æ“ä½œæ•°æ ˆæˆ–è¡¨è¾¾å¼æ ˆå’Œå…¶ä»–ä¸€äº›é™„åŠ ä¿¡æ¯</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88.png" alt="img"></p>
</li>
</ul>
<p>è®¾ç½®æ ˆå†…å­˜å¤§å°ï¼š<code>-Xss size</code>   <code>-Xss 1024k</code></p>
<ul>
<li>åœ¨ JDK 1.4 ä¸­é»˜è®¤ä¸º 256Kï¼Œè€Œåœ¨ JDK 1.5+ é»˜è®¤ä¸º 1M</li>
</ul>
<p>è™šæ‹Ÿæœºæ ˆç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ ˆå†…å­˜<strong>ä¸éœ€è¦è¿›è¡ŒGC</strong>ï¼Œæ–¹æ³•å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ä¼šè¿›æ ˆï¼Œæ–¹æ³•è°ƒç”¨åè‡ªåŠ¨å¼¹æ ˆï¼Œç›¸å½“äºæ¸…ç©ºäº†æ•°æ®</li>
<li>æ ˆå†…å­˜åˆ†é…è¶Šå¤§è¶Šå¤§ï¼Œå¯ç”¨çš„çº¿ç¨‹æ•°è¶Šå°‘ï¼ˆå†…å­˜è¶Šå¤§ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰çš„å†…å­˜è¶Šå¤§ï¼‰</li>
<li>æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡æ˜¯å¦<strong>çº¿ç¨‹å®‰å…¨</strong>ï¼š
<ul>
<li>å¦‚æœæ–¹æ³•å†…å±€éƒ¨å˜é‡æ²¡æœ‰é€ƒç¦»æ–¹æ³•çš„ä½œç”¨è®¿é—®ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆé€ƒé€¸åˆ†æï¼‰</li>
<li>å¦‚æœæ˜¯å±€éƒ¨å˜é‡å¼•ç”¨äº†å¯¹è±¡ï¼Œå¹¶é€ƒç¦»æ–¹æ³•çš„ä½œç”¨èŒƒå›´ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨</li>
</ul>
</li>
</ul>
<p>å¼‚å¸¸ï¼š</p>
<ul>
<li>æ ˆå¸§è¿‡å¤šå¯¼è‡´æ ˆå†…å­˜æº¢å‡º ï¼ˆè¶…è¿‡äº†æ ˆçš„å®¹é‡ï¼‰ï¼Œä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸</li>
<li>å½“çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡æœ€å¤§å€¼ï¼Œä¼šæŠ›å‡º StackOverflowError å¼‚å¸¸</li>
</ul>
<h5 id="å±€éƒ¨å˜é‡">å±€éƒ¨å˜é‡</h5>
<p>å±€éƒ¨å˜é‡è¡¨ä¹Ÿè¢«ç§°ä¹‹ä¸ºå±€éƒ¨å˜é‡æ•°ç»„æˆ–æœ¬åœ°å˜é‡è¡¨ï¼Œæœ¬è´¨ä¸Šå®šä¹‰ä¸ºä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ–¹æ³•å‚æ•°å’Œå®šä¹‰åœ¨æ–¹æ³•ä½“å†…çš„å±€éƒ¨å˜é‡</p>
<ul>
<li>è¡¨æ˜¯å»ºç«‹åœ¨çº¿ç¨‹çš„æ ˆä¸Šï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„æ•°æ®ï¼Œå› æ­¤ä¸å­˜åœ¨æ•°æ®å®‰å…¨é—®é¢˜</li>
<li>è¡¨çš„å®¹é‡å¤§å°æ˜¯åœ¨ç¼–è¯‘æœŸç¡®å®šçš„ï¼Œä¿å­˜åœ¨æ–¹æ³•çš„ Code å±æ€§çš„ maximum local variables æ•°æ®é¡¹ä¸­</li>
<li>è¡¨ä¸­çš„å˜é‡åªåœ¨å½“å‰æ–¹æ³•è°ƒç”¨ä¸­æœ‰æ•ˆï¼Œæ–¹æ³•ç»“æŸæ ˆå¸§é”€æ¯ï¼Œå±€éƒ¨å˜é‡è¡¨ä¹Ÿä¼šéšä¹‹é”€æ¯</li>
<li>è¡¨ä¸­çš„å˜é‡ä¹Ÿæ˜¯é‡è¦çš„åƒåœ¾å›æ”¶æ ¹èŠ‚ç‚¹ï¼Œåªè¦è¢«è¡¨ä¸­æ•°æ®ç›´æ¥æˆ–é—´æ¥å¼•ç”¨çš„å¯¹è±¡éƒ½ä¸ä¼šè¢«å›æ”¶</li>
</ul>
<p>å±€éƒ¨å˜é‡è¡¨æœ€åŸºæœ¬çš„å­˜å‚¨å•å…ƒæ˜¯ <strong>slotï¼ˆå˜é‡æ§½ï¼‰</strong>ï¼š</p>
<ul>
<li>å‚æ•°å€¼çš„å­˜æ”¾æ€»æ˜¯åœ¨å±€éƒ¨å˜é‡æ•°ç»„çš„ index0 å¼€å§‹ï¼Œåˆ°æ•°ç»„é•¿åº¦ -1 çš„ç´¢å¼•ç»“æŸï¼ŒJVM ä¸ºæ¯ä¸€ä¸ª slot éƒ½åˆ†é…ä¸€ä¸ªè®¿é—®ç´¢å¼•ï¼Œé€šè¿‡ç´¢å¼•å³å¯è®¿é—®åˆ°æ§½ä¸­çš„æ•°æ®</li>
<li>å­˜æ”¾ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ8ç§ï¼‰ï¼Œå¼•ç”¨ç±»å‹ï¼ˆreferenceï¼‰ï¼ŒreturnAddress ç±»å‹çš„å˜é‡</li>
<li>32 ä½ä»¥å†…çš„ç±»å‹åªå ä¸€ä¸ª slotï¼ˆåŒ…æ‹¬ returnAddress ç±»å‹ï¼‰ï¼Œ64 ä½çš„ç±»å‹ï¼ˆlong å’Œ doubleï¼‰å ä¸¤ä¸ª slot</li>
<li>å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ§½ä½æ˜¯å¯ä»¥<strong>é‡å¤åˆ©ç”¨</strong>çš„ï¼Œå¦‚æœä¸€ä¸ªå±€éƒ¨å˜é‡è¿‡äº†å…¶ä½œç”¨åŸŸï¼Œé‚£ä¹ˆä¹‹åç”³æ˜çš„æ–°çš„å±€éƒ¨å˜é‡å°±å¯èƒ½ä¼šå¤ç”¨è¿‡æœŸå±€éƒ¨å˜é‡çš„æ§½ä½ï¼Œä»è€Œè¾¾åˆ°èŠ‚çœèµ„æºçš„ç›®çš„</li>
</ul>
<h5 id="æ“ä½œæ•°æ ˆ">æ“ä½œæ•°æ ˆ</h5>
<p>æ ˆï¼šå¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–è€…é“¾è¡¨æ¥å®ç°</p>
<p>æ“ä½œæ•°æ ˆï¼šåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ¹æ®å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¾€æ ˆä¸­å†™å…¥æ•°æ®æˆ–æå–æ•°æ®ï¼Œå³å…¥æ ˆï¼ˆpushï¼‰æˆ–å‡ºæ ˆï¼ˆpopï¼‰</p>
<ul>
<li>ä¿å­˜è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´ç»“æœï¼ŒåŒæ—¶ä½œä¸ºè®¡ç®—è¿‡ç¨‹ä¸­å˜é‡ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´ï¼Œæ˜¯æ‰§è¡Œå¼•æ“çš„ä¸€ä¸ªå·¥ä½œåŒº</li>
<li>Java è™šæ‹Ÿæœºçš„è§£é‡Šå¼•æ“æ˜¯åŸºäºæ ˆçš„æ‰§è¡Œå¼•æ“ï¼Œå…¶ä¸­çš„æ ˆæŒ‡çš„å°±æ˜¯æ“ä½œæ•°æ ˆ</li>
<li>å¦‚æœè¢«è°ƒç”¨çš„æ–¹æ³•å¸¦æœ‰è¿”å›å€¼çš„è¯ï¼Œå…¶<strong>è¿”å›å€¼å°†ä¼šè¢«å‹å…¥å½“å‰æ ˆå¸§çš„æ“ä½œæ•°æ ˆä¸­</strong></li>
</ul>
<p>æ ˆé¡¶ç¼“å­˜æŠ€æœ¯ ToSï¼ˆTop-of-Stack Cashingï¼‰ï¼šå°†æ ˆé¡¶å…ƒç´ å…¨éƒ¨ç¼“å­˜åœ¨ CPU çš„å¯„å­˜å™¨ä¸­ï¼Œä»¥æ­¤é™ä½å¯¹å†…å­˜çš„è¯»/å†™æ¬¡æ•°ï¼Œæå‡æ‰§è¡Œçš„æ•ˆç‡</p>
<p>åŸºäºæ ˆå¼æ¶æ„çš„è™šæ‹Ÿæœºä½¿ç”¨çš„é›¶åœ°å€æŒ‡ä»¤æ›´åŠ ç´§å‡‘ï¼Œå®Œæˆä¸€é¡¹æ“ä½œéœ€è¦ä½¿ç”¨å¾ˆå¤šå…¥æ ˆå’Œå‡ºæ ˆæŒ‡ä»¤ï¼Œæ‰€ä»¥éœ€è¦æ›´å¤šçš„æŒ‡ä»¤åˆ†æ´¾ï¼ˆinstruction dispatchï¼‰æ¬¡æ•°å’Œå†…å­˜è¯»/å†™æ¬¡æ•°ï¼Œç”±äºæ“ä½œæ•°æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå› æ­¤é¢‘ç¹åœ°æ‰§è¡Œå†…å­˜è¯»/å†™æ“ä½œå¿…ç„¶ä¼šå½±å“æ‰§è¡Œé€Ÿåº¦ï¼Œæ‰€ä»¥éœ€è¦æ ˆé¡¶ç¼“å­˜æŠ€æœ¯</p>
<h5 id="åŠ¨æ€é“¾æ¥">åŠ¨æ€é“¾æ¥</h5>
<p>åŠ¨æ€é“¾æ¥æ˜¯æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨ï¼Œæ¶‰åŠåˆ°æ ˆæ“ä½œå·²ç»æ˜¯ç±»åŠ è½½å®Œæˆï¼Œè¿™ä¸ªé˜¶æ®µçš„è§£ææ˜¯<strong>åŠ¨æ€ç»‘å®š</strong></p>
<ul>
<li>
<p>ä¸ºäº†æ”¯æŒå½“å‰æ–¹æ³•çš„ä»£ç èƒ½å¤Ÿå®ç°åŠ¨æ€é“¾æ¥ï¼Œæ¯ä¸€ä¸ªæ ˆå¸§å†…éƒ¨éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± æˆ–è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E7%AC%A6%E5%8F%B7%E5%BC%95%E7%94%A8.png" alt="img"></p>
</li>
<li>
<p>åœ¨ Java æºæ–‡ä»¶è¢«ç¼–è¯‘æˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•å¼•ç”¨éƒ½ä½œä¸ºç¬¦å·å¼•ç”¨ä¿å­˜åœ¨ class çš„å¸¸é‡æ± ä¸­</p>
<p>å¸¸é‡æ± çš„ä½œç”¨ï¼šæä¾›ä¸€äº›ç¬¦å·å’Œå¸¸é‡ï¼Œä¾¿äºæŒ‡ä»¤çš„è¯†åˆ«</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0.png" alt="img"></p>
</li>
</ul>
<h5 id="è¿”å›åœ°å€">è¿”å›åœ°å€</h5>
<p>Return Addressï¼šå­˜æ”¾è°ƒç”¨è¯¥æ–¹æ³•çš„ PC å¯„å­˜å™¨çš„å€¼</p>
<p>æ–¹æ³•çš„ç»“æŸæœ‰ä¸¤ç§æ–¹å¼ï¼šæ­£å¸¸æ‰§è¡Œå®Œæˆã€å‡ºç°æœªå¤„ç†çš„å¼‚å¸¸ï¼Œåœ¨æ–¹æ³•é€€å‡ºåéƒ½è¿”å›åˆ°è¯¥æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®</p>
<ul>
<li>æ­£å¸¸ï¼šè°ƒç”¨è€…çš„ PC è®¡æ•°å™¨çš„å€¼ä½œä¸ºè¿”å›åœ°å€ï¼Œå³è°ƒç”¨è¯¥æ–¹æ³•çš„æŒ‡ä»¤çš„<strong>ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€</strong></li>
<li>å¼‚å¸¸ï¼šè¿”å›åœ°å€æ˜¯è¦é€šè¿‡å¼‚å¸¸è¡¨æ¥ç¡®å®š</li>
</ul>
<p>æ­£å¸¸å®Œæˆå‡ºå£ï¼šæ‰§è¡Œå¼•æ“é‡åˆ°ä»»æ„ä¸€ä¸ªæ–¹æ³•è¿”å›çš„å­—èŠ‚ç æŒ‡ä»¤ï¼ˆreturnï¼‰ï¼Œä¼šæœ‰è¿”å›å€¼ä¼ é€’ç»™ä¸Šå±‚çš„æ–¹æ³•è°ƒç”¨è€…</p>
<p>å¼‚å¸¸å®Œæˆå‡ºå£ï¼šæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¼‚å¸¸ï¼ˆExceptionï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰åœ¨æ–¹æ³•å†…è¿›è¡Œå¤„ç†ï¼Œæœ¬æ–¹æ³•çš„å¼‚å¸¸è¡¨ä¸­æ²¡æœ‰æœç´ åˆ°åŒ¹é…çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œå¯¼è‡´æ–¹æ³•é€€å‡º</p>
<p>ä¸¤è€…åŒºåˆ«ï¼šé€šè¿‡å¼‚å¸¸å®Œæˆå‡ºå£é€€å‡ºçš„ä¸ä¼šç»™ä¸Šå±‚è°ƒç”¨è€…äº§ç”Ÿä»»ä½•çš„è¿”å›å€¼</p>
<h5 id="é™„åŠ ä¿¡æ¯">é™„åŠ ä¿¡æ¯</h5>
<p>æ ˆå¸§ä¸­è¿˜å…è®¸æºå¸¦ä¸ Java è™šæ‹Ÿæœºå®ç°ç›¸å…³çš„ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œä¾‹å¦‚å¯¹ç¨‹åºè°ƒè¯•æä¾›æ”¯æŒçš„ä¿¡æ¯</p>
<h4 id="æœ¬åœ°æ–¹æ³•æ ˆ">æœ¬åœ°æ–¹æ³•æ ˆ</h4>
<p>æœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸ºè™šæ‹Ÿæœºæ‰§è¡Œæœ¬åœ°æ–¹æ³•æ—¶æä¾›æœåŠ¡çš„</p>
<p>JNIï¼šJava Native Interfaceï¼Œé€šè¿‡ä½¿ç”¨ Java æœ¬åœ°æ¥å£ç¨‹åºï¼Œå¯ä»¥ç¡®ä¿ä»£ç åœ¨ä¸åŒçš„å¹³å°ä¸Šæ–¹ä¾¿ç§»æ¤</p>
<ul>
<li>ä¸éœ€è¦è¿›è¡Œ GCï¼Œä¸è™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæœ‰ StackOverFlowError å’Œ OutOfMemoryError å¼‚å¸¸</li>
<li>è™šæ‹Ÿæœºæ ˆæ‰§è¡Œçš„æ˜¯ Java æ–¹æ³•ï¼Œåœ¨ HotSpot JVM ä¸­ï¼Œç›´æ¥å°†æœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€</li>
<li>æœ¬åœ°æ–¹æ³•ä¸€èˆ¬æ˜¯ç”±å…¶ä»–è¯­è¨€ç¼–å†™ï¼Œå¹¶ä¸”è¢«ç¼–è¯‘ä¸ºåŸºäºæœ¬æœºç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„ç¨‹åº</li>
<li>å½“æŸä¸ªçº¿ç¨‹è°ƒç”¨ä¸€ä¸ªæœ¬åœ°æ–¹æ³•æ—¶ï¼Œå°±è¿›å…¥äº†ä¸å†å—è™šæ‹Ÿæœºé™åˆ¶çš„ä¸–ç•Œï¼Œå’Œè™šæ‹Ÿæœºæ‹¥æœ‰åŒæ ·çš„æƒé™
<ul>
<li>æœ¬åœ°æ–¹æ³•å¯ä»¥é€šè¿‡æœ¬åœ°æ–¹æ³•æ¥å£æ¥<strong>è®¿é—®è™šæ‹Ÿæœºå†…éƒ¨çš„è¿è¡Œæ—¶æ•°æ®åŒº</strong></li>
<li>ç›´æ¥ä»æœ¬åœ°å†…å­˜çš„å †ä¸­åˆ†é…ä»»æ„æ•°é‡çš„å†…å­˜</li>
<li>å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°å¤„ç†å™¨ä¸­çš„å¯„å­˜å™¨</li>
</ul>
</li>
</ul>
<p>åŸç†ï¼šå°†æœ¬åœ°çš„ C å‡½æ•°ï¼ˆå¦‚ fooï¼‰ç¼–è¯‘åˆ°ä¸€ä¸ªå…±äº«åº“ï¼ˆ<a target="_blank" rel="noopener" href="http://foo.so">foo.so</a>ï¼‰ä¸­ï¼Œå½“æ­£åœ¨è¿è¡Œçš„ Java ç¨‹åºè°ƒç”¨ foo æ—¶ï¼ŒJava è§£é‡Šå™¨åˆ©ç”¨ dlopen æ¥å£åŠ¨æ€é“¾æ¥å’ŒåŠ è½½ <a target="_blank" rel="noopener" href="http://foo.so">foo.so</a> åå†è°ƒç”¨è¯¥å‡½æ•°</p>
<ul>
<li>dlopen å‡½æ•°ï¼šLinux ç³»ç»ŸåŠ è½½å’Œé“¾æ¥å…±äº«åº“</li>
<li>dlclose å‡½æ•°ï¼šå¸è½½å…±äº«åº“</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88.png" alt="img"></p>
<p>å›¾ç‰‡æ¥æºï¼š[<a target="_blank" rel="noopener" href="https://github.com/CyC2018/CS-Notes/blob/master/notes/Java%20%E8%99%9A%E6%8B%9F%E6%9C%BA.md">https://github.com/CyC2018/CS-Notes/blob/master/notes/Java è™šæ‹Ÿæœº.md</a>](<a target="_blank" rel="noopener" href="https://github.com/CyC2018/CS-Notes/blob/master/notes/Java">https://github.com/CyC2018/CS-Notes/blob/master/notes/Java</a> <a target="_blank" rel="noopener" href="http://xn--stuw0h6r9a.md">è™šæ‹Ÿæœº.md</a>)</p>
<h4 id="ç¨‹åºè®¡æ•°å™¨">ç¨‹åºè®¡æ•°å™¨</h4>
<p>Program Counter Register ç¨‹åºè®¡æ•°å™¨ï¼ˆå¯„å­˜å™¨ï¼‰</p>
<p>ä½œç”¨ï¼šå†…éƒ¨ä¿å­˜å­—èŠ‚ç çš„è¡Œå·ï¼Œç”¨äºè®°å½•æ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€ï¼ˆå¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯æœ¬åœ°æ–¹æ³•åˆ™ä¸ºç©ºï¼‰</p>
<p>åŸç†ï¼š</p>
<ul>
<li>JVM å¯¹äºå¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶ä¸”åˆ†é…çº¿ç¨‹æ‰§è¡Œæ—¶é—´ï¼Œä¸€ä¸ªå¤„ç†å™¨åªä¼šå¤„ç†æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹</li>
<li>åˆ‡æ¢çº¿ç¨‹éœ€è¦ä»ç¨‹åºè®¡æ•°å™¨ä¸­æ¥å›å»åˆ°å½“å‰çš„çº¿ç¨‹ä¸Šä¸€æ¬¡æ‰§è¡Œçš„è¡Œå·</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ˜¯çº¿ç¨‹ç§æœ‰çš„</li>
<li><strong>ä¸ä¼šå­˜åœ¨å†…å­˜æº¢å‡º</strong>ï¼Œæ˜¯ JVM è§„èŒƒä¸­å”¯ä¸€ä¸€ä¸ªä¸å‡ºç° OOM çš„åŒºåŸŸï¼Œæ‰€ä»¥è¿™ä¸ªç©ºé—´ä¸ä¼šè¿›è¡Œ GC</li>
</ul>
<p>Java åç¼–è¯‘æŒ‡ä»¤ï¼š<code>javap -v Test.class</code></p>
<p>#20ï¼šä»£è¡¨å» Constant pool æŸ¥çœ‹è¯¥åœ°å€çš„æŒ‡ä»¤</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>: getstatic <span class="comment">#20 		// PrintStream out = System.out;</span></span><br><span class="line"><span class="number">3</span>: astore_1 			<span class="regexp">//</span> --</span><br><span class="line"><span class="number">4</span>: aload_1 				<span class="regexp">//</span> out.println(<span class="number">1</span>);</span><br><span class="line"><span class="number">5</span>: iconst_1 			<span class="regexp">//</span> --</span><br><span class="line"><span class="number">6</span>: invokevirtual <span class="comment">#26 	// --</span></span><br><span class="line"><span class="number">9</span>: aload_1 				<span class="regexp">//</span> out.println(<span class="number">2</span>);</span><br><span class="line"><span class="number">10</span>: iconst_2 			<span class="regexp">//</span> --</span><br><span class="line"><span class="number">11</span>: invokevirtual <span class="comment">#26 	// --</span></span><br></pre></td></tr></table></figure>
<h4 id="å †">å †</h4>
<p>Heap å †ï¼šæ˜¯ JVM å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼Œç”±æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œç”±åƒåœ¾å›æ”¶å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œå †ä¸­å¯¹è±¡å¤§éƒ¨åˆ†éƒ½éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜</p>
<p>å­˜æ”¾å“ªäº›èµ„æºï¼š</p>
<ul>
<li>å¯¹è±¡å®ä¾‹ï¼šç±»åˆå§‹åŒ–ç”Ÿæˆçš„å¯¹è±¡ï¼Œ<strong>åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡å®ä¾‹</strong>ï¼Œnew åˆ›å»ºå¯¹è±¡éƒ½ä½¿ç”¨å †å†…å­˜</li>
<li>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼š
<ul>
<li>å­—ç¬¦ä¸²å¸¸é‡æ± åŸæœ¬å­˜æ”¾äºæ–¹æ³•åŒºï¼ŒJDK7 å¼€å§‹æ”¾ç½®äºå †ä¸­</li>
<li>å­—ç¬¦ä¸²å¸¸é‡æ± <strong>å­˜å‚¨çš„æ˜¯ String å¯¹è±¡çš„ç›´æ¥å¼•ç”¨æˆ–è€…å¯¹è±¡</strong>ï¼Œæ˜¯ä¸€å¼  string table</li>
</ul>
</li>
<li>é™æ€å˜é‡ï¼šé™æ€å˜é‡æ˜¯æœ‰ static ä¿®é¥°çš„å˜é‡ï¼ŒJDK8 æ—¶ä»æ–¹æ³•åŒºè¿ç§»è‡³å †ä¸­</li>
<li>çº¿ç¨‹åˆ†é…ç¼“å†²åŒº Thread Local Allocation Bufferï¼šçº¿ç¨‹ç§æœ‰ä½†ä¸å½±å“å †çš„å…±æ€§ï¼Œå¯ä»¥æå‡å¯¹è±¡åˆ†é…çš„æ•ˆç‡</li>
</ul>
<p>è®¾ç½®å †å†…å­˜æŒ‡ä»¤ï¼š<code>-Xmx Size</code></p>
<p>å†…å­˜æº¢å‡ºï¼šnew å‡ºå¯¹è±¡ï¼Œå¾ªç¯æ·»åŠ å­—ç¬¦æ•°æ®ï¼Œå½“å †ä¸­æ²¡æœ‰å†…å­˜ç©ºé—´å¯åˆ†é…ç»™å®ä¾‹ï¼Œä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼Œå°±ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸</p>
<p>å †å†…å­˜è¯Šæ–­å·¥å…·ï¼šï¼ˆæ§åˆ¶å°å‘½ä»¤ï¼‰</p>
<ol>
<li>jpsï¼šæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æœ‰å“ªäº› Java è¿›ç¨‹</li>
<li>jmapï¼šæŸ¥çœ‹å †å†…å­˜å ç”¨æƒ…å†µ <code>jhsdb jmap --heap --pid è¿›ç¨‹id</code></li>
<li>jconsoleï¼šå›¾å½¢ç•Œé¢çš„ï¼Œå¤šåŠŸèƒ½çš„ç›‘æµ‹å·¥å…·ï¼Œå¯ä»¥è¿ç»­ç›‘æµ‹</li>
</ol>
<p>åœ¨ Java7 ä¸­å †å†…ä¼šå­˜åœ¨<strong>å¹´è½»ä»£ã€è€å¹´ä»£å’Œæ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰</strong>ï¼š</p>
<ul>
<li>Young åŒºè¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒEden åŒºå’Œä¸¤ä¸ªå¤§å°ä¸¥æ ¼ç›¸åŒçš„ Survivor åŒºã€‚Survivor åŒºæŸä¸€æ—¶åˆ»åªæœ‰å…¶ä¸­ä¸€ä¸ªæ˜¯è¢«ä½¿ç”¨çš„ï¼Œå¦å¤–ä¸€ä¸ªç•™åšåƒåœ¾å›æ”¶æ—¶å¤åˆ¶å¯¹è±¡ã€‚åœ¨ Eden åŒºå˜æ»¡çš„æ—¶å€™ï¼ŒGC å°±ä¼šå°†å­˜æ´»çš„å¯¹è±¡ç§»åˆ°ç©ºé—²çš„ Survivor åŒºé—´ä¸­ï¼Œæ ¹æ® JVM çš„ç­–ç•¥ï¼Œåœ¨ç»è¿‡å‡ æ¬¡åƒåœ¾å›æ”¶åï¼Œä»ç„¶å­˜æ´»äº Survivor çš„å¯¹è±¡å°†è¢«ç§»åŠ¨åˆ° Tenured åŒºé—´</li>
<li>Tenured åŒºä¸»è¦ä¿å­˜ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›è€çš„å¯¹è±¡ï¼Œå½“ä¸€äº›å¯¹è±¡åœ¨ Young å¤åˆ¶è½¬ç§»ä¸€å®šçš„æ¬¡æ•°ä»¥åï¼Œå¯¹è±¡å°±ä¼šè¢«è½¬ç§»åˆ° Tenured åŒº</li>
<li>Perm ä»£ä¸»è¦ä¿å­˜ Classã€ClassLoaderã€é™æ€å˜é‡ã€å¸¸é‡ã€ç¼–è¯‘åçš„ä»£ç ï¼Œåœ¨ Java7 ä¸­å †å†…æ–¹æ³•åŒºä¼šå—åˆ° GC çš„ç®¡ç†</li>
</ul>
<p>åˆ†ä»£åŸå› ï¼šä¸åŒå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œ70%-99% çš„å¯¹è±¡éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¼˜åŒ– GC æ€§èƒ½</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›Javaè™šæ‹Ÿæœºä¸­çš„å †å†…å­˜æ€»é‡</span></span><br><span class="line">    <span class="keyword">long</span> initialMemory = <span class="keyword">Runtime</span>.getRuntime().totalMemory() <span class="regexp">/ 1024 /</span> <span class="number">1024</span>;</span><br><span class="line">    <span class="comment">// è¿”å›Javaè™šæ‹Ÿæœºä½¿ç”¨çš„æœ€å¤§å †å†…å­˜é‡</span></span><br><span class="line">    <span class="keyword">long</span> maxMemory = <span class="keyword">Runtime</span>.getRuntime().maxMemory() <span class="regexp">/ 1024 /</span> <span class="number">1024</span>;</span><br><span class="line">    </span><br><span class="line">    System.out.<span class="keyword">println</span>(<span class="string">&quot;-Xms : &quot;</span> + initialMemory + <span class="string">&quot;M&quot;</span>);<span class="comment">//-Xms : 245M</span></span><br><span class="line">    System.out.<span class="keyword">println</span>(<span class="string">&quot;-Xmx : &quot;</span> + maxMemory + <span class="string">&quot;M&quot;</span>);<span class="comment">//-Xmx : 3641M</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹æ³•åŒº">æ–¹æ³•åŒº</h4>
<p>æ–¹æ³•åŒºï¼šæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ï¼Œè™½ç„¶ Java è™šæ‹Ÿæœºè§„èŒƒæŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯ä¹Ÿå« Non-Heapï¼ˆéå †ï¼‰</p>
<p>æ–¹æ³•åŒºæ˜¯ä¸€ä¸ª JVM è§„èŒƒï¼Œ<strong>æ°¸ä¹…ä»£ä¸å…ƒç©ºé—´éƒ½æ˜¯å…¶ä¸€ç§å®ç°æ–¹å¼</strong></p>
<p>æ–¹æ³•åŒºçš„å¤§å°ä¸å¿…æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥åŠ¨æ€æ‰©å±•ï¼ŒåŠ è½½çš„ç±»å¤ªå¤šï¼Œå¯èƒ½å¯¼è‡´æ°¸ä¹…ä»£å†…å­˜æº¢å‡º (OutOfMemoryError)</p>
<p>æ–¹æ³•åŒºçš„ GCï¼šé’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶åŠå¯¹ç±»å‹çš„å¸è½½ï¼Œæ¯”è¾ƒéš¾å®ç°</p>
<p>ä¸ºäº†<strong>é¿å…æ–¹æ³•åŒºå‡ºç° OOM</strong>ï¼Œåœ¨ JDK8 ä¸­å°†å †å†…çš„æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ç§»åŠ¨åˆ°äº†æœ¬åœ°å†…å­˜ä¸Šï¼Œé‡æ–°å¼€è¾Ÿäº†ä¸€å—ç©ºé—´ï¼Œå«åšå…ƒç©ºé—´ï¼Œå…ƒç©ºé—´å­˜å‚¨ç±»çš„å…ƒä¿¡æ¯ï¼Œ<strong>é™æ€å˜é‡å’Œå­—ç¬¦ä¸²å¸¸é‡æ± ç­‰æ”¾å…¥å †ä¸­</strong></p>
<p>ç±»å…ƒä¿¡æ¯ï¼šåœ¨ç±»ç¼–è¯‘æœŸé—´æ”¾å…¥æ–¹æ³•åŒºï¼Œå­˜æ”¾äº†ç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„æ–¹æ³•ã€å‚æ•°ã€æ¥å£ä»¥åŠå¸¸é‡æ± è¡¨</p>
<p>å¸¸é‡æ± è¡¨ï¼ˆConstant Pool Tableï¼‰æ˜¯ Class æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œå­˜å‚¨äº†<strong>ç±»åœ¨ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å­—é¢é‡ã€ç¬¦å·å¼•ç”¨</strong>ï¼ŒJVM ä¸ºæ¯ä¸ªå·²åŠ è½½çš„ç±»ç»´æŠ¤ä¸€ä¸ªå¸¸é‡æ± </p>
<ul>
<li>å­—é¢é‡ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹å¸¸é‡ã€å£°æ˜ä¸º final çš„å¸¸é‡å€¼ç­‰</li>
<li>ç¬¦å·å¼•ç”¨ï¼šç±»ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰çš„ç¬¦å·å¼•ç”¨</li>
</ul>
<p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†</p>
<ul>
<li>å¸¸é‡æ± ï¼ˆç¼–è¯‘å™¨ç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰ä¸­çš„æ•°æ®ä¼šåœ¨ç±»åŠ è½½çš„åŠ è½½é˜¶æ®µæ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± </li>
<li>ç±»åœ¨è§£æé˜¶æ®µå°†è¿™äº›ç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨</li>
<li>é™¤äº†åœ¨ç¼–è¯‘æœŸç”Ÿæˆçš„å¸¸é‡ï¼Œè¿˜å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚ String ç±»çš„ intern()</li>
</ul>
<h3 id="æœ¬åœ°å†…å­˜">æœ¬åœ°å†…å­˜</h3>
<h4 id="åŸºæœ¬ä»‹ç»-20">åŸºæœ¬ä»‹ç»</h4>
<p>è™šæ‹Ÿæœºå†…å­˜ï¼šJava è™šæ‹Ÿæœºåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šæŠŠç®¡ç†çš„å†…å­˜åˆ†é…æˆä¸åŒçš„åŒºåŸŸï¼Œå—è™šæ‹Ÿæœºå†…å­˜å¤§å°çš„å‚æ•°æ§åˆ¶ï¼Œå½“å¤§å°è¶…è¿‡å‚æ•°è®¾ç½®çš„å¤§å°æ—¶å°±ä¼šæŠ¥ OOM</p>
<p>æœ¬åœ°å†…å­˜ï¼šåˆå«åš<strong>å †å¤–å†…å­˜</strong>ï¼Œçº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œæœ¬åœ°å†…å­˜è¿™å—åŒºåŸŸæ˜¯ä¸ä¼šå—åˆ° JVM çš„æ§åˆ¶çš„ï¼Œä¸ä¼šå‘ç”Ÿ GCï¼›å› æ­¤å¯¹äºæ•´ä¸ª Java çš„æ‰§è¡Œæ•ˆç‡æ˜¯æå‡éå¸¸å¤§ï¼Œä½†æ˜¯å¦‚æœå†…å­˜çš„å ç”¨è¶…å‡ºç‰©ç†å†…å­˜çš„å¤§å°ï¼ŒåŒæ ·ä¹Ÿä¼šæŠ¥ OOM</p>
<p>æœ¬åœ°å†…å­˜æ¦‚è¿°å›¾ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%86%85%E5%AD%98%E5%9B%BE%E5%AF%B9%E6%AF%94.png" alt="img"></p>
<h4 id="å…ƒç©ºé—´">å…ƒç©ºé—´</h4>
<p>PermGen è¢«å…ƒç©ºé—´ä»£æ›¿ï¼Œæ°¸ä¹…ä»£çš„<strong>ç±»ä¿¡æ¯ã€æ–¹æ³•ã€å¸¸é‡æ± </strong>ç­‰éƒ½ç§»åŠ¨åˆ°å…ƒç©ºé—´åŒº</p>
<p>å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£åŒºåˆ«ï¼šå…ƒç©ºé—´ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨çš„æœ¬åœ°å†…å­˜ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶</p>
<p>æ–¹æ³•åŒºå†…å­˜æº¢å‡ºï¼š</p>
<ul>
<li>
<p>JDK1.8 ä»¥å‰ä¼šå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜æº¢å‡ºï¼šjava.lang.OutOfMemoryError: PerGen space</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:MaxPermSize=</span>8m		<span class="comment">#å‚æ•°è®¾ç½®</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>JDK1.8 ä»¥åä¼šå¯¼è‡´å…ƒç©ºé—´å†…å­˜æº¢å‡ºï¼šjava.lang.OutOfMemoryError: Metaspace</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:MaxMetaspaceSize=</span>8m	<span class="comment">#å‚æ•°è®¾ç½®	</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å…ƒç©ºé—´å†…å­˜æº¢å‡ºæ¼”ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1_8</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span> &#123; <span class="comment">// å¯ä»¥ç”¨æ¥åŠ è½½ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Demo1_8</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Demo1_8</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++, j++) &#123;</span><br><span class="line">                <span class="comment">// ClassWriter ä½œç”¨æ˜¯ç”Ÿæˆç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç </span></span><br><span class="line">                <span class="type">ClassWriter</span> <span class="variable">cw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassWriter</span>(<span class="number">0</span>);</span><br><span class="line">                <span class="comment">// ç‰ˆæœ¬å·ï¼Œ publicï¼Œ ç±»å, åŒ…å, çˆ¶ç±»ï¼Œ æ¥å£</span></span><br><span class="line">                cw.visit(Opcodes.V1_8, Opcodes.ACC_PUBLIC, <span class="string">&quot;Class&quot;</span> + i, <span class="literal">null</span>, <span class="string">&quot;java/lang/Object&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">                <span class="comment">// è¿”å› byte[]</span></span><br><span class="line">                <span class="type">byte</span>[] code = cw.toByteArray();</span><br><span class="line">                <span class="comment">// æ‰§è¡Œäº†ç±»çš„åŠ è½½</span></span><br><span class="line">                test.defineClass(<span class="string">&quot;Class&quot;</span> + i, code, <span class="number">0</span>, code.length); <span class="comment">// Class å¯¹è±¡</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç›´æ¥å†…å­˜">ç›´æ¥å†…å­˜</h4>
<p>ç›´æ¥å†…å­˜æ˜¯ Java å †å¤–ã€ç›´æ¥å‘ç³»ç»Ÿç”³è¯·çš„å†…å­˜åŒºé—´ï¼Œä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸ</p>
<p>ç›´æ¥å†…å­˜è¯¦è§£å‚è€ƒï¼šNET â†’ NIO â†’ ç›´æ¥å†…å­˜</p>
<h3 id="å˜é‡ä½ç½®">å˜é‡ä½ç½®</h3>
<p>å˜é‡çš„ä½ç½®ä¸å–å†³äºå®ƒæ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå–å†³äºå®ƒçš„<strong>å£°æ˜ä½ç½®</strong></p>
<p>é™æ€å†…éƒ¨ç±»å’Œå…¶ä»–å†…éƒ¨ç±»ï¼š</p>
<ul>
<li><strong>ä¸€ä¸ª class æ–‡ä»¶åªèƒ½å¯¹åº”ä¸€ä¸ª public ç±»å‹çš„ç±»</strong>ï¼Œè¿™ä¸ªç±»å¯ä»¥æœ‰å†…éƒ¨ç±»ï¼Œä½†ä¸ä¼šç”Ÿæˆæ–°çš„ class æ–‡ä»¶</li>
<li>é™æ€å†…éƒ¨ç±»å±äºç±»æœ¬èº«ï¼ŒåŠ è½½åˆ°æ–¹æ³•åŒºï¼Œå…¶ä»–å†…éƒ¨ç±»å±äºå†…éƒ¨ç±»çš„å±æ€§ï¼ŒåŠ è½½åˆ°å †ï¼ˆå¾…è€ƒè¯ï¼‰</li>
</ul>
<p>ç±»å˜é‡ï¼š</p>
<ul>
<li>ç±»å˜é‡æ˜¯ç”¨ static ä¿®é¥°ç¬¦ä¿®é¥°ï¼Œå®šä¹‰åœ¨æ–¹æ³•å¤–çš„å˜é‡ï¼Œéšç€ Java è¿›ç¨‹äº§ç”Ÿå’Œé”€æ¯</li>
<li>åœ¨ Java8 ä¹‹å‰æŠŠé™æ€å˜é‡å­˜æ”¾äºæ–¹æ³•åŒºï¼Œåœ¨ Java8 æ—¶å­˜æ”¾åœ¨å †ä¸­çš„é™æ€å˜é‡åŒº</li>
</ul>
<p>å®ä¾‹å˜é‡ï¼š</p>
<ul>
<li>å®ä¾‹ï¼ˆæˆå‘˜ï¼‰å˜é‡æ˜¯å®šä¹‰åœ¨ç±»ä¸­ï¼Œæ²¡æœ‰ static ä¿®é¥°çš„å˜é‡ï¼Œéšç€ç±»çš„å®ä¾‹äº§ç”Ÿå’Œé”€æ¯ï¼Œæ˜¯ç±»å®ä¾‹çš„ä¸€éƒ¨åˆ†</li>
<li>åœ¨ç±»åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä»è¿è¡Œæ—¶å¸¸é‡æ± å–å‡ºç›´æ¥å¼•ç”¨æˆ–è€…å€¼ï¼Œ<strong>ä¸åˆå§‹åŒ–çš„å¯¹è±¡ä¸€èµ·æ”¾å…¥å †ä¸­</strong></li>
</ul>
<p>å±€éƒ¨å˜é‡ï¼š</p>
<ul>
<li>å±€éƒ¨å˜é‡æ˜¯å®šä¹‰åœ¨ç±»çš„æ–¹æ³•ä¸­çš„å˜é‡</li>
<li>åœ¨æ‰€åœ¨æ–¹æ³•è¢«è°ƒç”¨æ—¶<strong>æ”¾å…¥è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§</strong>ä¸­ï¼Œæ–¹æ³•æ‰§è¡Œç»“æŸåä»è™šæ‹Ÿæœºæ ˆä¸­å¼¹å‡ºï¼Œ</li>
</ul>
<p>ç±»å¸¸é‡æ± ã€è¿è¡Œæ—¶å¸¸é‡æ± ã€å­—ç¬¦ä¸²å¸¸é‡æ± æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ul>
<li>ç±»å¸¸é‡æ± ä¸è¿è¡Œæ—¶å¸¸é‡æ± éƒ½å­˜å‚¨åœ¨æ–¹æ³•åŒºï¼Œè€Œå­—ç¬¦ä¸²å¸¸é‡æ± åœ¨ Jdk7 æ—¶å°±å·²ç»ä»æ–¹æ³•åŒºè¿ç§»åˆ°äº† Java å †ä¸­</li>
<li>åœ¨ç±»ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠç±»å…ƒä¿¡æ¯æ”¾åˆ°æ–¹æ³•åŒºï¼Œç±»å…ƒä¿¡æ¯çš„å…¶ä¸­ä¸€éƒ¨åˆ†ä¾¿æ˜¯ç±»å¸¸é‡æ± ï¼Œä¸»è¦å­˜æ”¾å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè€Œå­—é¢é‡çš„ä¸€éƒ¨åˆ†ä¾¿æ˜¯æ–‡æœ¬å­—ç¬¦</li>
<li><strong>åœ¨ç±»åŠ è½½æ—¶å°†å­—é¢é‡å’Œç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨å­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± </strong></li>
<li>å¯¹äºæ–‡æœ¬å­—ç¬¦ï¼Œä¼šåœ¨è§£ææ—¶æŸ¥æ‰¾å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ŒæŸ¥å‡ºè¿™ä¸ªæ–‡æœ¬å­—ç¬¦å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„ç›´æ¥å¼•ç”¨ï¼Œå°†ç›´æ¥å¼•ç”¨å­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± </li>
</ul>
<p>ä»€ä¹ˆæ˜¯å­—é¢é‡ï¼Ÿä»€ä¹ˆæ˜¯ç¬¦å·å¼•ç”¨ï¼Ÿ</p>
<ul>
<li>
<p>å­—é¢é‡ï¼šjava ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ˜¯æ— æ³•æ„å»ºå¼•ç”¨çš„ï¼Œå­—é¢é‡å°±æ˜¯åœ¨ç¼–è¯‘æ—¶å¯¹äºæ•°æ®çš„ä¸€ç§è¡¨ç¤º</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int a <span class="operator">=</span> <span class="number">1</span><span class="comment">;				//è¿™ä¸ª1ä¾¿æ˜¯å­—é¢é‡</span></span><br><span class="line">String b <span class="operator">=</span> <span class="string">&quot;iloveu&quot;</span><span class="comment">;	//iloveuä¾¿æ˜¯å­—é¢é‡</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç¬¦å·å¼•ç”¨ï¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¹¶ä¸çŸ¥é“æ¯ä¸ªç±»çš„åœ°å€ï¼Œå› ä¸ºå¯èƒ½è¿™ä¸ªç±»è¿˜æ²¡æœ‰åŠ è½½ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç±»ä¸­å¼•ç”¨äº†å¦ä¸€ä¸ªç±»ï¼Œæ— æ³•çŸ¥é“å®ƒçš„å†…å­˜åœ°å€ï¼Œåªèƒ½ç”¨å®ƒçš„ç±»åä½œä¸ºç¬¦å·å¼•ç”¨ï¼Œåœ¨ç±»åŠ è½½å®Œåç”¨è¿™ä¸ªç¬¦å·å¼•ç”¨å»è·å–å†…å­˜åœ°å€</p>
</li>
</ul>
<h2 id="å†…å­˜ç®¡ç†">å†…å­˜ç®¡ç†</h2>
<h3 id="å†…å­˜åˆ†é…-2">å†…å­˜åˆ†é…</h3>
<h4 id="ä¸¤ç§æ–¹å¼">ä¸¤ç§æ–¹å¼</h4>
<p>ä¸åˆ†é…å†…å­˜çš„å¯¹è±¡æ— æ³•è¿›è¡Œå…¶ä»–æ“ä½œï¼ŒJVM ä¸ºå¯¹è±¡åˆ†é…å†…å­˜çš„è¿‡ç¨‹ï¼šé¦–å…ˆè®¡ç®—å¯¹è±¡å ç”¨ç©ºé—´å¤§å°ï¼Œæ¥ç€åœ¨å †ä¸­åˆ’åˆ†ä¸€å—å†…å­˜ç»™æ–°å¯¹è±¡</p>
<ul>
<li>å¦‚æœå†…å­˜è§„æ•´ï¼Œä½¿ç”¨æŒ‡é’ˆç¢°æ’ï¼ˆBump The Pointerï¼‰ã€‚æ‰€æœ‰ç”¨è¿‡çš„å†…å­˜åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„å†…å­˜åœ¨å¦å¤–ä¸€è¾¹ï¼Œä¸­é—´æœ‰ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œåˆ†é…å†…å­˜å°±ä»…ä»…æ˜¯æŠŠæŒ‡é’ˆå‘ç©ºé—²é‚£è¾¹æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡å¤§å°ç›¸ç­‰çš„è·ç¦»</li>
<li>å¦‚æœå†…å­˜ä¸è§„æ•´ï¼Œè™šæ‹Ÿæœºéœ€è¦ç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰åˆ†é…ã€‚å·²ä½¿ç”¨çš„å†…å­˜å’Œæœªä½¿ç”¨çš„å†…å­˜ç›¸äº’äº¤é”™ï¼Œè™šæ‹Ÿæœºç»´æŠ¤äº†ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•ä¸Šå“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œå†åˆ†é…çš„æ—¶å€™ä»åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„å†…å®¹</li>
</ul>
<h4 id="TLAB">TLAB</h4>
<p>TLABï¼šThread Local Allocation Bufferï¼Œä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨å †å†…å•ç‹¬åˆ†é…äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œå¤šçº¿ç¨‹åˆ†é…å†…å­˜æ—¶ï¼Œä½¿ç”¨ TLAB å¯ä»¥é¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿæå‡å†…å­˜åˆ†é…çš„ååé‡ï¼Œè¿™ç§å†…å­˜åˆ†é…æ–¹å¼å«åš<strong>å¿«é€Ÿåˆ†é…ç­–ç•¥</strong></p>
<ul>
<li>æ ˆä¸Šåˆ†é…ä½¿ç”¨çš„æ˜¯æ ˆæ¥è¿›è¡Œå¯¹è±¡å†…å­˜çš„åˆ†é…</li>
<li>TLAB åˆ†é…ä½¿ç”¨çš„æ˜¯ Eden åŒºåŸŸè¿›è¡Œå†…å­˜åˆ†é…ï¼Œå±äºå †å†…å­˜</li>
</ul>
<p>å †åŒºæ˜¯çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œä»»ä½•çº¿ç¨‹éƒ½å¯ä»¥è®¿é—®åˆ°å †åŒºä¸­çš„å…±äº«æ•°æ®ï¼Œç”±äºå¯¹è±¡å®ä¾‹çš„åˆ›å»ºåœ¨ JVM ä¸­éå¸¸é¢‘ç¹ï¼Œå› æ­¤åœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¸ºé¿å…å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€åœ°å€ï¼Œéœ€è¦ä½¿ç”¨åŠ é”ç­‰æœºåˆ¶ï¼Œè¿›è€Œå½±å“åˆ†é…é€Ÿåº¦</p>
<p>é—®é¢˜ï¼šå †ç©ºé—´éƒ½æ˜¯å…±äº«çš„ä¹ˆï¼Ÿ ä¸ä¸€å®šï¼Œå› ä¸ºè¿˜æœ‰ TLABï¼Œåœ¨å †ä¸­åˆ’åˆ†å‡ºä¸€å—åŒºåŸŸï¼Œä¸ºæ¯ä¸ªçº¿ç¨‹æ‰€ç‹¬å </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-TLAB%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5.jpg" alt="img"></p>
<p>JVM æ˜¯å°† TLAB ä½œä¸ºå†…å­˜åˆ†é…çš„é¦–é€‰ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½èƒ½å¤Ÿåœ¨ TLAB ä¸­æˆåŠŸåˆ†é…å†…å­˜ï¼Œä¸€æ—¦å¯¹è±¡åœ¨ TLAB ç©ºé—´åˆ†é…å†…å­˜å¤±è´¥æ—¶ï¼ŒJVM å°±ä¼šé€šè¿‡<strong>ä½¿ç”¨åŠ é”æœºåˆ¶ç¡®ä¿æ•°æ®æ“ä½œçš„åŸå­æ€§</strong>ï¼Œä»è€Œç›´æ¥åœ¨å †ä¸­åˆ†é…å†…å­˜</p>
<p>æ ˆä¸Šåˆ†é…ä¼˜å…ˆäº TLAB åˆ†é…è¿›è¡Œï¼Œé€ƒé€¸åˆ†æä¸­è‹¥å¯è¿›è¡Œæ ˆä¸Šåˆ†é…ä¼˜åŒ–ï¼Œä¼šä¼˜å…ˆè¿›è¡Œå¯¹è±¡æ ˆä¸Šç›´æ¥åˆ†é…å†…å­˜</p>
<p>å‚æ•°è®¾ç½®ï¼š</p>
<ul>
<li><code>-XX:UseTLAB</code>ï¼šè®¾ç½®æ˜¯å¦å¼€å¯ TLAB ç©ºé—´</li>
<li><code>-XX:TLABWasteTargetPercent</code>ï¼šè®¾ç½® TLAB ç©ºé—´æ‰€å ç”¨ Eden ç©ºé—´çš„ç™¾åˆ†æ¯”å¤§å°ï¼Œé»˜è®¤æƒ…å†µä¸‹ TLAB ç©ºé—´çš„å†…å­˜éå¸¸å°ï¼Œä»…å æœ‰æ•´ä¸ª Eden ç©ºé—´çš„1%</li>
<li><code>-XX:TLABRefillWasteFraction</code>ï¼šæŒ‡å½“ TLAB ç©ºé—´ä¸è¶³ï¼Œè¯·æ±‚åˆ†é…çš„å¯¹è±¡å†…å­˜å¤§å°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ä¸ä¼šè¿›è¡Œ TLAB åˆ†é…ï¼Œç›´æ¥è¿›è¡Œå †å†…å­˜åˆ†é…ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šä¼˜å…ˆè¿›è¡Œ TLAB åˆ†é…</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-TLAB%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E8%BF%87%E7%A8%8B.jpg" alt="img"></p>
<h4 id="é€ƒé€¸åˆ†æ">é€ƒé€¸åˆ†æ</h4>
<p>å³æ—¶ç¼–è¯‘ï¼ˆJust-in-time Compilationï¼ŒJITï¼‰æ˜¯ä¸€ç§é€šè¿‡åœ¨è¿è¡Œæ—¶å°†å­—èŠ‚ç ç¿»è¯‘ä¸ºæœºå™¨ç ï¼Œä»è€Œæ”¹å–„æ€§èƒ½çš„æŠ€æœ¯ï¼Œåœ¨ HotSpot å®ç°ä¸­æœ‰å¤šç§é€‰æ‹©ï¼šC1ã€C2 å’Œ C1+C2ï¼Œåˆ†åˆ«å¯¹åº” Clientã€Server å’Œåˆ†å±‚ç¼–è¯‘</p>
<ul>
<li>C1 ç¼–è¯‘é€Ÿåº¦å¿«ï¼Œä¼˜åŒ–æ–¹å¼æ¯”è¾ƒä¿å®ˆï¼›C2 ç¼–è¯‘é€Ÿåº¦æ…¢ï¼Œä¼˜åŒ–æ–¹å¼æ¯”è¾ƒæ¿€è¿›</li>
<li>C1+C2 åœ¨å¼€å§‹é˜¶æ®µé‡‡ç”¨ C1 ç¼–è¯‘ï¼Œå½“ä»£ç è¿è¡Œåˆ°ä¸€å®šçƒ­åº¦ä¹‹åé‡‡ç”¨ C2 é‡æ–°ç¼–è¯‘</li>
</ul>
<p>é€ƒé€¸åˆ†æå¹¶ä¸æ˜¯ç›´æ¥çš„ä¼˜åŒ–æ‰‹æ®µï¼Œè€Œæ˜¯ä¸€ä¸ªä»£ç åˆ†ææ–¹å¼ï¼Œé€šè¿‡åŠ¨æ€åˆ†æå¯¹è±¡çš„ä½œç”¨åŸŸï¼Œä¸ºä¼˜åŒ–æ‰‹æ®µå¦‚æ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢å’ŒåŒæ­¥æ¶ˆé™¤ç­‰æä¾›ä¾æ®ï¼Œå‘ç”Ÿé€ƒé€¸è¡Œä¸ºçš„æƒ…å†µæœ‰ä¸¤ç§ï¼šæ–¹æ³•é€ƒé€¸å’Œçº¿ç¨‹é€ƒé€¸</p>
<ul>
<li>æ–¹æ³•é€ƒé€¸ï¼šå½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­å®šä¹‰ä¹‹åï¼Œè¢«å¤–éƒ¨æ–¹æ³•å¼•ç”¨
<ul>
<li>å…¨å±€é€ƒé€¸ï¼šä¸€ä¸ªå¯¹è±¡çš„ä½œç”¨èŒƒå›´é€ƒå‡ºäº†å½“å‰æ–¹æ³•æˆ–è€…å½“å‰çº¿ç¨‹ï¼Œæ¯”å¦‚å¯¹è±¡æ˜¯ä¸€ä¸ªé™æ€å˜é‡ã€å…¨å±€å˜é‡èµ‹å€¼ã€å·²ç»å‘ç”Ÿé€ƒé€¸çš„å¯¹è±¡ã€ä½œä¸ºå½“å‰æ–¹æ³•çš„è¿”å›å€¼</li>
<li>å‚æ•°é€ƒé€¸ï¼šä¸€ä¸ªå¯¹è±¡è¢«ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’æˆ–è€…è¢«å‚æ•°å¼•ç”¨</li>
</ul>
</li>
<li>çº¿ç¨‹é€ƒé€¸ï¼šå¦‚ç±»å˜é‡æˆ–å®ä¾‹å˜é‡ï¼Œå¯èƒ½è¢«å…¶å®ƒçº¿ç¨‹è®¿é—®åˆ°</li>
</ul>
<p>å¦‚æœä¸å­˜åœ¨é€ƒé€¸è¡Œä¸ºï¼Œåˆ™å¯ä»¥å¯¹è¯¥å¯¹è±¡è¿›è¡Œå¦‚ä¸‹ä¼˜åŒ–ï¼šåŒæ­¥æ¶ˆé™¤ã€æ ‡é‡æ›¿æ¢å’Œæ ˆä¸Šåˆ†é…</p>
<ul>
<li>
<p>åŒæ­¥æ¶ˆé™¤</p>
<p>çº¿ç¨‹åŒæ­¥æœ¬èº«æ¯”è¾ƒè€—æ—¶ï¼Œå¦‚æœç¡®å®šä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œä¸è¢«å…¶å®ƒçº¿ç¨‹è®¿é—®åˆ°ï¼Œé‚£å¯¹è±¡çš„è¯»å†™å°±ä¸ä¼šå­˜åœ¨ç«äº‰ï¼Œåˆ™å¯ä»¥æ¶ˆé™¤å¯¹è¯¥å¯¹è±¡çš„<strong>åŒæ­¥é”</strong>ï¼Œé€šè¿‡ <code>-XX:+EliminateLocks</code> å¯ä»¥å¼€å¯åŒæ­¥æ¶ˆé™¤ ( - å·å…³é—­)</p>
</li>
<li>
<p>æ ‡é‡æ›¿æ¢</p>
<ul>
<li>
<p>æ ‡é‡æ›¿æ¢ï¼šå¦‚æœæŠŠä¸€ä¸ªå¯¹è±¡æ‹†æ•£ï¼Œå°†å…¶æˆå‘˜å˜é‡æ¢å¤åˆ°åŸºæœ¬ç±»å‹æ¥è®¿é—®</p>
</li>
<li>
<p>æ ‡é‡ (scalar) ï¼šä¸å¯åˆ†å‰²çš„é‡ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å’Œ reference ç±»å‹</p>
<p>èšåˆé‡ (Aggregate)ï¼šä¸€ä¸ªæ•°æ®å¯ä»¥ç»§ç»­åˆ†è§£ï¼Œå¯¹è±¡ä¸€èˆ¬æ˜¯èšåˆé‡</p>
</li>
<li>
<p>å¦‚æœé€ƒé€¸åˆ†æå‘ç°ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡å¯ä»¥è¢«æ‹†æ•£ï¼Œé‚£ä¹ˆç»è¿‡ä¼˜åŒ–ä¹‹åï¼Œå¹¶ä¸ç›´æ¥ç”Ÿæˆè¯¥å¯¹è±¡ï¼Œè€Œæ˜¯å°†è¯¥å¯¹è±¡æˆå‘˜å˜é‡åˆ†è§£è‹¥å¹²ä¸ªè¢«è¿™ä¸ªæ–¹æ³•ä½¿ç”¨çš„æˆå‘˜å˜é‡æ‰€ä»£æ›¿</p>
</li>
<li>
<p>å‚æ•°è®¾ç½®ï¼š</p>
<ul>
<li><code>-XX:+EliminateAllocations</code>ï¼šå¼€å¯æ ‡é‡æ›¿æ¢</li>
<li><code>-XX:+PrintEliminateAllocations</code>ï¼šæŸ¥çœ‹æ ‡é‡æ›¿æ¢æƒ…å†µ</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ ˆä¸Šåˆ†é…</p>
<p>JIT ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸé—´æ ¹æ®é€ƒé€¸åˆ†æçš„ç»“æœï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•çš„è¯ï¼Œå°±å¯èƒ½è¢«ä¼˜åŒ–æˆæ ˆä¸Šåˆ†é…ã€‚åˆ†é…å®Œæˆåï¼Œç»§ç»­åœ¨è°ƒç”¨æ ˆå†…æ‰§è¡Œï¼Œæœ€åçº¿ç¨‹ç»“æŸï¼Œæ ˆç©ºé—´è¢«å›æ”¶ï¼Œå±€éƒ¨å˜é‡å¯¹è±¡ä¹Ÿè¢«å›æ”¶ï¼Œè¿™æ ·å°±æ— éœ€ GC</p>
<p>User å¯¹è±¡çš„ä½œç”¨åŸŸå±€é™åœ¨æ–¹æ³• fn ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‡é‡æ›¿æ¢çš„ä¼˜åŒ–æ‰‹æ®µåœ¨æ ˆä¸Šåˆ†é…å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œè¿™æ ·å°±ä¸ä¼šç”Ÿæˆ User å¯¹è±¡ï¼Œå¤§å¤§å‡è½» GC çš„å‹åŠ›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JVM</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1000000</span>;</span><br><span class="line">        <span class="comment">//warm up</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count ; i++) &#123;</span><br><span class="line">            sum += fn(i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">        System.in.read();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fn</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(age);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> user.getAge();</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="åˆ†ä»£æ€æƒ³">åˆ†ä»£æ€æƒ³</h4>
<h5 id="åˆ†ä»£ä»‹ç»">åˆ†ä»£ä»‹ç»</h5>
<p>Java8 æ—¶ï¼Œå †è¢«åˆ†ä¸ºäº†ä¸¤ä»½ï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼ˆ1:2ï¼‰ï¼Œåœ¨ Java7 æ—¶ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªæ°¸ä¹…ä»£</p>
<ul>
<li>æ–°ç”Ÿä»£ä½¿ç”¨ï¼šå¤åˆ¶ç®—æ³•</li>
<li>è€å¹´ä»£ä½¿ç”¨ï¼šæ ‡è®° - æ¸…é™¤ æˆ–è€… æ ‡è®° - æ•´ç† ç®—æ³•</li>
</ul>
<p><strong>Minor GC å’Œ Full GC</strong>ï¼š</p>
<ul>
<li>Minor GCï¼šå›æ”¶æ–°ç”Ÿä»£ï¼Œæ–°ç”Ÿä»£å¯¹è±¡å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œæ‰€ä»¥ Minor GC ä¼šé¢‘ç¹æ‰§è¡Œï¼Œæ‰§è¡Œçš„é€Ÿåº¦æ¯”è¾ƒå¿«</li>
<li>Full GCï¼šå›æ”¶è€å¹´ä»£å’Œæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£å¯¹è±¡å…¶å­˜æ´»æ—¶é—´é•¿ï¼Œæ‰€ä»¥ Full GC å¾ˆå°‘æ‰§è¡Œï¼Œæ‰§è¡Œé€Ÿåº¦ä¼šæ¯” Minor GC æ…¢å¾ˆå¤š</li>
</ul>
<p>Eden å’Œ Survivor å¤§å°æ¯”ä¾‹é»˜è®¤ä¸º 8:1:1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%88%86%E4%BB%A3%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95.png" alt="img"></p>
<h5 id="åˆ†ä»£åˆ†é…">åˆ†ä»£åˆ†é…</h5>
<p>å·¥ä½œæœºåˆ¶ï¼š</p>
<ul>
<li><strong>å¯¹è±¡ä¼˜å…ˆåœ¨ Eden åˆ†é…</strong>ï¼šå½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è±¡ä¼šè¢«åˆ†é…åœ¨æ–°ç”Ÿä»£çš„ Eden åŒºï¼Œå½“ Eden åŒºè¦æ»¡äº†æ—¶å€™ï¼Œè§¦å‘ YoungGC</li>
<li>å½“è¿›è¡Œ YoungGC åï¼Œæ­¤æ—¶åœ¨ Eden åŒºå­˜æ´»çš„å¯¹è±¡è¢«ç§»åŠ¨åˆ° to åŒºï¼Œå¹¶ä¸”å½“å‰å¯¹è±¡çš„å¹´é¾„ä¼šåŠ  1ï¼Œæ¸…ç©º Eden åŒº</li>
<li>å½“å†ä¸€æ¬¡è§¦å‘ YoungGC çš„æ—¶å€™ï¼Œä¼šæŠŠ Eden åŒºä¸­å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å’Œ to ä¸­çš„å¯¹è±¡ï¼Œç§»åŠ¨åˆ° from åŒºä¸­ï¼Œè¿™äº›å¯¹è±¡çš„å¹´é¾„ä¼šåŠ  1ï¼Œæ¸…ç©º Eden åŒºå’Œ to åŒº</li>
<li>To åŒºæ°¸è¿œæ˜¯ç©º Survivor åŒºï¼ŒFrom åŒºæ˜¯æœ‰æ•°æ®çš„ï¼Œæ¯æ¬¡ MinorGC åä¸¤ä¸ªåŒºåŸŸäº’æ¢</li>
<li>From åŒºå’Œ To åŒº ä¹Ÿå¯ä»¥å«åš S0 åŒºå’Œ S1 åŒº</li>
</ul>
<p>æ™‹å‡åˆ°è€å¹´ä»£ï¼š</p>
<ul>
<li>
<p><strong>é•¿æœŸå­˜æ´»çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£</strong>ï¼šä¸ºå¯¹è±¡å®šä¹‰å¹´é¾„è®¡æ•°å™¨ï¼Œå¯¹è±¡åœ¨ Eden å‡ºç”Ÿå¹¶ç»è¿‡ Minor GC ä¾ç„¶å­˜æ´»ï¼Œå°†ç§»åŠ¨åˆ° Survivor ä¸­ï¼Œå¹´é¾„å°±å¢åŠ  1 å²ï¼Œå¢åŠ åˆ°ä¸€å®šå¹´é¾„åˆ™ç§»åŠ¨åˆ°è€å¹´ä»£ä¸­</p>
<p><code>-XX:MaxTenuringThreshold</code>ï¼šå®šä¹‰å¹´é¾„çš„é˜ˆå€¼ï¼Œå¯¹è±¡å¤´ä¸­ç”¨ 4 ä¸ª bit å­˜å‚¨ï¼Œæ‰€ä»¥æœ€å¤§å€¼æ˜¯ 15ï¼Œé»˜è®¤ä¹Ÿæ˜¯ 15</p>
</li>
<li>
<p><strong>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</strong>ï¼šéœ€è¦è¿ç»­å†…å­˜ç©ºé—´çš„å¯¹è±¡ï¼Œæœ€å…¸å‹çš„å¤§å¯¹è±¡æ˜¯å¾ˆé•¿çš„å­—ç¬¦ä¸²ä»¥åŠæ•°ç»„ï¼›é¿å…åœ¨ Eden å’Œ Survivor ä¹‹é—´çš„å¤§é‡å¤åˆ¶ï¼›ç»å¸¸å‡ºç°å¤§å¯¹è±¡ä¼šæå‰è§¦å‘ GC ä»¥è·å–è¶³å¤Ÿçš„è¿ç»­ç©ºé—´åˆ†é…ç»™å¤§å¯¹è±¡</p>
<p><code>-XX:PretenureSizeThreshold</code>ï¼šå¤§äºæ­¤å€¼çš„å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…</p>
</li>
<li>
<p><strong>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š</strong>ï¼šå¦‚æœåœ¨ Survivor åŒºä¸­ç›¸åŒå¹´é¾„çš„å¯¹è±¡çš„æ‰€æœ‰å¤§å°ä¹‹å’Œè¶…è¿‡ Survivor ç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£</p>
</li>
</ul>
<p>ç©ºé—´åˆ†é…æ‹…ä¿ï¼š</p>
<ul>
<li>åœ¨å‘ç”Ÿ Minor GC ä¹‹å‰ï¼Œè™šæ‹Ÿæœºå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ï¼Œå¦‚æœæ¡ä»¶æˆç«‹çš„è¯ï¼Œé‚£ä¹ˆ Minor GC å¯ä»¥ç¡®è®¤æ˜¯å®‰å…¨çš„</li>
<li>å¦‚æœä¸æˆç«‹ï¼Œè™šæ‹Ÿæœºä¼šæŸ¥çœ‹ HandlePromotionFailure çš„å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ï¼Œå¦‚æœå…è®¸é‚£ä¹ˆå°±ä¼šç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡åˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°ï¼Œå¦‚æœå¤§äºå°†å°è¯•ç€è¿›è¡Œä¸€æ¬¡ Minor GCï¼›å¦‚æœå°äºæˆ–è€… HandlePromotionFailure çš„å€¼ä¸å…è®¸å†’é™©ï¼Œé‚£ä¹ˆå°±è¦è¿›è¡Œä¸€æ¬¡ Full GC</li>
</ul>
<h3 id="å›æ”¶ç­–ç•¥">å›æ”¶ç­–ç•¥</h3>
<h4 id="è§¦å‘æ¡ä»¶">è§¦å‘æ¡ä»¶</h4>
<p>å†…å­˜åƒåœ¾å›æ”¶æœºåˆ¶ä¸»è¦é›†ä¸­çš„åŒºåŸŸå°±æ˜¯çº¿ç¨‹å…±äº«åŒºåŸŸï¼š<strong>å †å’Œæ–¹æ³•åŒº</strong></p>
<p>Minor GC è§¦å‘æ¡ä»¶éå¸¸ç®€å•ï¼Œå½“ Eden ç©ºé—´æ»¡æ—¶ï¼Œå°±å°†è§¦å‘ä¸€æ¬¡ Minor GC</p>
<p>FullGC åŒæ—¶å›æ”¶æ–°ç”Ÿä»£ã€è€å¹´ä»£å’Œæ–¹æ³•åŒºï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ª FullGC çš„çº¿ç¨‹è¿›è¡Œæ‰§è¡Œï¼Œå…¶ä»–çš„çº¿ç¨‹å…¨éƒ¨ä¼šè¢«<strong>æŒ‚èµ·</strong>ï¼Œæœ‰ä»¥ä¸‹è§¦å‘æ¡ä»¶ï¼š</p>
<ul>
<li>è°ƒç”¨ System.gc()ï¼š
<ul>
<li>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ System.gc() æˆ– Runtime.getRuntime().gc() çš„è°ƒç”¨ï¼Œä¼šæ˜¾å¼è§¦å‘ FullGCï¼ŒåŒæ—¶å¯¹è€å¹´ä»£å’Œæ–°ç”Ÿä»£è¿›è¡Œå›æ”¶ï¼Œä½†æ˜¯è™šæ‹Ÿæœºä¸ä¸€å®šçœŸæ­£å»æ‰§è¡Œï¼Œæ— æ³•ä¿è¯å¯¹åƒåœ¾æ”¶é›†å™¨çš„è°ƒç”¨</li>
<li>ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œåº”è¯¥è®©è™šæ‹Ÿæœºç®¡ç†å†…å­˜ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåƒåœ¾å›æ”¶åº”è¯¥æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ— é¡»æ‰‹åŠ¨è§¦å‘ï¼›åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ€§èƒ½åŸºå‡†ï¼Œå¯ä»¥åœ¨è¿è¡Œä¹‹é—´è°ƒç”¨ System.gc()</li>
</ul>
</li>
<li>è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼š
<ul>
<li>ä¸ºäº†é¿å…å¼•èµ·çš„ Full GCï¼Œåº”å½“å°½é‡ä¸è¦åˆ›å»ºè¿‡å¤§çš„å¯¹è±¡ä»¥åŠæ•°ç»„</li>
<li>é€šè¿‡ -Xmn å‚æ•°è°ƒæ•´æ–°ç”Ÿä»£çš„å¤§å°ï¼Œè®©å¯¹è±¡å°½é‡åœ¨æ–°ç”Ÿä»£è¢«å›æ”¶æ‰ä¸è¿›å…¥è€å¹´ä»£ï¼Œå¯ä»¥é€šè¿‡ <code>-XX:MaxTenuringThreshold</code> è°ƒå¤§å¯¹è±¡è¿›å…¥è€å¹´ä»£çš„å¹´é¾„ï¼Œè®©å¯¹è±¡åœ¨æ–°ç”Ÿä»£å¤šå­˜æ´»ä¸€æ®µæ—¶é—´</li>
</ul>
</li>
<li>ç©ºé—´åˆ†é…æ‹…ä¿å¤±è´¥</li>
<li>JDK 1.7 åŠä»¥å‰çš„æ°¸ä¹…ä»£ï¼ˆæ–¹æ³•åŒºï¼‰ç©ºé—´ä¸è¶³</li>
<li>Concurrent Mode Failureï¼šæ‰§è¡Œ CMS GC çš„è¿‡ç¨‹ä¸­åŒæ—¶æœ‰å¯¹è±¡è¦æ”¾å…¥è€å¹´ä»£ï¼Œè€Œæ­¤æ—¶è€å¹´ä»£ç©ºé—´ä¸è¶³ï¼ˆå¯èƒ½æ˜¯ GC è¿‡ç¨‹ä¸­æµ®åŠ¨åƒåœ¾è¿‡å¤šå¯¼è‡´æš‚æ—¶æ€§çš„ç©ºé—´ä¸è¶³ï¼‰ï¼Œä¾¿ä¼šæŠ¥ Concurrent Mode Failure é”™è¯¯ï¼Œå¹¶è§¦å‘ Full GC</li>
</ul>
<p>æ‰‹åŠ¨ GC æµ‹è¯•ï¼ŒVMå‚æ•°ï¼š<code>-XX:+PrintGcDetails</code></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">localvarGC1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="type">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>];<span class="comment">//10MB</span></span><br><span class="line">    System.<span class="built_in">gc</span>();	<span class="comment">//è¾“å‡º: ä¸ä¼šè¢«å›æ”¶, FullGCæ—¶è¢«æ”¾å…¥è€å¹´ä»£</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">localvarGC2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="type">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">    buffer = null;</span><br><span class="line">    System.<span class="built_in">gc</span>();	<span class="comment">//è¾“å‡º: æ­£å¸¸è¢«å›æ”¶</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">localvarGC3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="type">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">     &#125;</span><br><span class="line">     System.<span class="built_in">gc</span>();	<span class="comment">//è¾“å‡º: ä¸ä¼šè¢«å›æ”¶, FullGCæ—¶è¢«æ”¾å…¥è€å¹´ä»£</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">localvarGC4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="type">byte</span>[<span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> value = <span class="number">10</span>;</span><br><span class="line">    System.<span class="built_in">gc</span>();	<span class="comment">//è¾“å‡º: æ­£å¸¸è¢«å›æ”¶ï¼Œslotå¤ç”¨ï¼Œå±€éƒ¨å˜é‡è¿‡äº†å…¶ä½œç”¨åŸŸ bufferç½®ç©º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å®‰å…¨åŒºåŸŸ">å®‰å…¨åŒºåŸŸ</h4>
<p>å®‰å…¨ç‚¹ (Safepoint)ï¼šç¨‹åºæ‰§è¡Œæ—¶å¹¶éåœ¨æ‰€æœ‰åœ°æ–¹éƒ½èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹ GCï¼Œåªæœ‰åœ¨å®‰å…¨ç‚¹æ‰èƒ½åœä¸‹</p>
<ul>
<li>Safe Point çš„é€‰æ‹©å¾ˆé‡è¦ï¼Œå¦‚æœå¤ªå°‘å¯èƒ½å¯¼è‡´ GC ç­‰å¾…çš„æ—¶é—´å¤ªé•¿ï¼Œå¦‚æœå¤ªå¤šå¯èƒ½å¯¼è‡´è¿è¡Œæ—¶çš„æ€§èƒ½é—®é¢˜</li>
<li>å¤§éƒ¨åˆ†æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´éƒ½éå¸¸çŸ­ï¼Œé€šå¸¸ä¼šæ ¹æ®æ˜¯å¦å…·æœ‰è®©ç¨‹åºé•¿æ—¶é—´æ‰§è¡Œçš„ç‰¹å¾ä¸ºæ ‡å‡†ï¼Œé€‰æ‹©äº›æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æŒ‡ä»¤ä½œä¸º Safe Pointï¼Œ å¦‚æ–¹æ³•è°ƒç”¨ã€å¾ªç¯è·³è½¬å’Œå¼‚å¸¸è·³è½¬ç­‰</li>
</ul>
<p>åœ¨ GC å‘ç”Ÿæ—¶ï¼Œè®©æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨æœ€è¿‘çš„å®‰å…¨ç‚¹åœé¡¿ä¸‹æ¥çš„æ–¹æ³•ï¼š</p>
<ul>
<li>æŠ¢å…ˆå¼ä¸­æ–­ï¼šæ²¡æœ‰è™šæ‹Ÿæœºé‡‡ç”¨ï¼Œé¦–å…ˆä¸­æ–­æ‰€æœ‰çº¿ç¨‹ï¼Œå¦‚æœæœ‰çº¿ç¨‹ä¸åœ¨å®‰å…¨ç‚¹ï¼Œå°±æ¢å¤çº¿ç¨‹è®©çº¿ç¨‹è¿è¡Œåˆ°å®‰å…¨ç‚¹</li>
<li>ä¸»åŠ¨å¼ä¸­æ–­ï¼šè®¾ç½®ä¸€ä¸ªä¸­æ–­æ ‡å¿—ï¼Œå„ä¸ªçº¿ç¨‹è¿è¡Œåˆ°å„ä¸ª Safe Point æ—¶å°±è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå¦‚æœä¸­æ–­æ ‡å¿—ä¸ºçœŸï¼Œåˆ™å°†è‡ªå·±è¿›è¡Œä¸­æ–­æŒ‚èµ·</li>
</ul>
<p>é—®é¢˜ï¼šSafepoint ä¿è¯ç¨‹åºæ‰§è¡Œæ—¶ï¼Œåœ¨ä¸å¤ªé•¿çš„æ—¶é—´å†…å°±ä¼šé‡åˆ°å¯è¿›å…¥ GC çš„ Safepointï¼Œä½†æ˜¯å½“çº¿ç¨‹å¤„äº Waiting çŠ¶æ€æˆ– Blocked çŠ¶æ€ï¼Œçº¿ç¨‹æ— æ³•å“åº” JVM çš„ä¸­æ–­è¯·æ±‚ï¼Œè¿è¡Œåˆ°å®‰å…¨ç‚¹å»ä¸­æ–­æŒ‚èµ·ï¼ŒJVM ä¹Ÿä¸å¯èƒ½ç­‰å¾…çº¿ç¨‹è¢«å”¤é†’ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œéœ€è¦å®‰å…¨åŒºåŸŸæ¥è§£å†³</p>
<p>å®‰å…¨åŒºåŸŸ (Safe Region)ï¼šæŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¸­ï¼Œ<strong>å¯¹è±¡çš„å¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–</strong>ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸä¸­çš„ä»»ä½•ä½ç½®å¼€å§‹ GC éƒ½æ˜¯å®‰å…¨çš„</p>
<p>è¿è¡Œæµç¨‹ï¼š</p>
<ul>
<li>å½“çº¿ç¨‹è¿è¡Œåˆ° Safe Region çš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ ‡è¯†å·²ç»è¿›å…¥äº† Safe Regionï¼Œå¦‚æœè¿™æ®µæ—¶é—´å†…å‘ç”Ÿ GCï¼ŒJVM ä¼šå¿½ç•¥æ ‡è¯†ä¸º Safe Region çŠ¶æ€çš„çº¿ç¨‹</li>
<li>å½“çº¿ç¨‹å³å°†ç¦»å¼€ Safe Region æ—¶ï¼Œä¼šæ£€æŸ¥ JVM æ˜¯å¦å·²ç»å®Œæˆ GCï¼Œå¦‚æœå®Œæˆäº†åˆ™ç»§ç»­è¿è¡Œï¼Œå¦åˆ™çº¿ç¨‹å¿…é¡»ç­‰å¾… GC å®Œæˆï¼Œæ”¶åˆ°å¯ä»¥å®‰å…¨ç¦»å¼€ SafeRegion çš„ä¿¡å·</li>
</ul>
<h3 id="åƒåœ¾åˆ¤æ–­">åƒåœ¾åˆ¤æ–­</h3>
<h4 id="åƒåœ¾ä»‹ç»">åƒåœ¾ä»‹ç»</h4>
<p>åƒåœ¾ï¼š<strong>å¦‚æœä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•çš„å¼•ç”¨æŒ‡å‘å®ƒäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ç°åœ¨å°±æ˜¯åƒåœ¾</strong></p>
<p>ä½œç”¨ï¼šé‡Šæ”¾æ²¡ç”¨çš„å¯¹è±¡ï¼Œæ¸…é™¤å†…å­˜é‡Œçš„è®°å½•ç¢ç‰‡ï¼Œç¢ç‰‡æ•´ç†å°†æ‰€å ç”¨çš„å †å†…å­˜ç§»åˆ°å †çš„ä¸€ç«¯ï¼Œä»¥ä¾¿ JVM å°†æ•´ç†å‡ºçš„å†…å­˜åˆ†é…ç»™æ–°çš„å¯¹è±¡</p>
<p>åƒåœ¾æ”¶é›†ä¸»è¦æ˜¯é’ˆå¯¹å †å’Œæ–¹æ³•åŒºè¿›è¡Œï¼Œç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆè¿™ä¸‰ä¸ªåŒºåŸŸå±äºçº¿ç¨‹ç§æœ‰çš„ï¼Œåªå­˜åœ¨äºçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œçº¿ç¨‹ç»“æŸä¹‹åå°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä¸éœ€è¦å¯¹è¿™ä¸‰ä¸ªåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶</p>
<p>åœ¨å †é‡Œå­˜æ”¾ç€å‡ ä¹æ‰€æœ‰çš„ Java å¯¹è±¡å®ä¾‹ï¼Œåœ¨ GC æ‰§è¡Œåƒåœ¾å›æ”¶ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åŒºåˆ†å‡ºå†…å­˜ä¸­å“ªäº›æ˜¯å­˜æ´»å¯¹è±¡ï¼Œå“ªäº›æ˜¯å·²ç»æ­»äº¡çš„å¯¹è±¡ã€‚åªæœ‰è¢«æ ‡è®°ä¸ºå·±ç»æ­»äº¡çš„å¯¹è±¡ï¼ŒGC æ‰ä¼šåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œé‡Šæ”¾æ‰å…¶æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä¸ºåƒåœ¾æ ‡è®°é˜¶æ®µï¼Œåˆ¤æ–­å¯¹è±¡å­˜æ´»ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š<strong>å¼•ç”¨è®¡æ•°ç®—æ³•</strong>å’Œ<strong>å¯è¾¾æ€§åˆ†æç®—æ³•</strong></p>
<h4 id="å¼•ç”¨è®¡æ•°æ³•">å¼•ç”¨è®¡æ•°æ³•</h4>
<p>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼ˆReference Countingï¼‰ï¼šå¯¹æ¯ä¸ªå¯¹è±¡ä¿å­˜ä¸€ä¸ªæ•´å‹çš„å¼•ç”¨è®¡æ•°å™¨å±æ€§ï¼Œç”¨äºè®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µã€‚å¯¹äºä¸€ä¸ªå¯¹è±¡ Aï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨äº† Aï¼Œåˆ™ A çš„å¼•ç”¨è®¡æ•°å™¨å°±åŠ  1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å°±å‡ 1ï¼›å½“å¯¹è±¡ A çš„å¼•ç”¨è®¡æ•°å™¨çš„å€¼ä¸º 0ï¼Œå³è¡¨ç¤ºå¯¹è±¡Aä¸å¯èƒ½å†è¢«ä½¿ç”¨ï¼Œå¯è¿›è¡Œå›æ”¶ï¼ˆJava æ²¡æœ‰é‡‡ç”¨ï¼‰</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å›æ”¶æ²¡æœ‰å»¶è¿Ÿæ€§ï¼Œæ— éœ€ç­‰åˆ°å†…å­˜ä¸å¤Ÿçš„æ—¶å€™æ‰å¼€å§‹å›æ”¶ï¼Œè¿è¡Œæ—¶æ ¹æ®å¯¹è±¡è®¡æ•°å™¨æ˜¯å¦ä¸º 0ï¼Œå¯ä»¥ç›´æ¥å›æ”¶</li>
<li>åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨æ— éœ€æŒ‚èµ·ï¼›å¦‚æœç”³è¯·å†…å­˜æ—¶ï¼Œå†…å­˜ä¸è¶³ï¼Œåˆ™ç«‹åˆ»æŠ¥ OOM é”™è¯¯</li>
<li>åŒºåŸŸæ€§ï¼Œæ›´æ–°å¯¹è±¡çš„è®¡æ•°å™¨æ—¶ï¼Œåªæ˜¯å½±å“åˆ°è¯¥å¯¹è±¡ï¼Œä¸ä¼šæ‰«æå…¨éƒ¨å¯¹è±¡</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>
<p>æ¯æ¬¡å¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œéƒ½éœ€è¦å»æ›´æ–°è®¡æ•°å™¨ï¼Œæœ‰ä¸€ç‚¹æ—¶é—´å¼€é”€</p>
</li>
<li>
<p>æµªè´¹ CPU èµ„æºï¼Œå³ä½¿å†…å­˜å¤Ÿç”¨ï¼Œä»ç„¶åœ¨è¿è¡Œæ—¶è¿›è¡Œè®¡æ•°å™¨çš„ç»Ÿè®¡ã€‚</p>
</li>
<li>
<p><strong>æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œä¼šå¼•å‘å†…å­˜æ³„éœ²</strong>ï¼ˆæœ€å¤§çš„ç¼ºç‚¹ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">Object</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Test</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();<span class="comment">// a = 1</span></span><br><span class="line">        <span class="type">Test</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();<span class="comment">// b = 1</span></span><br><span class="line">        a.instance = b;		<span class="comment">// b = 2</span></span><br><span class="line">        b.instance = a;		<span class="comment">// a = 2</span></span><br><span class="line">        a = <span class="literal">null</span>;			<span class="comment">// a = 1</span></span><br><span class="line">        b = <span class="literal">null</span>;			<span class="comment">// b = 1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8.png" alt="img"></p>
<h4 id="å¯è¾¾æ€§åˆ†æ">å¯è¾¾æ€§åˆ†æ</h4>
<h5 id="GC-Roots">GC Roots</h5>
<p>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼šä¹Ÿå¯ä»¥ç§°ä¸ºæ ¹æœç´¢ç®—æ³•ã€è¿½è¸ªæ€§åƒåœ¾æ”¶é›†</p>
<p>GC Roots å¯¹è±¡ï¼š</p>
<ul>
<li>è™šæ‹Ÿæœºæ ˆä¸­å±€éƒ¨å˜é‡è¡¨ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼šå„ä¸ªçº¿ç¨‹è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­ä½¿ç”¨åˆ°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</li>
<li>å †ä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li>
<li>æ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li>
<li>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆstring Tableï¼‰é‡Œçš„å¼•ç”¨</li>
<li>åŒæ­¥é” synchronized æŒæœ‰çš„å¯¹è±¡</li>
</ul>
<p><strong>GC Roots æ˜¯ä¸€ç»„æ´»è·ƒçš„å¼•ç”¨ï¼Œä¸æ˜¯å¯¹è±¡</strong>ï¼Œæ”¾åœ¨ GC Roots Set é›†åˆ</p>
<h5 id="å·¥ä½œåŸç†">å·¥ä½œåŸç†</h5>
<p>å¯è¾¾æ€§åˆ†æç®—æ³•ä»¥æ ¹å¯¹è±¡é›†åˆï¼ˆGCRootsï¼‰ä¸ºèµ·å§‹ç‚¹ï¼Œä»ä¸Šè‡³ä¸‹çš„æ–¹å¼æœç´¢è¢«æ ¹å¯¹è±¡é›†åˆæ‰€è¿æ¥çš„ç›®æ ‡å¯¹è±¡</p>
<p>åˆ†æå·¥ä½œå¿…é¡»åœ¨ä¸€ä¸ªä¿éšœ<strong>ä¸€è‡´æ€§çš„å¿«ç…§</strong>ä¸­è¿›è¡Œï¼Œå¦åˆ™ç»“æœçš„å‡†ç¡®æ€§æ— æ³•ä¿è¯ï¼Œè¿™ä¹Ÿæ˜¯å¯¼è‡´ GC è¿›è¡Œæ—¶å¿…é¡» Stop The World çš„ä¸€ä¸ªåŸå› </p>
<p>åŸºæœ¬åŸç†ï¼š</p>
<ul>
<li>
<p>å¯è¾¾æ€§åˆ†æç®—æ³•åï¼Œå†…å­˜ä¸­çš„å­˜æ´»å¯¹è±¡éƒ½ä¼šè¢«æ ¹å¯¹è±¡é›†åˆç›´æ¥æˆ–é—´æ¥è¿æ¥ç€ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾</p>
</li>
<li>
<p>å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œåˆ™æ˜¯ä¸å¯è¾¾çš„ï¼Œå°±æ„å‘³ç€è¯¥å¯¹è±¡å·±ç»æ­»äº¡ï¼Œå¯ä»¥æ ‡è®°ä¸ºåƒåœ¾å¯¹è±¡</p>
</li>
<li>
<p>åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­ï¼Œåªæœ‰èƒ½å¤Ÿè¢«æ ¹å¯¹è±¡é›†åˆç›´æ¥æˆ–è€…é—´æ¥è¿æ¥çš„å¯¹è±¡æ‰æ˜¯å­˜æ´»å¯¹è±¡</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95.png" alt="img"></p>
</li>
</ul>
<h5 id="ä¸‰è‰²æ ‡è®°">ä¸‰è‰²æ ‡è®°</h5>
<h6 id="æ ‡è®°ç®—æ³•">æ ‡è®°ç®—æ³•</h6>
<p>ä¸‰è‰²æ ‡è®°æ³•æŠŠéå†å¯¹è±¡å›¾è¿‡ç¨‹ä¸­é‡åˆ°çš„å¯¹è±¡ï¼Œæ ‡è®°æˆä»¥ä¸‹ä¸‰ç§é¢œè‰²ï¼š</p>
<ul>
<li>ç™½è‰²ï¼šå°šæœªè®¿é—®è¿‡</li>
<li>ç°è‰²ï¼šæœ¬å¯¹è±¡å·²è®¿é—®è¿‡ï¼Œä½†æ˜¯æœ¬å¯¹è±¡å¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡å°šæœªå…¨éƒ¨è®¿é—®</li>
<li>é»‘è‰²ï¼šæœ¬å¯¹è±¡å·²è®¿é—®è¿‡ï¼Œè€Œä¸”æœ¬å¯¹è±¡å¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡ä¹Ÿå…¨éƒ¨è®¿é—®å®Œæˆ</li>
</ul>
<p>å½“ Stop The World (STW) æ—¶ï¼Œå¯¹è±¡é—´çš„å¼•ç”¨æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œå¯ä»¥è½»æ¾å®Œæˆæ ‡è®°ï¼Œéå†è®¿é—®è¿‡ç¨‹ä¸ºï¼š</p>
<ol>
<li>åˆå§‹æ—¶ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½åœ¨ç™½è‰²é›†åˆ</li>
<li>å°† GC Roots ç›´æ¥å¼•ç”¨åˆ°çš„å¯¹è±¡æŒªåˆ°ç°è‰²é›†åˆ</li>
<li>ä»ç°è‰²é›†åˆä¸­è·å–å¯¹è±¡ï¼š
<ul>
<li>å°†æœ¬å¯¹è±¡å¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡å…¨éƒ¨æŒªåˆ°ç°è‰²é›†åˆä¸­</li>
<li>å°†æœ¬å¯¹è±¡æŒªåˆ°é»‘è‰²é›†åˆé‡Œé¢</li>
</ul>
</li>
<li>é‡å¤æ­¥éª¤ 3ï¼Œç›´è‡³ç°è‰²é›†åˆä¸ºç©ºæ—¶ç»“æŸ</li>
<li>ç»“æŸåï¼Œä»åœ¨ç™½è‰²é›†åˆçš„å¯¹è±¡å³ä¸º GC Roots ä¸å¯è¾¾ï¼Œå¯ä»¥è¿›è¡Œå›æ”¶</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%95%E8%BF%87%E7%A8%8B.gif" alt="img"></p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/12544c0ad5c1">https://www.jianshu.com/p/12544c0ad5c1</a></p>
<h6 id="å¹¶å‘æ ‡è®°">å¹¶å‘æ ‡è®°</h6>
<p>å¹¶å‘æ ‡è®°æ—¶ï¼Œå¯¹è±¡é—´çš„å¼•ç”¨å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå¤šæ ‡å’Œæ¼æ ‡çš„æƒ…å†µå°±æœ‰å¯èƒ½å‘ç”Ÿ</p>
<p><strong>å¤šæ ‡æƒ…å†µï¼š<strong>å½“ E å˜ä¸ºç°è‰²æˆ–é»‘è‰²æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ–­å¼€çš„ D å¯¹ E çš„å¼•ç”¨ï¼Œå¯¼è‡´è¿™éƒ¨åˆ†å¯¹è±¡ä»ä¼šè¢«æ ‡è®°ä¸ºå­˜æ´»ï¼Œæœ¬è½® GC ä¸ä¼šå›æ”¶è¿™éƒ¨åˆ†å†…å­˜ï¼Œè¿™éƒ¨åˆ†æœ¬åº”è¯¥å›æ”¶ä½†æ˜¯æ²¡æœ‰å›æ”¶åˆ°çš„å†…å­˜ï¼Œè¢«ç§°ä¹‹ä¸º</strong>æµ®åŠ¨åƒåœ¾</strong></p>
<ul>
<li>é’ˆå¯¹å¹¶å‘æ ‡è®°å¼€å§‹åçš„<strong>æ–°å¯¹è±¡</strong>ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ç›´æ¥å…¨éƒ¨å½“æˆé»‘è‰²ï¼Œä¹Ÿç®—æµ®åŠ¨åƒåœ¾</li>
<li>æµ®åŠ¨åƒåœ¾å¹¶ä¸ä¼šå½±å“åº”ç”¨ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œåªæ˜¯éœ€è¦ç­‰åˆ°ä¸‹ä¸€è½®åƒåœ¾å›æ”¶ä¸­æ‰è¢«æ¸…é™¤</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%95%E5%A4%9A%E6%A0%87%E6%83%85%E5%86%B5.png" alt="img"></p>
<p><strong>æ¼æ ‡æƒ…å†µï¼š</strong></p>
<ul>
<li>æ¡ä»¶ä¸€ï¼šç°è‰²å¯¹è±¡æ–­å¼€äº†å¯¹ä¸€ä¸ªç™½è‰²å¯¹è±¡çš„å¼•ç”¨ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰ï¼Œå³ç°è‰²å¯¹è±¡åŸæˆå‘˜å˜é‡çš„å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–</li>
<li>æ¡ä»¶äºŒï¼šå…¶ä»–çº¿ç¨‹ä¸­ä¿®æ”¹äº†é»‘è‰²å¯¹è±¡ï¼Œæ’å…¥äº†ä¸€æ¡æˆ–å¤šæ¡å¯¹è¯¥ç™½è‰²å¯¹è±¡çš„æ–°å¼•ç”¨</li>
<li>ç»“æœï¼šå¯¼è‡´è¯¥ç™½è‰²å¯¹è±¡å½“ä½œåƒåœ¾è¢« GCï¼Œå½±å“åˆ°äº†ç¨‹åºçš„æ­£ç¡®æ€§</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%95%E6%BC%8F%E6%A0%87%E6%83%85%E5%86%B5.png" alt="img"></p>
<p>ä»£ç è§’åº¦è§£é‡Šæ¼æ ‡ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object G <span class="operator">=</span> objE.fieldG<span class="comment">; // è¯»</span></span><br><span class="line">objE.fieldG <span class="operator">=</span> null<span class="comment">;  	// å†™</span></span><br><span class="line">objD.fieldG <span class="operator">=</span> G<span class="comment">;     	// å†™</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†è§£å†³é—®é¢˜ï¼Œå¯ä»¥æ“ä½œä¸Šé¢ä¸‰æ­¥ï¼Œ<strong>å°†å¯¹è±¡ G è®°å½•èµ·æ¥ï¼Œç„¶åä½œä¸ºç°è‰²å¯¹è±¡å†è¿›è¡Œéå†</strong>ï¼Œæ¯”å¦‚æ”¾åˆ°ä¸€ä¸ªç‰¹å®šçš„é›†åˆï¼Œç­‰åˆå§‹çš„ GC Roots éå†å®Œï¼ˆå¹¶å‘æ ‡è®°ï¼‰ï¼Œå†éå†è¯¥é›†åˆï¼ˆé‡æ–°æ ‡è®°ï¼‰</p>
<blockquote>
<p>æ‰€ä»¥<strong>é‡æ–°æ ‡è®°éœ€è¦ STW</strong>ï¼Œåº”ç”¨ç¨‹åºä¸€ç›´åœ¨è¿è¡Œï¼Œè¯¥é›†åˆå¯èƒ½ä¼šä¸€ç›´å¢åŠ æ–°çš„å¯¹è±¡ï¼Œå¯¼è‡´æ°¸è¿œéƒ½è¿è¡Œä¸å®Œ</p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼šæ·»åŠ è¯»å†™å±éšœï¼Œè¯»å±éšœæ‹¦æˆªç¬¬ä¸€æ­¥ï¼Œå†™å±éšœæ‹¦æˆªç¬¬äºŒä¸‰æ­¥ï¼Œåœ¨è¯»å†™å‰åè¿›è¡Œä¸€äº›åç½®å¤„ç†ï¼š</p>
<ul>
<li>
<p><strong>å†™å±éšœ + å¢é‡æ›´æ–°</strong>ï¼šé»‘è‰²å¯¹è±¡æ–°å¢å¼•ç”¨ï¼Œä¼šå°†é»‘è‰²å¯¹è±¡å˜æˆç°è‰²å¯¹è±¡ï¼Œæœ€åå¯¹è¯¥èŠ‚ç‚¹é‡æ–°æ‰«æ</p>
<p>å¢é‡æ›´æ–° (Incremental Update) ç ´åäº†æ¡ä»¶äºŒï¼Œä»è€Œä¿è¯äº†ä¸ä¼šæ¼æ ‡</p>
<p>ç¼ºç‚¹ï¼šå¯¹é»‘è‰²å˜ç°çš„å¯¹è±¡é‡æ–°æ‰«ææ‰€æœ‰å¼•ç”¨ï¼Œæ¯”è¾ƒè€—è´¹æ—¶é—´</p>
</li>
<li>
<p><strong>å†™å±éšœ (Store Barrier) + SATB</strong>ï¼šå½“åŸæ¥æˆå‘˜å˜é‡çš„å¼•ç”¨å‘ç”Ÿå˜åŒ–ä¹‹å‰ï¼Œè®°å½•ä¸‹åŸæ¥çš„å¼•ç”¨å¯¹è±¡</p>
<p>ä¿ç•™ GC å¼€å§‹æ—¶çš„å¯¹è±¡å›¾ï¼Œå³åŸå§‹å¿«ç…§ SATBï¼Œå½“ GC Roots ç¡®å®šåï¼Œå¯¹è±¡å›¾å°±å·²ç»ç¡®å®šï¼Œé‚£åç»­çš„æ ‡è®°ä¹Ÿåº”è¯¥æ˜¯æŒ‰ç…§è¿™ä¸ªæ—¶åˆ»çš„å¯¹è±¡å›¾èµ°ï¼Œå¦‚æœæœŸé—´å¯¹ç™½è‰²å¯¹è±¡æœ‰äº†æ–°çš„å¼•ç”¨ä¼šè®°å½•ä¸‹æ¥ï¼Œå¹¶ä¸”å°†ç™½è‰²å¯¹è±¡å˜ç°ï¼ˆè¯´æ˜å¯è¾¾äº†ï¼Œå¹¶ä¸”åŸå§‹å¿«ç…§ä¸­æœ¬æ¥å°±åº”è¯¥æ˜¯ç°è‰²å¯¹è±¡ï¼‰ï¼Œæœ€åé‡æ–°æ‰«æè¯¥å¯¹è±¡çš„å¼•ç”¨å…³ç³»</p>
<p>SATB (Snapshot At The Beginning) ç ´åäº†æ¡ä»¶ä¸€ï¼Œä»è€Œä¿è¯äº†ä¸ä¼šæ¼æ ‡</p>
</li>
<li>
<p><strong>è¯»å±éšœ (Load Barrier)</strong>ï¼šç ´åæ¡ä»¶äºŒï¼Œé»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡çš„å‰ææ˜¯è·å–åˆ°è¯¥å¯¹è±¡ï¼Œæ­¤æ—¶è¯»å±éšœå‘æŒ¥ä½œç”¨</p>
</li>
</ul>
<p>ä»¥ Java HotSpot VM ä¸ºä¾‹ï¼Œå…¶å¹¶å‘æ ‡è®°æ—¶å¯¹æ¼æ ‡çš„å¤„ç†æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>CMSï¼šå†™å±éšœ + å¢é‡æ›´æ–°</li>
<li>G1ï¼šå†™å±éšœ + SATB</li>
<li>ZGCï¼šè¯»å±éšœ</li>
</ul>
<h4 id="finalization">finalization</h4>
<p>Java è¯­è¨€æä¾›äº†å¯¹è±¡ç»ˆæ­¢ï¼ˆfinalizationï¼‰æœºåˆ¶æ¥å…è®¸å¼€å‘äººå‘˜æä¾›å¯¹è±¡è¢«é”€æ¯ä¹‹å‰çš„è‡ªå®šä¹‰å¤„ç†é€»è¾‘</p>
<p>åƒåœ¾å›æ”¶æ­¤å¯¹è±¡ä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•ï¼Œfinalize() æ–¹æ³•å…è®¸åœ¨å­ç±»ä¸­è¢«é‡å†™ï¼Œç”¨äºåœ¨å¯¹è±¡è¢«å›æ”¶æ—¶è¿›è¡Œåç½®å¤„ç†ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›èµ„æºé‡Šæ”¾å’Œæ¸…ç†ï¼Œæ¯”å¦‚å…³é—­æ–‡ä»¶ã€å¥—æ¥å­—å’Œæ•°æ®åº“è¿æ¥ç­‰</p>
<p>ç”Ÿå­˜ OR æ­»äº¡ï¼šå¦‚æœä»æ‰€æœ‰çš„æ ¹èŠ‚ç‚¹éƒ½æ— æ³•è®¿é—®åˆ°æŸä¸ªå¯¹è±¡ï¼Œè¯´æ˜å¯¹è±¡å·±ç»ä¸å†ä½¿ç”¨ï¼Œæ­¤å¯¹è±¡éœ€è¦è¢«å›æ”¶ã€‚ä½†äº‹å®ä¸Šè¿™æ—¶å€™å®ƒä»¬æš‚æ—¶å¤„äºç¼“åˆ‘é˜¶æ®µã€‚<strong>ä¸€ä¸ªæ— æ³•è§¦åŠçš„å¯¹è±¡æœ‰å¯èƒ½åœ¨æŸä¸ªæ¡ä»¶ä¸‹å¤æ´»è‡ªå·±</strong>ï¼Œæ‰€ä»¥è™šæ‹Ÿæœºä¸­çš„å¯¹è±¡å¯èƒ½çš„ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li>å¯è§¦åŠçš„ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯ä»¥åˆ°è¾¾è¿™ä¸ªå¯¹è±¡</li>
<li>å¯å¤æ´»çš„ï¼šå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«é‡Šæ”¾ï¼Œä½†æ˜¯å¯¹è±¡æœ‰å¯èƒ½åœ¨ finalize() ä¸­å¤æ´»</li>
<li>ä¸å¯è§¦åŠçš„ï¼šå¯¹è±¡çš„ finalize() è¢«è°ƒç”¨å¹¶ä¸”æ²¡æœ‰å¤æ´»ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥ä¸å¯è§¦åŠçŠ¶æ€ï¼Œä¸å¯è§¦åŠçš„å¯¹è±¡ä¸å¯èƒ½è¢«å¤æ´»ï¼Œå› ä¸º <strong>finalize() åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</strong>ï¼Œç­‰åˆ°è¿™ä¸ªå¯¹è±¡å†è¢«æ ‡è®°ä¸ºå¯å›æ”¶æ—¶å°±å¿…é¡»å›æ”¶</li>
</ul>
<p>æ°¸è¿œä¸è¦ä¸»åŠ¨è°ƒç”¨æŸä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•ï¼Œåº”è¯¥äº¤ç»™åƒåœ¾å›æ”¶æœºåˆ¶è°ƒç”¨ï¼ŒåŸå› ï¼š</p>
<ul>
<li>finalize() æ—¶å¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡å¤æ´»</li>
<li>finalize() æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´æ˜¯æ²¡æœ‰ä¿éšœçš„ï¼Œå®Œå…¨ç”± GC çº¿ç¨‹å†³å®šï¼Œæç«¯æƒ…å†µä¸‹ï¼Œè‹¥ä¸å‘ç”Ÿ GCï¼Œåˆ™ finalize() æ–¹æ³•å°†æ²¡æœ‰æ‰§è¡Œæœºä¼šï¼Œå› ä¸ºä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œå³ä½¿ä¸»åŠ¨è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šå› æ­¤å°±ç›´æ¥è¿›è¡Œå›æ”¶</li>
<li>ä¸€ä¸ªç³Ÿç³•çš„ finalize() ä¼šä¸¥é‡å½±å“ GC çš„æ€§èƒ½</li>
</ul>
<h4 id="å¼•ç”¨åˆ†æ">å¼•ç”¨åˆ†æ</h4>
<p>æ— è®ºæ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°ç®—æ³•åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡ï¼Œè¿˜æ˜¯é€šè¿‡å¯è¾¾æ€§åˆ†æç®—æ³•åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¾¾ï¼Œåˆ¤å®šå¯¹è±¡æ˜¯å¦å¯è¢«å›æ”¶éƒ½ä¸å¼•ç”¨æœ‰å…³ï¼ŒJava æä¾›äº†å››ç§å¼ºåº¦ä¸åŒçš„å¼•ç”¨ç±»å‹</p>
<ol>
<li>
<p>å¼ºå¼•ç”¨ï¼šè¢«å¼ºå¼•ç”¨å…³è”çš„å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ï¼Œåªæœ‰æ‰€æœ‰ GCRoots éƒ½ä¸é€šè¿‡å¼ºå¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡ï¼Œæ‰èƒ½è¢«åƒåœ¾å›æ”¶</p>
<ul>
<li>å¼ºå¼•ç”¨å¯ä»¥ç›´æ¥è®¿é—®ç›®æ ‡å¯¹è±¡</li>
<li>è™šæ‹Ÿæœºå®æ„¿æŠ›å‡º OOM å¼‚å¸¸ï¼Œä¹Ÿä¸ä¼šå›æ”¶å¼ºå¼•ç”¨æ‰€æŒ‡å‘å¯¹è±¡</li>
<li>å¼ºå¼•ç”¨å¯èƒ½å¯¼è‡´<strong>å†…å­˜æ³„æ¼</strong></li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();<span class="regexp">//</span>ä½¿ç”¨ <span class="keyword">new</span> ä¸€ä¸ªæ–°å¯¹è±¡çš„æ–¹å¼æ¥åˆ›å»ºå¼ºå¼•ç”¨</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰ï¼šè¢«è½¯å¼•ç”¨å…³è”çš„å¯¹è±¡åªæœ‰åœ¨å†…å­˜ä¸å¤Ÿçš„æƒ…å†µä¸‹æ‰ä¼šè¢«å›æ”¶</p>
<ul>
<li>**ä»…ï¼ˆå¯èƒ½æœ‰å¼ºå¼•ç”¨ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥è¢«å¤šä¸ªå¼•ç”¨ï¼‰**æœ‰è½¯å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶åï¼Œå†…å­˜ä»ä¸è¶³æ—¶ä¼šå†æ¬¡å‡ºå‘åƒåœ¾å›æ”¶ï¼Œå›æ”¶è½¯å¼•ç”¨å¯¹è±¡</li>
<li>é…åˆ<strong>å¼•ç”¨é˜Ÿåˆ—æ¥é‡Šæ”¾è½¯å¼•ç”¨è‡ªèº«</strong>ï¼Œåœ¨æ„é€ è½¯å¼•ç”¨æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼Œå½“è½¯å¼•ç”¨å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œå°±ä¼šåŠ å…¥æŒ‡å®šçš„å¼•ç”¨é˜Ÿåˆ—ï¼Œé€šè¿‡è¿™ä¸ªé˜Ÿåˆ—å¯ä»¥è·Ÿè¸ªå¯¹è±¡çš„å›æ”¶æƒ…å†µ</li>
<li>è½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ï¼Œæ¯”å¦‚é«˜é€Ÿç¼“å­˜å°±æœ‰ç”¨åˆ°è½¯å¼•ç”¨ï¼›å¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ä¸ä¼šè€—å°½å†…å­˜</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">SoftReference&lt;<span class="built_in">Object</span>&gt; sf = <span class="keyword">new</span> SoftReference&lt;<span class="built_in">Object</span>&gt;(obj);</span><br><span class="line">obj = <span class="keyword">null</span>;  <span class="comment">// ä½¿å¯¹è±¡åªè¢«è½¯å¼•ç”¨å…³è”</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ï¼šè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ä¸€å®šä¼šè¢«å›æ”¶ï¼Œåªèƒ½å­˜æ´»åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰</p>
<ul>
<li>ä»…æœ‰å¼±å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶å¼±å¼•ç”¨å¯¹è±¡</li>
<li>é…åˆå¼•ç”¨é˜Ÿåˆ—æ¥é‡Šæ”¾å¼±å¼•ç”¨è‡ªèº«</li>
<li>WeakHashMap ç”¨æ¥å­˜å‚¨å›¾ç‰‡ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸è¶³çš„æ—¶å€™åŠæ—¶å›æ”¶ï¼Œé¿å…äº† OOM</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object obj <span class="operator">=</span> new Object()<span class="comment">;</span></span><br><span class="line">WeakReference&lt;Object&gt; wf <span class="operator">=</span> new WeakReference&lt;Object&gt;(obj)<span class="comment">;</span></span><br><span class="line"><span class="attribute">obj</span> <span class="operator">=</span> null<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰ï¼šä¹Ÿç§°ä¸ºå¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹ä¸­æœ€å¼±çš„ä¸€ä¸ª</p>
<ul>
<li>ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´é€ æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨å¾—åˆ°ä¸€ä¸ªå¯¹è±¡</li>
<li>ä¸ºå¯¹è±¡è®¾ç½®è™šå¼•ç”¨çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨äºè·Ÿè¸ªåƒåœ¾å›æ”¶è¿‡ç¨‹ï¼Œèƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥</li>
<li>å¿…é¡»é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œä¸»è¦é…åˆ ByteBuffer ä½¿ç”¨ï¼Œè¢«å¼•ç”¨å¯¹è±¡å›æ”¶æ—¶ä¼šå°†è™šå¼•ç”¨å…¥é˜Ÿï¼Œç”± Reference Handler çº¿ç¨‹è°ƒç”¨è™šå¼•ç”¨ç›¸å…³æ–¹æ³•é‡Šæ”¾ç›´æ¥å†…å­˜</li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">PhantomReference&lt;<span class="built_in">Object</span>&gt; pf = <span class="keyword">new</span> PhantomReference&lt;<span class="built_in">Object</span>&gt;(obj, <span class="literal">null</span>);</span><br><span class="line">obj = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç»ˆç»“å™¨å¼•ç”¨ï¼ˆfinalizationï¼‰</p>
</li>
</ol>
<h4 id="æ— ç”¨å±æ€§">æ— ç”¨å±æ€§</h4>
<h5 id="æ— ç”¨ç±»">æ— ç”¨ç±»</h5>
<p>æ–¹æ³•åŒºä¸»è¦å›æ”¶çš„æ˜¯æ— ç”¨çš„ç±»</p>
<p>åˆ¤å®šä¸€ä¸ªç±»æ˜¯å¦æ˜¯æ— ç”¨çš„ç±»ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ 3 ä¸ªæ¡ä»¶ï¼š</p>
<ul>
<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹</li>
<li>åŠ è½½è¯¥ç±»çš„ <code>ClassLoader</code> å·²ç»è¢«å›æ”¶</li>
<li>è¯¥ç±»å¯¹åº”çš„ <code>java.lang.Class</code> å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•</li>
</ul>
<p>è™šæ‹Ÿæœºå¯ä»¥å¯¹æ»¡è¶³ä¸Šè¿° 3 ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„<strong>ä»…ä»…æ˜¯å¯ä»¥</strong>ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ä¸ä½¿ç”¨äº†å°±ä¼šå¿…ç„¶è¢«å›æ”¶</p>
<h5 id="åºŸå¼ƒå¸¸é‡">åºŸå¼ƒå¸¸é‡</h5>
<p>åœ¨å¸¸é‡æ± ä¸­å­˜åœ¨å­—ç¬¦ä¸² â€œabcâ€ï¼Œå¦‚æœå½“å‰æ²¡æœ‰ä»»ä½• String å¯¹è±¡å¼•ç”¨è¯¥å¸¸é‡ï¼Œè¯´æ˜å¸¸é‡ â€œabcâ€ æ˜¯åºŸå¼ƒå¸¸é‡ï¼Œå¦‚æœè¿™æ—¶å‘ç”Ÿå†…å­˜å›æ”¶çš„è¯<strong>è€Œä¸”æœ‰å¿…è¦çš„è¯</strong>ï¼ˆå†…å­˜ä¸å¤Ÿç”¨ï¼‰ï¼Œâ€œabcâ€ å°±ä¼šè¢«ç³»ç»Ÿæ¸…ç†å‡ºå¸¸é‡æ± </p>
<h5 id="é™æ€å˜é‡-2">é™æ€å˜é‡</h5>
<p>ç±»åŠ è½½æ—¶ï¼ˆç¬¬ä¸€æ¬¡è®¿é—®ï¼‰ï¼Œè¿™ä¸ªç±»ä¸­æ‰€æœ‰é™æ€æˆå‘˜å°±ä¼šè¢«åŠ è½½åˆ°é™æ€å˜é‡åŒºï¼Œè¯¥åŒºåŸŸçš„æˆå‘˜ä¸€æ—¦åˆ›å»ºï¼Œç›´åˆ°ç¨‹åºé€€å‡ºæ‰ä¼šè¢«å›æ”¶</p>
<p>å¦‚æœæ˜¯é™æ€å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œé™æ€å˜é‡åŒºåªå­˜å‚¨ä¸€ä»½å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼ŒçœŸæ­£çš„å¯¹è±¡åœ¨å †å†…ï¼Œå¦‚æœè¦å›æ”¶è¯¥å¯¹è±¡å¯ä»¥è®¾ç½®å¼•ç”¨ä¸º null</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhengzhb/article/details/7331354">https://blog.csdn.net/zhengzhb/article/details/7331354</a></p>
<h3 id="å›æ”¶ç®—æ³•">å›æ”¶ç®—æ³•</h3>
<h4 id="å¤åˆ¶ç®—æ³•">å¤åˆ¶ç®—æ³•</h4>
<p>å¤åˆ¶ç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯ï¼Œ<strong>å°†åŸæœ‰çš„å†…å­˜ç©ºé—´ä¸€åˆ†ä¸ºäºŒï¼Œæ¯æ¬¡åªç”¨å…¶ä¸­çš„ä¸€å—</strong>ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œå°†æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå†…å­˜ç©ºé—´ä¸­ï¼Œç„¶åå°†è¯¥å†…å­˜ç©ºé—´æ¸…ç†ï¼Œäº¤æ¢ä¸¤ä¸ªå†…å­˜çš„è§’è‰²ï¼Œå®Œæˆåƒåœ¾çš„å›æ”¶</p>
<p>åº”ç”¨åœºæ™¯ï¼šå¦‚æœå†…å­˜ä¸­çš„åƒåœ¾å¯¹è±¡è¾ƒå¤šï¼Œéœ€è¦å¤åˆ¶çš„å¯¹è±¡å°±è¾ƒå°‘ï¼Œè¿™ç§æƒ…å†µä¸‹é€‚åˆä½¿ç”¨è¯¥æ–¹å¼å¹¶ä¸”æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œåä¹‹åˆ™ä¸é€‚åˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95.png" alt="img"></p>
<p>ç®—æ³•ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ²¡æœ‰æ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹ï¼Œå®ç°ç®€å•ï¼Œè¿è¡Œé€Ÿåº¦å¿«</li>
<li>å¤åˆ¶è¿‡å»ä»¥åä¿è¯ç©ºé—´çš„è¿ç»­æ€§ï¼Œä¸ä¼šå‡ºç°ç¢ç‰‡é—®é¢˜</li>
</ul>
<p>ç®—æ³•ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸»è¦ä¸è¶³æ˜¯<strong>åªä½¿ç”¨äº†å†…å­˜çš„ä¸€åŠ</strong></li>
<li>å¯¹äº G1 è¿™ç§åˆ†æ‹†æˆä¸ºå¤§é‡ region çš„ GCï¼Œå¤åˆ¶è€Œä¸æ˜¯ç§»åŠ¨ï¼Œæ„å‘³ç€ GC éœ€è¦ç»´æŠ¤ region ä¹‹é—´å¯¹è±¡å¼•ç”¨å…³ç³»ï¼Œä¸ç®¡æ˜¯å†…å­˜å ç”¨æˆ–è€…æ—¶é—´å¼€é”€éƒ½ä¸å°</li>
</ul>
<p>ç°åœ¨çš„å•†ä¸šè™šæ‹Ÿæœºéƒ½é‡‡ç”¨è¿™ç§æ”¶é›†ç®—æ³•<strong>å›æ”¶æ–°ç”Ÿä»£</strong>ï¼Œå› ä¸ºæ–°ç”Ÿä»£ GC é¢‘ç¹å¹¶ä¸”å¯¹è±¡çš„å­˜æ´»ç‡ä¸é«˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œè€Œæ˜¯ä¸€å—è¾ƒå¤§çš„ Eden ç©ºé—´å’Œä¸¤å—è¾ƒå°çš„ Survivor ç©ºé—´</p>
<h4 id="æ ‡è®°æ¸…é™¤">æ ‡è®°æ¸…é™¤</h4>
<p>æ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œæ˜¯å°†åƒåœ¾å›æ”¶åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯<strong>æ ‡è®°å’Œæ¸…é™¤</strong></p>
<ul>
<li><strong>æ ‡è®°</strong>ï¼šCollector ä»å¼•ç”¨æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œæ ‡è®°æ‰€æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯åœ¨å¯¹è±¡çš„ Header ä¸­è®°å½•ä¸ºå¯è¾¾å¯¹è±¡ï¼Œ<strong>æ ‡è®°çš„æ˜¯å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸æ˜¯åƒåœ¾</strong></li>
<li><strong>æ¸…é™¤</strong>ï¼šCollector å¯¹å †å†…å­˜ä»å¤´åˆ°å°¾è¿›è¡Œçº¿æ€§çš„éå†ï¼Œå¦‚æœå‘ç°æŸä¸ªå¯¹è±¡åœ¨å…¶ Header ä¸­æ²¡æœ‰æ ‡è®°ä¸ºå¯è¾¾å¯¹è±¡ï¼Œåˆ™å°†å…¶å›æ”¶ï¼ŒæŠŠåˆ†å—è¿æ¥åˆ°<strong>ç©ºé—²åˆ—è¡¨</strong>çš„å•å‘é“¾è¡¨ï¼Œåˆ¤æ–­å›æ”¶åçš„åˆ†å—ä¸å‰ä¸€ä¸ªç©ºé—²åˆ†å—æ˜¯å¦è¿ç»­ï¼Œè‹¥è¿ç»­ä¼šåˆå¹¶è¿™ä¸¤ä¸ªåˆ†å—ï¼Œä¹‹åè¿›è¡Œåˆ†é…æ—¶åªéœ€è¦éå†è¿™ä¸ªç©ºé—²åˆ—è¡¨ï¼Œå°±å¯ä»¥æ‰¾åˆ°åˆ†å—</li>
<li><strong>åˆ†é…é˜¶æ®µ</strong>ï¼šç¨‹åºä¼šæœç´¢ç©ºé—²é“¾è¡¨å¯»æ‰¾ç©ºé—´å¤§äºç­‰äºæ–°å¯¹è±¡å¤§å° size çš„å— blockï¼Œå¦‚æœæ‰¾åˆ°çš„å—ç­‰äº sizeï¼Œä¼šç›´æ¥è¿”å›è¿™ä¸ªåˆ†å—ï¼›å¦‚æœæ‰¾åˆ°çš„å—å¤§äº sizeï¼Œä¼šå°†å—åˆ†å‰²æˆå¤§å°ä¸º size ä¸ block - size çš„ä¸¤éƒ¨åˆ†ï¼Œè¿”å›å¤§å°ä¸º size çš„åˆ†å—ï¼Œå¹¶æŠŠå¤§å°ä¸º block - size çš„å—è¿”å›ç»™ç©ºé—²åˆ—è¡¨</li>
</ul>
<p>ç®—æ³•ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹æ•ˆç‡éƒ½ä¸é«˜</li>
<li>ä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´æ— æ³•ç»™å¤§å¯¹è±¡åˆ†é…å†…å­˜ï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªç©ºé—²é“¾è¡¨</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95.png" alt="img"></p>
<h4 id="æ ‡è®°æ•´ç†">æ ‡è®°æ•´ç†</h4>
<p>æ ‡è®°æ•´ç†ï¼ˆå‹ç¼©ï¼‰ç®—æ³•æ˜¯åœ¨æ ‡è®°æ¸…é™¤ç®—æ³•çš„åŸºç¡€ä¹‹ä¸Šï¼Œåšäº†ä¼˜åŒ–æ”¹è¿›çš„ç®—æ³•</p>
<p>æ ‡è®°é˜¶æ®µå’Œæ ‡è®°æ¸…é™¤ç®—æ³•ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯¹å¯¹è±¡çš„å¼•ç”¨è¿›è¡Œæ ‡è®°ï¼Œåœ¨æ¸…ç†é˜¶æ®µï¼Œå¹¶ä¸æ˜¯ç®€å•çš„ç›´æ¥æ¸…ç†å¯å›æ”¶å¯¹è±¡ï¼Œè€Œæ˜¯<strong>å°†å­˜æ´»å¯¹è±¡éƒ½å‘å†…å­˜å¦ä¸€ç«¯ç§»åŠ¨</strong>ï¼Œç„¶åæ¸…ç†è¾¹ç•Œä»¥å¤–çš„åƒåœ¾ï¼Œä»è€Œ<strong>è§£å†³äº†ç¢ç‰‡åŒ–</strong>çš„é—®é¢˜</p>
<p>ä¼˜ç‚¹ï¼šä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡</p>
<p>ç¼ºç‚¹ï¼šéœ€è¦ç§»åŠ¨å¤§é‡å¯¹è±¡ï¼Œå¤„ç†æ•ˆç‡æ¯”è¾ƒä½</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%A0%87%E8%AE%B0%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95.png" alt="img"></p>
<table>
<thead>
<tr>
<th></th>
<th>Mark-Sweep</th>
<th>Mark-Compact</th>
<th>Copying</th>
</tr>
</thead>
<tbody>
<tr>
<td>é€Ÿåº¦</td>
<td>ä¸­ç­‰</td>
<td>æœ€æ…¢</td>
<td>æœ€å¿«</td>
</tr>
<tr>
<td>ç©ºé—´å¼€é”€</td>
<td>å°‘ï¼ˆä½†ä¼šå †ç§¯ç¢ç‰‡ï¼‰</td>
<td>å°‘ï¼ˆä¸å †ç§¯ç¢ç‰‡ï¼‰</td>
<td>é€šå¸¸éœ€è¦æ´»å¯¹è±¡çš„ 2 å€å¤§å°ï¼ˆä¸å †ç§¯ç¢ç‰‡ï¼‰</td>
</tr>
<tr>
<td>ç§»åŠ¨å¯¹è±¡</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
</tbody>
</table>
<h3 id="åƒåœ¾å›æ”¶å™¨">åƒåœ¾å›æ”¶å™¨</h3>
<h4 id="æ¦‚è¿°-12">æ¦‚è¿°</h4>
<p>åƒåœ¾æ”¶é›†å™¨åˆ†ç±»ï¼š</p>
<ul>
<li>æŒ‰çº¿ç¨‹æ•°åˆ†ï¼ˆåƒåœ¾å›æ”¶çº¿ç¨‹æ•°ï¼‰ï¼Œå¯ä»¥åˆ†ä¸ºä¸²è¡Œåƒåœ¾å›æ”¶å™¨å’Œå¹¶è¡Œåƒåœ¾å›æ”¶å™¨
<ul>
<li>é™¤äº† CMS å’Œ G1 ä¹‹å¤–ï¼Œå…¶å®ƒåƒåœ¾æ”¶é›†å™¨éƒ½æ˜¯ä»¥ä¸²è¡Œçš„æ–¹å¼æ‰§è¡Œ</li>
</ul>
</li>
<li>æŒ‰ç…§å·¥ä½œæ¨¡å¼åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºå¹¶å‘å¼åƒåœ¾å›æ”¶å™¨å’Œç‹¬å å¼åƒåœ¾å›æ”¶å™¨
<ul>
<li>å¹¶å‘å¼åƒåœ¾å›æ”¶å™¨ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹äº¤æ›¿å·¥ä½œï¼Œä»¥å°½å¯èƒ½å‡å°‘åº”ç”¨ç¨‹åºçš„åœé¡¿æ—¶é—´</li>
<li>ç‹¬å å¼åƒåœ¾å›æ”¶å™¨ï¼ˆStop the worldï¼‰ä¸€æ—¦è¿è¡Œï¼Œå°±åœæ­¢åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹ï¼Œç›´åˆ°åƒåœ¾å›æ”¶è¿‡ç¨‹å®Œå…¨ç»“æŸ</li>
</ul>
</li>
<li>æŒ‰ç¢ç‰‡å¤„ç†æ–¹å¼åˆ†ï¼Œå¯åˆ†ä¸ºå‹ç¼©å¼åƒåœ¾å›æ”¶å™¨å’Œéå‹ç¼©å¼åƒåœ¾å›æ”¶å™¨
<ul>
<li>å‹ç¼©å¼åƒåœ¾å›æ”¶å™¨åœ¨å›æ”¶å®Œæˆåè¿›è¡Œå‹ç¼©æ•´ç†ï¼Œæ¶ˆé™¤å›æ”¶åçš„ç¢ç‰‡ï¼Œå†åˆ†é…å¯¹è±¡ç©ºé—´ä½¿ç”¨æŒ‡é’ˆç¢°æ’</li>
<li>éå‹ç¼©å¼çš„åƒåœ¾å›æ”¶å™¨ä¸è¿›è¡Œè¿™æ­¥æ“ä½œï¼Œå†åˆ†é…å¯¹è±¡ç©ºé—´ä½¿ç”¨ç©ºé—²åˆ—è¡¨</li>
</ul>
</li>
<li>æŒ‰å·¥ä½œçš„å†…å­˜åŒºé—´åˆ†ï¼Œåˆå¯åˆ†ä¸ºå¹´è½»ä»£åƒåœ¾å›æ”¶å™¨å’Œè€å¹´ä»£åƒåœ¾å›æ”¶å™¨</li>
</ul>
<p>GC æ€§èƒ½æŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>ååé‡</strong>ï¼šç¨‹åºçš„è¿è¡Œæ—¶é—´å æ€»è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹ï¼ˆæ€»è¿è¡Œæ—¶é—´ = ç¨‹åºçš„è¿è¡Œæ—¶é—´ + å†…å­˜å›æ”¶çš„æ—¶é—´ï¼‰</li>
<li>åƒåœ¾æ”¶é›†å¼€é”€ï¼šååé‡çš„è¡¥æ•°ï¼Œåƒåœ¾æ”¶é›†æ‰€ç”¨æ—¶é—´ä¸æ€»è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹</li>
<li>æš‚åœæ—¶é—´ï¼šæ‰§è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œç¨‹åºçš„å·¥ä½œçº¿ç¨‹è¢«æš‚åœçš„æ—¶é—´</li>
<li>æ”¶é›†é¢‘ç‡ï¼šç›¸å¯¹äºåº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼Œæ”¶é›†æ“ä½œå‘ç”Ÿçš„é¢‘ç‡</li>
<li>å†…å­˜å ç”¨ï¼šJava å †åŒºæ‰€å çš„å†…å­˜å¤§å°</li>
<li>å¿«é€Ÿï¼šä¸€ä¸ªå¯¹è±¡ä»è¯ç”Ÿåˆ°è¢«å›æ”¶æ‰€ç»å†çš„æ—¶é—´</li>
</ul>
<p><strong>åƒåœ¾æ”¶é›†å™¨çš„ç»„åˆå…³ç³»</strong>ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E5%85%B3%E7%B3%BB%E5%9B%BE.png" alt="img"></p>
<p>æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼šSerialã€ParNewã€Parallel Scavenge</p>
<p>è€å¹´ä»£æ”¶é›†å™¨ï¼šSerial oldã€Parallel oldã€CMS</p>
<p>æ•´å †æ”¶é›†å™¨ï¼šG1</p>
<ul>
<li>çº¢è‰²è™šçº¿åœ¨ JDK9 ç§»é™¤ã€ç»¿è‰²è™šçº¿åœ¨ JDK14 å¼ƒç”¨è¯¥ç»„åˆã€é’è‰²è™šçº¿åœ¨ JDK14 åˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨</li>
</ul>
<p>æŸ¥çœ‹é»˜è®¤çš„åƒåœ¾æ”¶å›æ”¶å™¨ï¼š</p>
<ul>
<li><code>-XX:+PrintcommandLineFlags</code>ï¼šæŸ¥çœ‹å‘½ä»¤è¡Œç›¸å…³å‚æ•°ï¼ˆåŒ…å«ä½¿ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼‰</li>
<li>ä½¿ç”¨å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼šjinfo -flag ç›¸å…³åƒåœ¾å›æ”¶å™¨å‚æ•°  è¿›ç¨‹ ID</li>
</ul>
<h4 id="Serial">Serial</h4>
<p>Serialï¼šä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ï¼Œä½œç”¨äºæ–°ç”Ÿä»£ï¼Œæ˜¯æŒ‡ä½¿ç”¨å•çº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œé‡‡ç”¨<strong>å¤åˆ¶ç®—æ³•</strong>ï¼Œæ–°ç”Ÿä»£åŸºæœ¬éƒ½æ˜¯å¤åˆ¶ç®—æ³•</p>
<p><strong>STWï¼ˆStop-The-Worldï¼‰</strong>ï¼šåƒåœ¾å›æ”¶æ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Œå¹¶ä¸” Java åº”ç”¨ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½è¦æš‚åœï¼Œç­‰å¾…åƒåœ¾å›æ”¶çš„å®Œæˆ</p>
<p><strong>Serial old</strong>ï¼šæ‰§è¡Œè€å¹´ä»£åƒåœ¾å›æ”¶çš„ä¸²è¡Œæ”¶é›†å™¨ï¼Œå†…å­˜å›æ”¶ç®—æ³•ä½¿ç”¨çš„æ˜¯<strong>æ ‡è®°-æ•´ç†ç®—æ³•</strong>ï¼ŒåŒæ ·ä¹Ÿé‡‡ç”¨äº†ä¸²è¡Œå›æ”¶å’Œ STW æœºåˆ¶</p>
<ul>
<li>Serial old æ˜¯ Client æ¨¡å¼ä¸‹é»˜è®¤çš„è€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨</li>
<li>Serial old åœ¨ Server æ¨¡å¼ä¸‹ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼š
<ul>
<li>åœ¨ JDK 1.5 ä»¥åŠä¹‹å‰ç‰ˆæœ¬ï¼ˆParallel Old è¯ç”Ÿä»¥å‰ï¼‰ä¸­ä¸ Parallel Scavenge æ”¶é›†å™¨æ­é…ä½¿ç”¨</li>
<li>ä½œä¸ºè€å¹´ä»£ CMS æ”¶é›†å™¨çš„<strong>åå¤‡åƒåœ¾å›æ”¶æ–¹æ¡ˆ</strong>ï¼Œåœ¨å¹¶å‘æ”¶é›†å‘ç”Ÿ Concurrent Mode Failure æ—¶ä½¿ç”¨</li>
</ul>
</li>
</ul>
<p>å¼€å¯å‚æ•°ï¼š<code>-XX:+UseSerialGC</code> ç­‰ä»·äºæ–°ç”Ÿä»£ç”¨ Serial GC ä¸”è€å¹´ä»£ç”¨ Serial old GC</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-Serial%E6%94%B6%E9%9B%86%E5%99%A8.png" alt="img"></p>
<p>ä¼˜ç‚¹ï¼šç®€å•è€Œé«˜æ•ˆï¼ˆä¸å…¶ä»–æ”¶é›†å™¨çš„å•çº¿ç¨‹æ¯”ï¼‰ï¼Œå¯¹äºé™å®šå•ä¸ª CPU çš„ç¯å¢ƒæ¥è¯´ï¼ŒSerial æ”¶é›†å™¨ç”±äºæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡</p>
<p>ç¼ºç‚¹ï¼šå¯¹äºäº¤äº’æ€§è¾ƒå¼ºçš„åº”ç”¨è€Œè¨€ï¼Œè¿™ç§åƒåœ¾æ”¶é›†å™¨æ˜¯ä¸èƒ½å¤Ÿæ¥å—çš„ï¼Œæ¯”å¦‚ JavaWeb åº”ç”¨</p>
<h4 id="ParNew">ParNew</h4>
<p>Par æ˜¯ Parallel å¹¶è¡Œçš„ç¼©å†™ï¼ŒNew æ˜¯åªèƒ½å¤„ç†çš„æ˜¯æ–°ç”Ÿä»£</p>
<p>å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨åœ¨ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨çš„åŸºç¡€ä¹‹ä¸Šåšäº†æ”¹è¿›ï¼Œ<strong>é‡‡ç”¨å¤åˆ¶ç®—æ³•</strong>ï¼Œå°†å•çº¿ç¨‹æ”¹ä¸ºäº†å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¯ä»¥ç¼©çŸ­åƒåœ¾å›æ”¶çš„æ—¶é—´</p>
<p>å¯¹äºå…¶ä»–çš„è¡Œä¸ºï¼ˆæ”¶é›†ç®—æ³•ã€stop the worldã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰ï¼‰åŒ Serial æ”¶é›†å™¨ä¸€æ ·ï¼Œåº”ç”¨åœ¨å¹´è½»ä»£ï¼Œé™¤ Serial å¤–ï¼Œåªæœ‰<strong>ParNew GC èƒ½ä¸ CMS æ”¶é›†å™¨é…åˆå·¥ä½œ</strong></p>
<p>ç›¸å…³å‚æ•°ï¼š</p>
<ul>
<li><code>-XXï¼š+UseParNewGC</code>ï¼šè¡¨ç¤ºå¹´è½»ä»£ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨ï¼Œä¸å½±å“è€å¹´ä»£</li>
<li><code>-XX:ParallelGCThreads</code>ï¼šé»˜è®¤å¼€å¯å’Œ CPU æ•°é‡ç›¸åŒçš„çº¿ç¨‹æ•°</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-ParNew%E6%94%B6%E9%9B%86%E5%99%A8.png" alt="img"></p>
<p>ParNew æ˜¯å¾ˆå¤š JVM è¿è¡Œåœ¨ Server æ¨¡å¼ä¸‹æ–°ç”Ÿä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨</p>
<ul>
<li>å¯¹äºæ–°ç”Ÿä»£ï¼Œå›æ”¶æ¬¡æ•°é¢‘ç¹ï¼Œä½¿ç”¨å¹¶è¡Œæ–¹å¼é«˜æ•ˆ</li>
<li>å¯¹äºè€å¹´ä»£ï¼Œå›æ”¶æ¬¡æ•°å°‘ï¼Œä½¿ç”¨ä¸²è¡Œæ–¹å¼èŠ‚çœèµ„æºï¼ˆCPU å¹¶è¡Œéœ€è¦åˆ‡æ¢çº¿ç¨‹ï¼Œä¸²è¡Œå¯ä»¥çœå»åˆ‡æ¢çº¿ç¨‹çš„èµ„æºï¼‰</li>
</ul>
<h4 id="Parallel">Parallel</h4>
<p>Parallel Scavenge æ”¶é›†å™¨æ˜¯åº”ç”¨äºæ–°ç”Ÿä»£çš„å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼Œ<strong>é‡‡ç”¨å¤åˆ¶ç®—æ³•</strong>ã€å¹¶è¡Œå›æ”¶å’Œ Stop the World æœºåˆ¶</p>
<p>Parallel Old æ”¶é›†å™¨ï¼šæ˜¯ä¸€ä¸ªåº”ç”¨äºè€å¹´ä»£çš„å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼Œ<strong>é‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•</strong></p>
<p>å¯¹æ¯”å…¶ä»–å›æ”¶å™¨ï¼š</p>
<ul>
<li>å…¶å®ƒæ”¶é›†å™¨ç›®æ ‡æ˜¯å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´</li>
<li>Parallel ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼Œè¢«ç§°ä¸º<strong>ååé‡ä¼˜å…ˆ</strong>æ”¶é›†å™¨</li>
<li>Parallel Scavenge å¯¹æ¯” ParNew æ‹¥æœ‰<strong>è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥</strong>ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå¼€å…³å‚æ•°æ‰“å¼€ GC Ergonomics</li>
</ul>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åœé¡¿æ—¶é—´è¶ŠçŸ­å°±è¶Šé€‚åˆéœ€è¦ä¸ç”¨æˆ·äº¤äº’çš„ç¨‹åºï¼Œè‰¯å¥½çš„å“åº”é€Ÿåº¦èƒ½æå‡ç”¨æˆ·ä½“éªŒ</li>
<li>é«˜ååé‡å¯ä»¥é«˜æ•ˆç‡åœ°åˆ©ç”¨ CPU æ—¶é—´ï¼Œå°½å¿«å®Œæˆç¨‹åºçš„è¿ç®—ä»»åŠ¡ï¼Œé€‚åˆåœ¨åå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’</li>
</ul>
<p>åœé¡¿æ—¶é—´å’Œååé‡çš„å…³ç³»ï¼šæ–°ç”Ÿä»£ç©ºé—´å˜å° â†’ ç¼©çŸ­åœé¡¿æ—¶é—´ â†’ åƒåœ¾å›æ”¶å˜å¾—é¢‘ç¹ â†’ å¯¼è‡´ååé‡ä¸‹é™</p>
<p>åœ¨æ³¨é‡ååé‡åŠ CPU èµ„æºæ•æ„Ÿçš„åœºåˆï¼Œéƒ½å¯ä»¥ä¼˜å…ˆè€ƒè™‘ Parallel Scavenge + Parallel Old æ”¶é›†å™¨ï¼Œåœ¨ Server æ¨¡å¼ä¸‹çš„å†…å­˜å›æ”¶æ€§èƒ½å¾ˆå¥½ï¼Œ<strong>Java8 é»˜è®¤æ˜¯æ­¤åƒåœ¾æ”¶é›†å™¨ç»„åˆ</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-ParallelScavenge%E6%94%B6%E9%9B%86%E5%99%A8.png" alt="img"></p>
<p>å‚æ•°é…ç½®ï¼š</p>
<ul>
<li><code>-XXï¼š+UseParallelGC</code>ï¼šæ‰‹åŠ¨æŒ‡å®šå¹´è½»ä»£ä½¿ç”¨ Paralle å¹¶è¡Œæ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡</li>
<li><code>-XXï¼š+UseParalleloldcc</code>ï¼šæ‰‹åŠ¨æŒ‡å®šè€å¹´ä»£ä½¿ç”¨å¹¶è¡Œå›æ”¶æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡
<ul>
<li>ä¸Šé¢ä¸¤ä¸ªå‚æ•°ï¼Œé»˜è®¤å¼€å¯ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šè¢«å¼€å¯ï¼ˆäº’ç›¸æ¿€æ´»ï¼‰ï¼Œé»˜è®¤ JDK8 æ˜¯å¼€å¯çš„</li>
</ul>
</li>
<li><code>-XX:+UseAdaptivesizepplicy</code>ï¼šè®¾ç½® Parallel Scavenge æ”¶é›†å™¨å…·æœ‰<strong>è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥</strong>ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¹´è½»ä»£çš„å¤§å°ã€Eden å’Œ Survivor çš„æ¯”ä¾‹ã€æ™‹å‡è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„ç­‰å‚æ•°ä¼šè¢«è‡ªåŠ¨è°ƒæ•´ï¼Œè™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´è¿™äº›å‚æ•°ä»¥æä¾›æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–è€…æœ€å¤§çš„ååé‡</li>
<li><code>-XX:ParallelGcrhreads</code>ï¼šè®¾ç½®å¹´è½»ä»£å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°ï¼Œä¸€èˆ¬ä¸ CPU æ•°é‡ç›¸ç­‰ï¼Œä»¥é¿å…è¿‡å¤šçš„çº¿ç¨‹æ•°å½±å“åƒåœ¾æ”¶é›†æ€§èƒ½
<ul>
<li>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ CPU æ•°é‡å°äº 8 ä¸ªï¼ŒParallelGcThreads çš„å€¼ç­‰äº CPU æ•°é‡</li>
<li>å½“ CPU æ•°é‡å¤§äº 8 ä¸ªï¼ŒParallelGCThreads çš„å€¼ç­‰äº 3+[5*CPU Count]/8]</li>
</ul>
</li>
<li><code>-XX:MaxGCPauseMillis</code>ï¼šè®¾ç½®åƒåœ¾æ”¶é›†å™¨æœ€å¤§åœé¡¿æ—¶é—´ï¼ˆå³ STW çš„æ—¶é—´ï¼‰ï¼Œå•ä½æ˜¯æ¯«ç§’
<ul>
<li>å¯¹äºç”¨æˆ·æ¥è®²ï¼Œåœé¡¿æ—¶é—´è¶ŠçŸ­ä½“éªŒè¶Šå¥½ï¼›åœ¨æœåŠ¡å™¨ç«¯ï¼Œæ³¨é‡é«˜å¹¶å‘ï¼Œæ•´ä½“çš„ååé‡</li>
<li>ä¸ºäº†æŠŠåœé¡¿æ—¶é—´æ§åˆ¶åœ¨ MaxGCPauseMillis ä»¥å†…ï¼Œæ”¶é›†å™¨åœ¨å·¥ä½œæ—¶ä¼šè°ƒæ•´ Java å †å¤§å°æˆ–å…¶ä»–ä¸€äº›å‚æ•°</li>
</ul>
</li>
<li><code>-XX:GCTimeRatio</code>ï¼šåƒåœ¾æ”¶é›†æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ä¾‹ =1/(N+1)ï¼Œç”¨äºè¡¡é‡ååé‡çš„å¤§å°
<ul>
<li>å–å€¼èŒƒå›´ï¼ˆ0ï¼Œ100ï¼‰ã€‚é»˜è®¤å€¼ 99ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾å›æ”¶æ—¶é—´ä¸è¶…è¿‡ 1</li>
<li>ä¸ <code>-xx:MaxGCPauseMillis</code> å‚æ•°æœ‰ä¸€å®šçŸ›ç›¾æ€§ï¼Œæš‚åœæ—¶é—´è¶Šé•¿ï¼ŒRadio å‚æ•°å°±å®¹æ˜“è¶…è¿‡è®¾å®šçš„æ¯”ä¾‹</li>
</ul>
</li>
</ul>
<h4 id="CMS">CMS</h4>
<p>CMS å…¨ç§° Concurrent Mark Sweepï¼Œæ˜¯ä¸€æ¬¾<strong>å¹¶å‘çš„ã€ä½¿ç”¨æ ‡è®°-æ¸…é™¤</strong>ç®—æ³•ã€é’ˆå¯¹è€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨ï¼Œå…¶æœ€å¤§ç‰¹ç‚¹æ˜¯<strong>è®©åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å·¥ä½œ</strong></p>
<p>CMS æ”¶é›†å™¨çš„å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´ï¼Œåœé¡¿æ—¶é—´è¶ŠçŸ­ï¼ˆ<strong>ä½å»¶è¿Ÿ</strong>ï¼‰è¶Šé€‚åˆä¸ç”¨æˆ·äº¤äº’çš„ç¨‹åºï¼Œè‰¯å¥½çš„å“åº”é€Ÿåº¦èƒ½æå‡ç”¨æˆ·ä½“éªŒ</p>
<p>åˆ†ä¸ºä»¥ä¸‹å››ä¸ªæµç¨‹ï¼š</p>
<ul>
<li>åˆå§‹æ ‡è®°ï¼šä½¿ç”¨ STW å‡ºç°çŸ­æš‚åœé¡¿ï¼Œä»…æ ‡è®°ä¸€ä¸‹ GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«</li>
<li>å¹¶å‘æ ‡è®°ï¼šè¿›è¡Œ GC Roots å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾ï¼Œåœ¨æ•´ä¸ªå›æ”¶è¿‡ç¨‹ä¸­è€—æ—¶æœ€é•¿ï¼Œä¸éœ€è¦ STWï¼Œå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿è¡Œ</li>
<li>é‡æ–°æ ‡è®°ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡ï¼Œæ¯”åˆå§‹æ ‡è®°æ—¶é—´é•¿ä½†è¿œæ¯”å¹¶å‘æ ‡è®°æ—¶é—´çŸ­ï¼Œéœ€è¦ STWï¼ˆä¸åœé¡¿å°±ä¼šä¸€ç›´å˜åŒ–ï¼Œé‡‡ç”¨å†™å±éšœ + å¢é‡æ›´æ–°æ¥é¿å…æ¼æ ‡æƒ…å†µï¼‰</li>
<li>å¹¶å‘æ¸…é™¤ï¼šæ¸…é™¤æ ‡è®°ä¸ºå¯ä»¥å›æ”¶å¯¹è±¡ï¼Œ<strong>ä¸éœ€è¦ç§»åŠ¨å­˜æ´»å¯¹è±¡</strong>ï¼Œæ‰€ä»¥è¿™ä¸ªé˜¶æ®µå¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å¹¶å‘çš„</li>
</ul>
<p>Mark Sweep ä¼šé€ æˆå†…å­˜ç¢ç‰‡ï¼Œä¸æŠŠç®—æ³•æ¢æˆ Mark Compact çš„åŸå› ï¼šMark Compact ç®—æ³•ä¼šæ•´ç†å†…å­˜ï¼Œå¯¼è‡´ç”¨æˆ·çº¿ç¨‹ä½¿ç”¨çš„<strong>å¯¹è±¡çš„åœ°å€æ”¹å˜</strong>ï¼Œå½±å“ç”¨æˆ·çº¿ç¨‹ç»§ç»­æ‰§è¡Œ</p>
<p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­è€—æ—¶æœ€é•¿çš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤è¿‡ç¨‹ä¸­ï¼Œæ”¶é›†å™¨çº¿ç¨‹éƒ½å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œä¸éœ€è¦è¿›è¡Œåœé¡¿</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-CMS%E6%94%B6%E9%9B%86%E5%99%A8.png" alt="img"></p>
<p>ä¼˜ç‚¹ï¼šå¹¶å‘æ”¶é›†ã€ä½å»¶è¿Ÿ</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>
<p>ååé‡é™ä½ï¼šåœ¨å¹¶å‘é˜¶æ®µè™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·åœé¡¿ï¼Œä½†æ˜¯ä¼šå› ä¸ºå ç”¨äº†ä¸€éƒ¨åˆ†çº¿ç¨‹è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå˜æ…¢ï¼ŒCPU åˆ©ç”¨ç‡ä¸å¤Ÿé«˜</p>
</li>
<li>
<p>CMS æ”¶é›†å™¨<strong>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾</strong>ï¼Œå¯èƒ½å‡ºç° Concurrent Mode Failure å¯¼è‡´å¦ä¸€æ¬¡ Full GC çš„äº§ç”Ÿ</p>
<p>æµ®åŠ¨åƒåœ¾æ˜¯æŒ‡å¹¶å‘æ¸…é™¤é˜¶æ®µç”±äºç”¨æˆ·çº¿ç¨‹ç»§ç»­è¿è¡Œè€Œäº§ç”Ÿçš„åƒåœ¾ï¼ˆäº§ç”Ÿäº†æ–°å¯¹è±¡ï¼‰ï¼Œè¿™éƒ¨åˆ†åƒåœ¾åªèƒ½åˆ°ä¸‹ä¸€æ¬¡ GC æ—¶æ‰èƒ½è¿›è¡Œå›æ”¶ã€‚ç”±äºæµ®åŠ¨åƒåœ¾çš„å­˜åœ¨ï¼ŒCMS æ”¶é›†éœ€è¦é¢„ç•™å‡ºä¸€éƒ¨åˆ†å†…å­˜ï¼Œä¸èƒ½ç­‰å¾…è€å¹´ä»£å¿«æ»¡çš„æ—¶å€™å†å›æ”¶ã€‚å¦‚æœé¢„ç•™çš„å†…å­˜ä¸å¤Ÿå­˜æ”¾æµ®åŠ¨åƒåœ¾ï¼Œå°±ä¼šå‡ºç° Concurrent Mode Failureï¼Œè¿™æ—¶è™šæ‹Ÿæœºå°†ä¸´æ—¶å¯ç”¨ Serial Old æ¥æ›¿ä»£ CMSï¼Œå¯¼è‡´å¾ˆé•¿çš„åœé¡¿æ—¶é—´</p>
</li>
<li>
<p>æ ‡è®° - æ¸…é™¤ç®—æ³•å¯¼è‡´çš„ç©ºé—´ç¢ç‰‡ï¼Œå¾€å¾€å‡ºç°è€å¹´ä»£ç©ºé—´æ— æ³•æ‰¾åˆ°è¶³å¤Ÿå¤§è¿ç»­ç©ºé—´æ¥åˆ†é…å½“å‰å¯¹è±¡ï¼Œä¸å¾—ä¸æå‰è§¦å‘ä¸€æ¬¡ Full GCï¼›ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ—¶ï¼Œå°†æ— æ³•ä½¿ç”¨æŒ‡é’ˆç¢°æ’ï¼ˆBump the Pointerï¼‰æŠ€æœ¯ï¼Œè€Œåªèƒ½å¤Ÿé€‰æ‹©ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰æ‰§è¡Œå†…å­˜åˆ†é…</p>
</li>
</ul>
<p>å‚æ•°è®¾ç½®ï¼š</p>
<ul>
<li>
<p><code>-XXï¼š+UseConcMarkSweepGC</code>ï¼šæ‰‹åŠ¨æŒ‡å®šä½¿ç”¨ CMS æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡</p>
<p>å¼€å¯è¯¥å‚æ•°åä¼šè‡ªåŠ¨å°† <code>-XX:+UseParNewGC</code> æ‰“å¼€ï¼Œå³ï¼šParNew + CMS + Serial oldçš„ç»„åˆ</p>
</li>
<li>
<p><code>-XX:CMSInitiatingoccupanyFraction</code>ï¼šè®¾ç½®å †å†…å­˜ä½¿ç”¨ç‡çš„é˜ˆå€¼ï¼Œä¸€æ—¦è¾¾åˆ°è¯¥é˜ˆå€¼ï¼Œä¾¿å¼€å§‹è¿›è¡Œå›æ”¶</p>
<ul>
<li>JDK5 åŠä»¥å‰ç‰ˆæœ¬çš„é»˜è®¤å€¼ä¸º 68ï¼Œå³å½“è€å¹´ä»£çš„ç©ºé—´ä½¿ç”¨ç‡è¾¾åˆ° 68% æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡CMSå›æ”¶</li>
<li>JDK6 åŠä»¥ä¸Šç‰ˆæœ¬é»˜è®¤å€¼ä¸º 92%</li>
</ul>
</li>
<li>
<p><code>-XX:+UseCMSCompactAtFullCollection</code>ï¼šç”¨äºæŒ‡å®šåœ¨æ‰§è¡Œå®Œ Full GC åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©æ•´ç†ï¼Œä»¥æ­¤é¿å…å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿï¼Œç”±äºå†…å­˜å‹ç¼©æ•´ç†è¿‡ç¨‹æ— æ³•å¹¶å‘æ‰§è¡Œï¼Œæ‰€å¸¦æ¥çš„é—®é¢˜å°±æ˜¯åœé¡¿æ—¶é—´å˜å¾—æ›´é•¿</p>
</li>
<li>
<p><code>-XX:CMSFullGCsBeforecompaction</code>ï¼š<strong>è®¾ç½®åœ¨æ‰§è¡Œå¤šå°‘æ¬¡ Full GC åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©æ•´ç†</strong></p>
</li>
<li>
<p><code>-XX:ParallelCMSThreads</code>ï¼šè®¾ç½® CMS çš„çº¿ç¨‹æ•°é‡</p>
<ul>
<li>CMS é»˜è®¤å¯åŠ¨çš„çº¿ç¨‹æ•°æ˜¯ (ParallelGCThreads+3)/4ï¼ŒParallelGCThreads æ˜¯å¹´è½»ä»£å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°</li>
<li>æ”¶é›†çº¿ç¨‹å ç”¨çš„ CPU èµ„æºå¤šäº25%ï¼Œå¯¹ç”¨æˆ·ç¨‹åºå½±å“å¯èƒ½è¾ƒå¤§ï¼›å½“ CPU èµ„æºæ¯”è¾ƒç´§å¼ æ—¶ï¼Œå—åˆ° CMS æ”¶é›†å™¨çº¿ç¨‹çš„å½±å“ï¼Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½åœ¨åƒåœ¾å›æ”¶é˜¶æ®µå¯èƒ½ä¼šéå¸¸ç³Ÿç³•</li>
</ul>
</li>
</ul>
<h4 id="G1">G1</h4>
<h5 id="G1-ç‰¹ç‚¹">G1 ç‰¹ç‚¹</h5>
<p>G1ï¼ˆGarbage-Firstï¼‰æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œ<strong>åº”ç”¨äºæ–°ç”Ÿä»£å’Œè€å¹´ä»£</strong>ã€é‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€è½¯å®æ—¶ã€ä½å»¶è¿Ÿã€å¯è®¾å®šç›®æ ‡ï¼ˆæœ€å¤§ STW åœé¡¿æ—¶é—´ï¼‰çš„åƒåœ¾å›æ”¶å™¨ï¼Œç”¨äºä»£æ›¿ CMSï¼Œé€‚ç”¨äºè¾ƒå¤§çš„å †ï¼ˆ&gt;4 ~ 6Gï¼‰ï¼Œåœ¨ JDK9 ä¹‹åé»˜è®¤ä½¿ç”¨ G1</p>
<p>G1 å¯¹æ¯”å…¶ä»–å¤„ç†å™¨çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¹¶å‘ä¸å¹¶è¡Œï¼š
<ul>
<li>å¹¶è¡Œæ€§ï¼šG1 åœ¨å›æ”¶æœŸé—´ï¼Œå¯ä»¥æœ‰å¤šä¸ª GC çº¿ç¨‹åŒæ—¶å·¥ä½œï¼Œæœ‰æ•ˆåˆ©ç”¨å¤šæ ¸è®¡ç®—èƒ½åŠ›ï¼Œæ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ STW</li>
<li>å¹¶å‘æ€§ï¼šG1 æ‹¥æœ‰ä¸åº”ç”¨ç¨‹åºäº¤æ›¿æ‰§è¡Œçš„èƒ½åŠ›ï¼Œéƒ¨åˆ†å·¥ä½œå¯ä»¥å’Œåº”ç”¨ç¨‹åºåŒæ—¶æ‰§è¡Œï¼Œå› æ­¤ä¸ä¼šåœ¨æ•´ä¸ªå›æ”¶é˜¶æ®µå‘ç”Ÿå®Œå…¨é˜»å¡åº”ç”¨ç¨‹åºçš„æƒ…å†µ</li>
<li>å…¶ä»–çš„åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨å†…ç½®çš„ JVM çº¿ç¨‹æ‰§è¡Œ GC çš„å¤šçº¿ç¨‹æ“ä½œï¼Œè€Œ G1 GC å¯ä»¥é‡‡ç”¨åº”ç”¨çº¿ç¨‹æ‰¿æ‹…åå°è¿è¡Œçš„ GC å·¥ä½œï¼ŒJVM çš„ GC çº¿ç¨‹å¤„ç†é€Ÿåº¦æ…¢æ—¶ï¼Œç³»ç»Ÿä¼š<strong>è°ƒç”¨åº”ç”¨ç¨‹åºçº¿ç¨‹åŠ é€Ÿåƒåœ¾å›æ”¶</strong>è¿‡ç¨‹</li>
</ul>
</li>
<li><strong>åˆ†åŒºç®—æ³•</strong>ï¼š
<ul>
<li>ä»åˆ†ä»£ä¸Šçœ‹ï¼ŒG1  å±äºåˆ†ä»£å‹åƒåœ¾å›æ”¶å™¨ï¼ŒåŒºåˆ†å¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹´è½»ä»£ä¾ç„¶æœ‰ Eden åŒºå’Œ Survivor åŒºã€‚ä»å †ç»“æ„ä¸Šçœ‹ï¼Œ<strong>æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†ç‰©ç†éš”ç¦»</strong>ï¼Œä¸ç”¨æ‹…å¿ƒæ¯ä¸ªä»£å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œè¿™ç§ç‰¹æ€§æœ‰åˆ©äºç¨‹åºé•¿æ—¶é—´è¿è¡Œï¼Œåˆ†é…å¤§å¯¹è±¡æ—¶ä¸ä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°è¿ç»­å†…å­˜ç©ºé—´è€Œæå‰è§¦å‘ä¸‹ä¸€æ¬¡ GC</li>
<li>å°†æ•´ä¸ªå †åˆ’åˆ†æˆçº¦ 2048 ä¸ªå¤§å°ç›¸åŒçš„ç‹¬ç«‹ Region å—ï¼Œæ¯ä¸ª Region å—å¤§å°æ ¹æ®å †ç©ºé—´çš„å®é™…å¤§å°è€Œå®šï¼Œæ•´ä½“è¢«æ§åˆ¶åœ¨ 1MB åˆ° 32 MBä¹‹é—´ä¸”ä¸º 2 çš„ N æ¬¡å¹‚ï¼Œæ‰€æœ‰ Region å¤§å°ç›¸åŒï¼Œåœ¨ JVM ç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šè¢«æ”¹å˜ã€‚G1 æŠŠå †åˆ’åˆ†æˆå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼Œä½¿å¾—æ¯ä¸ªå°ç©ºé—´å¯ä»¥å•ç‹¬è¿›è¡Œåƒåœ¾å›æ”¶</li>
<li><strong>æ–°çš„åŒºåŸŸ Humongous</strong>ï¼šæœ¬èº«å±äºè€å¹´ä»£åŒºï¼Œå½“å‡ºç°äº†ä¸€ä¸ªå·¨å‹å¯¹è±¡è¶…å‡ºäº†åˆ†åŒºå®¹é‡çš„ä¸€åŠï¼Œè¯¥å¯¹è±¡å°±ä¼šè¿›å…¥åˆ°è¯¥åŒºåŸŸã€‚å¦‚æœä¸€ä¸ª H åŒºè£…ä¸ä¸‹ä¸€ä¸ªå·¨å‹å¯¹è±¡ï¼Œé‚£ä¹ˆ G1 ä¼šå¯»æ‰¾è¿ç»­çš„ H åˆ†åŒºæ¥å­˜å‚¨ï¼Œä¸ºäº†èƒ½æ‰¾åˆ°è¿ç»­çš„ H åŒºï¼Œæœ‰æ—¶å€™ä¸å¾—ä¸å¯åŠ¨ Full GC</li>
<li>G1 ä¸ä¼šå¯¹å·¨å‹å¯¹è±¡è¿›è¡Œæ‹·è´ï¼Œå›æ”¶æ—¶è¢«ä¼˜å…ˆè€ƒè™‘ï¼ŒG1 ä¼šè·Ÿè¸ªè€å¹´ä»£æ‰€æœ‰ incoming å¼•ç”¨ï¼Œè¿™æ ·è€å¹´ä»£ incoming å¼•ç”¨ä¸º 0 çš„å·¨å‹å¯¹è±¡å°±å¯ä»¥åœ¨æ–°ç”Ÿä»£åƒåœ¾å›æ”¶æ—¶å¤„ç†æ‰</li>
<li>Region ç»“æ„å›¾ï¼š</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-G1-Region%E5%8C%BA%E5%9F%9F.png" alt="img"></p>
<ul>
<li>
<p>ç©ºé—´æ•´åˆï¼š</p>
<ul>
<li>CMSï¼šæ ‡è®°-æ¸…é™¤ç®—æ³•ã€å†…å­˜ç¢ç‰‡ã€è‹¥å¹²æ¬¡ GC åè¿›è¡Œä¸€æ¬¡ç¢ç‰‡æ•´ç†</li>
<li>G1ï¼šæ•´ä½“æ¥çœ‹æ˜¯<strong>åŸºäºæ ‡è®° - æ•´ç†ç®—æ³•å®ç°</strong>çš„æ”¶é›†å™¨ï¼Œä»å±€éƒ¨ï¼ˆRegion ä¹‹é—´ï¼‰ä¸Šæ¥çœ‹æ˜¯åŸºäºå¤åˆ¶ç®—æ³•å®ç°çš„ï¼Œä¸¤ç§ç®—æ³•éƒ½å¯ä»¥é¿å…å†…å­˜ç¢ç‰‡</li>
</ul>
</li>
<li>
<p><strong>å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼ˆè½¯å®æ—¶ soft real-timeï¼‰</strong>ï¼šå¯ä»¥æŒ‡å®šåœ¨ M æ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨ GC ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡ N æ¯«ç§’</p>
<ul>
<li>
<p>ç”±äºåˆ†å—çš„åŸå› ï¼ŒG1 å¯ä»¥åªé€‰å–éƒ¨åˆ†åŒºåŸŸè¿›è¡Œå†…å­˜å›æ”¶ï¼Œè¿™æ ·ç¼©å°äº†å›æ”¶çš„èŒƒå›´ï¼Œå¯¹äºå…¨å±€åœé¡¿æƒ…å†µä¹Ÿèƒ½å¾—åˆ°è¾ƒå¥½çš„æ§åˆ¶</p>
</li>
<li>
<p>G1 è·Ÿè¸ªå„ä¸ª Region é‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´ï¼Œé€šè¿‡è¿‡å»å›æ”¶çš„ç»éªŒè·å¾—ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ª<strong>ä¼˜å…ˆåˆ—è¡¨</strong>ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Regionï¼Œä¿è¯äº† G1 æ”¶é›†å™¨åœ¨æœ‰é™çš„æ—¶é—´å†…å¯ä»¥è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡</p>
</li>
<li>
<p>ç›¸æ¯”äº CMS GCï¼ŒG1 æœªå¿…èƒ½åšåˆ° CMS åœ¨æœ€å¥½æƒ…å†µä¸‹çš„å»¶æ—¶åœé¡¿ï¼Œä½†æ˜¯æœ€å·®æƒ…å†µè¦å¥½å¾ˆå¤š</p>
</li>
</ul>
</li>
</ul>
<p>G1 åƒåœ¾æ”¶é›†å™¨çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç›¸è¾ƒäº CMSï¼ŒG1 è¿˜ä¸å…·å¤‡å…¨æ–¹ä½ã€å‹å€’æ€§ä¼˜åŠ¿ã€‚æ¯”å¦‚åœ¨ç”¨æˆ·ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒG1 æ— è®ºæ˜¯ä¸ºäº†åƒåœ¾æ”¶é›†äº§ç”Ÿçš„å†…å­˜å ç”¨è¿˜æ˜¯ç¨‹åºè¿è¡Œæ—¶çš„é¢å¤–æ‰§è¡Œè´Ÿè½½éƒ½è¦æ¯” CMS è¦é«˜</li>
<li>ä»ç»éªŒä¸Šæ¥è¯´ï¼Œåœ¨å°å†…å­˜åº”ç”¨ä¸Š CMS çš„è¡¨ç°å¤§æ¦‚ç‡ä¼šä¼˜äº G1ï¼Œè€Œ G1 åœ¨å¤§å†…å­˜åº”ç”¨ä¸Šåˆ™å‘æŒ¥å…¶ä¼˜åŠ¿ï¼Œå¹³è¡¡ç‚¹åœ¨ 6-8GB ä¹‹é—´</li>
</ul>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>é¢å‘æœåŠ¡ç«¯åº”ç”¨ï¼Œé’ˆå¯¹å…·æœ‰å¤§å†…å­˜ã€å¤šå¤„ç†å™¨çš„æœºå™¨</li>
<li>éœ€è¦ä½ GC å»¶è¿Ÿï¼Œå¹¶å…·æœ‰å¤§å †çš„åº”ç”¨ç¨‹åºæä¾›è§£å†³æ–¹æ¡ˆ</li>
</ul>
<h5 id="è®°å¿†é›†">è®°å¿†é›†</h5>
<p>è®°å¿†é›† Remembered Set åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯ä¸ª Region éƒ½æœ‰ä¸€ä¸ª Remembered Setï¼Œç”¨æ¥è¢«å“ªäº›å…¶ä»– Region é‡Œçš„å¯¹è±¡å¼•ç”¨ï¼ˆè°å¼•ç”¨äº†æˆ‘å°±è®°å½•è°ï¼‰</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JUC-G1%E8%AE%B0%E5%BF%86%E9%9B%86.png" alt="img"></p>
<ul>
<li>ç¨‹åºå¯¹ Reference ç±»å‹æ•°æ®å†™æ“ä½œæ—¶ï¼Œäº§ç”Ÿä¸€ä¸ª Write Barrier æš‚æ—¶ä¸­æ–­æ“ä½œï¼Œæ£€æŸ¥è¯¥å¯¹è±¡å’Œ Reference ç±»å‹æ•°æ®æ˜¯å¦åœ¨ä¸åŒçš„ Regionï¼ˆè·¨ä»£å¼•ç”¨ï¼‰ï¼Œä¸åŒå°±å°†ç›¸å…³å¼•ç”¨ä¿¡æ¯è®°å½•åˆ° Reference ç±»å‹æ‰€å±çš„ Region çš„ Remembered Set ä¹‹ä¸­</li>
<li>è¿›è¡Œå†…å­˜å›æ”¶æ—¶ï¼Œåœ¨ GC æ ¹èŠ‚ç‚¹çš„æšä¸¾èŒƒå›´ä¸­åŠ å…¥ Remembered Set å³å¯ä¿è¯ä¸å¯¹å…¨å †æ‰«æä¹Ÿä¸ä¼šæœ‰é—æ¼</li>
</ul>
<p>åƒåœ¾æ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£ä¸­å»ºç«‹äº†è®°å¿†é›†è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸ºå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…·ä½“å®ç°è®°å¿†é›†çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>å­—é•¿ç²¾åº¦</li>
<li>å¯¹è±¡ç²¾åº¦</li>
<li>å¡ç²¾åº¦(å¡è¡¨)</li>
</ul>
<p>å¡è¡¨ï¼ˆCard Tableï¼‰åœ¨è€å¹´ä»£ä¸­ï¼Œæ˜¯ä¸€ç§å¯¹è®°å¿†é›†çš„å…·ä½“å®ç°ï¼Œä¸»è¦å®šä¹‰äº†è®°å¿†é›†çš„è®°å½•ç²¾åº¦ã€ä¸å †å†…å­˜çš„æ˜ å°„å…³ç³»ç­‰ï¼Œå¡è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¯¹åº”ç€ä¸€å—ç‰¹å®šå¤§å°çš„å†…å­˜å—ï¼Œè¿™ä¸ªå†…å­˜å—ç§°ä¹‹ä¸ºå¡é¡µï¼ˆcard pageï¼‰ï¼Œå½“å­˜åœ¨è·¨ä»£å¼•ç”¨æ—¶ï¼Œä¼šå°†å¡é¡µæ ‡è®°ä¸º dirtyï¼ŒJVM å¯¹äºå¡é¡µçš„ç»´æŠ¤ä¹Ÿæ˜¯é€šè¿‡å†™å±éšœçš„æ–¹å¼</p>
<p>æ”¶é›†é›†åˆ CSet ä»£è¡¨æ¯æ¬¡ GC æš‚åœæ—¶å›æ”¶çš„ä¸€ç³»åˆ—ç›®æ ‡åˆ†åŒºï¼Œåœ¨ä»»æ„ä¸€æ¬¡æ”¶é›†æš‚åœä¸­ï¼ŒCSet æ‰€æœ‰åˆ†åŒºéƒ½ä¼šè¢«é‡Šæ”¾ï¼Œå†…éƒ¨å­˜æ´»çš„å¯¹è±¡éƒ½ä¼šè¢«è½¬ç§»åˆ°åˆ†é…çš„ç©ºé—²åˆ†åŒºä¸­ã€‚å¹´è½»ä»£æ”¶é›† CSet åªå®¹çº³å¹´è½»ä»£åˆ†åŒºï¼Œè€Œæ··åˆæ”¶é›†ä¼šé€šè¿‡å¯å‘å¼ç®—æ³•ï¼Œåœ¨è€å¹´ä»£å€™é€‰å›æ”¶åˆ†åŒºä¸­ï¼Œç­›é€‰å‡ºå›æ”¶æ”¶ç›Šæœ€é«˜çš„åˆ†åŒºæ·»åŠ åˆ° CSet ä¸­</p>
<ul>
<li>CSet of Young Collection</li>
<li>CSet of Mix Collection</li>
</ul>
<h5 id="å·¥ä½œåŸç†-2">å·¥ä½œåŸç†</h5>
<p>G1 ä¸­æä¾›äº†ä¸‰ç§åƒåœ¾å›æ”¶æ¨¡å¼ï¼šYoungGCã€Mixed GC å’Œ Full GCï¼Œåœ¨ä¸åŒçš„æ¡ä»¶ä¸‹è¢«è§¦å‘</p>
<ul>
<li>å½“å †å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šå€¼ï¼ˆé»˜è®¤ 45%ï¼‰æ—¶ï¼Œå¼€å§‹è€å¹´ä»£å¹¶å‘æ ‡è®°è¿‡ç¨‹</li>
<li>æ ‡è®°å®Œæˆé©¬ä¸Šå¼€å§‹æ··åˆå›æ”¶è¿‡ç¨‹</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-G1%E5%9B%9E%E6%94%B6%E8%BF%87%E7%A8%8B.png" alt="img"></p>
<p>é¡ºæ—¶é’ˆï¼šYoung GC â†’ Young GC + Concurrent Mark â†’ Mixed GC é¡ºåºï¼Œè¿›è¡Œåƒåœ¾å›æ”¶</p>
<ul>
<li>
<p><strong>Young GC</strong>ï¼šå‘ç”Ÿåœ¨å¹´è½»ä»£çš„ GC ç®—æ³•ï¼Œä¸€èˆ¬å¯¹è±¡ï¼ˆé™¤äº†å·¨å‹å¯¹è±¡ï¼‰éƒ½æ˜¯åœ¨ eden region ä¸­åˆ†é…å†…å­˜ï¼Œå½“æ‰€æœ‰ eden region è¢«è€—å°½æ— æ³•ç”³è¯·å†…å­˜æ—¶ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡ Young GCï¼ŒG1 åœæ­¢åº”ç”¨ç¨‹åºçš„æ‰§è¡Œ STWï¼ŒæŠŠæ´»è·ƒå¯¹è±¡æ”¾å…¥è€å¹´ä»£ï¼Œåƒåœ¾å¯¹è±¡å›æ”¶</p>
<p><strong>å›æ”¶è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>æ‰«ææ ¹ï¼šæ ¹å¼•ç”¨è¿åŒ RSet è®°å½•çš„å¤–éƒ¨å¼•ç”¨ä½œä¸ºæ‰«æå­˜æ´»å¯¹è±¡çš„å…¥å£</li>
<li>æ›´æ–° RSetï¼šå¤„ç† dirty card queue æ›´æ–° RSï¼Œæ­¤å RSet å‡†ç¡®çš„åæ˜ å¯¹è±¡çš„å¼•ç”¨å…³ç³»
<ul>
<li>dirty card queueï¼šç±»ä¼¼ç¼“å­˜ï¼Œäº§ç”Ÿäº†å¼•ç”¨å…ˆè®°å½•åœ¨è¿™é‡Œï¼Œç„¶åæ›´æ–°åˆ° RSet</li>
<li>ä½œç”¨ï¼šäº§ç”Ÿå¼•ç”¨ç›´æ¥æ›´æ–° RSet éœ€è¦çº¿ç¨‹åŒæ­¥å¼€é”€å¾ˆå¤§ï¼Œä½¿ç”¨é˜Ÿåˆ—æ€§èƒ½å¥½</li>
</ul>
</li>
<li>å¤„ç† RSetï¼šè¯†åˆ«è¢«è€å¹´ä»£å¯¹è±¡æŒ‡å‘çš„ Eden ä¸­çš„å¯¹è±¡ï¼Œè¿™äº›è¢«æŒ‡å‘çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯å­˜æ´»çš„å¯¹è±¡ï¼ŒæŠŠéœ€è¦å›æ”¶çš„åˆ†åŒºæ”¾å…¥ Young CSet ä¸­è¿›è¡Œå›æ”¶</li>
<li>å¤åˆ¶å¯¹è±¡ï¼šEden åŒºå†…å­˜æ®µä¸­å­˜æ´»çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ° survivor åŒºï¼Œsurvivor åŒºå†…å­˜æ®µä¸­å­˜æ´»çš„å¯¹è±¡å¦‚æœå¹´é¾„æœªè¾¾é˜ˆå€¼ï¼Œå¹´é¾„ä¼šåŠ 1ï¼Œè¾¾åˆ°é˜€å€¼ä¼šè¢«ä¼šè¢«å¤åˆ¶åˆ° old åŒºä¸­ç©ºçš„å†…å­˜åˆ†æ®µï¼Œå¦‚æœ survivor ç©ºé—´ä¸å¤Ÿï¼ŒEden ç©ºé—´çš„éƒ¨åˆ†æ•°æ®ä¼šç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£ç©ºé—´</li>
<li>å¤„ç†å¼•ç”¨ï¼šå¤„ç† Softï¼ŒWeakï¼ŒPhantomï¼ŒJNI Weak  ç­‰å¼•ç”¨ï¼Œæœ€ç»ˆ Eden ç©ºé—´çš„æ•°æ®ä¸ºç©ºï¼ŒGC åœæ­¢å·¥ä½œ</li>
</ol>
</li>
<li>
<p><strong>Concurrent Mark</strong> ï¼š</p>
<ul>
<li>åˆå§‹æ ‡è®°ï¼šæ ‡è®°ä»æ ¹èŠ‚ç‚¹ç›´æ¥å¯è¾¾çš„å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µæ˜¯ STW çš„ï¼Œå¹¶ä¸”ä¼šè§¦å‘ä¸€æ¬¡å¹´è½»ä»£ GC</li>
<li>å¹¶å‘æ ‡è®° (Concurrent Marking)ï¼šåœ¨æ•´ä¸ªå †ä¸­è¿›è¡Œå¹¶å‘æ ‡è®°ï¼ˆåº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œï¼‰ï¼Œå¯èƒ½è¢« YoungGC ä¸­æ–­ã€‚ä¼šè®¡ç®—æ¯ä¸ªåŒºåŸŸçš„å¯¹è±¡æ´»æ€§ï¼Œå³åŒºåŸŸä¸­å­˜æ´»å¯¹è±¡çš„æ¯”ä¾‹ï¼Œè‹¥åŒºåŸŸä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åƒåœ¾ï¼Œåˆ™è¿™ä¸ªåŒºåŸŸä¼šè¢«ç«‹å³å›æ”¶ï¼ˆ<strong>å®æ—¶å›æ”¶</strong>ï¼‰ï¼Œç»™æµ®åŠ¨åƒåœ¾å‡†å¤‡å‡ºæ›´å¤šçš„ç©ºé—´ï¼ŒæŠŠéœ€è¦æ”¶é›†çš„ Region æ”¾å…¥ CSet å½“ä¸­</li>
<li>æœ€ç»ˆæ ‡è®°ï¼šä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œè™šæ‹Ÿæœºå°†è¿™æ®µæ—¶é—´å¯¹è±¡å˜åŒ–è®°å½•åœ¨çº¿ç¨‹çš„ Remembered Set Logs é‡Œé¢ï¼Œæœ€ç»ˆæ ‡è®°é˜¶æ®µéœ€è¦æŠŠ Remembered Set Logs çš„æ•°æ®åˆå¹¶åˆ° Remembered Set ä¸­ï¼Œè¿™é˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†æ˜¯å¯å¹¶è¡Œæ‰§è¡Œï¼ˆ<strong>é˜²æ­¢æ¼æ ‡</strong>ï¼‰</li>
<li>ç­›é€‰å›æ”¶ï¼šå¹¶å‘æ¸…ç†é˜¶æ®µï¼Œé¦–å…ˆå¯¹ CSet ä¸­å„ä¸ª Region ä¸­çš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„ GC åœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œä¹Ÿéœ€è¦ STW</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-G1%E6%94%B6%E9%9B%86%E5%99%A8.jpg" alt="img"></p>
</li>
<li>
<p><strong>Mixed GC</strong>ï¼šå½“å¾ˆå¤šå¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£æ—¶ï¼Œä¸ºäº†é¿å…å †å†…å­˜è¢«è€—å°½ï¼Œè™šæ‹Ÿæœºä¼šè§¦å‘ä¸€ä¸ªæ··åˆçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå³ Mixed GCï¼Œé™¤äº†å›æ”¶æ•´ä¸ª young regionï¼Œè¿˜ä¼šå›æ”¶ä¸€éƒ¨åˆ†çš„ old regionï¼Œè¿‡ç¨‹åŒ YGC</p>
<p>æ³¨æ„ï¼š<strong>æ˜¯ä¸€éƒ¨åˆ†è€å¹´ä»£ï¼Œè€Œä¸æ˜¯å…¨éƒ¨è€å¹´ä»£</strong>ï¼Œå¯ä»¥é€‰æ‹©å“ªäº›è€å¹´ä»£ region æ”¶é›†ï¼Œå¯¹åƒåœ¾å›æ”¶çš„æ—¶é—´è¿›è¡Œæ§åˆ¶</p>
<p>åœ¨ G1 ä¸­ï¼ŒMixed GC å¯ä»¥é€šè¿‡ <code>-XX:InitiatingHeapOccupancyPercent</code> è®¾ç½®é˜ˆå€¼</p>
</li>
<li>
<p><strong>Full GC</strong>ï¼šå¯¹è±¡å†…å­˜åˆ†é…é€Ÿåº¦è¿‡å¿«ï¼ŒMixed GC æ¥ä¸åŠå›æ”¶ï¼Œå¯¼è‡´è€å¹´ä»£è¢«å¡«æ»¡ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡ Full GCï¼ŒG1 çš„ Full GC ç®—æ³•å°±æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„åƒåœ¾å›æ”¶ï¼Œä¼šå¯¼è‡´å¼‚å¸¸é•¿æ—¶é—´çš„æš‚åœæ—¶é—´ï¼Œéœ€è¦è¿›è¡Œä¸æ–­çš„è°ƒä¼˜ï¼Œå°½å¯èƒ½çš„é¿å… Full GC</p>
<p>äº§ç”Ÿ Full GC çš„åŸå› ï¼š</p>
<ul>
<li>æ™‹å‡æ—¶æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾æ™‹å‡çš„å¯¹è±¡</li>
<li>å¹¶å‘å¤„ç†è¿‡ç¨‹å®Œæˆä¹‹å‰ç©ºé—´è€—å°½ï¼Œæµ®åŠ¨åƒåœ¾</li>
</ul>
</li>
</ul>
<h5 id="ç›¸å…³å‚æ•°">ç›¸å…³å‚æ•°</h5>
<ul>
<li><code>-XX:+UseG1GC</code>ï¼šæ‰‹åŠ¨æŒ‡å®šä½¿ç”¨ G1 åƒåœ¾æ”¶é›†å™¨æ‰§è¡Œå†…å­˜å›æ”¶ä»»åŠ¡</li>
<li><code>-XX:G1HeapRegionSize</code>ï¼šè®¾ç½®æ¯ä¸ª Region çš„å¤§å°ã€‚å€¼æ˜¯ 2 çš„å¹‚ï¼ŒèŒƒå›´æ˜¯ 1MB åˆ° 32MB ä¹‹é—´ï¼Œç›®æ ‡æ˜¯æ ¹æ®æœ€å°çš„ Java å †å¤§å°åˆ’åˆ†å‡ºçº¦ 2048 ä¸ªåŒºåŸŸï¼Œé»˜è®¤æ˜¯å †å†…å­˜çš„ 1/2000</li>
<li><code>-XX:MaxGCPauseMillis</code>ï¼šè®¾ç½®æœŸæœ›è¾¾åˆ°çš„æœ€å¤§ GC åœé¡¿æ—¶é—´æŒ‡æ ‡ï¼ŒJVMä¼šå°½åŠ›å®ç°ï¼Œä½†ä¸ä¿è¯è¾¾åˆ°ï¼Œé»˜è®¤å€¼æ˜¯ 200ms</li>
<li><code>-XX:+ParallelGcThread</code>ï¼šè®¾ç½® STW æ—¶ GC çº¿ç¨‹æ•°çš„å€¼ï¼Œæœ€å¤šè®¾ç½®ä¸º 8</li>
<li><code>-XX:ConcGCThreads</code>ï¼šè®¾ç½®å¹¶å‘æ ‡è®°çº¿ç¨‹æ•°ï¼Œè®¾ç½®ä¸ºå¹¶è¡Œåƒåœ¾å›æ”¶çº¿ç¨‹æ•° ParallelGcThreads çš„1/4å·¦å³</li>
<li><code>-XX:InitiatingHeapoccupancyPercent</code>ï¼šè®¾ç½®è§¦å‘å¹¶å‘ Mixed GC å‘¨æœŸçš„ Java å †å ç”¨ç‡é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤å€¼ï¼Œå°±è§¦å‘ GCï¼Œé»˜è®¤å€¼æ˜¯ 45</li>
<li><code>-XX:+ClassUnloadingWithConcurrentMark</code>ï¼šå¹¶å‘æ ‡è®°ç±»å¸è½½ï¼Œé»˜è®¤å¯ç”¨ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½ç»è¿‡å¹¶å‘æ ‡è®°åï¼Œå°±å¯ä»¥çŸ¥é“å“ªäº›ç±»ä¸å†è¢«ä½¿ç”¨ï¼Œå½“ä¸€ä¸ªç±»åŠ è½½å™¨çš„æ‰€æœ‰ç±»éƒ½ä¸å†ä½¿ç”¨ï¼Œåˆ™å¸è½½å®ƒæ‰€åŠ è½½çš„æ‰€æœ‰ç±»</li>
<li><code>-XX:G1NewSizePercent</code>ï¼šæ–°ç”Ÿä»£å ç”¨æ•´ä¸ªå †å†…å­˜çš„æœ€å°ç™¾åˆ†æ¯”ï¼ˆé»˜è®¤5ï¼…ï¼‰</li>
<li><code>-XX:G1MaxNewSizePercent</code>ï¼šæ–°ç”Ÿä»£å ç”¨æ•´ä¸ªå †å†…å­˜çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼ˆé»˜è®¤60ï¼…ï¼‰</li>
<li><code>-XX:G1ReservePercent=10</code>ï¼šä¿ç•™å†…å­˜åŒºåŸŸï¼Œé˜²æ­¢ to spaceï¼ˆSurvivorä¸­çš„ to åŒºï¼‰æº¢å‡º</li>
</ul>
<h5 id="è°ƒä¼˜">è°ƒä¼˜</h5>
<p>G1 çš„è®¾è®¡åŸåˆ™å°±æ˜¯ç®€åŒ– JVM æ€§èƒ½è°ƒä¼˜ï¼Œåªéœ€è¦ç®€å•çš„ä¸‰æ­¥å³å¯å®Œæˆè°ƒä¼˜ï¼š</p>
<ol>
<li>å¼€å¯ G1 åƒåœ¾æ”¶é›†å™¨</li>
<li>è®¾ç½®å †çš„æœ€å¤§å†…å­˜</li>
<li>è®¾ç½®æœ€å¤§çš„åœé¡¿æ—¶é—´ï¼ˆSTWï¼‰</li>
</ol>
<p>ä¸æ–­è°ƒä¼˜æš‚åœæ—¶é—´æŒ‡æ ‡ï¼š</p>
<ul>
<li><code>XX:MaxGCPauseMillis=x</code> å¯ä»¥è®¾ç½®å¯åŠ¨åº”ç”¨ç¨‹åºæš‚åœçš„æ—¶é—´ï¼ŒG1ä¼šæ ¹æ®è¿™ä¸ªå‚æ•°é€‰æ‹© CSet æ¥æ»¡è¶³å“åº”æ—¶é—´çš„è®¾ç½®</li>
<li>è®¾ç½®åˆ° 100ms æˆ–è€… 200ms éƒ½å¯ä»¥ï¼ˆä¸åŒæƒ…å†µä¸‹ä¼šä¸ä¸€æ ·ï¼‰ï¼Œä½†è®¾ç½®æˆ50mså°±ä¸å¤ªåˆç†</li>
<li>æš‚åœæ—¶é—´è®¾ç½®çš„å¤ªçŸ­ï¼Œå°±ä¼šå¯¼è‡´å‡ºç° G1 è·Ÿä¸ä¸Šåƒåœ¾äº§ç”Ÿçš„é€Ÿåº¦ï¼Œæœ€ç»ˆé€€åŒ–æˆ Full GC</li>
<li>å¯¹è¿™ä¸ªå‚æ•°çš„è°ƒä¼˜æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œé€æ­¥è°ƒæ•´åˆ°æœ€ä½³çŠ¶æ€</li>
</ul>
<p>ä¸è¦è®¾ç½®æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å¤§å°ï¼š</p>
<ul>
<li>é¿å…ä½¿ç”¨ -Xmn æˆ– -XX:NewRatio ç­‰ç›¸å…³é€‰é¡¹æ˜¾å¼è®¾ç½®å¹´è½»ä»£å¤§å°ï¼ŒG1 æ”¶é›†å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šè°ƒæ•´æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å¤§å°ï¼Œä»è€Œè¾¾åˆ°æˆ‘ä»¬ä¸ºæ”¶é›†å™¨è®¾ç½®çš„æš‚åœæ—¶é—´ç›®æ ‡</li>
<li>è®¾ç½®äº†æ–°ç”Ÿä»£å¤§å°ç›¸å½“äºæ”¾å¼ƒäº† G1 çš„è‡ªåŠ¨è°ƒä¼˜ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®æ•´ä¸ªå †å†…å­˜çš„å¤§å°ï¼Œå‰©ä¸‹çš„äº¤ç»™ G1 è‡ªå·±å»åˆ†é…å„ä¸ªä»£çš„å¤§å°</li>
</ul>
<h4 id="ZGC">ZGC</h4>
<p>ZGC æ”¶é›†å™¨æ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©çš„ã€ä½å»¶è¿Ÿçš„åƒåœ¾æ”¶é›†å™¨ï¼ŒåŸºäº Region å†…å­˜å¸ƒå±€çš„ï¼Œä¸è®¾åˆ†ä»£ï¼Œä½¿ç”¨äº†è¯»å±éšœã€æŸ“è‰²æŒ‡é’ˆå’Œå†…å­˜å¤šé‡æ˜ å°„ç­‰æŠ€æœ¯æ¥å®ç°<strong>å¯å¹¶å‘çš„æ ‡è®°å‹ç¼©ç®—æ³•</strong></p>
<ul>
<li>åœ¨ CMS å’Œ G1 ä¸­éƒ½ç”¨åˆ°äº†å†™å±éšœï¼Œè€Œ ZGC ç”¨åˆ°äº†è¯»å±éšœ</li>
<li>æŸ“è‰²æŒ‡é’ˆï¼šç›´æ¥<strong>å°†å°‘é‡é¢å¤–çš„ä¿¡æ¯å­˜å‚¨åœ¨æŒ‡é’ˆä¸Šçš„æŠ€æœ¯</strong>ï¼Œä» 64 ä½çš„æŒ‡é’ˆä¸­æ‹¿é«˜ 4 ä½æ¥æ ‡è¯†å¯¹è±¡æ­¤æ—¶çš„çŠ¶æ€
<ul>
<li>æŸ“è‰²æŒ‡é’ˆå¯ä»¥ä½¿æŸä¸ª Region çš„å­˜æ´»å¯¹è±¡è¢«ç§»èµ°ä¹‹åï¼Œè¿™ä¸ª Region ç«‹å³å°±èƒ½å¤Ÿè¢«é‡Šæ”¾å’Œé‡ç”¨</li>
<li>å¯ä»¥ç›´æ¥ä»æŒ‡é’ˆä¸­çœ‹åˆ°å¼•ç”¨å¯¹è±¡çš„ä¸‰è‰²æ ‡è®°çŠ¶æ€ï¼ˆMarked0ã€Marked1ï¼‰ã€æ˜¯å¦è¿›å…¥äº†é‡åˆ†é…é›†ã€æ˜¯å¦è¢«ç§»åŠ¨è¿‡ï¼ˆRemappedï¼‰ã€æ˜¯å¦åªèƒ½é€šè¿‡ finalize() æ–¹æ³•æ‰èƒ½è¢«è®¿é—®åˆ°ï¼ˆFinalizableï¼‰</li>
<li>å¯ä»¥å¤§å¹…å‡å°‘åœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­å†…å­˜å±éšœçš„ä½¿ç”¨æ•°é‡ï¼Œå†™å±éšœçš„ç›®çš„é€šå¸¸æ˜¯ä¸ºäº†è®°å½•å¯¹è±¡å¼•ç”¨çš„å˜åŠ¨æƒ…å†µï¼Œå¦‚æœå°†è¿™äº›ä¿¡æ¯ç›´æ¥ç»´æŠ¤åœ¨æŒ‡é’ˆä¸­ï¼Œæ˜¾ç„¶å°±å¯ä»¥çœå»ä¸€äº›ä¸“é—¨çš„è®°å½•æ“ä½œ</li>
<li>å¯ä»¥ä½œä¸ºä¸€ç§å¯æ‰©å±•çš„å­˜å‚¨ç»“æ„ç”¨æ¥è®°å½•æ›´å¤šä¸å¯¹è±¡æ ‡è®°ã€é‡å®šä½è¿‡ç¨‹ç›¸å…³çš„æ•°æ®</li>
</ul>
</li>
<li>å†…å­˜å¤šé‡æ˜ å°„ï¼šå¤šä¸ªè™šæ‹Ÿåœ°å€æŒ‡å‘åŒä¸€ä¸ªç‰©ç†åœ°å€</li>
</ul>
<p>å¯å¹¶å‘çš„æ ‡è®°å‹ç¼©ç®—æ³•ï¼šæŸ“è‰²æŒ‡é’ˆæ ‡è¯†å¯¹è±¡æ˜¯å¦è¢«æ ‡è®°æˆ–ç§»åŠ¨ï¼Œè¯»å±éšœä¿è¯åœ¨æ¯æ¬¡åº”ç”¨ç¨‹åºæˆ– GC ç¨‹åºè®¿é—®å¯¹è±¡æ—¶å…ˆæ ¹æ®æŸ“è‰²æŒ‡é’ˆçš„æ ‡è¯†åˆ¤æ–­æ˜¯å¦è¢«ç§»åŠ¨ï¼Œå¦‚æœè¢«ç§»åŠ¨å°±æ ¹æ®è½¬å‘è¡¨è®¿é—®æ–°çš„ç§»åŠ¨å¯¹è±¡ï¼Œ<strong>å¹¶æ›´æ–°å¼•ç”¨</strong>ï¼Œä¸ä¼šåƒ G1 ä¸€æ ·å¿…é¡»ç­‰å¾…åƒåœ¾å›æ”¶å®Œæˆæ‰èƒ½è®¿é—®</p>
<p>ZGC ç›®æ ‡ï¼š</p>
<ul>
<li>åœé¡¿æ—¶é—´ä¸ä¼šè¶…è¿‡ 10ms</li>
<li>åœé¡¿æ—¶é—´ä¸ä¼šéšç€å †çš„å¢å¤§è€Œå¢å¤§ï¼ˆä¸ç®¡å¤šå¤§çš„å †éƒ½èƒ½ä¿æŒåœ¨ 10ms ä»¥ä¸‹ï¼‰</li>
<li>å¯æ”¯æŒå‡ ç™¾ Mï¼Œç”šè‡³å‡  T çš„å †å¤§å°ï¼ˆæœ€å¤§æ”¯æŒ4Tï¼‰</li>
</ul>
<p>ZGC çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥åˆ†ä¸º 4 ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰ï¼š éå†å¯¹è±¡å›¾åšå¯è¾¾æ€§åˆ†æçš„é˜¶æ®µï¼Œä¹Ÿè¦ç»è¿‡åˆå§‹æ ‡è®°å’Œæœ€ç»ˆæ ‡è®°ï¼Œéœ€è¦çŸ­æš‚åœé¡¿</li>
<li>å¹¶å‘é¢„å¤‡é‡åˆ†é…ï¼ˆConcurrent Prepare for Relocateï¼‰ï¼šæ ¹æ®ç‰¹å®šçš„æŸ¥è¯¢æ¡ä»¶ç»Ÿè®¡å¾—å‡ºæœ¬æ¬¡æ”¶é›†è¿‡ç¨‹è¦æ¸…ç†å“ªäº› Regionï¼Œå°†è¿™äº› Region ç»„æˆé‡åˆ†é…é›†ï¼ˆRelocation Setï¼‰</li>
<li>å¹¶å‘é‡åˆ†é…ï¼ˆConcurrent Relocateï¼‰ï¼š é‡åˆ†é…æ˜¯ ZGC æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ ¸å¿ƒé˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹è¦æŠŠé‡åˆ†é…é›†ä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°æ–°çš„ Region ä¸Šï¼Œå¹¶ä¸ºé‡åˆ†é…é›†ä¸­çš„<strong>æ¯ä¸ª Region ç»´æŠ¤ä¸€ä¸ªè½¬å‘è¡¨</strong>ï¼ˆForward Tableï¼‰ï¼Œè®°å½•ä»æ—§åœ°å€åˆ°æ–°åœ°å€çš„è½¬å‘å…³ç³»</li>
<li>å¹¶å‘é‡æ˜ å°„ï¼ˆConcurrent Remapï¼‰ï¼šä¿®æ­£æ•´ä¸ªå †ä¸­æŒ‡å‘é‡åˆ†é…é›†ä¸­æ—§å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ï¼ŒZGC çš„å¹¶å‘æ˜ å°„å¹¶ä¸æ˜¯ä¸€ä¸ªå¿…é¡»è¦ç«‹å³å®Œæˆçš„ä»»åŠ¡ï¼ŒZGC å¾ˆå·§å¦™åœ°æŠŠå¹¶å‘é‡æ˜ å°„é˜¶æ®µè¦åšçš„å·¥ä½œï¼Œåˆå¹¶åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å¾ªç¯ä¸­çš„å¹¶å‘æ ‡è®°é˜¶æ®µé‡Œå»å®Œæˆï¼Œå› ä¸ºéƒ½æ˜¯è¦éå†æ‰€æœ‰å¯¹è±¡ï¼Œè¿™æ ·åˆå¹¶èŠ‚çœäº†ä¸€æ¬¡éå†çš„å¼€é”€</li>
</ul>
<p>ZGC å‡ ä¹åœ¨æ‰€æœ‰åœ°æ–¹å¹¶å‘æ‰§è¡Œçš„ï¼Œé™¤äº†åˆå§‹æ ‡è®°çš„æ˜¯ STW çš„ï¼Œä½†è¿™éƒ¨åˆ†çš„å®é™…æ—¶é—´æ˜¯éå¸¸å°‘çš„ï¼Œæ‰€ä»¥å“åº”é€Ÿåº¦å¿«ï¼Œåœ¨å°½å¯èƒ½å¯¹ååé‡å½±å“ä¸å¤§çš„å‰æä¸‹ï¼Œå®ç°åœ¨ä»»æ„å †å†…å­˜å¤§å°ä¸‹éƒ½å¯ä»¥æŠŠåƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´é™åˆ¶åœ¨åæ¯«ç§’ä»¥å†…çš„ä½å»¶è¿Ÿ</p>
<p>ä¼˜ç‚¹ï¼šé«˜ååé‡ã€ä½å»¶è¿Ÿ</p>
<p>ç¼ºç‚¹ï¼šæµ®åŠ¨åƒåœ¾ï¼Œå½“ ZGC å‡†å¤‡è¦å¯¹ä¸€ä¸ªå¾ˆå¤§çš„å †åšä¸€æ¬¡å®Œæ•´çš„å¹¶å‘æ”¶é›†ï¼Œå…¶å…¨è¿‡ç¨‹è¦æŒç»­ååˆ†é’Ÿä»¥ä¸Šï¼Œç”±äºåº”ç”¨çš„å¯¹è±¡åˆ†é…é€Ÿç‡å¾ˆé«˜ï¼Œå°†åˆ›é€ å¤§é‡çš„æ–°å¯¹è±¡äº§ç”Ÿæµ®åŠ¨åƒåœ¾</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/jimoer/p/13170249.html">https://www.cnblogs.com/jimoer/p/13170249.html</a></p>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>Serial GCã€Parallel GCã€Concurrent Mark Sweep GC è¿™ä¸‰ä¸ª GC  ä¸åŒï¼š</p>
<ul>
<li>æœ€å°åŒ–åœ°ä½¿ç”¨å†…å­˜å’Œå¹¶è¡Œå¼€é”€ï¼Œé€‰ Serial GC</li>
<li>æœ€å¤§åŒ–åº”ç”¨ç¨‹åºçš„ååé‡ï¼Œé€‰ Parallel GC</li>
<li>æœ€å°åŒ– GC çš„ä¸­æ–­æˆ–åœé¡¿æ—¶é—´ï¼Œé€‰ CMS GC</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E6%80%BB%E7%BB%93.png" alt="img"></p>
<h3 id="å†…å­˜æ³„æ¼">å†…å­˜æ³„æ¼</h3>
<h4 id="æ³„éœ²æº¢å‡º">æ³„éœ²æº¢å‡º</h4>
<p>å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰ï¼šæ˜¯æŒ‡ç¨‹åºä¸­å·²åŠ¨æ€åˆ†é…çš„å †å†…å­˜ç”±äºæŸç§åŸå› ç¨‹åºæœªé‡Šæ”¾æˆ–æ— æ³•é‡Šæ”¾ï¼Œé€ æˆç³»ç»Ÿå†…å­˜çš„æµªè´¹ï¼Œå¯¼è‡´ç¨‹åºè¿è¡Œé€Ÿåº¦å‡æ…¢ç”šè‡³ç³»ç»Ÿå´©æºƒç­‰ä¸¥é‡åæœ</p>
<p>å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæœ¬è´¨éƒ½æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¿˜è¢«å¼•ç”¨ã€‚ç”±äºä»£ç çš„å®ç°ä¸åŒå°±ä¼šå‡ºç°å¾ˆå¤šç§å†…å­˜æ³„æ¼é—®é¢˜ï¼Œè®© JVM è¯¯ä»¥ä¸ºæ­¤å¯¹è±¡è¿˜åœ¨å¼•ç”¨ä¸­ï¼Œæ— æ³•å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼</p>
<p>å†…å­˜æº¢å‡ºï¼ˆout of memoryï¼‰æŒ‡çš„æ˜¯ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ä»¥ä½¿ç”¨</p>
<p>å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„å…³ç³»ï¼šå†…å­˜æ³„æ¼çš„è¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆä¼šå¯¼è‡´å†…å­˜æº¢å‡º</p>
<h4 id="å‡ ç§æƒ…å†µ">å‡ ç§æƒ…å†µ</h4>
<h5 id="é™æ€é›†åˆ">é™æ€é›†åˆ</h5>
<p>é™æ€é›†åˆç±»çš„ç”Ÿå‘½å‘¨æœŸä¸ JVM ç¨‹åºä¸€è‡´ï¼Œåˆ™å®¹å™¨ä¸­çš„å¯¹è±¡åœ¨ç¨‹åºç»“æŸä¹‹å‰å°†ä¸èƒ½è¢«é‡Šæ”¾ï¼Œä»è€Œé€ æˆå†…å­˜æ³„æ¼ã€‚åŸå› æ˜¯<strong>é•¿ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡æŒæœ‰çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡çš„å¼•ç”¨</strong>ï¼Œå°½ç®¡çŸ­ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ä¸å†ä½¿ç”¨ï¼Œä½†æ˜¯å› ä¸ºé•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡æŒæœ‰å®ƒçš„å¼•ç”¨è€Œå¯¼è‡´ä¸èƒ½è¢«å›æ”¶</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemoryLeak</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="title class_">List</span> list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">oomTest</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title class_">Object</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();<span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line">        list.<span class="title function_">add</span>(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å•ä¾‹æ¨¡å¼-2">å•ä¾‹æ¨¡å¼</h5>
<p>å•ä¾‹æ¨¡å¼å’Œé™æ€é›†åˆå¯¼è‡´å†…å­˜æ³„éœ²çš„åŸå› ç±»ä¼¼ï¼Œå› ä¸ºå•ä¾‹çš„é™æ€ç‰¹æ€§ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œ JVM çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·é•¿ï¼Œæ‰€ä»¥å¦‚æœå•ä¾‹å¯¹è±¡æŒæœ‰å¤–éƒ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤–éƒ¨å¯¹è±¡ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆå†…å­˜æ³„æ¼</p>
<h5 id="å†…éƒ¨ç±»-2">å†…éƒ¨ç±»</h5>
<p>å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»çš„æƒ…å†µï¼Œå¦‚æœä¸€ä¸ªå¤–éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡è°ƒç”¨æ–¹æ³•è¿”å›äº†ä¸€ä¸ªå†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå³ä½¿é‚£ä¸ªå¤–éƒ¨ç±»å®ä¾‹å¯¹è±¡ä¸å†è¢«ä½¿ç”¨ï¼Œä½†ç”±äºå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ªå¤–éƒ¨ç±»å¯¹è±¡ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼</p>
<h5 id="è¿æ¥ç›¸å…³">è¿æ¥ç›¸å…³</h5>
<p>æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥å’Œ IO è¿æ¥ç­‰ï¼Œå½“ä¸å†ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨ close æ–¹æ³•æ¥é‡Šæ”¾ä¸è¿æ¥ï¼Œåƒåœ¾å›æ”¶å™¨æ‰ä¼šå›æ”¶å¯¹åº”çš„å¯¹è±¡ï¼Œå¦åˆ™å°†ä¼šé€ æˆå¤§é‡çš„å¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼Œä»è€Œå¼•èµ·å†…å­˜æ³„æ¼</p>
<h5 id="ä¸åˆç†åŸŸ">ä¸åˆç†åŸŸ</h5>
<p>å˜é‡ä¸åˆç†çš„ä½œç”¨åŸŸï¼Œä¸€ä¸ªå˜é‡çš„å®šä¹‰çš„ä½œç”¨èŒƒå›´å¤§äºå…¶ä½¿ç”¨èŒƒå›´ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼›å¦‚æœæ²¡æœ‰åŠæ—¶åœ°æŠŠå¯¹è±¡è®¾ç½®ä¸º nullï¼Œä¹Ÿæœ‰å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„å‘ç”Ÿ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsingRandom</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> msg;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">receiveMsg</span>(<span class="params"></span>)&#123;</span><br><span class="line">        msg = <span class="title function_">readFromNet</span>();<span class="comment">// ä»ç½‘ç»œä¸­æ¥å—æ•°æ®ä¿å­˜åˆ° msg ä¸­</span></span><br><span class="line">        <span class="title function_">saveDB</span>(msg);		<span class="comment">// æŠŠ msg ä¿å­˜åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ readFromNet æ–¹æ³•æŠŠæ¥æ”¶æ¶ˆæ¯ä¿å­˜åœ¨ msg ä¸­ï¼Œç„¶åè°ƒç”¨ saveDB æ–¹æ³•æŠŠå†…å®¹ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œæ­¤æ—¶ msg å·²ç»å¯ä»¥è¢«å›æ”¶ï¼Œä½†æ˜¯ msg çš„ç”Ÿå‘½å‘¨æœŸä¸å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒï¼Œé€ æˆ msg ä¸èƒ½å›æ”¶ï¼Œäº§ç”Ÿå†…å­˜æ³„æ¼</p>
<p>è§£å†³ï¼š</p>
<ul>
<li>msg å˜é‡å¯ä»¥æ”¾åœ¨ receiveMsg æ–¹æ³•å†…éƒ¨ï¼Œå½“æ–¹æ³•ä½¿ç”¨å®Œï¼Œmsg çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå°±ç»“æŸï¼Œå°±å¯ä»¥è¢«å›æ”¶äº†</li>
<li>åœ¨ä½¿ç”¨å®Œ msg åï¼ŒæŠŠ msg è®¾ç½®ä¸º nullï¼Œè¿™æ ·åƒåœ¾å›æ”¶å™¨ä¹Ÿä¼šå›æ”¶ msg çš„å†…å­˜ç©ºé—´ã€‚</li>
</ul>
<h5 id="æ”¹å˜å“ˆå¸Œ">æ”¹å˜å“ˆå¸Œ</h5>
<p>å½“ä¸€ä¸ªå¯¹è±¡è¢«å­˜å‚¨è¿› HashSet é›†åˆä¸­ä»¥åï¼Œå°±<strong>ä¸èƒ½ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ä¸­çš„é‚£äº›å‚ä¸è®¡ç®—å“ˆå¸Œå€¼çš„å­—æ®µ</strong>ï¼Œå¦åˆ™å¯¹è±¡ä¿®æ”¹åçš„å“ˆå¸Œå€¼ä¸æœ€åˆå­˜å‚¨è¿› HashSet é›†åˆä¸­æ—¶çš„å“ˆå¸Œå€¼ä¸åŒï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨è¯¥å¯¹è±¡çš„å½“å‰å¼•ç”¨ä½œä¸ºçš„å‚æ•°å» HashSet é›†åˆä¸­æ£€ç´¢å¯¹è±¡è¿”å› falseï¼Œå¯¼è‡´æ— æ³•ä» HashSet é›†åˆä¸­å•ç‹¬åˆ é™¤å½“å‰å¯¹è±¡ï¼Œé€ æˆå†…å­˜æ³„æ¼</p>
<h5 id="ç¼“å­˜æ³„éœ²">ç¼“å­˜æ³„éœ²</h5>
<p>å†…å­˜æ³„æ¼çš„ä¸€ä¸ªå¸¸è§æ¥æºæ˜¯ç¼“å­˜ï¼Œä¸€æ—¦æŠŠå¯¹è±¡å¼•ç”¨æ”¾å…¥åˆ°ç¼“å­˜ä¸­ï¼Œå°±ä¼šå¾ˆå®¹æ˜“è¢«é—å¿˜</p>
<p>ä½¿ç”¨ WeakHashMap ä»£è¡¨ç¼“å­˜ï¼Œå½“é™¤äº†è‡ªèº«æœ‰å¯¹ key çš„å¼•ç”¨å¤–æ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼Œmap ä¼šè‡ªåŠ¨ä¸¢å¼ƒæ­¤å€¼</p>
<h4 id="æ¡ˆä¾‹åˆ†æ">æ¡ˆä¾‹åˆ†æ</h4>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] elements;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Stack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        elements = <span class="keyword">new</span> Object[DEFAULT_INITIAL_CAPACITY];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">push</span><span class="params">(Object e)</span> </span>&#123; <span class="comment">//å…¥æ ˆ</span></span><br><span class="line">        <span class="built_in">ensureCapacity</span>();</span><br><span class="line">        elements[size++] = e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">pop</span><span class="params">()</span> </span>&#123; <span class="comment">//å‡ºæ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">EmptyStackException</span>();</span><br><span class="line">        <span class="keyword">return</span> elements[--size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="type">void</span> <span class="title">ensureCapacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (elements.length == size)</span><br><span class="line">            elements = Arrays.<span class="built_in">copyOf</span>(elements, <span class="number">2</span> * size + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºå¹¶æ²¡æœ‰æ˜æ˜¾é”™è¯¯ï¼Œä½† pop å‡½æ•°å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼Œå› ä¸º pop å‡½æ•°åªæ˜¯æŠŠæ ˆé¡¶ç´¢å¼•ä¸‹ç§»ä¸€ä½ï¼Œå¹¶æ²¡æœ‰æŠŠä¸Šä¸€ä¸ªå‡ºæ ˆç´¢å¼•å¤„çš„å¼•ç”¨ç½®ç©ºï¼Œå¯¼è‡´<strong>æ ˆæ•°ç»„ä¸€ç›´å¼ºå¼•ç”¨ç€å·²ç»å‡ºæ ˆçš„å¯¹è±¡</strong></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">Object</span> <span class="title function_">pop</span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new </span><span class="class title_">EmptyStackException</span>();</span><br><span class="line">    <span class="built_in">Object</span> result = elements[--<span class="built_in">size</span>];</span><br><span class="line">    elements[<span class="built_in">size</span>] = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç±»åŠ è½½">ç±»åŠ è½½</h2>
<h3 id="å¯¹è±¡è®¿å­˜">å¯¹è±¡è®¿å­˜</h3>
<h4 id="å­˜å‚¨ç»“æ„-2">å­˜å‚¨ç»“æ„</h4>
<p>ä¸€ä¸ª Java å¯¹è±¡å†…å­˜ä¸­å­˜å‚¨ä¸ºä¸‰éƒ¨åˆ†ï¼šå¯¹è±¡å¤´ï¼ˆHeaderï¼‰ã€å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰å’Œå¯¹é½å¡«å…… ï¼ˆPaddingï¼‰</p>
<p>å¯¹è±¡å¤´ï¼š</p>
<ul>
<li>
<p>æ™®é€šå¯¹è±¡ï¼šåˆ†ä¸ºä¸¤éƒ¨åˆ†</p>
<ul>
<li>
<p><strong>Mark Word</strong>ï¼šç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œ å¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ç­‰ç­‰</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hash</span>(<span class="number">25</span>) + age(<span class="number">4</span>) + lock(<span class="number">3</span>) = <span class="number">32</span>bit					#<span class="number">32</span>ä½ç³»ç»Ÿ</span><br><span class="line"><span class="attribute">unused</span>(<span class="number">25</span>+<span class="number">1</span>) + hash(<span class="number">31</span>) + age(<span class="number">4</span>) + lock(<span class="number">3</span>) = <span class="number">64</span>bit	#<span class="number">64</span>ä½ç³»ç»Ÿ</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Klass Word</strong>ï¼šç±»å‹æŒ‡é’ˆï¼Œ<strong>æŒ‡å‘è¯¥å¯¹è±¡çš„ Class ç±»å¯¹è±¡çš„æŒ‡é’ˆ</strong>ï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ï¼›åœ¨ 64 ä½ç³»ç»Ÿä¸­ï¼Œå¼€å¯æŒ‡é’ˆå‹ç¼©ï¼ˆ-XX:+UseCompressedOopsï¼‰æˆ–è€… JVM å †çš„æœ€å¤§å€¼å°äº 32Gï¼Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿæ˜¯ 4byteï¼Œå¦åˆ™æ˜¯ 8byteï¼ˆå°±æ˜¯ <strong>Java ä¸­çš„ä¸€ä¸ªå¼•ç”¨çš„å¤§å°</strong>ï¼‰</p>
</li>
</ul>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string">-----------------------------------------------------</span>|</span><br><span class="line">|<span class="string"> 				  Object Header (64 bits) 			  </span>|</span><br><span class="line">|<span class="string">---------------------------</span>|<span class="string">-------------------------</span>|</span><br><span class="line">|<span class="string"> 	 Mark Word (32 bits)	</span>|<span class="string">  Klass Word (32 bits)   </span>|</span><br><span class="line">|<span class="string">---------------------------</span>|<span class="string">-------------------------</span>|</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ•°ç»„å¯¹è±¡ï¼šå¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£åœ¨å¯¹è±¡å¤´ä¸­è¿˜æœ‰ä¸€å—æ•°æ®ç”¨äºè®°å½•æ•°ç»„é•¿åº¦ï¼ˆ12 å­—èŠ‚ï¼‰</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string">-------------------------------------------------------------------------------</span>|</span><br><span class="line">|<span class="string"> 						  Object Header (96 bits) 							    </span>|</span><br><span class="line">|<span class="string">-----------------------</span>|<span class="string">-----------------------------</span>|<span class="string">-------------------------</span>|</span><br><span class="line">|<span class="string">  Mark Word(32bits)    </span>|<span class="string"> 	  Klass Word(32bits) 	  </span>|<span class="string">   array length(32bits)  </span>|</span><br><span class="line">|<span class="string">-----------------------</span>|<span class="string">-----------------------------</span>|<span class="string">-------------------------</span>|</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å®ä¾‹æ•°æ®ï¼šå®ä¾‹æ•°æ®éƒ¨åˆ†æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿæ˜¯åœ¨ç¨‹åºä»£ç ä¸­æ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ï¼Œæ— è®ºæ˜¯ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œè¿˜æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„ï¼Œéƒ½éœ€è¦è®°å½•èµ·æ¥</p>
<p>å¯¹é½å¡«å……ï¼šPadding èµ·å ä½ç¬¦çš„ä½œç”¨ã€‚64 ä½ç³»ç»Ÿï¼Œç”±äº HotSpot VM çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚<strong>å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€</strong>ï¼Œå°±æ˜¯å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ï¼Œè€Œå¯¹è±¡å¤´éƒ¨åˆ†æ­£å¥½æ˜¯ 8 å­—èŠ‚çš„å€æ•°ï¼ˆ1 å€æˆ–è€… 2 å€ï¼‰ï¼Œå› æ­¤å½“å¯¹è±¡å®ä¾‹æ•°æ®éƒ¨åˆ†æ²¡æœ‰å¯¹é½æ—¶ï¼Œå°±éœ€è¦é€šè¿‡å¯¹é½å¡«å……æ¥è¡¥å…¨</p>
<p>32 ä½ç³»ç»Ÿï¼š</p>
<ul>
<li>
<p>ä¸€ä¸ª int åœ¨ java ä¸­å æ® 4byteï¼Œæ‰€ä»¥ Integer çš„å¤§å°ä¸ºï¼š</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="built_in">int</span> value;</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦è¡¥ä½4byte</span></span><br><span class="line"><span class="attribute">4</span>(Mark Word) + <span class="number">4</span>(Klass Word) + <span class="number">4</span>(data) + <span class="number">4</span>(Padding) = <span class="number">16</span>byte</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>int[] arr = new int[10]</code></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”±äºéœ€è¦8ä½å¯¹é½ï¼Œæ‰€ä»¥æœ€ç»ˆå¤§å°ä¸º56byte</span></span><br><span class="line"><span class="attribute">4</span>(Mark Word) + <span class="number">4</span>(Klass Word) + <span class="number">4</span>(length) + <span class="number">4</span>*<span class="number">10</span>(<span class="number">10</span>ä¸ªintå¤§å°) + <span class="number">4</span>(Padding) = <span class="number">56</span>sbyte</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="å®é™…å¤§å°">å®é™…å¤§å°</h4>
<p>æµ…å †ï¼ˆShallow Heapï¼‰ï¼š<strong>å¯¹è±¡æœ¬èº«å ç”¨çš„å†…å­˜ï¼Œä¸åŒ…æ‹¬å†…éƒ¨å¼•ç”¨å¯¹è±¡çš„å¤§å°</strong>ï¼Œ32 ä½ç³»ç»Ÿä¸­ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å  4 ä¸ªå­—èŠ‚ï¼Œæ¯ä¸ªå¯¹è±¡å¤´å ç”¨ 8 ä¸ªå­—èŠ‚ï¼Œæ ¹æ®å †å¿«ç…§æ ¼å¼ä¸åŒï¼Œå¯¹è±¡çš„å¤§å°ä¼šåŒ 8 å­—èŠ‚è¿›è¡Œå¯¹é½</p>
<p>JDK7 ä¸­çš„ Stringï¼š2ä¸ª int å€¼å…±å  8 å­—èŠ‚ï¼Œvalue å¯¹è±¡å¼•ç”¨å ç”¨ 4 å­—èŠ‚ï¼Œå¯¹è±¡å¤´ 8 å­—èŠ‚ï¼Œå¯¹é½åå  24 å­—èŠ‚ï¼Œä¸º String å¯¹è±¡çš„æµ…å †å¤§å°ï¼Œä¸ value å®é™…å–å€¼æ— å…³ï¼Œæ— è®ºå­—ç¬¦ä¸²é•¿åº¦å¦‚ä½•ï¼Œæµ…å †å¤§å°å§‹ç»ˆæ˜¯ 24 å­—èŠ‚</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">char</span> value[];</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> hash;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> hash32;</span><br></pre></td></tr></table></figure>
<p>ä¿ç•™é›†ï¼ˆRetained Setï¼‰ï¼šå¯¹è±¡ A çš„ä¿ç•™é›†æŒ‡å½“å¯¹è±¡ A è¢«åƒåœ¾å›æ”¶åï¼Œå¯ä»¥è¢«é‡Šæ”¾çš„æ‰€æœ‰çš„å¯¹è±¡é›†åˆï¼ˆåŒ…æ‹¬ A æœ¬èº«ï¼‰ï¼Œæ‰€ä»¥å¯¹è±¡ A çš„ä¿ç•™é›†å°±æ˜¯åªèƒ½é€šè¿‡å¯¹è±¡ A è¢«ç›´æ¥æˆ–é—´æ¥è®¿é—®åˆ°çš„æ‰€æœ‰å¯¹è±¡çš„é›†åˆï¼Œå°±æ˜¯ä»…è¢«å¯¹è±¡ A æ‰€æŒæœ‰çš„å¯¹è±¡çš„é›†åˆ</p>
<p>æ·±å †ï¼ˆRetained Heapï¼‰ï¼šæŒ‡å¯¹è±¡çš„ä¿ç•™é›†ä¸­æ‰€æœ‰çš„å¯¹è±¡çš„æµ…å †å¤§å°ä¹‹å’Œï¼Œä¸€ä¸ªå¯¹è±¡çš„æ·±å †æŒ‡åªèƒ½é€šè¿‡è¯¥å¯¹è±¡è®¿é—®åˆ°çš„ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰æ‰€æœ‰å¯¹è±¡çš„æµ…å †ä¹‹å’Œï¼Œå³å¯¹è±¡è¢«å›æ”¶åï¼Œå¯ä»¥é‡Šæ”¾çš„çœŸå®ç©ºé—´</p>
<p>å¯¹è±¡çš„å®é™…å¤§å°ï¼šä¸€ä¸ªå¯¹è±¡æ‰€èƒ½è§¦åŠçš„æ‰€æœ‰å¯¹è±¡çš„æµ…å †å¤§å°ä¹‹å’Œï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ„ä¹‰ä¸Šæˆ‘ä»¬è¯´çš„å¯¹è±¡å¤§å°</p>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªç®€å•çš„å¯¹è±¡å¼•ç”¨å…³ç³»å›¾ï¼Œå¯¹è±¡ A å¼•ç”¨äº† C å’Œ Dï¼Œå¯¹è±¡ B å¼•ç”¨äº† C å’Œ Eã€‚é‚£ä¹ˆå¯¹è±¡ A çš„æµ…å †å¤§å°åªæ˜¯ A æœ¬èº«ï¼Œ<strong>A çš„å®é™…å¤§å°ä¸º Aã€Cã€D ä¸‰è€…ä¹‹å’Œ</strong>ï¼ŒA çš„æ·±å †å¤§å°ä¸º A ä¸ D ä¹‹å’Œï¼Œç”±äºå¯¹è±¡ C è¿˜å¯ä»¥é€šè¿‡å¯¹è±¡ B è®¿é—®åˆ° Cï¼Œå› æ­¤ C ä¸åœ¨å¯¹è±¡ A çš„æ·±å †èŒƒå›´å†…</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%9E%E9%99%85%E5%A4%A7%E5%B0%8F.png" alt="img"></p>
<p>å†…å­˜åˆ†æå·¥å…· MAT æä¾›äº†ä¸€ç§å«æ”¯é…æ ‘çš„å¯¹è±¡å›¾ï¼Œä½“ç°äº†å¯¹è±¡å®ä¾‹é—´çš„æ”¯é…å…³ç³»</p>
<p>åŸºæœ¬æ€§è´¨ï¼š</p>
<ul>
<li>å¯¹è±¡ A çš„å­æ ‘ï¼ˆæ‰€æœ‰è¢«å¯¹è±¡ A æ”¯é…çš„å¯¹è±¡é›†åˆï¼‰è¡¨ç¤ºå¯¹è±¡ A çš„ä¿ç•™é›†ï¼ˆretained setï¼‰ï¼Œå³æ·±å †</li>
<li>å¦‚æœå¯¹è±¡ A æ”¯é…å¯¹è±¡ Bï¼Œé‚£ä¹ˆå¯¹è±¡ A çš„ç›´æ¥æ”¯é…è€…ä¹Ÿæ”¯é…å¯¹è±¡ B</li>
<li>æ”¯é…æ ‘çš„è¾¹ä¸å¯¹è±¡å¼•ç”¨å›¾çš„è¾¹ä¸ç›´æ¥å¯¹åº”</li>
</ul>
<p>å·¦å›¾è¡¨ç¤ºå¯¹è±¡å¼•ç”¨å›¾ï¼Œå³å›¾è¡¨ç¤ºå·¦å›¾æ‰€å¯¹åº”çš„æ”¯é…æ ‘ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%94%AF%E9%85%8D%E6%A0%91.png" alt="img"></p>
<p>æ¯”å¦‚ï¼šå¯¹è±¡ F ä¸å¯¹è±¡ D ç›¸äº’å¼•ç”¨ï¼Œå› ä¸ºåˆ°å¯¹è±¡ F çš„æ‰€æœ‰è·¯å¾„å¿…ç„¶ç»è¿‡å¯¹è±¡ Dï¼Œå› æ­¤å¯¹è±¡ D æ˜¯å¯¹è±¡ F çš„ç›´æ¥æ”¯é…è€…</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.yuque.com/u21195183/jvm/nkq31c">https://www.yuque.com/u21195183/jvm/nkq31c</a></p>
<h4 id="èŠ‚çº¦å†…å­˜">èŠ‚çº¦å†…å­˜</h4>
<ul>
<li>
<p>å°½é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹</p>
</li>
<li>
<p>æ»¡è¶³å®¹é‡å‰æä¸‹ï¼Œå°½é‡ç”¨å°å­—æ®µ</p>
</li>
<li>
<p>å°½é‡ç”¨æ•°ç»„ï¼Œå°‘ç”¨é›†åˆï¼Œæ•°ç»„ä¸­æ˜¯å¯ä»¥ä½¿ç”¨åŸºæœ¬ç±»å‹çš„ï¼Œä½†æ˜¯é›†åˆä¸­åªèƒ½æ”¾åŒ…è£…ç±»å‹ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨é›†åˆï¼Œæ¨èæ¯”è¾ƒèŠ‚çº¦å†…å­˜çš„é›†åˆå·¥å…·ï¼šfastutil</p>
<p>ä¸€ä¸ª ArrayList é›†åˆï¼Œå¦‚æœé‡Œé¢æ”¾äº† 10 ä¸ªæ•°å­—ï¼Œå ç”¨å¤šå°‘å†…å­˜ï¼š</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="built_in">Object</span>[] elementData;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="built_in">size</span>;</span><br></pre></td></tr></table></figure>
<p>Mark Word å  4byteï¼ŒKlass Word å  4byteï¼Œä¸€ä¸ª int å­—æ®µå  4byteï¼ŒelementData æ•°ç»„å  12byteï¼Œæ•°ç»„ä¸­ 10 ä¸ª Integer å¯¹è±¡å  10Ã—16ï¼Œæ‰€ä»¥æ•´ä¸ªé›†åˆç©ºé—´å¤§å°ä¸º 184byteï¼ˆæ·±å †ï¼‰</p>
</li>
<li>
<p>æ—¶é—´ç”¨ long/int è¡¨ç¤ºï¼Œä¸ç”¨ Date æˆ–è€… String</p>
</li>
</ul>
<h4 id="å¯¹è±¡è®¿é—®">å¯¹è±¡è®¿é—®</h4>
<p>JVM æ˜¯é€šè¿‡<strong>æ ˆå¸§ä¸­çš„å¯¹è±¡å¼•ç”¨</strong>è®¿é—®åˆ°å…¶å†…éƒ¨çš„å¯¹è±¡å®ä¾‹ï¼š</p>
<ul>
<li>
<p>å¥æŸ„è®¿é—®ï¼šJava å †ä¸­ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreference ä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®å’Œç±»å‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯</p>
<p>ä¼˜ç‚¹ï¼šreference ä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨ï¼ˆåƒåœ¾æ”¶é›†ï¼‰æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œ reference æœ¬èº«ä¸éœ€è¦è¢«ä¿®æ”¹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE-%E5%8F%A5%E6%9F%84%E8%AE%BF%E9%97%AE.png" alt="img"></p>
</li>
<li>
<p>ç›´æ¥æŒ‡é’ˆï¼ˆHotSpot é‡‡ç”¨ï¼‰ï¼šJava å †å¯¹è±¡çš„å¸ƒå±€å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œreference ä¸­ç›´æ¥å­˜å‚¨çš„å¯¹è±¡åœ°å€</p>
<p>ä¼˜ç‚¹ï¼šé€Ÿåº¦æ›´å¿«ï¼Œ<strong>èŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€</strong></p>
<p>ç¼ºç‚¹ï¼šå¯¹è±¡è¢«ç§»åŠ¨æ—¶ï¼ˆå¦‚è¿›è¡Œ GC åçš„å†…å­˜é‡æ–°æ’åˆ—ï¼‰ï¼Œå¯¹è±¡çš„ reference ä¹Ÿéœ€è¦åŒæ­¥æ›´æ–°</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE-%E7%9B%B4%E6%8E%A5%E6%8C%87%E9%92%88.png" alt="img"></p>
</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/afraidToForget/p/12584866.html">https://www.cnblogs.com/afraidToForget/p/12584866.html</a></p>
<h3 id="å¯¹è±¡åˆ›å»º">å¯¹è±¡åˆ›å»º</h3>
<h4 id="ç”Ÿå‘½å‘¨æœŸ-2">ç”Ÿå‘½å‘¨æœŸ</h4>
<p>åœ¨ Java ä¸­ï¼Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>åˆ›å»ºé˜¶æ®µ (Created)ï¼š</li>
<li>åº”ç”¨é˜¶æ®µ (In Use)ï¼šå¯¹è±¡è‡³å°‘è¢«ä¸€ä¸ªå¼ºå¼•ç”¨æŒæœ‰ç€</li>
<li>ä¸å¯è§é˜¶æ®µ (Invisible)ï¼šç¨‹åºçš„æ‰§è¡Œå·²ç»è¶…å‡ºäº†è¯¥å¯¹è±¡çš„ä½œç”¨åŸŸï¼Œä¸å†æŒæœ‰è¯¥å¯¹è±¡çš„ä»»ä½•å¼ºå¼•ç”¨</li>
<li>ä¸å¯è¾¾é˜¶æ®µ (Unreachable)ï¼šè¯¥å¯¹è±¡ä¸å†è¢«ä»»ä½•å¼ºå¼•ç”¨æ‰€æŒæœ‰ï¼ŒåŒ…æ‹¬ GC Root çš„å¼ºå¼•ç”¨</li>
<li>æ”¶é›†é˜¶æ®µ (Collected)ï¼šåƒåœ¾å›æ”¶å™¨å¯¹è¯¥å¯¹è±¡çš„å†…å­˜ç©ºé—´é‡æ–°åˆ†é…åšå¥½å‡†å¤‡ï¼Œè¯¥å¯¹è±¡å¦‚æœé‡å†™äº† finalize() æ–¹æ³•ï¼Œåˆ™ä¼šå»æ‰§è¡Œè¯¥æ–¹æ³•</li>
<li>ç»ˆç»“é˜¶æ®µ (Finalized)ï¼šç­‰å¾…åƒåœ¾å›æ”¶å™¨å¯¹è¯¥å¯¹è±¡ç©ºé—´è¿›è¡Œå›æ”¶ï¼Œå½“å¯¹è±¡æ‰§è¡Œå®Œ finalize() æ–¹æ³•åä»ç„¶å¤„äºä¸å¯è¾¾çŠ¶æ€æ—¶è¿›å…¥è¯¥é˜¶æ®µ</li>
<li>å¯¹è±¡ç©ºé—´é‡åˆ†é…é˜¶æ®µ (De-allocated)ï¼šåƒåœ¾å›æ”¶å™¨å¯¹è¯¥å¯¹è±¡çš„æ‰€å ç”¨çš„å†…å­˜ç©ºé—´è¿›è¡Œå›æ”¶æˆ–è€…å†åˆ†é…</li>
</ol>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/sodino/article/details/38387049">https://blog.csdn.net/sodino/article/details/38387049</a></p>
<h4 id="åˆ›å»ºæ—¶æœº">åˆ›å»ºæ—¶æœº</h4>
<p>ç±»åœ¨ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–åŠ è½½ä¸€æ¬¡ï¼Œåç»­å®ä¾‹åŒ–ä¸å†åŠ è½½ï¼Œå¼•ç”¨ç¬¬ä¸€æ¬¡åŠ è½½çš„ç±»</p>
<p>Java å¯¹è±¡åˆ›å»ºæ—¶æœºï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨ new å…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼šç”±æ‰§è¡Œç±»å®ä¾‹åˆ›å»ºè¡¨è¾¾å¼è€Œå¼•èµ·çš„å¯¹è±¡åˆ›å»º</p>
</li>
<li>
<p>ä½¿ç”¨ Class ç±»çš„ newInstance æ–¹æ³•ï¼ˆåå°„æœºåˆ¶ï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨ Constructor ç±»çš„ newInstance æ–¹æ³•ï¼ˆåå°„æœºåˆ¶ï¼‰</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> throws Exception </span>&#123;</span><br><span class="line">        Constructor&lt;Student&gt; c = Student.<span class="keyword">class</span>.<span class="built_in">getConstructor</span>(Integer.<span class="keyword">class</span>);</span><br><span class="line">        Student stu = c.<span class="built_in">newInstance</span>(<span class="number">123</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ newInstance æ–¹æ³•çš„è¿™ä¸¤ç§æ–¹å¼åˆ›å»ºå¯¹è±¡ä½¿ç”¨çš„å°±æ˜¯ Java çš„åå°„æœºåˆ¶ï¼Œäº‹å®ä¸Š Class çš„ newInstance æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„ä¹Ÿæ˜¯ Constructor çš„ newInstance æ–¹æ³•</p>
</li>
<li>
<p>ä½¿ç”¨ Clone æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼šç”¨ clone æ–¹æ³•åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ä¸­å¹¶ä¸ä¼šè°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°ï¼Œè¦æƒ³ä½¿ç”¨ clone æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¿…é¡»å…ˆå®ç° Cloneable æ¥å£å¹¶å®ç°å…¶å®šä¹‰çš„ clone æ–¹æ³•</p>
</li>
<li>
<p>ä½¿ç”¨ï¼ˆåï¼‰åºåˆ—åŒ–æœºåˆ¶åˆ›å»ºå¯¹è±¡ï¼šå½“ååºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒJVM ä¼šåˆ›å»ºä¸€ä¸ª<strong>å•ç‹¬çš„å¯¹è±¡</strong>ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒJVM å¹¶ä¸ä¼šè°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°ï¼Œä¸ºäº†ååºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦è®©ç±»å®ç° Serializable æ¥å£</p>
</li>
</ol>
<p>ä» Java è™šæ‹Ÿæœºå±‚é¢çœ‹ï¼Œé™¤äº†ä½¿ç”¨ new å…³é”®å­—åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å¤–ï¼Œå…¶ä»–æ–¹å¼å…¨éƒ¨éƒ½æ˜¯é€šè¿‡è½¬å˜ä¸º invokevirtual æŒ‡ä»¤ç›´æ¥åˆ›å»ºå¯¹è±¡çš„</p>
<h4 id="åˆ›å»ºè¿‡ç¨‹">åˆ›å»ºè¿‡ç¨‹</h4>
<p>åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼š</p>
<ol>
<li>
<p>åˆ¤æ–­å¯¹è±¡å¯¹åº”çš„ç±»æ˜¯å¦åŠ è½½ã€é“¾æ¥ã€åˆå§‹åŒ–</p>
</li>
<li>
<p>ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼šæŒ‡é’ˆç¢°æ’ã€ç©ºé—²é“¾è¡¨ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œè™šæ‹Ÿæœºå°±ä¼šä¸ºå…¶åˆ†é…å†…å­˜æ¥å­˜æ”¾å¯¹è±¡çš„å®ä¾‹å˜é‡åŠå…¶ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„å®ä¾‹å˜é‡ï¼Œå³ä½¿ä»<strong>éšè—å˜é‡</strong>ä¹Ÿä¼šè¢«åˆ†é…ç©ºé—´ï¼ˆç»§æ‰¿éƒ¨åˆ†è§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šéšè—ï¼‰</p>
</li>
<li>
<p>å¤„ç†å¹¶å‘å®‰å…¨é—®é¢˜ï¼š</p>
<ul>
<li>é‡‡ç”¨ CAS é…ä¸Šè‡ªæ—‹ä¿è¯æ›´æ–°çš„åŸå­æ€§</li>
<li>æ¯ä¸ªçº¿ç¨‹é¢„å…ˆåˆ†é…ä¸€å— TLAB</li>
</ul>
</li>
<li>
<p>åˆå§‹åŒ–åˆ†é…çš„ç©ºé—´ï¼šè™šæ‹Ÿæœºå°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ï¼Œä¿è¯å¯¹è±¡å®ä¾‹å­—æ®µåœ¨ä¸èµ‹å€¼æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼</p>
</li>
<li>
<p>è®¾ç½®å¯¹è±¡çš„å¯¹è±¡å¤´ï¼šå°†å¯¹è±¡çš„æ‰€å±ç±»ï¼ˆç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼‰ã€å¯¹è±¡çš„ HashCodeã€å¯¹è±¡çš„ GC ä¿¡æ¯ã€é”ä¿¡æ¯ç­‰æ•°æ®å­˜å‚¨åœ¨å¯¹è±¡å¤´ä¸­</p>
</li>
<li>
<p>æ‰§è¡Œ init æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ï¼šå®ä¾‹å˜é‡åˆå§‹åŒ–ã€å®ä¾‹ä»£ç å—åˆå§‹åŒ– ã€æ„é€ å‡½æ•°åˆå§‹åŒ–</p>
<ul>
<li>
<p>å®ä¾‹å˜é‡åˆå§‹åŒ–ä¸å®ä¾‹ä»£ç å—åˆå§‹åŒ–ï¼š</p>
<p>å¯¹å®ä¾‹å˜é‡ç›´æ¥èµ‹å€¼æˆ–è€…ä½¿ç”¨å®ä¾‹ä»£ç å—èµ‹å€¼ï¼Œ<strong>ç¼–è¯‘å™¨ä¼šå°†å…¶ä¸­çš„ä»£ç æ”¾åˆ°ç±»çš„æ„é€ å‡½æ•°ä¸­å»</strong>ï¼Œå¹¶ä¸”è¿™äº›ä»£ç ä¼šè¢«æ”¾åœ¨å¯¹è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¯­å¥ä¹‹åï¼ˆJava è¦æ±‚æ„é€ å‡½æ•°çš„ç¬¬ä¸€æ¡è¯­å¥å¿…é¡»æ˜¯è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¯­å¥ï¼‰ï¼Œæ„é€ å‡½æ•°æœ¬èº«çš„ä»£ç ä¹‹å‰</p>
</li>
<li>
<p>æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼š</p>
<p><strong>Java è¦æ±‚åœ¨å®ä¾‹åŒ–ç±»ä¹‹å‰ï¼Œå¿…é¡»å…ˆå®ä¾‹åŒ–å…¶è¶…ç±»ï¼Œä»¥ä¿è¯æ‰€åˆ›å»ºå®ä¾‹çš„å®Œæ•´æ€§</strong>ï¼Œåœ¨å‡†å¤‡å®ä¾‹åŒ–ä¸€ä¸ªç±»çš„å¯¹è±¡å‰ï¼Œé¦–å…ˆå‡†å¤‡å®ä¾‹åŒ–è¯¥ç±»çš„çˆ¶ç±»ï¼Œå¦‚æœè¯¥ç±»çš„çˆ¶ç±»è¿˜æœ‰çˆ¶ç±»ï¼Œé‚£ä¹ˆå‡†å¤‡å®ä¾‹åŒ–è¯¥ç±»çš„çˆ¶ç±»çš„çˆ¶ç±»ï¼Œä¾æ¬¡é€’å½’ç›´åˆ°é€’å½’åˆ° Object ç±»ã€‚ç„¶åä» Object ç±»ä¾æ¬¡å¯¹ä»¥ä¸‹å„ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œåˆå§‹åŒ–çˆ¶ç±»ä¸­çš„å˜é‡å’Œæ‰§è¡Œæ„é€ å‡½æ•°</p>
</li>
</ul>
</li>
</ol>
<h4 id="æ‰¿ä¸Šå¯ä¸‹">æ‰¿ä¸Šå¯ä¸‹</h4>
<ol>
<li>
<p>ä¸€ä¸ªå®ä¾‹å˜é‡åœ¨å¯¹è±¡åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­ä¼šè¢«èµ‹å€¼å‡ æ¬¡ï¼Ÿä¸€ä¸ªå®ä¾‹å˜é‡æœ€å¤šå¯ä»¥è¢«åˆå§‹åŒ– 4 æ¬¡</p>
<p>JVM åœ¨ä¸ºä¸€ä¸ªå¯¹è±¡åˆ†é…å®Œå†…å­˜ä¹‹åï¼Œä¼šç»™æ¯ä¸€ä¸ªå®ä¾‹å˜é‡èµ‹äºˆé»˜è®¤å€¼ï¼Œè¿™ä¸ªå®ä¾‹å˜é‡è¢«ç¬¬ä¸€æ¬¡èµ‹å€¼ï¼›åœ¨å£°æ˜å®ä¾‹å˜é‡çš„åŒæ—¶å¯¹å…¶è¿›è¡Œäº†èµ‹å€¼æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹å˜é‡å°±è¢«ç¬¬äºŒæ¬¡èµ‹å€¼ï¼›åœ¨å®ä¾‹ä»£ç å—ä¸­åˆå¯¹å˜é‡åšäº†åˆå§‹åŒ–æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹å˜é‡å°±è¢«ç¬¬ä¸‰æ¬¡èµ‹å€¼ï¼›ï¼›åœ¨æ„é€ å‡½æ•°ä¸­ä¹Ÿå¯¹å˜é‡åšäº†åˆå§‹åŒ–æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹å˜é‡å°±è¢«ç¬¬å››æ¬¡èµ‹å€¼</p>
</li>
<li>
<p>ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹çš„å¼‚åŒï¼Ÿ</p>
<p>ç±»çš„åˆå§‹åŒ–æ˜¯æŒ‡ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„åˆå§‹åŒ–é˜¶æ®µå¯¹ç±»å˜é‡æŒ‰ç…§ä»£ç è¿›è¡Œèµ‹å€¼çš„è¿‡ç¨‹ï¼›ç±»çš„å®ä¾‹åŒ–æ˜¯æŒ‡åœ¨ç±»å®Œå…¨åŠ è½½åˆ°å†…å­˜ä¸­ååˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼ˆç±»çš„å®ä¾‹åŒ–è§¦å‘äº†ç±»çš„åˆå§‹åŒ–ï¼Œå…ˆåˆå§‹åŒ–æ‰èƒ½å®ä¾‹åŒ–ï¼‰</p>
</li>
<li>
<p>å‡å¦‚ä¸€ä¸ªç±»è¿˜æœªåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹æ—¶ï¼Œå…·ä½“è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿï¼ˆ<strong>ç»å…¸æ¡ˆä¾‹</strong>ï¼‰</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">StaticTest</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        staticFunction();<span class="comment">//è°ƒç”¨é™æ€æ–¹æ³•ï¼Œè§¦å‘åˆå§‹åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> StaticTest st = <span class="keyword">new</span> StaticTest();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;   <span class="comment">//é™æ€ä»£ç å—</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;       <span class="comment">// å®ä¾‹ä»£ç å—</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    StaticTest() &#123;    <span class="comment">// å®ä¾‹æ„é€ å™¨</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot;,b=&quot;</span> + b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticFunction</span>()</span> &#123;   <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> a = <span class="number">110</span>;    		<span class="comment">// å®ä¾‹å˜é‡</span></span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">int</span> b = <span class="number">112</span>;     <span class="comment">// é™æ€å˜é‡</span></span><br><span class="line">&#125;<span class="comment">/* Output: </span></span><br><span class="line"><span class="comment">        2</span></span><br><span class="line"><span class="comment">        3</span></span><br><span class="line"><span class="comment">        a=110,b=0</span></span><br><span class="line"><span class="comment">        1</span></span><br><span class="line"><span class="comment">        4</span></span><br><span class="line"><span class="comment"> */</span><span class="comment">//:~</span></span><br></pre></td></tr></table></figure>
<p><code>static StaticTest st = new StaticTest();</code>ï¼š</p>
<ul>
<li>å®ä¾‹å®ä¾‹åŒ–ä¸ä¸€å®šè¦åœ¨ç±»åˆå§‹åŒ–ç»“æŸä¹‹åæ‰å¼€å§‹</li>
<li>åœ¨åŒä¸€ä¸ªç±»åŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»å‹åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚æ‰€ä»¥ä¸€æ—¦å¼€å§‹åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œæ— è®ºæ˜¯å¦å®Œæˆåç»­éƒ½ä¸ä¼šå†é‡æ–°è§¦å‘è¯¥ç±»å‹çš„åˆå§‹åŒ–é˜¶æ®µäº†ï¼ˆåªè€ƒè™‘åœ¨åŒä¸€ä¸ªç±»åŠ è½½å™¨ä¸‹çš„æƒ…å½¢ï¼‰ã€‚å› æ­¤åœ¨å®ä¾‹åŒ–ä¸Šè¿°ç¨‹åºä¸­çš„ st å˜é‡æ—¶ï¼Œ<strong>å®é™…ä¸Šæ˜¯æŠŠå®ä¾‹åŒ–åµŒå…¥åˆ°äº†é™æ€åˆå§‹åŒ–æµç¨‹ä¸­ï¼Œå¹¶ä¸”åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼ŒåµŒå…¥åˆ°äº†é™æ€åˆå§‹åŒ–çš„èµ·å§‹ä½ç½®</strong>ï¼Œè¿™å°±å¯¼è‡´äº†å®ä¾‹åˆå§‹åŒ–å®Œå…¨å‘ç”Ÿåœ¨é™æ€åˆå§‹åŒ–ä¹‹å‰ï¼Œè¿™ä¹Ÿæ˜¯å¯¼è‡´ a ä¸º 110ï¼Œb ä¸º 0 çš„åŸå› </li>
</ul>
<p>ä»£ç ç­‰ä»·äºï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticTest</span> &#123;</span><br><span class="line">    &lt;clinit&gt;()&#123;</span><br><span class="line">        a = <span class="number">110</span>;    <span class="comment">// å®ä¾‹å˜é‡</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;2&quot;</span>);	<span class="comment">// å®ä¾‹ä»£ç å—</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;3&quot;</span>);	<span class="comment">// å®ä¾‹æ„é€ å™¨ä¸­ä»£ç çš„æ‰§è¡Œ</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot;,b=&quot;</span> + b);  <span class="comment">// å®ä¾‹æ„é€ å™¨ä¸­ä»£ç çš„æ‰§è¡Œ</span></span><br><span class="line">        ç±»å˜é‡stè¢«åˆå§‹åŒ–</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;1&quot;</span>);	<span class="comment">//é™æ€ä»£ç å—</span></span><br><span class="line">        ç±»å˜é‡bè¢«åˆå§‹åŒ–ä¸º<span class="number">112</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="åŠ è½½è¿‡ç¨‹">åŠ è½½è¿‡ç¨‹</h3>
<h4 id="ç”Ÿå‘½å‘¨æœŸ-3">ç”Ÿå‘½å‘¨æœŸ</h4>
<p>ç±»æ˜¯åœ¨è¿è¡ŒæœŸé—´<strong>ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶åŠ¨æ€åŠ è½½</strong>çš„ï¼ˆä¸ä½¿ç”¨ä¸åŠ è½½ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ç±»ï¼Œå› ä¸ºä¸€æ¬¡æ€§åŠ è½½ä¼šå ç”¨å¾ˆå¤šçš„å†…å­˜ï¼ŒåŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºä¸€å—æˆä¸ºæ–¹æ³•åŒºçš„å†…å­˜ç©ºé—´</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="img"></p>
<p>åŒ…æ‹¬ 7 ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>åŠ è½½ï¼ˆLoadingï¼‰</li>
<li>é“¾æ¥ï¼šéªŒè¯ï¼ˆVerificationï¼‰ã€å‡†å¤‡ï¼ˆPreparationï¼‰ã€è§£æï¼ˆResolutionï¼‰</li>
<li>åˆå§‹åŒ–ï¼ˆInitializationï¼‰</li>
<li>ä½¿ç”¨ï¼ˆUsingï¼‰</li>
<li>å¸è½½ï¼ˆUnloadingï¼‰</li>
</ul>
<h4 id="åŠ è½½é˜¶æ®µ">åŠ è½½é˜¶æ®µ</h4>
<p>åŠ è½½æ˜¯ç±»åŠ è½½çš„å…¶ä¸­ä¸€ä¸ªé˜¶æ®µï¼Œæ³¨æ„ä¸è¦æ··æ·†</p>
<p>åŠ è½½è¿‡ç¨‹å®Œæˆä»¥ä¸‹ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>é€šè¿‡ç±»çš„å®Œå…¨é™å®šåç§°è·å–å®šä¹‰è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼ˆäºŒè¿›åˆ¶å­—èŠ‚ç ï¼‰</li>
<li>å°†è¯¥å­—èŠ‚æµè¡¨ç¤ºçš„é™æ€å­˜å‚¨ç»“æ„è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶å­˜å‚¨ç»“æ„ï¼ˆJava ç±»æ¨¡å‹ï¼‰</li>
<li><strong>å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è‡³æ–¹æ³•åŒºåï¼Œåœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„ Class å¯¹è±¡ï¼Œä½œä¸ºè¯¥ç±»åœ¨æ–¹æ³•åŒºä¸­çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£</strong></li>
</ul>
<p>å…¶ä¸­äºŒè¿›åˆ¶å­—èŠ‚æµå¯ä»¥ä»ä»¥ä¸‹æ–¹å¼ä¸­è·å–ï¼š</p>
<ul>
<li>ä» ZIP åŒ…è¯»å–ï¼Œæˆä¸º JARã€EARã€WAR æ ¼å¼çš„åŸºç¡€</li>
<li>ä»ç½‘ç»œä¸­è·å–ï¼Œæœ€å…¸å‹çš„åº”ç”¨æ˜¯ Applet</li>
<li>ç”±å…¶ä»–æ–‡ä»¶ç”Ÿæˆï¼Œä¾‹å¦‚ç”± JSP æ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„ Class ç±»</li>
<li>è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œä¾‹å¦‚åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œåœ¨ java.lang.reflect.Proxy ä½¿ç”¨ ProxyGenerator.generateProxyClass ç”Ÿæˆå­—èŠ‚ç </li>
</ul>
<p>æ–¹æ³•åŒºå†…éƒ¨é‡‡ç”¨ C++ çš„ instanceKlass æè¿° Java ç±»çš„æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li><code>_java_mirror</code> å³ Java çš„ç±»é•œåƒï¼Œä¾‹å¦‚å¯¹ String æ¥è¯´å°±æ˜¯ String.classï¼Œä½œç”¨æ˜¯æŠŠ class æš´éœ²ç»™ Java ä½¿ç”¨</li>
<li><code>_super</code> å³çˆ¶ç±»ã€<code>_fields</code> å³æˆå‘˜å˜é‡ã€<code>_methods</code> å³æ–¹æ³•ã€<code>_constants</code> å³å¸¸é‡æ± ã€<code>_class_loader</code> å³ç±»åŠ è½½å™¨ã€<code>_vtable</code> <strong>è™šæ–¹æ³•è¡¨</strong>ã€<code>_itable</code> æ¥å£æ–¹æ³•è¡¨</li>
</ul>
<p>åŠ è½½è¿‡ç¨‹ï¼š</p>
<ul>
<li>å¦‚æœè¿™ä¸ªç±»è¿˜æœ‰çˆ¶ç±»æ²¡æœ‰åŠ è½½ï¼Œå…ˆåŠ è½½çˆ¶ç±»</li>
<li>åŠ è½½å’Œé“¾æ¥å¯èƒ½æ˜¯äº¤æ›¿è¿è¡Œçš„</li>
<li>Class å¯¹è±¡å’Œ _java_mirror ç›¸äº’æŒæœ‰å¯¹æ–¹çš„åœ°å€ï¼Œå †ä¸­å¯¹è±¡é€šè¿‡ instanceKlass å’Œå…ƒç©ºé—´è¿›è¡Œäº¤äº’</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-%E5%8A%A0%E8%BD%BD.png" alt="img"></p>
<p>åˆ›å»ºæ•°ç»„ç±»æœ‰äº›ç‰¹æ®Šï¼Œå› ä¸ºæ•°ç»„ç±»æœ¬èº«å¹¶ä¸æ˜¯ç”±ç±»åŠ è½½å™¨è´Ÿè´£åˆ›å»ºï¼Œè€Œæ˜¯ç”± JVM åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦è€Œç›´æ¥åˆ›å»ºçš„ï¼Œä½†æ•°ç»„çš„å…ƒç´ ç±»å‹ä»ç„¶éœ€è¦ä¾é ç±»åŠ è½½å™¨å»åˆ›å»ºï¼Œåˆ›å»ºæ•°ç»„ç±»çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>å¦‚æœæ•°ç»„çš„å…ƒç´ ç±»å‹æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆéµå¾ªå®šä¹‰çš„åŠ è½½è¿‡ç¨‹é€’å½’åŠ è½½å’Œåˆ›å»ºæ•°ç»„çš„å…ƒç´ ç±»å‹</li>
<li>JVM ä½¿ç”¨æŒ‡å®šçš„å…ƒç´ ç±»å‹å’Œæ•°ç»„ç»´åº¦æ¥åˆ›å»ºæ–°çš„æ•°ç»„ç±»</li>
<li><strong>åŸºæœ¬æ•°æ®ç±»å‹ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½</strong></li>
</ul>
<h4 id="é“¾æ¥é˜¶æ®µ">é“¾æ¥é˜¶æ®µ</h4>
<h5 id="éªŒè¯">éªŒè¯</h5>
<p>ç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯æ˜¯å¦ç¬¦åˆ JVM è§„èŒƒï¼Œä¿è¯è¢«åŠ è½½ç±»çš„æ­£ç¡®æ€§ï¼Œä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨</p>
<p>ä¸»è¦åŒ…æ‹¬<strong>å››ç§éªŒè¯</strong>ï¼š</p>
<ul>
<li>æ–‡ä»¶æ ¼å¼éªŒè¯</li>
<li>è¯­ä¹‰æ£€æŸ¥ï¼Œä½†å‡¡åœ¨è¯­ä¹‰ä¸Šä¸ç¬¦åˆè§„èŒƒçš„ï¼Œè™šæ‹Ÿæœºä¸ä¼šç»™äºˆéªŒè¯é€šè¿‡
<ul>
<li>æ˜¯å¦æ‰€æœ‰çš„ç±»éƒ½æœ‰çˆ¶ç±»çš„å­˜åœ¨ï¼ˆé™¤äº† Object å¤–ï¼Œå…¶ä»–ç±»éƒ½åº”è¯¥æœ‰çˆ¶ç±»ï¼‰</li>
<li>æ˜¯å¦ä¸€äº›è¢«å®šä¹‰ä¸º final çš„æ–¹æ³•æˆ–è€…ç±»è¢«é‡å†™æˆ–ç»§æ‰¿äº†</li>
<li>éæŠ½è±¡ç±»æ˜¯å¦å®ç°äº†æ‰€æœ‰æŠ½è±¡æ–¹æ³•æˆ–è€…æ¥å£æ–¹æ³•</li>
<li>æ˜¯å¦å­˜åœ¨ä¸å…¼å®¹çš„æ–¹æ³•</li>
</ul>
</li>
<li>å­—èŠ‚ç éªŒè¯ï¼Œè¯•å›¾é€šè¿‡å¯¹å­—èŠ‚ç æµçš„åˆ†æï¼Œåˆ¤æ–­å­—èŠ‚ç æ˜¯å¦å¯ä»¥è¢«æ­£ç¡®åœ°æ‰§è¡Œ
<ul>
<li>åœ¨å­—èŠ‚ç çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦ä¼šè·³è½¬åˆ°ä¸€æ¡ä¸å­˜åœ¨çš„æŒ‡ä»¤</li>
<li>å‡½æ•°çš„è°ƒç”¨æ˜¯å¦ä¼ é€’äº†æ­£ç¡®ç±»å‹çš„å‚æ•°</li>
<li>å˜é‡çš„èµ‹å€¼æ˜¯ä¸æ˜¯ç»™äº†æ­£ç¡®çš„æ•°æ®ç±»å‹</li>
<li>æ ˆæ˜ å°„å¸§ï¼ˆStackMapTableï¼‰åœ¨è¿™ä¸ªé˜¶æ®µç”¨äºæ£€æµ‹åœ¨ç‰¹å®šçš„å­—èŠ‚ç å¤„ï¼Œå…¶å±€éƒ¨å˜é‡è¡¨å’Œæ“ä½œæ•°æ ˆæ˜¯å¦æœ‰ç€æ­£ç¡®çš„æ•°æ®ç±»å‹</li>
</ul>
</li>
<li>ç¬¦å·å¼•ç”¨éªŒè¯ï¼ŒClass æ–‡ä»¶åœ¨å…¶å¸¸é‡æ± ä¼šé€šè¿‡å­—ç¬¦ä¸²è®°å½•å°†è¦ä½¿ç”¨çš„å…¶ä»–ç±»æˆ–è€…æ–¹æ³•</li>
</ul>
<h5 id="å‡†å¤‡">å‡†å¤‡</h5>
<p>å‡†å¤‡é˜¶æ®µä¸º<strong>é™æ€å˜é‡ï¼ˆç±»å˜é‡ï¼‰åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼</strong>ï¼Œä½¿ç”¨çš„æ˜¯æ–¹æ³•åŒºçš„å†…å­˜ï¼š</p>
<p>è¯´æ˜ï¼šå®ä¾‹å˜é‡ä¸ä¼šåœ¨è¿™é˜¶æ®µåˆ†é…å†…å­˜ï¼Œå®ƒä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·è¢«åˆ†é…åœ¨å †ä¸­ï¼Œç±»åŠ è½½å‘ç”Ÿåœ¨æ‰€æœ‰å®ä¾‹åŒ–æ“ä½œä¹‹å‰ï¼Œå¹¶ä¸”ç±»åŠ è½½åªè¿›è¡Œä¸€æ¬¡ï¼Œå®ä¾‹åŒ–å¯ä»¥è¿›è¡Œå¤šæ¬¡</p>
<p>ç±»å˜é‡åˆå§‹åŒ–ï¼š</p>
<ul>
<li>static å˜é‡åˆ†é…ç©ºé—´å’Œèµ‹å€¼æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼š<strong>åˆ†é…ç©ºé—´åœ¨å‡†å¤‡é˜¶æ®µå®Œæˆï¼Œèµ‹å€¼åœ¨åˆå§‹åŒ–é˜¶æ®µå®Œæˆ</strong></li>
<li>å¦‚æœ static å˜é‡æ˜¯ final çš„åŸºæœ¬ç±»å‹ä»¥åŠå­—ç¬¦ä¸²å¸¸é‡ï¼Œé‚£ä¹ˆç¼–è¯‘é˜¶æ®µå€¼ï¼ˆæ–¹æ³•åŒºï¼‰å°±ç¡®å®šäº†ï¼Œå‡†å¤‡é˜¶æ®µä¼šæ˜¾å¼åˆå§‹åŒ–</li>
<li>å¦‚æœ static å˜é‡æ˜¯ final çš„ï¼Œä½†å±äºå¼•ç”¨ç±»å‹æˆ–è€…æ„é€ å™¨æ–¹æ³•çš„å­—ç¬¦ä¸²ï¼Œèµ‹å€¼åœ¨åˆå§‹åŒ–é˜¶æ®µå®Œæˆ</li>
</ul>
<p>å®ä¾‹ï¼š</p>
<ul>
<li>
<p>åˆå§‹å€¼ä¸€èˆ¬ä¸º 0 å€¼ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç±»å˜é‡ value è¢«åˆå§‹åŒ–ä¸º 0 è€Œä¸æ˜¯ 123ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> value = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¸¸é‡ value è¢«åˆå§‹åŒ–ä¸º 123 è€Œä¸æ˜¯ 0ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">static</span> <span class="keyword">final</span> <span class="type">int</span> value = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Java å¹¶ä¸æ”¯æŒ boolean ç±»å‹ï¼Œå¯¹äº boolean ç±»å‹ï¼Œå†…éƒ¨å®ç°æ˜¯ intï¼Œç”±äº int çš„é»˜è®¤å€¼æ˜¯ 0ï¼Œæ•… boolean çš„é»˜è®¤å€¼å°±æ˜¯ false</p>
</li>
</ul>
<h5 id="è§£æ-2">è§£æ</h5>
<p>å°†å¸¸é‡æ± ä¸­ç±»ã€æ¥å£ã€å­—æ®µã€æ–¹æ³•çš„<strong>ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨</strong>ï¼ˆå†…å­˜åœ°å€ï¼‰çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>ç¬¦å·å¼•ç”¨ï¼šä¸€ç»„ç¬¦å·æ¥æè¿°ç›®æ ‡ï¼Œå¯ä»¥æ˜¯ä»»ä½•å­—é¢é‡ï¼Œå±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼Œå¦‚ï¼šåŒ…æ‹¬ç±»å’Œæ¥å£çš„å…¨é™åã€å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ã€æ–¹æ³•çš„åç§°å’Œ<strong>æ–¹æ³•æè¿°ç¬¦</strong>ï¼ˆå› ä¸ºç±»è¿˜æ²¡æœ‰åŠ è½½å®Œï¼Œå¾ˆå¤šæ–¹æ³•æ˜¯æ‰¾ä¸åˆ°çš„ï¼‰</li>
<li>ç›´æ¥å¼•ç”¨ï¼šç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–ä¸€ä¸ªé—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ï¼Œå¦‚æœæœ‰äº†ç›´æ¥å¼•ç”¨ï¼Œé‚£è¯´æ˜å¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»å­˜åœ¨äºå†…å­˜ä¹‹ä¸­</li>
</ul>
<p>ä¾‹å¦‚ï¼šåœ¨ <code>com.demo.Solution</code> ç±»ä¸­å¼•ç”¨äº† <code>com.test.Quest</code>ï¼ŒæŠŠ <code>com.test.Quest</code> ä½œä¸ºç¬¦å·å¼•ç”¨å­˜è¿›ç±»å¸¸é‡æ± ï¼Œåœ¨ç±»åŠ è½½å®Œåï¼Œ<strong>ç”¨è¿™ä¸ªç¬¦å·å¼•ç”¨å»æ–¹æ³•åŒºæ‰¾è¿™ä¸ªç±»çš„å†…å­˜åœ°å€</strong></p>
<p>è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ç­‰</p>
<ul>
<li>åœ¨ç±»åŠ è½½é˜¶æ®µè§£æçš„æ˜¯éè™šæ–¹æ³•ï¼Œé™æ€ç»‘å®š</li>
<li>ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åå†å¼€å§‹è§£æï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒ Java çš„<strong>åŠ¨æ€ç»‘å®š</strong></li>
<li>é€šè¿‡è§£ææ“ä½œï¼Œç¬¦å·å¼•ç”¨å°±å¯ä»¥è½¬å˜ä¸ºç›®æ ‡æ–¹æ³•åœ¨ç±»çš„è™šæ–¹æ³•è¡¨ä¸­çš„ä½ç½®ï¼Œä»è€Œä½¿å¾—æ–¹æ³•è¢«æˆåŠŸè°ƒç”¨</li>
</ul>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Load2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) throws Exception&#123;</span><br><span class="line">    ClassLoader classloader = Load2.<span class="keyword">class</span>.getClassLoader();</span><br><span class="line">    <span class="comment">// cloadClass åŠ è½½ç±»æ–¹æ³•ä¸ä¼šå¯¼è‡´ç±»çš„è§£æå’Œåˆå§‹åŒ–ï¼Œä¹Ÿä¸ä¼šåŠ è½½D</span></span><br><span class="line">    Class&lt;?&gt; c = classloader.loadClass(<span class="string">&quot;cn.jvm.t3.load.C&quot;</span>);</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// new C();ä¼šå¯¼è‡´ç±»çš„è§£æå’Œåˆå§‹åŒ–ï¼Œä»è€Œè§£æåˆå§‹åŒ–D</span></span><br><span class="line">    System.<span class="keyword">in</span>.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">	D d = <span class="keyword">new</span> D();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–-2">åˆå§‹åŒ–</h4>
<h5 id="ä»‹ç»-3">ä»‹ç»</h5>
<p>åˆå§‹åŒ–é˜¶æ®µæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„ Java ç¨‹åºä»£ç ï¼Œåœ¨å‡†å¤‡é˜¶æ®µï¼Œç±»å˜é‡å·²ç»èµ‹è¿‡ä¸€æ¬¡ç³»ç»Ÿè¦æ±‚çš„åˆå§‹å€¼ï¼›åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œé€šè¿‡ç¨‹åºåˆ¶å®šçš„è®¡åˆ’å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶å®ƒèµ„æºï¼Œæ‰§è¡Œ <clinit></p>
<p>åœ¨ç¼–è¯‘ç”Ÿæˆ class æ–‡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸¤ä¸ªæ–¹æ³•åŠ äº class æ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªæ˜¯ç±»çš„åˆå§‹åŒ–æ–¹æ³• clinitï¼Œå¦ä¸€ä¸ªæ˜¯å®ä¾‹çš„åˆå§‹åŒ–æ–¹æ³• init</p>
<p>ç±»æ„é€ å™¨ <clinit>() ä¸å®ä¾‹æ„é€ å™¨ <init>() ä¸åŒï¼Œå®ƒä¸éœ€è¦ç¨‹åºå‘˜è¿›è¡Œæ˜¾å¼è°ƒç”¨ï¼Œåœ¨ä¸€ä¸ªç±»çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œç±»æ„é€ å™¨æœ€å¤šè¢«è™šæ‹Ÿæœº<strong>è°ƒç”¨ä¸€æ¬¡</strong>ï¼Œè€Œå®ä¾‹æ„é€ å™¨åˆ™ä¼šè¢«è™šæ‹Ÿæœºè°ƒç”¨å¤šæ¬¡ï¼Œåªè¦ç¨‹åºå‘˜åˆ›å»ºå¯¹è±¡</p>
<p>ç±»åœ¨ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–åŠ è½½ä¸€æ¬¡ï¼ŒæŠŠ class è¯»å…¥å†…å­˜ï¼Œåç»­å®ä¾‹åŒ–ä¸å†åŠ è½½ï¼Œå¼•ç”¨ç¬¬ä¸€æ¬¡åŠ è½½çš„ç±»</p>
<h5 id="clinit">clinit</h5>
<p><clinit>()ï¼šç±»æ„é€ å™¨ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­<strong>æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—</strong>ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„</p>
<p>ä½œç”¨ï¼šæ˜¯åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œé™æ€å˜é‡åˆå§‹åŒ–å’Œæ‰§è¡Œé™æ€ä»£ç å—</p>
<ul>
<li>å¦‚æœç±»ä¸­æ²¡æœ‰é™æ€å˜é‡æˆ–é™æ€ä»£ç å—ï¼Œé‚£ä¹ˆ clinit æ–¹æ³•å°†ä¸ä¼šè¢«ç”Ÿæˆ</li>
<li>clinit æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨æ‰§è¡Œ clinit æ–¹æ³•æ—¶ï¼Œå¿…é¡»å…ˆæ‰§è¡Œçˆ¶ç±»çš„clinitæ–¹æ³•</li>
<li>static å˜é‡çš„èµ‹å€¼æ“ä½œå’Œé™æ€ä»£ç å—çš„åˆå¹¶é¡ºåºç”±æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºå†³å®š</li>
<li>static ä¸åŠ  final çš„å˜é‡éƒ½åœ¨åˆå§‹åŒ–ç¯èŠ‚èµ‹å€¼</li>
</ul>
<p><strong>çº¿ç¨‹å®‰å…¨</strong>é—®é¢˜ï¼š</p>
<ul>
<li>è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„ <clinit>() æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¢«æ­£ç¡®çš„åŠ é”å’ŒåŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªç±»çš„ <clinit>() æ–¹æ³•ï¼Œå…¶å®ƒçº¿ç¨‹éƒ½é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ <clinit>() æ–¹æ³•å®Œæ¯•</li>
<li>å¦‚æœåœ¨ä¸€ä¸ªç±»çš„ <clinit>() æ–¹æ³•ä¸­æœ‰è€—æ—¶çš„æ“ä½œï¼Œå°±å¯èƒ½é€ æˆå¤šä¸ªçº¿ç¨‹é˜»å¡ï¼Œåœ¨å®é™…è¿‡ç¨‹ä¸­æ­¤ç§é˜»å¡å¾ˆéšè”½</li>
</ul>
<p>ç‰¹åˆ«æ³¨æ„ï¼šé™æ€è¯­å¥å—åªèƒ½è®¿é—®åˆ°å®šä¹‰åœ¨å®ƒä¹‹å‰çš„ç±»å˜é‡ï¼Œå®šä¹‰åœ¨å®ƒä¹‹åçš„ç±»å˜é‡åªèƒ½èµ‹å€¼ï¼Œä¸èƒ½è®¿é—®</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//i = 0;                // ç»™å˜é‡èµ‹å€¼å¯ä»¥æ­£å¸¸ç¼–è¯‘é€šè¿‡</span></span><br><span class="line">        System.out.<span class="keyword">print</span>(i);  	<span class="comment">// è¿™å¥ç¼–è¯‘å™¨ä¼šæç¤ºâ€œéæ³•å‘å‰å¼•ç”¨â€</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">int</span> i = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥å£ä¸­ä¸å¯ä»¥ä½¿ç”¨é™æ€è¯­å¥å—ï¼Œä½†ä»ç„¶æœ‰ç±»å˜é‡åˆå§‹åŒ–çš„èµ‹å€¼æ“ä½œï¼Œå› æ­¤æ¥å£ä¸ç±»ä¸€æ ·éƒ½ä¼šç”Ÿæˆ <clinit>() æ–¹æ³•ï¼Œä¸¤è€…ä¸åŒçš„æ˜¯ï¼š</p>
<ul>
<li>åœ¨åˆå§‹åŒ–ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¹¶ä¸ä¼šå…ˆåˆå§‹åŒ–å®ƒçš„çˆ¶æ¥å£ï¼Œæ‰€ä»¥æ‰§è¡Œæ¥å£çš„ <clinit>() æ–¹æ³•ä¸éœ€è¦å…ˆæ‰§è¡Œçˆ¶æ¥å£çš„ <clinit>() æ–¹æ³•</li>
<li>åœ¨åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œä¸ä¼šå…ˆåˆå§‹åŒ–æ‰€å®ç°çš„æ¥å£ï¼Œæ‰€ä»¥æ¥å£çš„å®ç°ç±»åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šæ‰§è¡Œæ¥å£çš„ <clinit>() æ–¹æ³•</li>
<li>åªæœ‰å½“çˆ¶æ¥å£ä¸­å®šä¹‰çš„å˜é‡ä½¿ç”¨æ—¶ï¼Œçˆ¶æ¥å£æ‰ä¼šåˆå§‹åŒ–</li>
</ul>
<h5 id="æ—¶æœº">æ—¶æœº</h5>
<p>ç±»çš„åˆå§‹åŒ–æ˜¯æ‡’æƒ°çš„ï¼Œåªæœ‰åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶æ‰ä¼šè¢«è£…è½½ï¼ŒJVM ä¸ä¼šæ— æ¡ä»¶åœ°è£…è½½ Class ç±»å‹ï¼ŒJava è™šæ‹Ÿæœºè§„å®šï¼Œä¸€ä¸ªç±»æˆ–æ¥å£åœ¨åˆæ¬¡ä½¿ç”¨å‰ï¼Œå¿…é¡»è¦è¿›è¡Œåˆå§‹åŒ–</p>
<p><strong>ä¸»åŠ¨å¼•ç”¨</strong>ï¼šè™šæ‹Ÿæœºè§„èŒƒä¸­å¹¶æ²¡æœ‰å¼ºåˆ¶çº¦æŸä½•æ—¶è¿›è¡ŒåŠ è½½ï¼Œä½†æ˜¯è§„èŒƒä¸¥æ ¼è§„å®šäº†æœ‰ä¸”åªæœ‰ä¸‹åˆ—æƒ…å†µå¿…é¡»å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ˆåŠ è½½ã€éªŒè¯ã€å‡†å¤‡éƒ½ä¼šå‘ç”Ÿï¼‰ï¼š</p>
<ul>
<li>å½“åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œä½¿ç”¨ new å…³é”®å­—ï¼Œæˆ–è€…é€šè¿‡åå°„ã€å…‹éš†ã€ååºåˆ—åŒ–ï¼ˆå‰æ–‡è®²è¿°çš„å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼‰</li>
<li>å½“è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•æˆ–è®¿é—®é™æ€å­—æ®µæ—¶ï¼Œé‡åˆ° getstaticã€putstaticã€invokestatic è¿™ä¸‰æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¦‚æœç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™å¿…é¡»å…ˆè§¦å‘å…¶åˆå§‹åŒ–
<ul>
<li>getstaticï¼šç¨‹åºè®¿é—®ç±»çš„é™æ€å˜é‡ï¼ˆä¸æ˜¯é™æ€å¸¸é‡ï¼Œå¸¸é‡ä¼šè¢«åŠ è½½åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ï¼‰</li>
<li>putstaticï¼šç¨‹åºç»™ç±»çš„é™æ€å˜é‡èµ‹å€¼</li>
<li>invokestatic ï¼šè°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•</li>
</ul>
</li>
<li>ä½¿ç”¨ java.lang.reflect åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼Œå¦‚æœç±»æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–</li>
<li>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ï¼Œä½†è¿™æ¡è§„åˆ™å¹¶<strong>ä¸é€‚ç”¨äºæ¥å£</strong></li>
<li>å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»ï¼ˆåŒ…å« main() æ–¹æ³•çš„é‚£ä¸ªç±»ï¼‰ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªä¸»ç±»</li>
<li>MethodHandle å’Œ VarHandle å¯ä»¥çœ‹ä½œæ˜¯è½»é‡çº§çš„åå°„è°ƒç”¨æœºåˆ¶ï¼Œè€Œè¦æƒ³ä½¿ç”¨è¿™ä¸¤ä¸ªè°ƒç”¨ï¼Œ å°±å¿…é¡»å…ˆä½¿ç”¨ findStaticVarHandle æ¥åˆå§‹åŒ–è¦è°ƒç”¨çš„ç±»</li>
<li>è¡¥å……ï¼šå½“ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº† JDK8 æ–°åŠ å…¥çš„é»˜è®¤æ–¹æ³•ï¼ˆè¢« default å…³é”®å­—ä¿®é¥°çš„æ¥å£æ–¹æ³•ï¼‰æ—¶ï¼Œå¦‚æœæœ‰è¿™ä¸ªæ¥å£çš„å®ç°ç±»å‘ç”Ÿäº†åˆå§‹åŒ–ï¼Œé‚£è¯¥æ¥å£è¦åœ¨å…¶ä¹‹å‰è¢«åˆå§‹åŒ–</li>
</ul>
<p><strong>è¢«åŠ¨å¼•ç”¨</strong>ï¼šæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹å¼éƒ½ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨</p>
<ul>
<li>é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–ï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–</li>
<li>é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–ã€‚è¯¥è¿‡ç¨‹ä¼šå¯¹æ•°ç»„ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œæ•°ç»„ç±»æ˜¯ä¸€ä¸ªç”±è™šæ‹Ÿæœºè‡ªåŠ¨ç”Ÿæˆçš„ã€ç›´æ¥ç»§æ‰¿è‡ª Object çš„å­ç±»ï¼Œå…¶ä¸­åŒ…å«äº†æ•°ç»„çš„å±æ€§å’Œæ–¹æ³•</li>
<li>å¸¸é‡ï¼ˆfinal ä¿®é¥°ï¼‰åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰å¸¸é‡çš„ç±»ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–</li>
<li>è°ƒç”¨ ClassLoader ç±»çš„ loadClass() æ–¹æ³•åŠ è½½ä¸€ä¸ªç±»ï¼Œå¹¶ä¸æ˜¯å¯¹ç±»çš„ä¸»åŠ¨ä½¿ç”¨ï¼Œä¸ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–</li>
</ul>
<h5 id="init">init</h5>
<p>init æŒ‡çš„æ˜¯å®ä¾‹æ„é€ å™¨ï¼Œä¸»è¦ä½œç”¨æ˜¯åœ¨ç±»å®ä¾‹åŒ–è¿‡ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå†…å®¹åŒ…æ‹¬æˆå‘˜å˜é‡åˆå§‹åŒ–å’Œä»£ç å—çš„æ‰§è¡Œ</p>
<p>å®ä¾‹åŒ–å³è°ƒç”¨ <init>()V ï¼Œè™šæ‹Ÿæœºä¼šä¿è¯è¿™ä¸ªç±»çš„æ„é€ æ–¹æ³•çš„çº¿ç¨‹å®‰å…¨ï¼Œå…ˆä¸ºå®ä¾‹å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå†æ‰§è¡Œèµ‹é»˜è®¤å€¼ï¼Œç„¶åæ ¹æ®æºç ä¸­çš„é¡ºåºæ‰§è¡Œèµ‹åˆå€¼æˆ–ä»£ç å—ï¼Œæ²¡æœ‰æˆå‘˜å˜é‡åˆå§‹åŒ–å’Œä»£ç å—åˆ™ä¸ä¼šæ‰§è¡Œ</p>
<p>ç±»å®ä¾‹åŒ–è¿‡ç¨‹ï¼š<strong>çˆ¶ç±»çš„ç±»æ„é€ å™¨() -&gt; å­ç±»çš„ç±»æ„é€ å™¨() -&gt; çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œå®ä¾‹ä»£ç å— -&gt; çˆ¶ç±»çš„æ„é€ å‡½æ•° -&gt; å­ç±»çš„æˆå‘˜å˜é‡å’Œå®ä¾‹ä»£ç å— -&gt; å­ç±»çš„æ„é€ å‡½æ•°</strong></p>
<p>new å…³é”®å­—ä¼šåˆ›å»ºå¯¹è±¡å¹¶å¤åˆ¶ dup ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œä¸€ä¸ªè°ƒç”¨ <init> æ–¹æ³•ï¼Œå¦ä¸€ä¸ªç”¨æ¥èµ‹å€¼ç»™æ¥æ”¶è€…</p>
<h4 id="å¸è½½é˜¶æ®µ">å¸è½½é˜¶æ®µ</h4>
<p>æ—¶æœºï¼šæ‰§è¡Œäº† System.exit() æ–¹æ³•ï¼Œç¨‹åºæ­£å¸¸æ‰§è¡Œç»“æŸï¼Œç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°äº†å¼‚å¸¸æˆ–é”™è¯¯è€Œå¼‚å¸¸ç»ˆæ­¢ï¼Œç”±äºæ“ä½œç³»ç»Ÿå‡ºç°é”™è¯¯è€Œå¯¼è‡´Java è™šæ‹Ÿæœºè¿›ç¨‹ç»ˆæ­¢</p>
<p>å¸è½½ç±»å³è¯¥ç±»çš„ <strong>Class å¯¹è±¡è¢« GC</strong>ï¼Œå¸è½½ç±»éœ€è¦æ»¡è¶³3ä¸ªè¦æ±‚:</p>
<ol>
<li>è¯¥ç±»çš„æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½å·²è¢« GCï¼Œä¹Ÿå°±æ˜¯è¯´å †ä¸å­˜åœ¨è¯¥ç±»çš„å®ä¾‹å¯¹è±¡</li>
<li>è¯¥ç±»æ²¡æœ‰åœ¨å…¶ä»–ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨</li>
<li>è¯¥ç±»çš„ç±»åŠ è½½å™¨çš„å®ä¾‹å·²è¢« GCï¼Œä¸€èˆ¬æ˜¯å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚ OSGiã€JSP çš„é‡åŠ è½½ç­‰ï¼Œå¾ˆéš¾è¾¾æˆ</li>
</ol>
<p>åœ¨ JVM ç”Ÿå‘½å‘¨æœŸç±»ï¼Œç”± JVM è‡ªå¸¦çš„ç±»åŠ è½½å™¨åŠ è½½çš„ç±»æ˜¯ä¸ä¼šè¢«å¸è½½çš„ï¼Œè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨åŠ è½½çš„ç±»æ˜¯å¯èƒ½è¢«å¸è½½ã€‚å› ä¸º JVM ä¼šå§‹ç»ˆå¼•ç”¨å¯åŠ¨ã€æ‰©å±•ã€ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œè¿™äº›ç±»åŠ è½½å™¨å§‹ç»ˆå¼•ç”¨å®ƒä»¬æ‰€åŠ è½½çš„ç±»ï¼Œè¿™äº›ç±»å§‹ç»ˆæ˜¯å¯åŠçš„</p>
<h3 id="ç±»åŠ è½½å™¨">ç±»åŠ è½½å™¨</h3>
<h4 id="ç±»åŠ è½½-2">ç±»åŠ è½½</h4>
<p>ç±»åŠ è½½æ–¹å¼ï¼š</p>
<ul>
<li>éšå¼åŠ è½½ï¼šä¸ç›´æ¥åœ¨ä»£ç ä¸­è°ƒç”¨ ClassLoader çš„æ–¹æ³•åŠ è½½ç±»å¯¹è±¡
<ul>
<li>åˆ›å»ºç±»å¯¹è±¡ã€ä½¿ç”¨ç±»çš„é™æ€åŸŸã€åˆ›å»ºå­ç±»å¯¹è±¡ã€ä½¿ç”¨å­ç±»çš„é™æ€åŸŸ</li>
<li>åœ¨ JVM å¯åŠ¨æ—¶ï¼Œé€šè¿‡ä¸‰å¤§ç±»åŠ è½½å™¨åŠ è½½ class</li>
</ul>
</li>
<li>æ˜¾å¼åŠ è½½ï¼š
<ul>
<li>ClassLoader.loadClass(className)ï¼šåªåŠ è½½å’Œè¿æ¥ï¼Œ<strong>ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–</strong></li>
<li>Class.forName(String name, boolean initialize, ClassLoader loader)ï¼šä½¿ç”¨ loader è¿›è¡ŒåŠ è½½å’Œè¿æ¥ï¼Œæ ¹æ®å‚æ•° initialize å†³å®šæ˜¯å¦åˆå§‹åŒ–</li>
</ul>
</li>
</ul>
<p>ç±»çš„å”¯ä¸€æ€§ï¼š</p>
<ul>
<li>åœ¨ JVM ä¸­è¡¨ç¤ºä¸¤ä¸ª class å¯¹è±¡åˆ¤æ–­ä¸ºåŒä¸€ä¸ªç±»å­˜åœ¨çš„ä¸¤ä¸ªå¿…è¦æ¡ä»¶ï¼š
<ul>
<li>ç±»çš„å®Œæ•´ç±»åå¿…é¡»ä¸€è‡´ï¼ŒåŒ…æ‹¬åŒ…å</li>
<li>åŠ è½½è¿™ä¸ªç±»çš„ ClassLoaderï¼ˆæŒ‡ ClassLoader å®ä¾‹å¯¹è±¡ï¼‰å¿…é¡»ç›¸åŒ</li>
</ul>
</li>
<li>è¿™é‡Œçš„ç›¸ç­‰ï¼ŒåŒ…æ‹¬ç±»çš„ Class å¯¹è±¡çš„ equals() æ–¹æ³•ã€isAssignableFrom() æ–¹æ³•ã€isInstance() æ–¹æ³•çš„è¿”å›ç»“æœä¸º trueï¼Œä¹ŸåŒ…æ‹¬ä½¿ç”¨ instanceof å…³é”®å­—åšå¯¹è±¡æ‰€å±å…³ç³»åˆ¤å®šç»“æœä¸º true</li>
</ul>
<p>å‘½åç©ºé—´ï¼š</p>
<ul>
<li>æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œå‘½åç©ºé—´ç”±è¯¥åŠ è½½å™¨åŠæ‰€æœ‰çš„çˆ¶åŠ è½½å™¨æ‰€åŠ è½½çš„ç±»ç»„æˆ</li>
<li>åœ¨åŒä¸€å‘½åç©ºé—´ä¸­ï¼Œä¸ä¼šå‡ºç°ç±»çš„å®Œæ•´åå­—ï¼ˆåŒ…æ‹¬ç±»çš„åŒ…åï¼‰ç›¸åŒçš„ä¸¤ä¸ªç±»</li>
</ul>
<p>åŸºæœ¬ç‰¹å¾ï¼š</p>
<ul>
<li><strong>å¯è§æ€§</strong>ï¼Œå­ç±»åŠ è½½å™¨å¯ä»¥è®¿é—®çˆ¶åŠ è½½å™¨åŠ è½½çš„ç±»å‹ï¼Œä½†æ˜¯åè¿‡æ¥æ˜¯ä¸å…è®¸çš„</li>
<li><strong>å•ä¸€æ€§</strong>ï¼Œç”±äºçˆ¶åŠ è½½å™¨çš„ç±»å‹å¯¹äºå­åŠ è½½å™¨æ˜¯å¯è§çš„ï¼Œæ‰€ä»¥çˆ¶åŠ è½½å™¨ä¸­åŠ è½½è¿‡çš„ç±»å‹ï¼Œä¸ä¼šåœ¨å­åŠ è½½å™¨ä¸­é‡å¤åŠ è½½</li>
</ul>
<h4 id="åŠ è½½å™¨">åŠ è½½å™¨</h4>
<p>ç±»åŠ è½½å™¨æ˜¯ Java çš„æ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºåŠ è½½å­—èŠ‚ç åˆ° JVM å†…å­˜ï¼Œå¾—åˆ° Class ç±»çš„å¯¹è±¡</p>
<p>ä» Java è™šæ‹Ÿæœºè§„èŒƒæ¥è®²ï¼Œåªå­˜åœ¨ä»¥ä¸‹ä¸¤ç§ä¸åŒçš„ç±»åŠ è½½å™¨ï¼š</p>
<ul>
<li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼šä½¿ç”¨ C++ å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºè‡ªèº«çš„ä¸€éƒ¨åˆ†</li>
<li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼ˆUser-Defined ClassLoaderï¼‰ï¼šJava è™šæ‹Ÿæœºè§„èŒƒ<strong>å°†æ‰€æœ‰æ´¾ç”ŸäºæŠ½è±¡ç±» ClassLoader çš„ç±»åŠ è½½å™¨éƒ½åˆ’åˆ†ä¸ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨</strong>ï¼Œä½¿ç”¨ Java è¯­è¨€å®ç°ï¼Œç‹¬ç«‹äºè™šæ‹Ÿæœº</li>
</ul>
<p>ä» Java å¼€å‘äººå‘˜çš„è§’åº¦çœ‹ï¼š</p>
<ul>
<li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼š
<ul>
<li>å¤„äºå®‰å…¨è€ƒè™‘ï¼ŒBootstrap å¯åŠ¨ç±»åŠ è½½å™¨åªåŠ è½½åŒ…åä¸º javaã€javaxã€sun ç­‰å¼€å¤´çš„ç±»</li>
<li>ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½åœ¨ <code>JAVA_HOME/jre/lib</code> æˆ– <code>sun.boot.class.path</code> ç›®å½•ä¸­çš„ï¼Œæˆ–è€…è¢« -Xbootclasspath å‚æ•°æ‰€æŒ‡å®šçš„è·¯å¾„ä¸­çš„ç±»ï¼Œå¹¶ä¸”æ˜¯è™šæ‹Ÿæœºè¯†åˆ«çš„ç±»åº“åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­</li>
<li>ä»…æŒ‰ç…§æ–‡ä»¶åè¯†åˆ«ï¼Œå¦‚ rt.jar åå­—ä¸ç¬¦åˆçš„ç±»åº“å³ä½¿æ”¾åœ¨ lib ç›®å½•ä¸­ä¹Ÿä¸ä¼šè¢«åŠ è½½</li>
<li>å¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢« Java ç¨‹åºç›´æ¥å¼•ç”¨ï¼Œç¼–å†™è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œå¦‚æœè¦æŠŠåŠ è½½è¯·æ±‚å§”æ´¾ç»™å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œç›´æ¥ä½¿ç”¨ null ä»£æ›¿</li>
</ul>
</li>
<li>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰ï¼š
<ul>
<li>ç”± ExtClassLoader (sun.misc.Launcher$ExtClassLoader)  å®ç°ï¼Œä¸Šçº§ä¸º Bootstrapï¼Œæ˜¾ç¤ºä¸º null</li>
<li>å°† <code>JAVA_HOME/jre/lib/ext</code> æˆ–è€…è¢« <code>java.ext.dir</code> ç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šè·¯å¾„ä¸­çš„æ‰€æœ‰ç±»åº“åŠ è½½åˆ°å†…å­˜ä¸­</li>
<li>å¼€å‘è€…å¯ä»¥ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ï¼Œåˆ›å»ºçš„ JAR æ”¾åœ¨æ­¤ç›®å½•ä¸‹ï¼Œä¼šç”±æ‰©å±•ç±»åŠ è½½å™¨è‡ªåŠ¨åŠ è½½</li>
</ul>
</li>
<li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰ï¼š
<ul>
<li>ç”± AppClassLoader(sun.misc.Launcher$AppClassLoader) å®ç°ï¼Œä¸Šçº§ä¸º Extension</li>
<li>è´Ÿè´£åŠ è½½ç¯å¢ƒå˜é‡ classpath æˆ–ç³»ç»Ÿå±æ€§ <code>java.class.path</code> æŒ‡å®šè·¯å¾„ä¸‹çš„ç±»åº“</li>
<li>è¿™ä¸ªç±»åŠ è½½å™¨æ˜¯ ClassLoader ä¸­çš„ getSystemClassLoader() æ–¹æ³•çš„è¿”å›å€¼ï¼Œå› æ­¤ç§°ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨</li>
<li>å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»åŠ è½½å™¨ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œè¿™ä¸ªå°±æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨</li>
</ul>
</li>
<li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼šç”±å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œä¸Šçº§æ˜¯ Application</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">    <span class="comment">//è·å–ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">    ClassLoader systemClassLoader = <span class="module-access"><span class="module"><span class="identifier">ClassLoader</span>.</span></span>get<span class="constructor">SystemClassLoader()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(systemClassLoader);<span class="comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å…¶ä¸Šå±‚  æ‰©å±•ç±»åŠ è½½å™¨</span></span><br><span class="line">    ClassLoader extClassLoader = systemClassLoader.get<span class="constructor">Parent()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(extClassLoader);<span class="comment">//sun.misc.Launcher$ExtClassLoader@610455d6</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å…¶ä¸Šå±‚ è·å–ä¸åˆ°å¼•å¯¼ç±»åŠ è½½å™¨</span></span><br><span class="line">    ClassLoader bootStrapClassLoader = extClassLoader.get<span class="constructor">Parent()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(bootStrapClassLoader);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹äºç”¨æˆ·è‡ªå®šä¹‰ç±»æ¥è¯´ï¼šä½¿ç”¨ç³»ç»Ÿç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½</span></span><br><span class="line">    ClassLoader classLoader = <span class="module-access"><span class="module"><span class="identifier">ClassLoaderTest</span>.</span></span><span class="keyword">class</span>.get<span class="constructor">ClassLoader()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(classLoader);<span class="comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//String ç±»ä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½çš„ --&gt; javaæ ¸å¿ƒç±»åº“éƒ½æ˜¯ä½¿ç”¨å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„</span></span><br><span class="line">    ClassLoader classLoader1 = <span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span><span class="keyword">class</span>.get<span class="constructor">ClassLoader()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(classLoader1);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¡¥å……ä¸¤ä¸ªç±»åŠ è½½å™¨ï¼š</p>
<ul>
<li>SecureClassLoader æ‰©å±•äº† ClassLoaderï¼Œæ–°å¢äº†å‡ ä¸ªä¸ä½¿ç”¨ç›¸å…³çš„ä»£ç æºå’Œæƒé™å®šä¹‰ç±»éªŒè¯ï¼ˆå¯¹ class æºç çš„è®¿é—®æƒé™ï¼‰çš„æ–¹æ³•ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥è·Ÿè¿™ä¸ªç±»æ‰“äº¤é“ï¼Œæ›´å¤šæ˜¯ä¸å®ƒçš„å­ç±» URLClassLoader æœ‰æ‰€å…³è”</li>
<li>ClassLoader æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¾ˆå¤šæ–¹æ³•æ˜¯ç©ºçš„æ²¡æœ‰å®ç°ï¼Œè€Œ URLClassLoader è¿™ä¸ªå®ç°ç±»ä¸ºè¿™äº›æ–¹æ³•æä¾›äº†å…·ä½“çš„å®ç°ï¼Œå¹¶æ–°å¢äº† URLClassPath ç±»ååŠ©å–å¾— Class å­—èŠ‚æµç­‰åŠŸèƒ½ã€‚åœ¨ç¼–å†™è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¤ªè¿‡äºå¤æ‚çš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ç»§æ‰¿ URLClassLoader ç±»ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å»ç¼–å†™ findClass() æ–¹æ³•åŠå…¶è·å–å­—èŠ‚ç æµçš„æ–¹å¼ï¼Œä½¿è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç¼–å†™æ›´åŠ ç®€æ´</li>
</ul>
<h4 id="å¸¸ç”¨API-4">å¸¸ç”¨API</h4>
<p>ClassLoader ç±»ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶åæ‰€æœ‰çš„ç±»åŠ è½½å™¨éƒ½ç»§æ‰¿è‡ª ClassLoaderï¼ˆä¸åŒ…æ‹¬å¯åŠ¨ç±»åŠ è½½å™¨ï¼‰</p>
<p>è·å– ClassLoader çš„é€”å¾„ï¼š</p>
<ul>
<li>è·å–å½“å‰ç±»çš„ ClassLoaderï¼š<code>clazz.getClassLoader()</code></li>
<li>è·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ ClassLoaderï¼š<code>Thread.currentThread.getContextClassLoader()</code></li>
<li>è·å–ç³»ç»Ÿçš„ ClassLoaderï¼š<code>ClassLoader.getSystemClassLoader()</code></li>
<li>è·å–è°ƒç”¨è€…çš„ ClassLoaderï¼š<code>DriverManager.getCallerClassLoader()</code></li>
</ul>
<p>ClassLoader ç±»å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><code>getParent()</code>ï¼šè¿”å›è¯¥ç±»åŠ è½½å™¨çš„è¶…ç±»åŠ è½½å™¨</li>
<li><code>loadclass(String name)</code>ï¼šåŠ è½½åä¸º name çš„ç±»ï¼Œè¿”å›ç»“æœä¸º Class ç±»çš„å®ä¾‹ï¼Œ<strong>è¯¥æ–¹æ³•å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å¼</strong></li>
<li><code>findclass(String name)</code>ï¼šæŸ¥æ‰¾äºŒè¿›åˆ¶åç§°ä¸º name çš„ç±»ï¼Œè¿”å›ç»“æœä¸º Class ç±»çš„å®ä¾‹ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ£€æŸ¥å®Œçˆ¶ç±»åŠ è½½å™¨ä¹‹åè¢« loadClass() æ–¹æ³•è°ƒç”¨</li>
<li><code>findLoadedClass(String name)</code>ï¼šæŸ¥æ‰¾åç§°ä¸º name çš„å·²ç»è¢«åŠ è½½è¿‡çš„ç±»ï¼Œfinal ä¿®é¥°æ— æ³•é‡å†™</li>
<li><code>defineClass(String name, byte[] b, int off, int len)</code>ï¼šå°†<strong>å­—èŠ‚æµ</strong>è§£ææˆ JVM èƒ½å¤Ÿè¯†åˆ«çš„ç±»å¯¹è±¡</li>
<li><code>resolveclass(Class c)</code>ï¼šé“¾æ¥æŒ‡å®šçš„ Java ç±»ï¼Œå¯ä»¥ä½¿ç±»çš„ Class å¯¹è±¡åˆ›å»ºå®Œæˆçš„åŒæ—¶ä¹Ÿè¢«è§£æ</li>
<li><code>InputStream getResourceAsStream(String name)</code>ï¼šæŒ‡å®šèµ„æºåç§°è·å–è¾“å…¥æµ</li>
</ul>
<h4 id="åŠ è½½æ¨¡å‹">åŠ è½½æ¨¡å‹</h4>
<h5 id="åŠ è½½æœºåˆ¶">åŠ è½½æœºåˆ¶</h5>
<p>åœ¨ JVM ä¸­ï¼Œå¯¹äºç±»åŠ è½½æ¨¡å‹æä¾›äº†ä¸‰ç§ï¼Œåˆ†åˆ«ä¸ºå…¨ç›˜åŠ è½½ã€åŒäº²å§”æ´¾ã€ç¼“å­˜æœºåˆ¶</p>
<ul>
<li>**å…¨ç›˜åŠ è½½ï¼š**å½“ä¸€ä¸ªç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½æŸä¸ª Class æ—¶ï¼Œè¯¥ Class æ‰€ä¾èµ–å’Œå¼•ç”¨çš„å…¶ä»– Class ä¹Ÿå°†ç”±è¯¥ç±»åŠ è½½å™¨è´Ÿè´£è½½å…¥ï¼Œé™¤éæ˜¾ç¤ºæŒ‡å®šä½¿ç”¨å¦å¤–ä¸€ä¸ªç±»åŠ è½½å™¨æ¥è½½å…¥</li>
<li>**åŒäº²å§”æ´¾ï¼š**æŸä¸ªç‰¹å®šçš„ç±»åŠ è½½å™¨åœ¨æ¥åˆ°åŠ è½½ç±»çš„è¯·æ±‚æ—¶ï¼Œé¦–å…ˆå°†åŠ è½½ä»»åŠ¡å§”æ‰˜ç»™çˆ¶åŠ è½½å™¨ï¼Œ<strong>ä¾æ¬¡é€’å½’</strong>ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼›åªæœ‰å½“çˆ¶åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡æ—¶ï¼Œæ‰è‡ªå·±å»åŠ è½½</li>
<li>**ç¼“å­˜æœºåˆ¶ï¼š**ä¼šä¿è¯æ‰€æœ‰åŠ è½½è¿‡çš„ Class éƒ½ä¼šè¢«ç¼“å­˜ï¼Œå½“ç¨‹åºä¸­éœ€è¦ä½¿ç”¨æŸä¸ª Class æ—¶ï¼Œç±»åŠ è½½å™¨å…ˆä»ç¼“å­˜åŒºä¸­æœå¯»è¯¥ Classï¼Œåªæœ‰å½“ç¼“å­˜åŒºä¸­ä¸å­˜åœ¨è¯¥ Class å¯¹è±¡æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šè¯»å–è¯¥ç±»å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢æˆ Class å¯¹è±¡å­˜å…¥ç¼“å†²åŒºï¼ˆæ–¹æ³•åŒºï¼‰ä¸­
<ul>
<li>è¿™å°±æ˜¯ä¿®æ”¹äº† Class åï¼Œå¿…é¡»é‡æ–°å¯åŠ¨ JVMï¼Œç¨‹åºæ‰€åšçš„ä¿®æ”¹æ‰ä¼šç”Ÿæ•ˆçš„åŸå› </li>
</ul>
</li>
</ul>
<h5 id="åŒäº²å§”æ´¾">åŒäº²å§”æ´¾</h5>
<p>åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParents Delegation Modelï¼‰ï¼šè¯¥æ¨¡å‹è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨å¤–ï¼Œå…¶å®ƒç±»åŠ è½½å™¨éƒ½è¦æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œè¿™é‡Œçš„çˆ¶å­å…³ç³»ä¸€èˆ¬é€šè¿‡ç»„åˆå…³ç³»ï¼ˆCompositionï¼‰æ¥å®ç°ï¼Œè€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼ˆInheritanceï¼‰</p>
<p>å·¥ä½œè¿‡ç¨‹ï¼šä¸€ä¸ªç±»åŠ è½½å™¨é¦–å…ˆå°†ç±»åŠ è½½è¯·æ±‚è½¬å‘åˆ°çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ—¶æ‰å°è¯•è‡ªå·±åŠ è½½</p>
<p>åŒäº²å§”æ´¾æœºåˆ¶çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>
<p>å¯ä»¥é¿å…æŸä¸€ä¸ªç±»è¢«é‡å¤åŠ è½½ï¼Œå½“çˆ¶ç±»å·²ç»åŠ è½½ååˆ™æ— éœ€é‡å¤åŠ è½½ï¼Œä¿è¯å…¨å±€å”¯ä¸€æ€§</p>
</li>
<li>
<p>Java ç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·æœ‰ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ï¼Œä»è€Œä½¿å¾—åŸºç¡€ç±»å¾—åˆ°ç»Ÿä¸€</p>
</li>
<li>
<p>ä¿æŠ¤ç¨‹åºå®‰å…¨ï¼Œé˜²æ­¢ç±»åº“çš„æ ¸å¿ƒ API è¢«éšæ„ç¯¡æ”¹</p>
<p>ä¾‹å¦‚ï¼šåœ¨å·¥ç¨‹ä¸­æ–°å»º java.lang åŒ…ï¼Œæ¥ç€åœ¨è¯¥åŒ…ä¸‹æ–°å»º String ç±»ï¼Œå¹¶å®šä¹‰ main å‡½æ•°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">String</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;demo info&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ‰§è¡Œ main å‡½æ•°ä¼šå‡ºç°å¼‚å¸¸ï¼Œåœ¨ç±» java.lang.String ä¸­æ‰¾ä¸åˆ° main æ–¹æ³•ã€‚å› ä¸ºåŒäº²å§”æ´¾çš„æœºåˆ¶ï¼Œjava.lang.String çš„åœ¨å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrapï¼‰å¾—åˆ°åŠ è½½ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨ä¼˜å…ˆçº§æ›´é«˜ï¼Œåœ¨æ ¸å¿ƒ jre åº“ä¸­æœ‰å…¶ç›¸åŒåå­—çš„ç±»æ–‡ä»¶ï¼Œä½†è¯¥ç±»ä¸­å¹¶æ²¡æœ‰ main æ–¹æ³•</p>
</li>
</ul>
<p>åŒäº²å§”æ´¾æœºåˆ¶çš„ç¼ºç‚¹ï¼šæ£€æŸ¥ç±»æ˜¯å¦åŠ è½½çš„å§”æ‰˜è¿‡ç¨‹æ˜¯å•å‘çš„ï¼Œè¿™ä¸ªæ–¹å¼è™½ç„¶ä»ç»“æ„ä¸Šçœ‹æ¯”è¾ƒæ¸…æ™°ï¼Œä½¿å„ä¸ª ClassLoader çš„èŒè´£éå¸¸æ˜ç¡®ï¼Œä½†<strong>é¡¶å±‚çš„ ClassLoader æ— æ³•è®¿é—®åº•å±‚çš„ ClassLoader æ‰€åŠ è½½çš„ç±»</strong>ï¼ˆå¯è§æ€§ï¼‰</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B.png" alt="img"></p>
<h5 id="æºç åˆ†æ">æºç åˆ†æ</h5>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">protected Class&lt;?&gt; load<span class="constructor">Class(String <span class="params">name</span>, <span class="params">boolean</span> <span class="params">resolve</span>)</span></span><br><span class="line">    throws ClassNotFoundException &#123;</span><br><span class="line">    synchronized (get<span class="constructor">ClassLoadingLock(<span class="params">name</span>)</span>) &#123;</span><br><span class="line">       <span class="comment">// è°ƒç”¨å½“å‰ç±»åŠ è½½å™¨çš„ findLoadedClass(name)ï¼Œæ£€æŸ¥å½“å‰ç±»åŠ è½½å™¨æ˜¯å¦å·²åŠ è½½è¿‡æŒ‡å®š name çš„ç±»</span></span><br><span class="line">        Class c = find<span class="constructor">LoadedClass(<span class="params">name</span>)</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å½“å‰ç±»åŠ è½½å™¨å¦‚æœæ²¡æœ‰åŠ è½½è¿‡</span></span><br><span class="line">        <span class="keyword">if</span> (c<span class="operator"> == </span>null) &#123;</span><br><span class="line">            long t0 = <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>nano<span class="constructor">Time()</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­å½“å‰ç±»åŠ è½½å™¨æ˜¯å¦æœ‰çˆ¶ç±»åŠ è½½å™¨</span></span><br><span class="line">                <span class="keyword">if</span> (parent != null) &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœå½“å‰ç±»åŠ è½½å™¨æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è°ƒç”¨çˆ¶ç±»åŠ è½½å™¨çš„ loadClass(name,false)</span></span><br><span class="line">         			<span class="comment">// çˆ¶ç±»åŠ è½½å™¨çš„ loadClass æ–¹æ³•ï¼Œåˆä¼šæ£€æŸ¥è‡ªå·±æ˜¯å¦å·²ç»åŠ è½½è¿‡</span></span><br><span class="line">                    c = parent.load<span class="constructor">Class(<span class="params">name</span>, <span class="params">false</span>)</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// å½“å‰ç±»åŠ è½½å™¨æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œè¯´æ˜å½“å‰ç±»åŠ è½½å™¨æ˜¯ BootStrapClassLoader</span></span><br><span class="line">          			<span class="comment">// åˆ™è°ƒç”¨ BootStrap ClassLoader çš„æ–¹æ³•åŠ è½½ç±»</span></span><br><span class="line">                    c = find<span class="constructor">BootstrapClassOrNull(<span class="params">name</span>)</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (ClassNotFoundException e) &#123; &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (c<span class="operator"> == </span>null) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœè°ƒç”¨çˆ¶ç±»çš„ç±»åŠ è½½å™¨æ— æ³•å¯¹ç±»è¿›è¡ŒåŠ è½½ï¼Œåˆ™ç”¨è‡ªå·±çš„ findClass() æ–¹æ³•è¿›è¡ŒåŠ è½½</span></span><br><span class="line">                <span class="comment">// å¯ä»¥è‡ªå®šä¹‰ findClass() æ–¹æ³•</span></span><br><span class="line">                long t1 = <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>nano<span class="constructor">Time()</span>;</span><br><span class="line">                c = find<span class="constructor">Class(<span class="params">name</span>)</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                sun.misc.<span class="module-access"><span class="module"><span class="identifier">PerfCounter</span>.</span></span>get<span class="constructor">ParentDelegationTime()</span>.add<span class="constructor">Time(<span class="params">t1</span> - <span class="params">t0</span>)</span>;</span><br><span class="line">                sun.misc.<span class="module-access"><span class="module"><span class="identifier">PerfCounter</span>.</span></span>get<span class="constructor">FindClassTime()</span>.add<span class="constructor">ElapsedTimeFrom(<span class="params">t1</span>)</span>;</span><br><span class="line">                sun.misc.<span class="module-access"><span class="module"><span class="identifier">PerfCounter</span>.</span></span>get<span class="constructor">FindClasses()</span>.increment<span class="literal">()</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">            <span class="comment">// é“¾æ¥æŒ‡å®šçš„ Java ç±»ï¼Œå¯ä»¥ä½¿ç±»çš„ Class å¯¹è±¡åˆ›å»ºå®Œæˆçš„åŒæ—¶ä¹Ÿè¢«è§£æ</span></span><br><span class="line">            resolve<span class="constructor">Class(<span class="params">c</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        return c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ç ´åå§”æ´¾">ç ´åå§”æ´¾</h5>
<p>åŒäº²å§”æ´¾æ¨¡å‹å¹¶ä¸æ˜¯ä¸€ä¸ªå…·æœ‰å¼ºåˆ¶æ€§çº¦æŸçš„æ¨¡å‹ï¼Œè€Œæ˜¯ Java è®¾è®¡è€…æ¨èç»™å¼€å‘è€…çš„ç±»åŠ è½½å™¨å®ç°æ–¹å¼</p>
<p>ç ´ååŒäº²å§”æ´¾æ¨¡å‹çš„æ–¹å¼ï¼š</p>
<ul>
<li>
<p>è‡ªå®šä¹‰ ClassLoader</p>
<ul>
<li>å¦‚æœä¸æƒ³ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼Œåªéœ€è¦é‡å†™ findClass æ–¹æ³•</li>
<li>å¦‚æœæƒ³è¦å»ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼Œéœ€è¦å»<strong>é‡å†™ loadClass</strong> æ–¹æ³•</li>
</ul>
</li>
<li>
<p>å¼•å…¥<strong>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</strong></p>
<p>Java æä¾›äº†å¾ˆå¤šæœåŠ¡æä¾›è€…æ¥å£ï¼ˆService Provider Interfaceï¼ŒSPIï¼‰ï¼Œå…è®¸ç¬¬ä¸‰æ–¹ä¸ºè¿™äº›æ¥å£æä¾›å®ç°ã€‚å¸¸è§çš„æœ‰ JDBCã€JCEã€JNDI ç­‰ã€‚è¿™äº› SPI æ¥å£ç”± Java æ ¸å¿ƒåº“æ¥æä¾›ï¼Œè€Œ SPI çš„å®ç°ä»£ç åˆ™æ˜¯ä½œä¸º Java åº”ç”¨æ‰€ä¾èµ–çš„ jar åŒ…è¢«åŒ…å«è¿›ç±»è·¯å¾„ classpath é‡Œï¼ŒSPI æ¥å£ä¸­çš„ä»£ç éœ€è¦åŠ è½½å…·ä½“çš„å®ç°ç±»ï¼š</p>
<ul>
<li>SPI çš„æ¥å£æ˜¯ Java æ ¸å¿ƒåº“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ç”±å¼•å¯¼ç±»åŠ è½½å™¨æ¥åŠ è½½çš„</li>
<li>SPI çš„å®ç°ç±»æ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½ï¼Œå¼•å¯¼ç±»åŠ è½½å™¨æ˜¯æ— æ³•æ‰¾åˆ° SPI çš„å®ç°ç±»ï¼Œå› ä¸ºåŒäº²å§”æ´¾æ¨¡å‹ä¸­ BootstrapClassloader æ— æ³•å§”æ´¾ AppClassLoader æ¥åŠ è½½ç±»</li>
</ul>
<p>JDK å¼€å‘äººå‘˜å¼•å…¥äº†çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆThread Context ClassLoaderï¼‰ï¼Œè¿™ç§ç±»åŠ è½½å™¨å¯ä»¥é€šè¿‡ Thread  ç±»çš„ setContextClassLoader æ–¹æ³•è¿›è¡Œè®¾ç½®çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Œåœ¨æ‰§è¡Œçº¿ç¨‹ä¸­æŠ›å¼ƒåŒäº²å§”æ´¾åŠ è½½æ¨¡å¼ï¼Œä½¿ç¨‹åºå¯ä»¥é€†å‘ä½¿ç”¨ç±»åŠ è½½å™¨ï¼Œä½¿ Bootstrap åŠ è½½å™¨æ‹¿åˆ°äº† Application åŠ è½½å™¨åŠ è½½çš„ç±»ï¼Œç ´åäº†åŒäº²å§”æ´¾æ¨¡å‹</p>
</li>
<li>
<p>å®ç°ç¨‹åºçš„åŠ¨æ€æ€§ï¼Œå¦‚ä»£ç çƒ­æ›¿æ¢ï¼ˆHot Swapï¼‰ã€æ¨¡å—çƒ­éƒ¨ç½²ï¼ˆHot Deploymentï¼‰</p>
<p>IBM å…¬å¸ä¸»å¯¼çš„ JSRä¸€291ï¼ˆOSGiR4.2ï¼‰å®ç°æ¨¡å—åŒ–çƒ­éƒ¨ç½²çš„å…³é”®æ˜¯å®ƒè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨æœºåˆ¶çš„å®ç°ï¼Œæ¯ä¸€ä¸ªç¨‹åºæ¨¡å—ï¼ˆOSGi ä¸­ç§°ä¸º Bundleï¼‰éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œå½“æ›´æ¢ä¸€ä¸ª Bundle æ—¶ï¼Œå°±æŠŠ Bundle è¿åŒç±»åŠ è½½å™¨ä¸€èµ·æ¢æ‰ä»¥å®ç°ä»£ç çš„çƒ­æ›¿æ¢ï¼Œåœ¨ OSGi ç¯å¢ƒä¸‹ï¼Œç±»åŠ è½½å™¨ä¸å†åŒäº²å§”æ´¾æ¨¡å‹æ¨èçš„æ ‘çŠ¶ç»“æ„ï¼Œè€Œæ˜¯è¿›ä¸€æ­¥å‘å±•ä¸ºæ›´åŠ å¤æ‚çš„ç½‘çŠ¶ç»“æ„</p>
<p>å½“æ”¶åˆ°ç±»åŠ è½½è¯·æ±‚æ—¶ï¼ŒOSGi å°†æŒ‰ç…§ä¸‹é¢çš„é¡ºåºè¿›è¡Œç±»æœç´¢:</p>
<ol>
<li>å°†ä»¥ java.* å¼€å¤´çš„ç±»ï¼Œå§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨åŠ è½½</li>
<li>å¦åˆ™ï¼Œå°†å§”æ´¾åˆ—è¡¨åå•å†…çš„ç±»ï¼Œå§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨åŠ è½½</li>
<li>å¦åˆ™ï¼Œå°† Import åˆ—è¡¨ä¸­çš„ç±»ï¼Œå§”æ´¾ç»™ Export è¿™ä¸ªç±»çš„ Bundle çš„ç±»åŠ è½½å™¨åŠ è½½</li>
<li>å¦åˆ™ï¼ŒæŸ¥æ‰¾å½“å‰ Bundle çš„ ClassPathï¼Œä½¿ç”¨è‡ªå·±çš„ç±»åŠ è½½å™¨åŠ è½½</li>
<li>å¦åˆ™ï¼ŒæŸ¥æ‰¾ç±»æ˜¯å¦åœ¨è‡ªå·±çš„ Fragment Bundle ä¸­ï¼Œå¦‚æœåœ¨å°±å§”æ´¾ç»™ Fragment Bundle ç±»åŠ è½½å™¨åŠ è½½</li>
<li>å¦åˆ™ï¼ŒæŸ¥æ‰¾ Dynamic Import åˆ—è¡¨çš„ Bundleï¼Œå§”æ´¾ç»™å¯¹åº” Bundle çš„ç±»åŠ è½½å™¨åŠ è½½</li>
<li>å¦åˆ™ï¼Œç±»æŸ¥æ‰¾å¤±è´¥</li>
</ol>
<p>çƒ­æ›¿æ¢æ˜¯æŒ‡åœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸åœæ­¢æœåŠ¡ï¼Œåªé€šè¿‡æ›¿æ¢ç¨‹åºæ–‡ä»¶æ¥ä¿®æ”¹ç¨‹åºçš„è¡Œä¸ºï¼Œ<strong>çƒ­æ›¿æ¢çš„å…³é”®éœ€æ±‚åœ¨äºæœåŠ¡ä¸èƒ½ä¸­æ–­</strong>ï¼Œä¿®æ”¹å¿…é¡»ç«‹å³è¡¨ç°æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿä¹‹ä¸­</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E7%83%AD%E6%9B%BF%E6%8D%A2.png" alt="img"></p>
<h4 id="æ²™ç®±æœºåˆ¶">æ²™ç®±æœºåˆ¶</h4>
<p>æ²™ç®±æœºåˆ¶ï¼ˆSandboxï¼‰ï¼šå°† Java ä»£ç é™å®šåœ¨è™šæ‹Ÿæœºç‰¹å®šçš„è¿è¡ŒèŒƒå›´ä¸­ï¼Œå¹¶ä¸”ä¸¥æ ¼é™åˆ¶ä»£ç å¯¹æœ¬åœ°ç³»ç»Ÿèµ„æºè®¿é—®ï¼Œæ¥ä¿è¯å¯¹ä»£ç çš„æœ‰æ•ˆéš”ç¦»ï¼Œé˜²æ­¢å¯¹æœ¬åœ°ç³»ç»Ÿé€ æˆç ´å</p>
<p>æ²™ç®±<strong>é™åˆ¶ç³»ç»Ÿèµ„æºè®¿é—®</strong>ï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œï¼Œä¸åŒçº§åˆ«çš„æ²™ç®±å¯¹èµ„æºè®¿é—®çš„é™åˆ¶ä¹Ÿä¸ä¸€æ ·</p>
<ul>
<li>JDK1.0ï¼šJava ä¸­å°†æ‰§è¡Œç¨‹åºåˆ†æˆæœ¬åœ°ä»£ç å’Œè¿œç¨‹ä»£ç ä¸¤ç§ï¼Œæœ¬åœ°ä»£ç é»˜è®¤è§†ä¸ºå¯ä¿¡ä»»çš„ï¼Œè€Œè¿œç¨‹ä»£ç è¢«çœ‹ä½œæ˜¯ä¸å—ä¿¡çš„ã€‚å¯¹äºæˆä¿¡çš„æœ¬åœ°ä»£ç ï¼Œå¯ä»¥è®¿é—®ä¸€åˆ‡æœ¬åœ°èµ„æºï¼Œè€Œå¯¹äºéæˆä¿¡çš„è¿œç¨‹ä»£ç ä¸å¯ä»¥è®¿é—®æœ¬åœ°èµ„æºï¼Œå…¶å®ä¾èµ–äºæ²™ç®±æœºåˆ¶ã€‚å¦‚æ­¤ä¸¥æ ¼çš„å®‰å…¨æœºåˆ¶ä¹Ÿç»™ç¨‹åºçš„åŠŸèƒ½æ‰©å±•å¸¦æ¥éšœç¢ï¼Œæ¯”å¦‚å½“ç”¨æˆ·å¸Œæœ›è¿œç¨‹ä»£ç è®¿é—®æœ¬åœ°ç³»ç»Ÿçš„æ–‡ä»¶æ—¶å€™ï¼Œå°±æ— æ³•å®ç°</li>
<li>JDK1.1ï¼šé’ˆå¯¹å®‰å…¨æœºåˆ¶åšäº†æ”¹è¿›ï¼Œå¢åŠ äº†å®‰å…¨ç­–ç•¥ã€‚å…è®¸ç”¨æˆ·æŒ‡å®šä»£ç å¯¹æœ¬åœ°èµ„æºçš„è®¿é—®æƒé™</li>
<li>JDK1.2ï¼šæ”¹è¿›äº†å®‰å…¨æœºåˆ¶ï¼Œå¢åŠ äº†ä»£ç ç­¾åï¼Œä¸è®ºæœ¬åœ°ä»£ç æˆ–æ˜¯è¿œç¨‹ä»£ç éƒ½ä¼šæŒ‰ç…§ç”¨æˆ·çš„å®‰å…¨ç­–ç•¥è®¾å®šï¼Œç”±ç±»åŠ è½½å™¨åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­æƒé™ä¸åŒçš„è¿è¡Œç©ºé—´ï¼Œæ¥å®ç°å·®å¼‚åŒ–çš„ä»£ç æ‰§è¡Œæƒé™æ§åˆ¶</li>
<li>JDK1.6ï¼šå½“å‰æœ€æ–°çš„å®‰å…¨æœºåˆ¶ï¼Œå¼•å…¥äº†åŸŸï¼ˆDomainï¼‰çš„æ¦‚å¿µã€‚è™šæ‹Ÿæœºä¼šæŠŠæ‰€æœ‰ä»£ç åŠ è½½åˆ°ä¸åŒçš„ç³»ç»ŸåŸŸå’Œåº”ç”¨åŸŸï¼Œä¸åŒçš„ä¿æŠ¤åŸŸå¯¹åº”ä¸ä¸€æ ·çš„æƒé™ã€‚ç³»ç»ŸåŸŸéƒ¨åˆ†ä¸“é—¨è´Ÿè´£ä¸å…³é”®èµ„æºè¿›è¡Œäº¤äº’ï¼Œè€Œå„ä¸ªåº”ç”¨åŸŸéƒ¨åˆ†åˆ™é€šè¿‡ç³»ç»ŸåŸŸçš„éƒ¨åˆ†ä»£ç†æ¥å¯¹å„ç§éœ€è¦çš„èµ„æºè¿›è¡Œè®¿é—®</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6.png" alt="img"></p>
<h4 id="è‡ªå®šä¹‰-3">è‡ªå®šä¹‰</h4>
<p>å¯¹äºè‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„å®ç°ï¼Œåªéœ€è¦ç»§æ‰¿ ClassLoader ç±»ï¼Œè¦†å†™ findClass æ–¹æ³•å³å¯</p>
<p>ä½œç”¨ï¼šéš”ç¦»åŠ è½½ç±»ã€ä¿®æ”¹ç±»åŠ è½½çš„æ–¹å¼ã€æ‹“å±•åŠ è½½æºã€é˜²æ­¢æºç æ³„æ¼</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œè¯»å–æŒ‡å®šçš„ç±»è·¯å¾„classPathä¸‹çš„classæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> MyClassLoader extends ClassLoader&#123;</span><br><span class="line">    <span class="keyword">private</span> String classPath;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> MyClassLoader(String classPath) &#123;</span><br><span class="line">        <span class="keyword">this</span>.classPath = classPath;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="keyword">public</span> MyClassLoader(ClassLoader parent, String byteCodePath) &#123;</span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="keyword">this</span>.classPath = classPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123;</span><br><span class="line">       BufferedInputStream bis = <span class="literal">null</span>;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–å­—èŠ‚ç æ–‡ä»¶çš„å®Œæ•´è·¯å¾„</span></span><br><span class="line">            String fileName = classPath + className + <span class="string">&quot;.class&quot;</span>;</span><br><span class="line">            <span class="comment">// è·å–ä¸€ä¸ªè¾“å…¥æµ</span></span><br><span class="line">            bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(fileName));</span><br><span class="line">            <span class="comment">// è·å–ä¸€ä¸ªè¾“å‡ºæµ</span></span><br><span class="line">            baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            <span class="comment">// å…·ä½“è¯»å…¥æ•°æ®å¹¶å†™å‡ºçš„è¿‡ç¨‹</span></span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span> ((len = bis.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                baos.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// è·å–å†…å­˜ä¸­çš„å®Œæ•´çš„å­—èŠ‚æ•°ç»„çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">byte</span>[] byteCodes = baos.toByteArray();</span><br><span class="line">            <span class="comment">// è°ƒç”¨ defineClass()ï¼Œå°†å­—èŠ‚æ•°ç»„çš„æ•°æ®è½¬æ¢ä¸º Class çš„å®ä¾‹ã€‚</span></span><br><span class="line">            Class clazz = defineClass(<span class="literal">null</span>, byteCodes, <span class="number">0</span>, byteCodes.length);</span><br><span class="line">            <span class="keyword">return</span> clazz;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (baos != <span class="literal">null</span>)</span><br><span class="line">                    baos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (bis != <span class="literal">null</span>)</span><br><span class="line">                    bis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">    MyClassLoader loader = <span class="keyword">new</span> MyClassLoader(<span class="string">&quot;D:\Workspace\Project\JVM_study\src\java1\&quot;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    try &#123;</span></span><br><span class="line"><span class="string">        Class clazz = loader.loadClass(&quot;</span>Demo1<span class="string">&quot;);</span></span><br><span class="line"><span class="string">        System.out.println(&quot;</span>åŠ è½½æ­¤ç±»çš„ç±»çš„åŠ è½½å™¨ä¸ºï¼š<span class="string">&quot; + clazz.getClassLoader().getClass().getName());//MyClassLoader</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        System.out.println(&quot;</span>åŠ è½½å½“å‰ç±»çš„ç±»çš„åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨ä¸ºï¼š<span class="string">&quot; + clazz.getClassLoader().getParent().getClass().getName());//sun.misc.Launcher$AppClassLoader</span></span><br><span class="line"><span class="string">    &#125; catch (ClassNotFoundException e) &#123;</span></span><br><span class="line"><span class="string">        e.printStackTrace();</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="JDK9">JDK9</h4>
<p>ä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼ŒJDK9 æ²¡æœ‰æ”¹å˜ä¸‰å±‚ç±»åŠ è½½å™¨æ¶æ„å’ŒåŒäº²å§”æ´¾æ¨¡å‹ï¼Œä½†ä¸ºäº†æ¨¡å—åŒ–ç³»ç»Ÿçš„é¡ºåˆ©è¿è¡Œåšäº†ä¸€äº›å˜åŠ¨ï¼š</p>
<ul>
<li>
<p>æ‰©å±•æœºåˆ¶è¢«ç§»é™¤ï¼Œæ‰©å±•ç±»åŠ è½½å™¨ç”±äº<strong>å‘åå…¼å®¹æ€§</strong>çš„åŸå› è¢«ä¿ç•™ï¼Œä¸è¿‡è¢«é‡å‘½åä¸ºå¹³å°ç±»åŠ è½½å™¨ï¼ˆplatform classloaderï¼‰ï¼Œå¯ä»¥é€šè¿‡ ClassLoader çš„æ–°æ–¹æ³• getPlatformClassLoader() æ¥è·å–</p>
</li>
<li>
<p>JDK9 åŸºäºæ¨¡å—åŒ–è¿›è¡Œæ„å»ºï¼ˆåŸæ¥çš„ rt.jar å’Œ tools.jar è¢«æ‹†åˆ†æˆæ•°ä¸ª JMOD æ–‡ä»¶ï¼‰ï¼Œå…¶ä¸­ Java ç±»åº“å°±æ»¡è¶³äº†å¯æ‰©å±•çš„éœ€æ±‚ï¼Œé‚£å°±æ— é¡»å†ä¿ç•™ <code>\lib\ext</code> ç›®å½•ï¼Œæ­¤å‰ä½¿ç”¨è¿™ä¸ªç›®å½•æˆ–è€… <code>java.ext.dirs</code> ç³»ç»Ÿå˜é‡æ¥æ‰©å±• JDK åŠŸèƒ½çš„æœºåˆ¶å°±ä¸éœ€è¦å†å­˜åœ¨</p>
</li>
<li>
<p>å¯åŠ¨ç±»åŠ è½½å™¨ã€å¹³å°ç±»åŠ è½½å™¨ã€åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨å…¨éƒ½ç»§æ‰¿äº <code>jdk.internal.loader.BuiltinClassLoader</code></p>
</li>
</ul>
<h2 id="è¿è¡Œæœºåˆ¶">è¿è¡Œæœºåˆ¶</h2>
<h3 id="æ‰§è¡Œè¿‡ç¨‹">æ‰§è¡Œè¿‡ç¨‹</h3>
<p>Java æ–‡ä»¶ç¼–è¯‘æ‰§è¡Œçš„è¿‡ç¨‹ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-Java%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E6%89%A7%E8%A1%8C%E7%9A%84%E8%BF%87%E7%A8%8B.png" alt="img"></p>
<ul>
<li>ç±»åŠ è½½å™¨ï¼šç”¨äºè£…è½½å­—èŠ‚ç æ–‡ä»¶ï¼ˆ.classæ–‡ä»¶ï¼‰</li>
<li>è¿è¡Œæ—¶æ•°æ®åŒºï¼šç”¨äºåˆ†é…å­˜å‚¨ç©ºé—´</li>
<li>æ‰§è¡Œå¼•æ“ï¼šæ‰§è¡Œå­—èŠ‚ç æ–‡ä»¶æˆ–æœ¬åœ°æ–¹æ³•</li>
<li>åƒåœ¾å›æ”¶å™¨ï¼šç”¨äºå¯¹ JVM ä¸­çš„åƒåœ¾å†…å®¹è¿›è¡Œå›æ”¶</li>
</ul>
<h3 id="å­—èŠ‚ç ">å­—èŠ‚ç </h3>
<h4 id="è·¨å¹³å°æ€§">è·¨å¹³å°æ€§</h4>
<p>Java è¯­è¨€ï¼šè·¨å¹³å°çš„è¯­è¨€ï¼ˆwrite once ï¼Œrun anywhereï¼‰</p>
<ul>
<li>å½“ Java æºä»£ç æˆåŠŸç¼–è¯‘æˆå­—èŠ‚ç åï¼Œåœ¨ä¸åŒçš„å¹³å°ä¸Šé¢è¿è¡Œ<strong>æ— é¡»å†æ¬¡ç¼–è¯‘</strong></li>
<li>è®©ä¸€ä¸ª Java ç¨‹åºæ­£ç¡®åœ°è¿è¡Œåœ¨ JVM ä¸­ï¼ŒJava æºç å°±å¿…é¡»è¦è¢«ç¼–è¯‘ä¸ºç¬¦åˆ JVM è§„èŒƒçš„å­—èŠ‚ç </li>
</ul>
<p>ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ç¼–è¯‘å™¨ï¼š</p>
<ul>
<li>å‰ç«¯ç¼–è¯‘å™¨ï¼š Sun çš„å…¨é‡å¼ç¼–è¯‘å™¨ javacã€ Eclipse çš„å¢é‡å¼ç¼–è¯‘å™¨ ECJï¼Œ<strong>æŠŠæºä»£ç ç¼–è¯‘ä¸ºå­—èŠ‚ç æ–‡ä»¶ .class</strong>
<ul>
<li>IntelliJ IDEA ä½¿ç”¨ javac ç¼–è¯‘å™¨</li>
<li>Eclipse ä¸­ï¼Œå½“å¼€å‘äººå‘˜ç¼–å†™å®Œä»£ç åä¿å­˜æ—¶ï¼ŒECJ ç¼–è¯‘å™¨å°±ä¼šæŠŠæœªç¼–è¯‘éƒ¨åˆ†çš„æºç é€è¡Œè¿›è¡Œç¼–è¯‘ï¼Œè€Œéæ¯æ¬¡éƒ½å…¨é‡ç¼–è¯‘ï¼Œå› æ­¤ ECJ çš„ç¼–è¯‘æ•ˆç‡ä¼šæ¯” javac æ›´åŠ è¿…é€Ÿå’Œé«˜æ•ˆ</li>
<li>å‰ç«¯ç¼–è¯‘å™¨å¹¶ä¸ä¼šç›´æ¥æ¶‰åŠç¼–è¯‘ä¼˜åŒ–ç­‰æ–¹é¢çš„æŠ€æœ¯ï¼Œå…·ä½“ä¼˜åŒ–ç»†èŠ‚ç§»äº¤ç»™ HotSpot çš„ JIT ç¼–è¯‘å™¨è´Ÿè´£</li>
</ul>
</li>
<li>åç«¯è¿è¡ŒæœŸç¼–è¯‘å™¨ï¼šHotSpot VM çš„ C1ã€C2 ç¼–è¯‘å™¨ï¼Œä¹Ÿå°±æ˜¯ JIT ç¼–è¯‘å™¨ï¼ŒGraal ç¼–è¯‘å™¨
<ul>
<li>JIT ç¼–è¯‘å™¨ï¼šæ‰§è¡Œå¼•æ“éƒ¨åˆ†è¯¦è§£</li>
<li>Graal ç¼–è¯‘å™¨ï¼šJDK10 HotSpot åŠ å…¥çš„ä¸€ä¸ªå…¨æ–°çš„å³æ—¶ç¼–è¯‘å™¨ï¼Œç¼–è¯‘æ•ˆæœçŸ­çŸ­å‡ å¹´æ—¶é—´å°±è¿½å¹³äº† C2</li>
</ul>
</li>
<li>é™æ€æå‰ç¼–è¯‘å™¨ï¼šAOT  (Ahead Of Time Compilerï¼‰ç¼–è¯‘å™¨ï¼Œç›´æ¥æŠŠæºä»£ç ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ä»£ç 
<ul>
<li>JDK 9 å¼•å…¥ï¼Œæ˜¯ä¸å³æ—¶ç¼–è¯‘ç›¸å¯¹ç«‹çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå³æ—¶ç¼–è¯‘æŒ‡çš„æ˜¯åœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­å°†å­—èŠ‚ç è½¬æ¢ä¸ºæœºå™¨ç ï¼ŒAOT æ˜¯ç¨‹åºè¿è¡Œä¹‹å‰ä¾¿å°†å­—èŠ‚ç è½¬æ¢ä¸ºæœºå™¨ç </li>
<li>ä¼˜ç‚¹ï¼šJVM åŠ è½½å·²ç»é¢„ç¼–è¯‘æˆäºŒè¿›åˆ¶åº“ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œï¼Œä¸å¿…ç­‰å¾…å³æ—¶ç¼–è¯‘å™¨çš„é¢„çƒ­ï¼Œå‡å°‘ Java åº”ç”¨ç¬¬ä¸€æ¬¡è¿è¡Œæ…¢çš„ç°è±¡</li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>ç ´åäº† Java <strong>ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ</strong>ï¼Œå¿…é¡»ä¸ºæ¯ä¸ªä¸åŒç¡¬ä»¶ç¼–è¯‘å¯¹åº”çš„å‘è¡ŒåŒ…</li>
<li>é™ä½äº† Java é“¾æ¥è¿‡ç¨‹çš„åŠ¨æ€æ€§ï¼ŒåŠ è½½çš„ä»£ç åœ¨ç¼–è¯‘æœŸå°±å¿…é¡»å…¨éƒ¨å·²çŸ¥</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="è¯­è¨€å‘å±•">è¯­è¨€å‘å±•</h4>
<p>æœºå™¨ç ï¼šå„ç§ç”¨äºŒè¿›åˆ¶ç¼–ç æ–¹å¼è¡¨ç¤ºçš„æŒ‡ä»¤ï¼Œä¸ CPU ç´§å¯†ç›¸å…³ï¼Œæ‰€ä»¥ä¸åŒç§ç±»çš„ CPU å¯¹åº”çš„æœºå™¨æŒ‡ä»¤ä¸åŒ</p>
<p>æŒ‡ä»¤ï¼šæŒ‡ä»¤å°±æ˜¯æŠŠæœºå™¨ç ä¸­ç‰¹å®šçš„ 0 å’Œ 1 åºåˆ—ï¼Œç®€åŒ–æˆå¯¹åº”çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ movï¼Œinc ç­‰ï¼Œå¯è¯»æ€§ç¨å¥½ï¼Œä½†æ˜¯ä¸åŒçš„ç¡¬ä»¶å¹³å°çš„åŒä¸€ç§æŒ‡ä»¤ï¼ˆæ¯”å¦‚ movï¼‰ï¼Œå¯¹åº”çš„æœºå™¨ç ä¹Ÿå¯èƒ½ä¸åŒ</p>
<p>æŒ‡ä»¤é›†ï¼šä¸åŒçš„ç¡¬ä»¶å¹³å°æ”¯æŒçš„æŒ‡ä»¤æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ¯ä¸ªå¹³å°æ‰€æ”¯æŒçš„æŒ‡ä»¤ï¼Œç§°ä¹‹ä¸ºå¯¹åº”å¹³å°çš„æŒ‡ä»¤é›†</p>
<ul>
<li>x86 æŒ‡ä»¤é›†ï¼Œå¯¹åº”çš„æ˜¯ x86 æ¶æ„çš„å¹³å°</li>
<li>ARM æŒ‡ä»¤é›†ï¼Œå¯¹åº”çš„æ˜¯ ARM æ¶æ„çš„å¹³å°</li>
</ul>
<p>æ±‡ç¼–è¯­è¨€ï¼šç”¨åŠ©è®°ç¬¦ä»£æ›¿æœºå™¨æŒ‡ä»¤çš„æ“ä½œç ï¼Œç”¨åœ°å€ç¬¦å·æˆ–æ ‡å·ä»£æ›¿æŒ‡ä»¤æˆ–æ“ä½œæ•°çš„åœ°å€</p>
<ul>
<li>åœ¨ä¸åŒçš„ç¡¬ä»¶å¹³å°ï¼Œæ±‡ç¼–è¯­è¨€å¯¹åº”ç€ä¸åŒçš„æœºå™¨è¯­è¨€æŒ‡ä»¤é›†ï¼Œé€šè¿‡æ±‡ç¼–è¿‡ç¨‹è½¬æ¢æˆæœºå™¨æŒ‡ä»¤</li>
<li>è®¡ç®—æœºåªè®¤è¯†æŒ‡ä»¤ç ï¼Œæ±‡ç¼–è¯­è¨€ç¼–å†™çš„ç¨‹åºä¹Ÿå¿…é¡»ç¿»è¯‘æˆæœºå™¨æŒ‡ä»¤ç ï¼Œè®¡ç®—æœºæ‰èƒ½è¯†åˆ«å’Œæ‰§è¡Œ</li>
</ul>
<p>é«˜çº§è¯­è¨€ï¼šä¸ºäº†ä½¿è®¡ç®—æœºç”¨æˆ·ç¼–ç¨‹åºæ›´å®¹æ˜“äº›ï¼Œåæ¥å°±å‡ºç°äº†å„ç§é«˜çº§è®¡ç®—æœºè¯­è¨€</p>
<p>å­—èŠ‚ç ï¼šæ˜¯ä¸€ç§ä¸­é—´çŠ¶æ€ï¼ˆä¸­é—´ç ï¼‰çš„äºŒè¿›åˆ¶ä»£ç ï¼Œæ¯”æœºå™¨ç æ›´æŠ½è±¡ï¼Œéœ€è¦ç›´è¯‘å™¨è½¬è¯‘åæ‰èƒ½æˆä¸ºæœºå™¨ç </p>
<ul>
<li>å­—èŠ‚ç ä¸ºäº†å®ç°ç‰¹å®šè½¯ä»¶è¿è¡Œå’Œè½¯ä»¶ç¯å¢ƒï¼Œä¸ç¡¬ä»¶ç¯å¢ƒæ— å…³</li>
<li>é€šè¿‡ç¼–è¯‘å™¨å’Œè™šæ‹Ÿæœºå™¨å®ç°ï¼Œç¼–è¯‘å™¨å°†æºç ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œè™šæ‹Ÿæœºå™¨å°†å­—èŠ‚ç è½¬è¯‘ä¸ºå¯ä»¥ç›´æ¥æ‰§è¡Œçš„æŒ‡ä»¤</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="img"></p>
<h4 id="ç±»ç»“æ„">ç±»ç»“æ„</h4>
<h5 id="æ–‡ä»¶ç»“æ„">æ–‡ä»¶ç»“æ„</h5>
<p>å­—èŠ‚ç æ˜¯ä¸€ç§äºŒè¿›åˆ¶çš„ç±»æ–‡ä»¶ï¼Œæ˜¯ç¼–è¯‘ä¹‹åä¾›è™šæ‹Ÿæœºè§£é‡Šæ‰§è¡Œçš„äºŒè¿›åˆ¶å­—èŠ‚ç æ–‡ä»¶ï¼Œ<strong>ä¸€ä¸ª class æ–‡ä»¶å¯¹åº”ä¸€ä¸ª public ç±»å‹çš„ç±»æˆ–æ¥å£</strong></p>
<p>å­—èŠ‚ç å†…å®¹æ˜¯ <strong>JVM çš„å­—èŠ‚ç æŒ‡ä»¤</strong>ï¼Œä¸æ˜¯æœºå™¨ç ï¼ŒCã€C++ ç»ç”±ç¼–è¯‘å™¨ç›´æ¥ç”Ÿæˆæœºå™¨ç ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡æ¯” Java é«˜</p>
<p>JVM å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/specs/jvms/se8/html/index.html">https://docs.oracle.com/javase/specs/jvms/se8/html/index.html</a></p>
<p>æ ¹æ® JVM è§„èŒƒï¼Œç±»æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ClassFile &#123;</span><br><span class="line">	u4 				magic<span class="comment">;						</span></span><br><span class="line">    u2 				minor_version<span class="comment">;						</span></span><br><span class="line">    u2 				major_version<span class="comment">;						</span></span><br><span class="line">    u2 				constant_pool_count<span class="comment">;</span></span><br><span class="line">    cp_info			constant_pool[constant_pool_count-<span class="number">1</span>]<span class="comment">;</span></span><br><span class="line">    u2	 			access_flags<span class="comment">;</span></span><br><span class="line">    u2 				this_class<span class="comment">;</span></span><br><span class="line">    u2 				super_class<span class="comment">;</span></span><br><span class="line">    u2 				interfaces_count<span class="comment">;</span></span><br><span class="line">    u2 				interfaces[interfaces_count]<span class="comment">;</span></span><br><span class="line">    u2 				fields_count<span class="comment">;</span></span><br><span class="line">    field_info 		fields[fields_count]<span class="comment">;</span></span><br><span class="line">    u2 				methods_count<span class="comment">;</span></span><br><span class="line">    method_info 	methods[methods_count]<span class="comment">;</span></span><br><span class="line">    u2 				attributes_count<span class="comment">;</span></span><br><span class="line">    attribute_info 	attributes[attributes_count]<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>åç§°</th>
<th>è¯´æ˜</th>
<th>é•¿åº¦</th>
<th>æ•°é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>u4</td>
<td>magic</td>
<td>é­”æ•°ï¼Œè¯†åˆ«ç±»æ–‡ä»¶æ ¼å¼</td>
<td>4ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>minor_version</td>
<td>å‰¯ç‰ˆæœ¬å·(å°ç‰ˆæœ¬)</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>major_version</td>
<td>ä¸»ç‰ˆæœ¬å·(å¤§ç‰ˆæœ¬)</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>constant_pool_count</td>
<td>å¸¸é‡æ± è®¡æ•°å™¨</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>cp_info</td>
<td>constant_pool</td>
<td>å¸¸é‡æ± è¡¨</td>
<td>nä¸ªå­—èŠ‚</td>
<td>constant_pool_count-1</td>
</tr>
<tr>
<td>u2</td>
<td>access_flags</td>
<td>è®¿é—®æ ‡è¯†</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>this_class</td>
<td>ç±»ç´¢å¼•</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>super_class</td>
<td>çˆ¶ç±»ç´¢å¼•</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces_count</td>
<td>æ¥å£è®¡æ•°</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces</td>
<td>æ¥å£ç´¢å¼•é›†åˆ</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>interfaces_count</td>
</tr>
<tr>
<td>u2</td>
<td>fields_count</td>
<td>å­—æ®µè®¡æ•°å™¨</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>field_info</td>
<td>fields</td>
<td>å­—æ®µè¡¨</td>
<td>nä¸ªå­—èŠ‚</td>
<td>fields_count</td>
</tr>
<tr>
<td>u2</td>
<td>methods_count</td>
<td>æ–¹æ³•è®¡æ•°å™¨</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>method_info</td>
<td>methods</td>
<td>æ–¹æ³•è¡¨</td>
<td>nä¸ªå­—èŠ‚</td>
<td>methods_count</td>
</tr>
<tr>
<td>u2</td>
<td>attributes_count</td>
<td>å±æ€§è®¡æ•°å™¨</td>
<td>2ä¸ªå­—èŠ‚</td>
<td>1</td>
</tr>
<tr>
<td>attribute_info</td>
<td>attributes</td>
<td>å±æ€§è¡¨</td>
<td>nä¸ªå­—èŠ‚</td>
<td>attributes_count</td>
</tr>
</tbody>
</table>
<p>Class æ–‡ä»¶æ ¼å¼é‡‡ç”¨ä¸€ç§ç±»ä¼¼äº C è¯­è¨€ç»“æ„ä½“çš„æ–¹å¼è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œè¿™ç§ç»“æ„ä¸­åªæœ‰ä¸¤ç§æ•°æ®ç±»å‹ï¼šæ— ç¬¦å·æ•°å’Œè¡¨</p>
<ul>
<li>æ— ç¬¦å·æ•°å±äºåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä»¥ u1ã€u2ã€u4ã€u8 æ¥åˆ†åˆ«ä»£è¡¨1ä¸ªå­—èŠ‚ã€2ä¸ªå­—èŠ‚ã€4ä¸ªå­—èŠ‚å’Œ8ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•°ï¼Œæ— ç¬¦å·æ•°å¯ä»¥ç”¨æ¥æè¿°æ•°å­—ã€ç´¢å¼•å¼•ç”¨ã€æ•°é‡å€¼æˆ–è€…æŒ‰ç…§ UTF-8 ç¼–ç æ„æˆå­—ç¬¦ä¸²</li>
<li>è¡¨æ˜¯ç”±å¤šä¸ªæ— ç¬¦å·æ•°æˆ–è€…å…¶ä»–è¡¨ä½œä¸ºæ•°æ®é¡¹æ„æˆçš„å¤åˆæ•°æ®ç±»å‹ï¼Œè¡¨éƒ½ä»¥ <code>_info</code> ç»“å°¾ï¼Œç”¨äºæè¿°æœ‰å±‚æ¬¡å…³ç³»çš„æ•°æ®ï¼Œæ•´ä¸ª Class æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¼ è¡¨ï¼Œç”±äºè¡¨æ²¡æœ‰å›ºå®šé•¿åº¦ï¼Œæ‰€ä»¥é€šå¸¸ä¼šåœ¨å…¶å‰é¢åŠ ä¸Šä¸ªæ•°è¯´æ˜</li>
</ul>
<p>è·å–æ–¹å¼ï¼š</p>
<ul>
<li>HelloWorld.java æ‰§è¡Œ <code>javac -parameters -d . HellowWorld.java</code>æŒ‡ä»¤</li>
<li>å†™å…¥æ–‡ä»¶æŒ‡ä»¤ <code>javap -v xxx.class &gt;xxx.txt</code></li>
<li>IDEA æ’ä»¶ jclasslib</li>
</ul>
<h5 id="é­”æ•°ç‰ˆæœ¬">é­”æ•°ç‰ˆæœ¬</h5>
<p>é­”æ•°ï¼šæ¯ä¸ª Class æ–‡ä»¶å¼€å¤´çš„ 4 ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•´æ•°ç§°ä¸ºé­”æ•°ï¼ˆMagic Numberï¼‰ï¼Œæ˜¯ Class æ–‡ä»¶çš„æ ‡è¯†ç¬¦ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªèƒ½è¢«è™šæ‹Ÿæœºæ¥å—çš„æœ‰æ•ˆåˆæ³•çš„ Class æ–‡ä»¶ï¼Œ</p>
<ul>
<li>é­”æ•°å€¼å›ºå®šä¸º 0xCAFEBABEï¼Œä¸ç¬¦åˆåˆ™ä¼šæŠ›å‡ºé”™è¯¯</li>
<li>ä½¿ç”¨é­”æ•°è€Œä¸æ˜¯æ‰©å±•åæ¥è¿›è¡Œè¯†åˆ«ä¸»è¦æ˜¯åŸºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œå› ä¸ºæ–‡ä»¶æ‰©å±•åå¯ä»¥éšæ„åœ°æ”¹åŠ¨</li>
</ul>
<p>ç‰ˆæœ¬ï¼š4 ä¸ª å­—èŠ‚ï¼Œ5 6ä¸¤ä¸ªå­—èŠ‚ä»£è¡¨çš„æ˜¯ç¼–è¯‘çš„å‰¯ç‰ˆæœ¬å· minor_versionï¼Œè€Œ 7 8 ä¸¤ä¸ªå­—èŠ‚æ˜¯ç¼–è¯‘çš„ä¸»ç‰ˆæœ¬å· major_version</p>
<ul>
<li>ä¸åŒç‰ˆæœ¬çš„ Java ç¼–è¯‘å™¨ç¼–è¯‘çš„ Class æ–‡ä»¶å¯¹åº”çš„ç‰ˆæœ¬æ˜¯ä¸ä¸€æ ·çš„ï¼Œé«˜ç‰ˆæœ¬çš„ Java è™šæ‹Ÿæœºå¯ä»¥æ‰§è¡Œç”±ä½ç‰ˆæœ¬ç¼–è¯‘å™¨ç”Ÿæˆçš„ Class æ–‡ä»¶ï¼Œåä¹‹ JVM ä¼šæŠ›å‡ºå¼‚å¸¸ <code>java.lang.UnsupportedClassVersionError</code></li>
</ul>
<table>
<thead>
<tr>
<th>ä¸»ç‰ˆæœ¬ï¼ˆåè¿›åˆ¶ï¼‰</th>
<th>å‰¯ç‰ˆæœ¬ï¼ˆåè¿›åˆ¶ï¼‰</th>
<th>ç¼–è¯‘å™¨ç‰ˆæœ¬</th>
</tr>
</thead>
<tbody>
<tr>
<td>45</td>
<td>3</td>
<td>1.1</td>
</tr>
<tr>
<td>46</td>
<td>0</td>
<td>1.2</td>
</tr>
<tr>
<td>47</td>
<td>0</td>
<td>1.3</td>
</tr>
<tr>
<td>48</td>
<td>0</td>
<td>1.4</td>
</tr>
<tr>
<td>49</td>
<td>0</td>
<td>1.5</td>
</tr>
<tr>
<td>50</td>
<td>0</td>
<td>1.6</td>
</tr>
<tr>
<td>51</td>
<td>0</td>
<td>1.7</td>
</tr>
<tr>
<td>52</td>
<td>0</td>
<td>1.8</td>
</tr>
<tr>
<td>53</td>
<td>0</td>
<td>1.9</td>
</tr>
<tr>
<td>54</td>
<td>0</td>
<td>1.10</td>
</tr>
<tr>
<td>55</td>
<td>0</td>
<td>1.11</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E7%B1%BB%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p>å›¾ç‰‡æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PJ411n7xZ">https://www.bilibili.com/video/BV1PJ411n7xZ</a></p>
<h5 id="å¸¸é‡æ± ">å¸¸é‡æ± </h5>
<p>å¸¸é‡æ± ä¸­å¸¸é‡çš„æ•°é‡æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥åœ¨å¸¸é‡æ± çš„å…¥å£éœ€è¦æ”¾ç½®ä¸€é¡¹ u2 ç±»å‹çš„æ— ç¬¦å·æ•°ï¼Œä»£è¡¨å¸¸é‡æ± è®¡æ•°å™¨ï¼ˆconstant_pool_countï¼‰ï¼Œè¿™ä¸ªå®¹é‡è®¡æ•°æ˜¯ä» 1 è€Œä¸æ˜¯ 0 å¼€å§‹ï¼Œæ˜¯ä¸ºäº†æ»¡è¶³åé¢æŸäº›æŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•å€¼çš„æ•°æ®åœ¨ç‰¹å®šæƒ…å†µä¸‹éœ€è¦è¡¨è¾¾ä¸å¼•ç”¨ä»»ä½•ä¸€ä¸ªå¸¸é‡æ± é¡¹ç›®ï¼Œè¿™ç§æƒ…å†µå¯ç”¨ç´¢å¼•å€¼ 0 æ¥è¡¨ç¤º</p>
<p>constant_pool æ˜¯ä¸€ç§è¡¨ç»“æ„ï¼Œä»¥1 ~ constant_pool_count - 1ä¸ºç´¢å¼•ï¼Œè¡¨æ˜æœ‰å¤šå°‘ä¸ªå¸¸é‡æ± è¡¨é¡¹ã€‚è¡¨é¡¹ä¸­å­˜æ”¾ç¼–è¯‘æ—¶æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åè¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± </p>
<ul>
<li>
<p>å­—é¢é‡ï¼ˆLiteralï¼‰ ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹å¸¸é‡ã€å£°æ˜ä¸º final çš„å¸¸é‡å€¼ç­‰</p>
</li>
<li>
<p>ç¬¦å·å¼•ç”¨ï¼ˆSymbolic Referencesï¼‰ï¼šç±»å’Œæ¥å£çš„å…¨é™å®šåã€å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ã€æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</p>
<ul>
<li>
<p>å…¨é™å®šåï¼šcom/test/Demo è¿™ä¸ªå°±æ˜¯ç±»çš„å…¨é™å®šåï¼Œä»…ä»…æ˜¯æŠŠåŒ…åçš„ <code>.</code> æ›¿æ¢æˆ <code>/</code>ï¼Œä¸ºäº†ä½¿è¿ç»­çš„å¤šä¸ªå…¨é™å®šåä¹‹é—´ä¸äº§ç”Ÿæ··æ·†ï¼Œåœ¨ä½¿ç”¨æ—¶æœ€åä¸€èˆ¬ä¼šåŠ å…¥ä¸€ä¸ª <code>;</code> è¡¨ç¤ºå…¨é™å®šåç»“æŸ</p>
</li>
<li>
<p>ç®€å•åç§°ï¼šæŒ‡æ²¡æœ‰ç±»å‹å’Œå‚æ•°ä¿®é¥°çš„æ–¹æ³•æˆ–è€…å­—æ®µåç§°ï¼Œæ¯”å¦‚å­—æ®µ x çš„ç®€å•åç§°å°±æ˜¯ x</p>
</li>
<li>
<p>æè¿°ç¬¦ï¼šç”¨æ¥æè¿°å­—æ®µçš„æ•°æ®ç±»å‹ã€æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ï¼ˆåŒ…æ‹¬æ•°é‡ã€ç±»å‹ä»¥åŠé¡ºåºï¼‰å’Œè¿”å›å€¼</p>
<table>
<thead>
<tr>
<th>æ ‡å¿—ç¬¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ byte</td>
</tr>
<tr>
<td>C</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ char</td>
</tr>
<tr>
<td>D</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ double</td>
</tr>
<tr>
<td>F</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ float</td>
</tr>
<tr>
<td>I</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ int</td>
</tr>
<tr>
<td>J</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ long</td>
</tr>
<tr>
<td>S</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ short</td>
</tr>
<tr>
<td>Z</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹ boolean</td>
</tr>
<tr>
<td>V</td>
<td>ä»£è¡¨ void ç±»å‹</td>
</tr>
<tr>
<td>L</td>
<td>å¯¹è±¡ç±»å‹ï¼Œæ¯”å¦‚ï¼š<code>Ljava/lang/Object;</code>ï¼Œä¸åŒæ–¹æ³•é—´ç”¨<code>;</code>éš”å¼€</td>
</tr>
<tr>
<td>[</td>
<td>æ•°ç»„ç±»å‹ï¼Œä»£è¡¨ä¸€ç»´æ•°ç»„ã€‚æ¯”å¦‚ï¼š<code>double[][][] is [[[D</code></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
</ul>
<p>å¸¸é‡ç±»å‹å’Œç»“æ„ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æ ‡å¿—(æˆ–æ ‡è¯†)</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>CONSTANT_utf8_info</td>
<td>1</td>
<td>UTF-8ç¼–ç çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>CONSTANT_Integer_info</td>
<td>3</td>
<td>æ•´å‹å­—é¢é‡</td>
</tr>
<tr>
<td>CONSTANT_Float_info</td>
<td>4</td>
<td>æµ®ç‚¹å‹å­—é¢é‡</td>
</tr>
<tr>
<td>CONSTANT_Long_info</td>
<td>5</td>
<td>é•¿æ•´å‹å­—é¢é‡</td>
</tr>
<tr>
<td>CONSTANT_Double_info</td>
<td>6</td>
<td>åŒç²¾åº¦æµ®ç‚¹å‹å­—é¢é‡</td>
</tr>
<tr>
<td>CONSTANT_Class_info</td>
<td>7</td>
<td>ç±»æˆ–æ¥å£çš„ç¬¦å·å¼•ç”¨</td>
</tr>
<tr>
<td>CONSTANT_String_info</td>
<td>8</td>
<td>å­—ç¬¦ä¸²ç±»å‹å­—é¢é‡</td>
</tr>
<tr>
<td>CONSTANT_Fieldref_info</td>
<td>9</td>
<td>å­—æ®µçš„ç¬¦å·å¼•ç”¨</td>
</tr>
<tr>
<td>CONSTANT_Methodref_info</td>
<td>10</td>
<td>ç±»ä¸­æ–¹æ³•çš„ç¬¦å·å¼•ç”¨</td>
</tr>
<tr>
<td>CONSTANT_InterfaceMethodref_info</td>
<td>11</td>
<td>æ¥å£ä¸­æ–¹æ³•çš„ç¬¦å·å¼•ç”¨</td>
</tr>
<tr>
<td>CONSTANT_NameAndType_info</td>
<td>12</td>
<td>å­—æ®µæˆ–æ–¹æ³•çš„ç¬¦å·å¼•ç”¨</td>
</tr>
<tr>
<td>CONSTANT_MethodHandle_info</td>
<td>15</td>
<td>è¡¨ç¤ºæ–¹æ³•å¥æŸ„</td>
</tr>
<tr>
<td>CONSTANT_MethodType_info</td>
<td>16</td>
<td>æ ‡å¿—æ–¹æ³•ç±»å‹</td>
</tr>
<tr>
<td>CONSTANT_InvokeDynamic_info</td>
<td>18</td>
<td>è¡¨ç¤ºä¸€ä¸ªåŠ¨æ€æ–¹æ³•è°ƒç”¨ç‚¹</td>
</tr>
</tbody>
</table>
<p>18 ç§å¸¸é‡æ²¡æœ‰å‡ºç° byteã€shortã€charï¼Œboolean çš„åŸå› ï¼šç¼–è¯‘ä¹‹åéƒ½å¯ä»¥ç†è§£ä¸º Integer</p>
<h5 id="è®¿é—®æ ‡è¯†">è®¿é—®æ ‡è¯†</h5>
<p>è®¿é—®æ ‡è¯†ï¼ˆaccess_flagï¼‰ï¼Œåˆå«è®¿é—®æ ‡å¿—ã€è®¿é—®æ ‡è®°ï¼Œè¯¥æ ‡è¯†ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œç”¨äºè¯†åˆ«ä¸€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿™ä¸ª Class æ˜¯ç±»è¿˜æ˜¯æ¥å£ï¼Œæ˜¯å¦å®šä¹‰ä¸º publicç±»å‹ï¼Œæ˜¯å¦å®šä¹‰ä¸º abstractç±»å‹ç­‰</p>
<ul>
<li>ç±»çš„è®¿é—®æƒé™é€šå¸¸ä¸º ACC_ å¼€å¤´çš„å¸¸é‡</li>
<li>æ¯ä¸€ç§ç±»å‹çš„è¡¨ç¤ºéƒ½æ˜¯é€šè¿‡è®¾ç½®è®¿é—®æ ‡è®°çš„ 32 ä½ä¸­çš„ç‰¹å®šä½æ¥å®ç°çš„ï¼Œæ¯”å¦‚è‹¥æ˜¯ public final çš„ç±»ï¼Œåˆ™è¯¥æ ‡è®°ä¸º <code>ACC_PUBLIC | ACC_FINAL</code></li>
<li>ä½¿ç”¨ <code>ACC_SUPER</code> å¯ä»¥è®©ç±»æ›´å‡†ç¡®åœ°å®šä½åˆ°çˆ¶ç±»çš„æ–¹æ³•ï¼Œç¡®å®šç±»æˆ–æ¥å£é‡Œé¢çš„ invokespecial æŒ‡ä»¤ä½¿ç”¨çš„æ˜¯å“ªä¸€ç§æ‰§è¡Œè¯­ä¹‰ï¼Œç°ä»£ç¼–è¯‘å™¨éƒ½ä¼šè®¾ç½®å¹¶ä¸”ä½¿ç”¨è¿™ä¸ªæ ‡è®°</li>
</ul>
<table>
<thead>
<tr>
<th>æ ‡å¿—åç§°</th>
<th>æ ‡å¿—å€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACC_PUBLIC</td>
<td>0x0001</td>
<td>æ ‡å¿—ä¸º public ç±»å‹</td>
</tr>
<tr>
<td>ACC_FINAL</td>
<td>0x0010</td>
<td>æ ‡å¿—è¢«å£°æ˜ä¸º finalï¼Œåªæœ‰ç±»å¯ä»¥è®¾ç½®</td>
</tr>
<tr>
<td>ACC_SUPER</td>
<td>0x0020</td>
<td>æ ‡å¿—å…è®¸ä½¿ç”¨ invokespecial å­—èŠ‚ç æŒ‡ä»¤çš„æ–°è¯­ä¹‰ï¼ŒJDK1.0.2ä¹‹åç¼–è¯‘å‡ºæ¥çš„ç±»çš„è¿™ä¸ªæ ‡å¿—é»˜è®¤ä¸ºçœŸï¼Œä½¿ç”¨å¢å¼ºçš„æ–¹æ³•è°ƒç”¨çˆ¶ç±»æ–¹æ³•</td>
</tr>
<tr>
<td>ACC_INTERFACE</td>
<td>0x0200</td>
<td>æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæ¥å£</td>
</tr>
<tr>
<td>ACC_ABSTRACT</td>
<td>0x0400</td>
<td>æ˜¯å¦ä¸º abstract ç±»å‹ï¼Œå¯¹äºæ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è¯´ï¼Œæ¬¡æ ‡å¿—å€¼ä¸ºçœŸï¼Œå…¶ä»–ç±»å‹ä¸ºå‡</td>
</tr>
<tr>
<td>ACC_SYNTHETIC</td>
<td>0x1000</td>
<td>æ ‡å¿—æ­¤ç±»å¹¶éç”±ç”¨æˆ·ä»£ç äº§ç”Ÿï¼ˆç”±ç¼–è¯‘å™¨äº§ç”Ÿçš„ç±»ï¼Œæ²¡æœ‰æºç å¯¹åº”ï¼‰</td>
</tr>
<tr>
<td>ACC_ANNOTATION</td>
<td>0x2000</td>
<td>æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæ³¨è§£</td>
</tr>
<tr>
<td>ACC_ENUM</td>
<td>0x4000</td>
<td>æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæšä¸¾</td>
</tr>
</tbody>
</table>
<h5 id="ç´¢å¼•é›†åˆ">ç´¢å¼•é›†åˆ</h5>
<p>ç±»ç´¢å¼•ã€çˆ¶ç±»ç´¢å¼•ã€æ¥å£ç´¢å¼•é›†åˆ</p>
<ul>
<li>ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„å…¨é™å®šå</li>
<li>çˆ¶ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„çˆ¶ç±»çš„å…¨é™å®šåï¼ŒJava è¯­è¨€ä¸å…è®¸å¤šé‡ç»§æ‰¿ï¼Œæ‰€ä»¥çˆ¶ç±»ç´¢å¼•åªæœ‰ä¸€ä¸ªï¼Œé™¤äº†Object ä¹‹å¤–ï¼Œæ‰€æœ‰çš„ Java ç±»éƒ½æœ‰çˆ¶ç±»ï¼Œå› æ­¤é™¤äº† java.lang.Object å¤–ï¼Œæ‰€æœ‰ Java ç±»çš„çˆ¶ç±»ç´¢å¼•éƒ½ä¸ä¸º0</li>
<li>æ¥å£ç´¢å¼•é›†åˆå°±ç”¨æ¥æè¿°è¿™ä¸ªç±»å®ç°äº†å“ªäº›æ¥å£
<ul>
<li>interfaces_count é¡¹çš„å€¼è¡¨ç¤ºå½“å‰ç±»æˆ–æ¥å£çš„ç›´æ¥è¶…æ¥å£æ•°é‡</li>
<li>interfaces[] æ¥å£ç´¢å¼•é›†åˆï¼Œè¢«å®ç°çš„æ¥å£å°†æŒ‰ implements è¯­å¥åçš„æ¥å£é¡ºåºä»å·¦åˆ°å³æ’åˆ—åœ¨æ¥å£ç´¢å¼•é›†åˆä¸­</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>é•¿åº¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>u2</td>
<td>this_class</td>
</tr>
<tr>
<td>u2</td>
<td>super_class</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces_count</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces[interfaces_count]</td>
</tr>
</tbody>
</table>
<h5 id="å­—æ®µè¡¨">å­—æ®µè¡¨</h5>
<p>å­—æ®µ fields ç”¨äºæè¿°æ¥å£æˆ–ç±»ä¸­å£°æ˜çš„å˜é‡ï¼ŒåŒ…æ‹¬ç±»å˜é‡ä»¥åŠå®ä¾‹å˜é‡ï¼Œä½†ä¸åŒ…æ‹¬æ–¹æ³•å†…éƒ¨ã€ä»£ç å—å†…éƒ¨å£°æ˜çš„å±€éƒ¨å˜é‡ä»¥åŠä»çˆ¶ç±»æˆ–çˆ¶æ¥å£ç»§æ‰¿ã€‚å­—æ®µå«ä»€ä¹ˆåå­—ã€è¢«å®šä¹‰ä¸ºä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œéƒ½æ˜¯æ— æ³•å›ºå®šçš„ï¼Œåªèƒ½å¼•ç”¨å¸¸é‡æ± ä¸­çš„å¸¸é‡æ¥æè¿°</p>
<p>fields_countï¼ˆå­—æ®µè®¡æ•°å™¨ï¼‰ï¼Œè¡¨ç¤ºå½“å‰ class æ–‡ä»¶ fields è¡¨çš„æˆå‘˜ä¸ªæ•°ï¼Œç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º</p>
<p>fields[]ï¼ˆå­—æ®µè¡¨ï¼‰ï¼š</p>
<ul>
<li>
<p>è¡¨ä¸­çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ª fields_info ç»“æ„çš„æ•°æ®é¡¹ï¼Œç”¨äºè¡¨ç¤ºå½“å‰ç±»æˆ–æ¥å£ä¸­æŸä¸ªå­—æ®µçš„å®Œæ•´æè¿°</p>
</li>
<li>
<p>å­—æ®µè®¿é—®æ ‡è¯†ï¼š</p>
<table>
<thead>
<tr>
<th>æ ‡å¿—åç§°</th>
<th>æ ‡å¿—å€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACC_PUBLIC</td>
<td>0x0001</td>
<td>å­—æ®µæ˜¯å¦ä¸ºpublic</td>
</tr>
<tr>
<td>ACC_PRIVATE</td>
<td>0x0002</td>
<td>å­—æ®µæ˜¯å¦ä¸ºprivate</td>
</tr>
<tr>
<td>ACC_PROTECTED</td>
<td>0x0004</td>
<td>å­—æ®µæ˜¯å¦ä¸ºprotected</td>
</tr>
<tr>
<td>ACC_STATIC</td>
<td>0x0008</td>
<td>å­—æ®µæ˜¯å¦ä¸ºstatic</td>
</tr>
<tr>
<td>ACC_FINAL</td>
<td>0x0010</td>
<td>å­—æ®µæ˜¯å¦ä¸ºfinal</td>
</tr>
<tr>
<td>ACC_VOLATILE</td>
<td>0x0040</td>
<td>å­—æ®µæ˜¯å¦ä¸ºvolatile</td>
</tr>
<tr>
<td>ACC_TRANSTENT</td>
<td>0x0080</td>
<td>å­—æ®µæ˜¯å¦ä¸ºtransient</td>
</tr>
<tr>
<td>ACC_SYNCHETIC</td>
<td>0x1000</td>
<td>å­—æ®µæ˜¯å¦ä¸ºç”±ç¼–è¯‘å™¨è‡ªåŠ¨äº§ç”Ÿ</td>
</tr>
<tr>
<td>ACC_ENUM</td>
<td>0x4000</td>
<td>å­—æ®µæ˜¯å¦ä¸ºenum</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>å­—æ®µåç´¢å¼•ï¼šæ ¹æ®è¯¥å€¼æŸ¥è¯¢å¸¸é‡æ± ä¸­çš„æŒ‡å®šç´¢å¼•é¡¹å³å¯</p>
</li>
<li>
<p>æè¿°ç¬¦ç´¢å¼•ï¼šç”¨æ¥æè¿°å­—æ®µçš„æ•°æ®ç±»å‹ã€æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>ç±»å‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>B</td>
<td>byte</td>
<td>æœ‰ç¬¦å·å­—èŠ‚å‹æ ‘</td>
</tr>
<tr>
<td>C</td>
<td>char</td>
<td>Unicodeå­—ç¬¦ï¼ŒUTF-16ç¼–ç </td>
</tr>
<tr>
<td>D</td>
<td>double</td>
<td>åŒç²¾åº¦æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td>F</td>
<td>float</td>
<td>å•ç²¾åº¦æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td>I</td>
<td>int</td>
<td>æ•´å‹æ•°</td>
</tr>
<tr>
<td>J</td>
<td>long</td>
<td>é•¿æ•´æ•°</td>
</tr>
<tr>
<td>S</td>
<td>short</td>
<td>æœ‰ç¬¦å·çŸ­æ•´æ•°</td>
</tr>
<tr>
<td>Z</td>
<td>boolean</td>
<td>å¸ƒå°”å€¼true/false</td>
</tr>
<tr>
<td>V</td>
<td>void</td>
<td>ä»£è¡¨voidç±»å‹</td>
</tr>
<tr>
<td>L Classname</td>
<td>reference</td>
<td>ä¸€ä¸ªåä¸ºClassnameçš„å®ä¾‹</td>
</tr>
<tr>
<td>[</td>
<td>reference</td>
<td>ä¸€ä¸ªä¸€ç»´æ•°ç»„</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>å±æ€§è¡¨é›†åˆï¼šå±æ€§ä¸ªæ•°å­˜æ”¾åœ¨ attribute_count ä¸­ï¼Œå±æ€§å…·ä½“å†…å®¹å­˜æ”¾åœ¨ attribute æ•°ç»„ä¸­ï¼Œä¸€ä¸ªå­—æ®µè¿˜å¯èƒ½æ‹¥æœ‰ä¸€äº›å±æ€§ï¼Œç”¨äºå­˜å‚¨æ›´å¤šçš„é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚åˆå§‹åŒ–å€¼ã€ä¸€äº›æ³¨é‡Šä¿¡æ¯ç­‰</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ConstantValue_attribute&#123;</span><br><span class="line">    u2 attribute_name_index<span class="comment">;</span></span><br><span class="line">    u4 attribute_length<span class="comment">;</span></span><br><span class="line">    u2 constantvalue_index<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå¸¸é‡å±æ€§è€Œè¨€ï¼Œattribute_length å€¼æ’ä¸º2</p>
</li>
</ul>
<h5 id="æ–¹æ³•è¡¨">æ–¹æ³•è¡¨</h5>
<p>æ–¹æ³•è¡¨æ˜¯ methods æŒ‡å‘å¸¸é‡æ± ç´¢å¼•é›†åˆï¼Œå…¶ä¸­æ¯ä¸€ä¸ª method_info é¡¹éƒ½å¯¹åº”ç€ä¸€ä¸ªç±»æˆ–è€…æ¥å£ä¸­çš„æ–¹æ³•ä¿¡æ¯ï¼Œå®Œæ•´æè¿°äº†æ¯ä¸ªæ–¹æ³•çš„ç­¾å</p>
<ul>
<li>å¦‚æœè¿™ä¸ªæ–¹æ³•ä¸æ˜¯æŠ½è±¡çš„æˆ–è€…ä¸æ˜¯ native çš„ï¼Œå­—èŠ‚ç ä¸­å°±ä¼šä½“ç°å‡ºæ¥</li>
<li>methods è¡¨åªæè¿°å½“å‰ç±»æˆ–æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œä¸åŒ…æ‹¬ä»çˆ¶ç±»æˆ–çˆ¶æ¥å£ç»§æ‰¿çš„æ–¹æ³•</li>
<li>methods è¡¨å¯èƒ½ä¼šå‡ºç°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ·»åŠ çš„æ–¹æ³•ï¼Œæ¯”å¦‚åˆå§‹åŒ–æ–¹æ³• <cinit> å’Œå®ä¾‹åŒ–æ–¹æ³• <init></li>
</ul>
<p>**é‡è½½ï¼ˆOverloadï¼‰**ä¸€ä¸ªæ–¹æ³•ï¼Œé™¤äº†è¦ä¸åŸæ–¹æ³•å…·æœ‰ç›¸åŒçš„ç®€å•åç§°ä¹‹å¤–ï¼Œè¿˜è¦æ±‚å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¸åŸæ–¹æ³•ä¸åŒçš„ç‰¹å¾ç­¾åï¼Œç‰¹å¾ç­¾åå°±æ˜¯ä¸€ä¸ªæ–¹æ³•ä¸­å„ä¸ªå‚æ•°åœ¨å¸¸é‡æ± ä¸­çš„å­—æ®µç¬¦å·å¼•ç”¨çš„é›†åˆï¼Œå› ä¸ºè¿”å›å€¼ä¸ä¼šåŒ…å«åœ¨ç‰¹å¾ç­¾åä¹‹ä¸­ï¼Œå› æ­¤ Java è¯­è¨€é‡Œæ— æ³•ä»…ä»…ä¾é è¿”å›å€¼çš„ä¸åŒæ¥å¯¹ä¸€ä¸ªå·²æœ‰æ–¹æ³•è¿›è¡Œé‡è½½ã€‚ä½†åœ¨ Class æ–‡ä»¶æ ¼å¼ä¸­ï¼Œç‰¹å¾ç­¾åçš„èŒƒå›´æ›´å¤§ä¸€äº›ï¼Œåªè¦æè¿°ç¬¦ä¸æ˜¯å®Œå…¨ä¸€è‡´çš„ä¸¤ä¸ªæ–¹æ³•å°±å¯ä»¥å…±å­˜</p>
<p>methods_countï¼ˆæ–¹æ³•è®¡æ•°å™¨ï¼‰ï¼šè¡¨ç¤º class æ–‡ä»¶ methods è¡¨çš„æˆå‘˜ä¸ªæ•°ï¼Œä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º</p>
<p>methods[]ï¼ˆæ–¹æ³•è¡¨ï¼‰ï¼šæ¯ä¸ªè¡¨é¡¹éƒ½æ˜¯ä¸€ä¸ª method_info ç»“æ„ï¼Œè¡¨ç¤ºå½“å‰ç±»æˆ–æ¥å£ä¸­æŸä¸ªæ–¹æ³•çš„å®Œæ•´æè¿°</p>
<ul>
<li>
<p>æ–¹æ³•è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>åç§°</th>
<th>å«ä¹‰</th>
<th>æ•°é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>u2</td>
<td>access_flags</td>
<td>è®¿é—®æ ‡å¿—</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>name_index</td>
<td>å­—æ®µåç´¢å¼•</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>descriptor_index</td>
<td>æè¿°ç¬¦ç´¢å¼•</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>attrubutes_count</td>
<td>å±æ€§è®¡æ•°å™¨</td>
<td>1</td>
</tr>
<tr>
<td>attribute_info</td>
<td>attributes</td>
<td>å±æ€§é›†åˆ</td>
<td>attributes_count</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>æ–¹æ³•è¡¨è®¿é—®æ ‡å¿—ï¼š</p>
<table>
<thead>
<tr>
<th>æ ‡å¿—åç§°</th>
<th>æ ‡å¿—å€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACC_PUBLIC</td>
<td>0x0001</td>
<td>å­—æ®µæ˜¯å¦ä¸º public</td>
</tr>
<tr>
<td>ACC_PRIVATE</td>
<td>0x0002</td>
<td>å­—æ®µæ˜¯å¦ä¸º private</td>
</tr>
<tr>
<td>ACC_PROTECTED</td>
<td>0x0004</td>
<td>å­—æ®µæ˜¯å¦ä¸º protected</td>
</tr>
<tr>
<td>ACC_STATIC</td>
<td>0x0008</td>
<td>å­—æ®µæ˜¯å¦ä¸º static</td>
</tr>
<tr>
<td>ACC_FINAL</td>
<td>0x0010</td>
<td>å­—æ®µæ˜¯å¦ä¸º final</td>
</tr>
<tr>
<td>ACC_VOLATILE</td>
<td>0x0040</td>
<td>å­—æ®µæ˜¯å¦ä¸º volatile</td>
</tr>
<tr>
<td>ACC_TRANSTENT</td>
<td>0x0080</td>
<td>å­—æ®µæ˜¯å¦ä¸º transient</td>
</tr>
<tr>
<td>ACC_SYNCHETIC</td>
<td>0x1000</td>
<td>å­—æ®µæ˜¯å¦ä¸ºç”±ç¼–è¯‘å™¨è‡ªåŠ¨äº§ç”Ÿ</td>
</tr>
<tr>
<td>ACC_ENUM</td>
<td>0x4000</td>
<td>å­—æ®µæ˜¯å¦ä¸º enum</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h5 id="å±æ€§è¡¨">å±æ€§è¡¨</h5>
<p>å±æ€§è¡¨é›†åˆï¼ŒæŒ‡çš„æ˜¯ Class æ–‡ä»¶æ‰€æºå¸¦çš„è¾…åŠ©ä¿¡æ¯ï¼Œæ¯”å¦‚è¯¥ Class æ–‡ä»¶çš„æºæ–‡ä»¶çš„åç§°ï¼Œä»¥åŠä»»ä½•å¸¦æœ‰ <code>RetentionPolicy.CLASS</code> æˆ–è€… <code>RetentionPolicy.RUNTIME</code> çš„æ³¨è§£ï¼Œè¿™ç±»ä¿¡æ¯é€šå¸¸è¢«ç”¨äº Java è™šæ‹Ÿæœºçš„éªŒè¯å’Œè¿è¡Œï¼Œä»¥åŠ Java ç¨‹åºçš„è°ƒè¯•ã€‚å­—æ®µè¡¨ã€æ–¹æ³•è¡¨éƒ½å¯ä»¥æœ‰è‡ªå·±çš„å±æ€§è¡¨ï¼Œç”¨äºæè¿°æŸäº›åœºæ™¯ä¸“æœ‰çš„ä¿¡æ¯</p>
<p>attributes_ countï¼ˆå±æ€§è®¡æ•°å™¨ï¼‰ï¼šè¡¨ç¤ºå½“å‰æ–‡ä»¶å±æ€§è¡¨çš„æˆå‘˜ä¸ªæ•°</p>
<p>attributes[]ï¼ˆå±æ€§è¡¨ï¼‰ï¼šå±æ€§è¡¨çš„æ¯ä¸ªé¡¹çš„å€¼å¿…é¡»æ˜¯ attribute_info ç»“æ„</p>
<ul>
<li>
<p>å±æ€§çš„é€šç”¨æ ¼å¼ï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ConstantValue_attribute&#123;</span><br><span class="line">    u2 attribute_name_index;	<span class="regexp">//</span>å±æ€§åç´¢å¼•</span><br><span class="line">    u4 attribute_length;		<span class="regexp">//</span>å±æ€§é•¿åº¦</span><br><span class="line">    u2 attribute_info;			<span class="regexp">//</span>å±æ€§è¡¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å±æ€§ç±»å‹ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§åç§°</th>
<th>ä½¿ç”¨ä½ç½®</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>Code</td>
<td>æ–¹æ³•è¡¨</td>
<td>Java ä»£ç ç¼–è¯‘æˆçš„å­—èŠ‚ç æŒ‡ä»¤</td>
</tr>
<tr>
<td>ConstantValue</td>
<td>å­—æ®µè¡¨</td>
<td>final å…³é”®å­—å®šä¹‰çš„å¸¸é‡æ± </td>
</tr>
<tr>
<td>Deprecated</td>
<td>ç±»ã€æ–¹æ³•ã€å­—æ®µè¡¨</td>
<td>è¢«å£°æ˜ä¸º deprecated çš„æ–¹æ³•å’Œå­—æ®µ</td>
</tr>
<tr>
<td>Exceptions</td>
<td>æ–¹æ³•è¡¨</td>
<td>æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸</td>
</tr>
<tr>
<td>EnclosingMethod</td>
<td>ç±»æ–‡ä»¶</td>
<td>ä»…å½“ä¸€ä¸ªç±»ä¸ºå±€éƒ¨ç±»æˆ–è€…åŒ¿åç±»æ˜¯æ‰èƒ½æ‹¥æœ‰è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”¨äºæ ‡è¯†è¿™ä¸ªç±»æ‰€åœ¨çš„å¤–å›´æ–¹æ³•</td>
</tr>
<tr>
<td>InnerClass</td>
<td>ç±»æ–‡ä»¶</td>
<td>å†…éƒ¨ç±»åˆ—è¡¨</td>
</tr>
<tr>
<td>LineNumberTable</td>
<td>Code å±æ€§</td>
<td>Java æºç çš„è¡Œå·ä¸å­—èŠ‚ç æŒ‡ä»¤çš„å¯¹åº”å…³ç³»</td>
</tr>
<tr>
<td>LocalVariableTable</td>
<td>Code å±æ€§</td>
<td>æ–¹æ³•çš„å±€éƒ¨å˜é‡æè¿°</td>
</tr>
<tr>
<td>StackMapTable</td>
<td>Code å±æ€§</td>
<td>JDK1.6 ä¸­æ–°å¢çš„å±æ€§ï¼Œä¾›æ–°çš„ç±»å‹æ£€æŸ¥æ£€éªŒå™¨æ£€æŸ¥å’Œå¤„ç†ç›®æ ‡æ–¹æ³•çš„å±€éƒ¨å˜é‡å’Œæ“ä½œæ•°æœ‰æ‰€éœ€è¦çš„ç±»æ˜¯å¦åŒ¹é…</td>
</tr>
<tr>
<td>Signature</td>
<td>ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨</td>
<td>ç”¨äºæ”¯æŒæ³›å‹æƒ…å†µä¸‹çš„æ–¹æ³•ç­¾å</td>
</tr>
<tr>
<td>SourceFile</td>
<td>ç±»æ–‡ä»¶</td>
<td>è®°å½•æºæ–‡ä»¶åç§°</td>
</tr>
<tr>
<td>SourceDebugExtension</td>
<td>ç±»æ–‡ä»¶</td>
<td>ç”¨äºå­˜å‚¨é¢å¤–çš„è°ƒè¯•ä¿¡æ¯</td>
</tr>
<tr>
<td>Syothetic</td>
<td>ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨</td>
<td>æ ‡å¿—æ–¹æ³•æˆ–å­—æ®µä¸ºç¼–æ³½å™¨è‡ªåŠ¨ç”Ÿæˆçš„</td>
</tr>
<tr>
<td>LocalVariableTypeTable</td>
<td>ç±»</td>
<td>ä½¿ç”¨ç‰¹å¾ç­¾åä»£æ›¿æè¿°ç¬¦ï¼Œæ˜¯ä¸ºäº†å¼•å…¥æ³›å‹è¯­æ³•ä¹‹åèƒ½æè¿°æ³›å‹å‚æ•°åŒ–ç±»å‹è€Œæ·»åŠ </td>
</tr>
<tr>
<td>RuntimeVisibleAnnotations</td>
<td>ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨</td>
<td>ä¸ºåŠ¨æ€æ³¨è§£æä¾›æ”¯æŒ</td>
</tr>
<tr>
<td>RuntimelnvisibleAnnotations</td>
<td>ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨</td>
<td>ç”¨äºæŒ‡æ˜å“ªäº›æ³¨è§£æ˜¯è¿è¡Œæ—¶ä¸å¯è§çš„</td>
</tr>
<tr>
<td>RuntimeVisibleParameterAnnotation</td>
<td>æ–¹æ³•è¡¨</td>
<td>ä½œç”¨ä¸ RuntimeVisibleAnnotations å±æ€§ç±»ä¼¼ï¼Œåªä¸è¿‡ä½œç”¨å¯¹è±¡ä¸ºæ–¹æ³•</td>
</tr>
<tr>
<td>RuntirmelnvisibleParameterAnniotation</td>
<td>æ–¹æ³•è¡¨</td>
<td>ä½œç”¨ä¸ RuntimelnvisibleAnnotations å±æ€§ç±»ä¼¼ï¼Œä½œç”¨å¯¹è±¡å“ªä¸ªä¸ºæ–¹æ³•å‚æ•°</td>
</tr>
<tr>
<td>AnnotationDefauit</td>
<td>æ–¹æ³•è¡¨</td>
<td>ç”¨äºè®°å½•æ³¨è§£ç±»å…ƒç´ çš„é»˜è®¤å€¼</td>
</tr>
<tr>
<td>BootstrapMethods</td>
<td>ç±»æ–‡ä»¶</td>
<td>ç”¨äºä¿å­˜ invokeddynanic æŒ‡ä»¤å¼•ç”¨çš„å¼•å¯¼æ–¹å¼é™å®šç¬¦</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h4 id="ç¼–è¯‘æŒ‡ä»¤">ç¼–è¯‘æŒ‡ä»¤</h4>
<h5 id="javac">javac</h5>
<p>javacï¼šç¼–è¯‘å‘½ä»¤ï¼Œå°† java æºæ–‡ä»¶ç¼–è¯‘æˆ class å­—èŠ‚ç æ–‡ä»¶</p>
<p><code>javac xx.java</code> ä¸ä¼šåœ¨ç”Ÿæˆå¯¹åº”çš„å±€éƒ¨å˜é‡è¡¨ç­‰ä¿¡æ¯ï¼Œä½¿ç”¨ <code>javac -g xx.java</code> å¯ä»¥ç”Ÿæˆæ‰€æœ‰ç›¸å…³ä¿¡æ¯</p>
<h5 id="javap">javap</h5>
<p>javap åç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œæ ¹æ® class å­—èŠ‚ç æ–‡ä»¶ï¼Œåè§£æå‡ºå½“å‰ç±»å¯¹åº”çš„ code åŒº ï¼ˆå­—èŠ‚ç æŒ‡ä»¤ï¼‰ã€å±€éƒ¨å˜é‡è¡¨ã€å¼‚å¸¸è¡¨å’Œä»£ç è¡Œåç§»é‡æ˜ å°„è¡¨ã€å¸¸é‡æ± ç­‰ä¿¡æ¯</p>
<p>ç”¨æ³•ï¼šjavap <options> <classes></p>
<figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-</span>help  --help  -?        è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯</span><br><span class="line"><span class="literal">-</span>version                 ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line"><span class="literal">-</span>public                  ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜</span><br><span class="line"><span class="literal">-</span>protected               æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜</span><br><span class="line"><span class="literal">-</span>package                 æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜ (é»˜è®¤)</span><br><span class="line"><span class="literal">-</span>p  -private             æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜</span><br><span class="line">						 <span class="comment">#å¸¸ç”¨çš„ä»¥ä¸‹ä¸‰ä¸ª</span></span><br><span class="line"><span class="literal">-</span>v  -verbose             è¾“å‡ºé™„åŠ ä¿¡æ¯</span><br><span class="line"><span class="literal">-</span>l                       è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨</span><br><span class="line"><span class="literal">-</span>c                       å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–	<span class="comment">#åç¼–è¯‘</span></span><br><span class="line"></span><br><span class="line"><span class="literal">-</span>s                       è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å</span><br><span class="line"><span class="literal">-</span>sysinfo                 æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)</span><br><span class="line"><span class="literal">-</span>constants               æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡</span><br><span class="line"><span class="literal">-</span>classpath &lt;path&gt;        æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class="line"><span class="literal">-</span>cp &lt;path&gt;               æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class="line"><span class="literal">-</span>bootclasspath &lt;path&gt;    è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡ä»¤é›†">æŒ‡ä»¤é›†</h4>
<h5 id="æ‰§è¡ŒæŒ‡ä»¤">æ‰§è¡ŒæŒ‡ä»¤</h5>
<p>Java å­—èŠ‚ç å±äº JVM åŸºæœ¬æ‰§è¡ŒæŒ‡ä»¤ã€‚ç”±ä¸€ä¸ªå­—èŠ‚é•¿åº¦çš„ä»£è¡¨æŸç§æ“ä½œçš„æ“ä½œç ï¼ˆopcodeï¼‰ä»¥åŠé›¶è‡³å¤šä¸ªä»£è¡¨æ­¤æ“ä½œæ‰€éœ€å‚æ•°çš„æ“ä½œæ•°ï¼ˆoperandï¼‰æ‰€æ„æˆï¼Œè™šæ‹Ÿæœºä¸­è®¸å¤šæŒ‡ä»¤å¹¶ä¸åŒ…å«æ“ä½œæ•°ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œç ï¼ˆé›¶åœ°å€æŒ‡ä»¤ï¼‰</p>
<p>ç”±äºé™åˆ¶äº† Java è™šæ‹Ÿæœºæ“ä½œç çš„é•¿åº¦ä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆ0~255ï¼‰ï¼Œæ‰€ä»¥æŒ‡ä»¤é›†çš„æ“ä½œç æ€»æ•°ä¸å¯èƒ½è¶…è¿‡ 256 æ¡</p>
<p>åœ¨ JVM çš„æŒ‡ä»¤é›†ä¸­ï¼Œå¤§å¤šæ•°çš„æŒ‡ä»¤éƒ½åŒ…å«äº†å…¶æ“ä½œæ‰€å¯¹åº”çš„æ•°æ®ç±»å‹ä¿¡æ¯ã€‚ä¾‹å¦‚ iload æŒ‡ä»¤ç”¨äºä»å±€éƒ¨å˜é‡è¡¨ä¸­åŠ è½½ int å‹çš„æ•°æ®åˆ°æ“ä½œæ•°æ ˆä¸­ï¼Œè€Œ fload æŒ‡ä»¤åŠ è½½çš„åˆ™æ˜¯ float ç±»å‹çš„æ•°æ®</p>
<ul>
<li>i ä»£è¡¨å¯¹ int ç±»å‹çš„æ•°æ®æ“ä½œ</li>
<li>l ä»£è¡¨ long</li>
<li>s ä»£è¡¨ short</li>
<li>b ä»£è¡¨ byte</li>
<li>c ä»£è¡¨ char</li>
<li>f ä»£è¡¨ float</li>
<li>d ä»£è¡¨ double</li>
</ul>
<p>å¤§éƒ¨åˆ†çš„æŒ‡ä»¤éƒ½æ²¡æœ‰æ”¯æŒ byteã€charã€shortã€boolean ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸæˆ–è¿è¡ŒæœŸå°† byte å’Œ short ç±»å‹çš„æ•°æ®å¸¦ç¬¦å·æ‰©å±•ï¼ˆSign-Extend-ï¼‰ä¸ºç›¸åº”çš„ int ç±»å‹æ•°æ®ï¼Œå°† boolean å’Œ char ç±»å‹æ•°æ®é›¶ä½æ‰©å±•ï¼ˆZero-Extendï¼‰ä¸ºç›¸åº”çš„ int ç±»å‹æ•°æ®</p>
<p>åœ¨åšå€¼ç›¸å…³æ“ä½œæ—¶:</p>
<ul>
<li>ä¸€ä¸ªæŒ‡ä»¤ï¼Œå¯ä»¥ä»å±€éƒ¨å˜é‡è¡¨ã€å¸¸é‡æ± ã€å †ä¸­å¯¹è±¡ã€æ–¹æ³•è°ƒç”¨ã€ç³»ç»Ÿè°ƒç”¨ä¸­ç­‰å–å¾—æ•°æ®ï¼Œè¿™äº›æ•°æ®ï¼ˆå¯èƒ½æ˜¯å€¼ï¼Œä¹Ÿå¯èƒ½æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼‰è¢«å‹å…¥æ“ä½œæ•°æ ˆ</li>
<li>ä¸€ä¸ªæŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥ä»æ“ä½œæ•°æ ˆä¸­å–å‡ºä¸€åˆ°å¤šä¸ªå€¼ï¼ˆpop å¤šæ¬¡ï¼‰ï¼Œå®Œæˆèµ‹å€¼ã€åŠ å‡ä¹˜é™¤ã€æ–¹æ³•ä¼ å‚ã€ç³»ç»Ÿè°ƒç”¨ç­‰ç­‰æ“ä½œ</li>
</ul>
<h5 id="åŠ è½½å­˜å‚¨">åŠ è½½å­˜å‚¨</h5>
<p>åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤ç”¨äºå°†æ•°æ®ä»æ ˆå¸§çš„å±€éƒ¨å˜é‡è¡¨å’Œæ“ä½œæ•°æ ˆä¹‹é—´æ¥å›ä¼ é€’</p>
<p>å±€éƒ¨å˜é‡å‹æ ˆæŒ‡ä»¤ï¼šå°†ç»™å®šçš„å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ•°æ®å‹å…¥æ“ä½œæ•°æ ˆ</p>
<ul>
<li>xloadã€xload_nï¼Œx è¡¨ç¤ºå–å€¼æ•°æ®ç±»å‹ï¼Œä¸º iã€lã€fã€dã€aï¼Œ n ä¸º 0 åˆ° 3</li>
<li>æŒ‡ä»¤ xload_n è¡¨ç¤ºå°†ç¬¬ n ä¸ªå±€éƒ¨å˜é‡å‹å…¥æ“ä½œæ•°æ ˆï¼Œaload_n è¡¨ç¤ºå°†ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å‹æ ˆ</li>
<li>æŒ‡ä»¤ xload n é€šè¿‡æŒ‡å®šå‚æ•°çš„å½¢å¼ï¼ŒæŠŠå±€éƒ¨å˜é‡å‹å…¥æ“ä½œæ•°æ ˆï¼Œå±€éƒ¨å˜é‡æ•°é‡è¶…è¿‡ 4 ä¸ªæ—¶ä½¿ç”¨è¿™ä¸ªå‘½ä»¤</li>
</ul>
<p>å¸¸é‡å…¥æ ˆæŒ‡ä»¤ï¼šå°†å¸¸æ•°å‹å…¥æ“ä½œæ•°æ ˆï¼Œæ ¹æ®æ•°æ®ç±»å‹å’Œå…¥æ ˆå†…å®¹çš„ä¸åŒï¼Œåˆåˆ†ä¸º constã€pushã€ldc æŒ‡ä»¤</p>
<ul>
<li>pushï¼šåŒ…æ‹¬ bipush å’Œ sipushï¼ŒåŒºåˆ«åœ¨äºæ¥æ”¶æ•°æ®ç±»å‹çš„ä¸åŒï¼Œbipush æ¥æ”¶ 8 ä½æ•´æ•°ä½œä¸ºå‚æ•°ï¼Œsipush æ¥æ”¶ 16 ä½æ•´æ•°</li>
<li>ldcï¼šå¦‚æœä»¥ä¸ŠæŒ‡ä»¤ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ ldc æŒ‡ä»¤ï¼Œæ¥æ”¶ä¸€ä¸ª 8 ä½çš„å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å‘å¸¸é‡æ± ä¸­çš„ intã€ float æˆ–è€… String çš„ç´¢å¼•ï¼Œå°†æŒ‡å®šçš„å†…å®¹å‹å…¥å †æ ˆã€‚ldc_w æ¥æ”¶ä¸¤ä¸ª 8 ä½å‚æ•°ï¼Œèƒ½æ”¯æŒçš„ç´¢å¼•èŒƒå›´æ›´å¤§ï¼Œå¦‚æœè¦å‹å…¥çš„å…ƒç´ æ˜¯ long æˆ– double ç±»å‹çš„ï¼Œåˆ™ä½¿ç”¨ ldc2_w æŒ‡ä»¤</li>
<li>aconst_null å°† null å¯¹è±¡å¼•ç”¨å‹å…¥æ ˆï¼Œiconst_m1 å°† int ç±»å‹å¸¸é‡ -1 å‹å…¥æ ˆï¼Œiconst_0 å°† int ç±»å‹å¸¸é‡ 0 å‹å…¥æ ˆ</li>
</ul>
<p>å‡ºæ ˆè£…å…¥å±€éƒ¨å˜é‡è¡¨æŒ‡ä»¤ï¼šå°†æ“ä½œæ•°æ ˆä¸­æ ˆé¡¶å…ƒç´ å¼¹å‡ºåï¼Œè£…å…¥å±€éƒ¨å˜é‡è¡¨çš„æŒ‡å®šä½ç½®ï¼Œç”¨äºç»™å±€éƒ¨å˜é‡èµ‹å€¼</p>
<ul>
<li>xstoreã€xstore_nï¼Œx è¡¨ç¤ºå–å€¼ç±»å‹ä¸º iã€lã€fã€dã€aï¼Œ n ä¸º 0 åˆ° 3</li>
<li>xastore è¡¨ç¤ºå­˜å…¥æ•°ç»„ï¼Œx å–å€¼ä¸º iã€lã€fã€dã€aã€bã€cã€s</li>
</ul>
<p>æ‰©å……å±€éƒ¨å˜é‡è¡¨çš„è®¿é—®ç´¢å¼•çš„æŒ‡ä»¤ï¼šwide</p>
<h5 id="ç®—æœ¯æŒ‡ä»¤">ç®—æœ¯æŒ‡ä»¤</h5>
<p>ç®—æœ¯æŒ‡ä»¤ç”¨äºå¯¹ä¸¤ä¸ªæ“ä½œæ•°æ ˆä¸Šçš„å€¼è¿›è¡ŒæŸç§ç‰¹å®šè¿ç®—ï¼Œå¹¶æŠŠè®¡ç®—ç»“æœé‡æ–°å‹å…¥æ“ä½œæ•°æ ˆ</p>
<p>æ²¡æœ‰ç›´æ¥æ”¯æŒ byteã€ shortã€ char å’Œ boolean ç±»å‹çš„ç®—æœ¯æŒ‡ä»¤ï¼Œå¯¹äºè¿™äº›æ•°æ®çš„è¿ç®—ï¼Œéƒ½ä½¿ç”¨ int ç±»å‹çš„æŒ‡ä»¤æ¥å¤„ç†ï¼Œæ•°ç»„ç±»å‹ä¹Ÿæ˜¯è½¬æ¢æˆ int æ•°ç»„</p>
<ul>
<li>åŠ æ³•æŒ‡ä»¤ï¼šiaddã€laddã€faddã€dadd</li>
<li>å‡æ³•æŒ‡ä»¤ï¼šisubã€lsubã€fsubã€dsub</li>
<li>ä¹˜æ³•æŒ‡ä»¤ï¼šimuã€lmuã€fmulã€dmul</li>
<li>é™¤æ³•æŒ‡ä»¤ï¼šidivã€ldivã€fdivã€ddiv</li>
<li>æ±‚ä½™æŒ‡ä»¤ï¼širemã€lremã€fremã€dremï¼ˆremainder ä½™æ•°ï¼‰</li>
<li>å–åæŒ‡ä»¤ï¼šinegã€lnegã€fnegã€dneg ï¼ˆnegation å–åï¼‰</li>
<li>è‡ªå¢æŒ‡ä»¤ï¼šiincï¼ˆç›´æ¥<strong>åœ¨å±€éƒ¨å˜é‡ slot ä¸Šè¿›è¡Œè¿ç®—</strong>ï¼Œä¸ç”¨æ”¾å…¥æ“ä½œæ•°æ ˆï¼‰</li>
<li>ä½è¿ç®—æŒ‡ä»¤ï¼Œåˆå¯åˆ†ä¸ºï¼š
<ul>
<li>ä½ç§»æŒ‡ä»¤ï¼šishlã€ishrã€ iushrã€lshlã€lshrã€ lushr</li>
<li>æŒ‰ä½æˆ–æŒ‡ä»¤ï¼šiorã€lor</li>
<li>æŒ‰ä½ä¸æŒ‡ä»¤ï¼šiandã€land</li>
<li>æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤ï¼šixorã€lxor</li>
</ul>
</li>
<li>æ¯”è¾ƒæŒ‡ä»¤ï¼šdcmpgã€dcmplã€ fcmpgã€fcmplã€lcmp</li>
</ul>
<p>è¿ç®—æ¨¡å¼ï¼š</p>
<ul>
<li>å‘æœ€æ¥è¿‘æ•°èˆå…¥æ¨¡å¼ï¼ŒJVM åœ¨è¿›è¡Œæµ®ç‚¹æ•°è®¡ç®—æ—¶ï¼Œæ‰€æœ‰çš„è¿ç®—ç»“æœéƒ½å¿…é¡»èˆå…¥åˆ°é€‚å½“çš„ç²¾åº¦ï¼Œéç²¾ç¡®ç»“æœå¿…é¡»èˆå…¥ä¸ºå¯è¢«è¡¨ç¤ºçš„æœ€æ¥è¿‘çš„ç²¾ç¡®å€¼ï¼Œå¦‚æœæœ‰ä¸¤ç§å¯è¡¨ç¤ºå½¢å¼ä¸è¯¥å€¼ä¸€æ ·æ¥è¿‘ï¼Œå°†ä¼˜å…ˆé€‰æ‹©æœ€ä½æœ‰æ•ˆä½ä¸ºé›¶çš„</li>
<li>å‘é›¶èˆå…¥æ¨¡å¼ï¼šå°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°æ—¶ï¼Œè¯¥æ¨¡å¼å°†åœ¨ç›®æ ‡æ•°å€¼ç±»å‹ä¸­é€‰æ‹©ä¸€ä¸ªæœ€æ¥è¿‘ä½†æ˜¯ä¸å¤§äºåŸå€¼çš„æ•°å­—ä½œä¸ºæœ€ç²¾ç¡®çš„èˆå…¥ç»“æœ</li>
</ul>
<p>NaN å€¼ï¼šå½“ä¸€ä¸ªæ“ä½œäº§ç”Ÿæº¢å‡ºæ—¶ï¼Œå°†ä¼šä½¿ç”¨æœ‰ç¬¦å·çš„æ— ç©·å¤§è¡¨ç¤ºï¼Œå¦‚æœæŸä¸ªæ“ä½œç»“æœæ²¡æœ‰æ˜ç¡®çš„æ•°å­¦å®šä¹‰ï¼Œå°†ä½¿ç”¨ NaN å€¼æ¥è¡¨ç¤º</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> j = i / <span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(j);//æ— ç©·å¤§ï¼Œ<span class="keyword">NaN</span>: <span class="keyword">not</span> a number</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†æ i++</strong>ï¼šä»å­—èŠ‚ç è§’åº¦åˆ†æï¼ša++ å’Œ ++a çš„åŒºåˆ«æ˜¯å…ˆæ‰§è¡Œ iload è¿˜æ˜¯å…ˆæ‰§è¡Œ iinc</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">4</span> iload_1		<span class="comment">//å­˜å…¥æ“ä½œæ•°æ ˆ</span></span><br><span class="line"> <span class="number">5</span> iinc <span class="number">1</span> <span class="keyword">by</span> <span class="number">1</span>	<span class="comment">//è‡ªå¢i++</span></span><br><span class="line"> <span class="number">8</span> istore_3		<span class="comment">//æŠŠæ“ä½œæ•°æ ˆæ²¡æœ‰è‡ªå¢çš„æ•°æ®çš„å­˜å…¥å±€éƒ¨å˜é‡è¡¨</span></span><br><span class="line"> <span class="number">9</span> iinc <span class="number">2</span> <span class="keyword">by</span> <span class="number">1</span>	<span class="comment">//++i</span></span><br><span class="line"><span class="number">12</span> iload_2		<span class="comment">//åŠ è½½åˆ°æ“ä½œæ•°æ ˆ</span></span><br><span class="line"><span class="number">13</span> istore <span class="number">4</span>		<span class="comment">//å­˜å…¥å±€éƒ¨å˜é‡è¡¨ï¼Œè¿™ä¸ªå­˜å…¥æ²¡æœ‰ _ ç¬¦å·ï¼Œ_åªèƒ½åˆ°3</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Demo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="built_in">int</span> b = a++ + ++a + a--;</span><br><span class="line">        System.<span class="keyword">out</span>.println(a);	<span class="comment">//11</span></span><br><span class="line">        System.<span class="keyword">out</span>.println(b);	<span class="comment">//34</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ¤æ–­ç»“æœï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            x = x++;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.<span class="built_in">println</span>(x); <span class="comment">// ç»“æœæ˜¯ 0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ç±»å‹è½¬æ¢">ç±»å‹è½¬æ¢</h5>
<p>ç±»å‹è½¬æ¢æŒ‡ä»¤å¯ä»¥å°†ä¸¤ç§ä¸åŒçš„æ•°å€¼ç±»å‹è¿›è¡Œç›¸äº’è½¬æ¢ï¼Œé™¤äº† boolean ä¹‹å¤–çš„ä¸ƒç§ç±»å‹</p>
<p>å®½åŒ–ç±»å‹è½¬æ¢ï¼š</p>
<ul>
<li>JVM æ”¯æŒä»¥ä¸‹æ•°å€¼çš„å®½åŒ–ç±»å‹è½¬æ¢ï¼ˆwidening numeric conversionï¼‰ï¼Œå°èŒƒå›´ç±»å‹åˆ°å¤§èŒƒå›´ç±»å‹çš„å®‰å…¨è½¬æ¢
<ul>
<li>ä» int ç±»å‹åˆ° longã€float æˆ–è€… double ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤ä¸º i2lã€i2fã€i2d</li>
<li>ä» long ç±»å‹åˆ° floatã€ double ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤ä¸º l2fã€l2d</li>
<li>ä» float ç±»å‹åˆ° double ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤ä¸º f2d</li>
</ul>
</li>
<li>ç²¾åº¦æŸå¤±é—®é¢˜
<ul>
<li>å®½åŒ–ç±»å‹è½¬æ¢æ˜¯ä¸ä¼šå› ä¸ºè¶…è¿‡ç›®æ ‡ç±»å‹æœ€å¤§å€¼è€Œä¸¢å¤±ä¿¡æ¯</li>
<li>ä» int è½¬æ¢åˆ° float æˆ–è€… long ç±»å‹è½¬æ¢åˆ° double æ—¶ï¼Œå°†å¯èƒ½å‘ç”Ÿç²¾åº¦ä¸¢å¤±</li>
</ul>
</li>
<li>ä» byteã€char å’Œ short ç±»å‹åˆ° int ç±»å‹çš„å®½åŒ–ç±»å‹è½¬æ¢å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„ï¼ŒJVM æŠŠå®ƒä»¬å½“ä½œ int å¤„ç†</li>
</ul>
<p>çª„åŒ–ç±»å‹è½¬æ¢ï¼š</p>
<ul>
<li>Java è™šæ‹Ÿæœºç›´æ¥æ”¯æŒä»¥ä¸‹çª„åŒ–ç±»å‹è½¬æ¢ï¼š
<ul>
<li>ä» int ç±»å‹è‡³ byteã€ short æˆ–è€… char ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤æœ‰ i2bã€i2cã€i2s</li>
<li>ä» long ç±»å‹åˆ° int ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤æœ‰ l2i</li>
<li>ä» float ç±»å‹åˆ° int æˆ–è€… long ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤æœ‰:f2iã€f2l</li>
<li>ä» double ç±»å‹åˆ° intã€long æˆ– float è€…ç±»å‹ï¼Œå¯¹åº”çš„æŒ‡ä»¤æœ‰ d2iã€d2ã€d2f</li>
</ul>
</li>
<li>ç²¾åº¦æŸå¤±é—®é¢˜ï¼š
<ul>
<li>çª„åŒ–ç±»å‹è½¬æ¢å¯èƒ½ä¼šå¯¼è‡´è½¬æ¢ç»“æœå…·å¤‡ä¸åŒçš„æ­£è´Ÿå·ã€ä¸åŒçš„æ•°é‡çº§ï¼Œè½¬æ¢è¿‡ç¨‹å¯èƒ½ä¼šå¯¼è‡´æ•°å€¼ä¸¢å¤±ç²¾åº¦</li>
<li>å°†ä¸€ä¸ªæµ®ç‚¹å€¼çª„åŒ–è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ Tï¼ˆT é™äº int æˆ– long ç±»å‹ä¹‹ä¸€ï¼‰æ—¶ï¼Œå°†éµå¾ªä»¥ä¸‹è½¬æ¢è§„åˆ™ï¼š
<ul>
<li>å¦‚æœæµ®ç‚¹å€¼æ˜¯ NaNï¼Œé‚£è½¬æ¢ç»“æœå°±æ˜¯ int æˆ– long ç±»å‹çš„ 0</li>
<li>å¦‚æœæµ®ç‚¹å€¼ä¸æ˜¯æ— ç©·å¤§çš„è¯ï¼Œæµ®ç‚¹å€¼ä½¿ç”¨ IEEE 754 çš„å‘é›¶èˆå…¥æ¨¡å¼å–æ•´ï¼Œè·å¾—æ•´æ•°å€¼ vï¼Œå¦‚æœ v åœ¨ç›®æ ‡ç±»å‹ T çš„è¡¨ç¤ºèŒƒå›´ä¹‹å†…ï¼Œé‚£è½¬æ¢ç»“æœå°±æ˜¯ vï¼Œå¦åˆ™å°†æ ¹æ® v çš„ç¬¦å·ï¼Œè½¬æ¢ä¸º T æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§æˆ–è€…æœ€å°æ­£æ•°</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="åˆ›å»ºè®¿é—®">åˆ›å»ºè®¿é—®</h5>
<p>åˆ›å»ºæŒ‡ä»¤ï¼š</p>
<ul>
<li>
<p>åˆ›å»ºç±»å®ä¾‹æŒ‡ä»¤ï¼šnewï¼Œæ¥æ”¶ä¸€ä¸ªæ“ä½œæ•°æŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•ï¼Œè¡¨ç¤ºè¦åˆ›å»ºçš„ç±»å‹ï¼Œæ‰§è¡Œå®Œæˆåå°†å¯¹è±¡çš„å¼•ç”¨å‹å…¥æ ˆ</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>:  <span class="keyword">new</span>             <span class="meta">#2 <span class="comment">// class com/jvm/bytecode/Demo</span></span></span><br><span class="line"><span class="number">3</span>:  dup</span><br><span class="line"><span class="number">4</span>:  invokespecial   <span class="meta">#3 <span class="comment">// Method &quot;&lt;init&gt;&quot;:()V</span></span></span><br></pre></td></tr></table></figure>
<p><strong>dup æ˜¯å¤åˆ¶æ“ä½œæ•°æ ˆæ ˆé¡¶çš„å†…å®¹</strong>ï¼Œéœ€è¦ä¸¤ä»½å¼•ç”¨åŸå› ï¼š</p>
<ul>
<li>ä¸€ä¸ªè¦é…åˆ invokespecial è°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ æ–¹æ³• <init>:()V ï¼ˆä¼šæ¶ˆè€—æ‰æ ˆé¡¶ä¸€ä¸ªå¼•ç”¨ï¼‰</li>
<li>ä¸€ä¸ªè¦é…åˆ astore_1 èµ‹å€¼ç»™å±€éƒ¨å˜é‡</li>
</ul>
</li>
<li>
<p>åˆ›å»ºæ•°ç»„çš„æŒ‡ä»¤ï¼šnewarrayã€anewarrayã€multianewarray</p>
<ul>
<li>newarrayï¼šåˆ›å»ºåŸºæœ¬ç±»å‹æ•°ç»„</li>
<li>anewarrayï¼šåˆ›å»ºå¼•ç”¨ç±»å‹æ•°ç»„</li>
<li>multianewarrayï¼šåˆ›å»ºå¤šç»´æ•°ç»„</li>
</ul>
</li>
</ul>
<p>å­—æ®µè®¿é—®æŒ‡ä»¤ï¼šå¯¹è±¡åˆ›å»ºåå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®æŒ‡ä»¤è·å–å¯¹è±¡å®ä¾‹æˆ–æ•°ç»„å®ä¾‹ä¸­çš„å­—æ®µæˆ–è€…æ•°ç»„å…ƒç´ </p>
<ul>
<li>è®¿é—®ç±»å­—æ®µï¼ˆstaticå­—æ®µï¼Œæˆ–è€…ç§°ä¸ºç±»å˜é‡ï¼‰çš„æŒ‡ä»¤ï¼šgetstaticã€putstatic</li>
<li>è®¿é—®ç±»å®ä¾‹å­—æ®µï¼ˆéstaticå­—æ®µï¼Œæˆ–è€…ç§°ä¸ºå®ä¾‹å˜é‡ï¼‰çš„æŒ‡ä»¤ï¼šgetfieldã€ putfield</li>
</ul>
<p>ç±»å‹æ£€æŸ¥æŒ‡ä»¤ï¼šæ£€æŸ¥ç±»å®ä¾‹æˆ–æ•°ç»„ç±»å‹çš„æŒ‡ä»¤</p>
<ul>
<li>checkcastï¼šç”¨äºæ£€æŸ¥ç±»å‹å¼ºåˆ¶è½¬æ¢æ˜¯å¦å¯ä»¥è¿›è¡Œï¼Œå¦‚æœå¯ä»¥è¿›è¡Œ checkcast æŒ‡ä»¤ä¸ä¼šæ”¹å˜æ“ä½œæ•°æ ˆï¼Œå¦åˆ™å®ƒä¼šæŠ›å‡º ClassCastException å¼‚å¸¸</li>
<li>instanceofï¼šåˆ¤æ–­ç»™å®šå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œä¼šå°†åˆ¤æ–­ç»“æœå‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul>
<h5 id="æ–¹æ³•æŒ‡ä»¤">æ–¹æ³•æŒ‡ä»¤</h5>
<p>æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ï¼šinvokevirtualã€ invokeinterfaceã€invokespecialã€invokestaticã€invokedynamic</p>
<p><strong>æ–¹æ³•è°ƒç”¨ç« èŠ‚è¯¦è§£</strong></p>
<h5 id="æ“ä½œæ•°æ ˆ-2">æ“ä½œæ•°æ ˆ</h5>
<p>JVM æä¾›çš„æ“ä½œæ•°æ ˆç®¡ç†æŒ‡ä»¤ï¼Œå¯ä»¥ç”¨äºç›´æ¥æ“ä½œæ“ä½œæ•°æ ˆçš„æŒ‡ä»¤</p>
<ul>
<li>popã€pop2ï¼šå°†ä¸€ä¸ªæˆ–ä¸¤ä¸ªå…ƒç´ ä»æ ˆé¡¶å¼¹å‡ºï¼Œå¹¶ä¸”ç›´æ¥åºŸå¼ƒ</li>
<li>dupã€dup2ï¼Œdup_x1ã€dup2_x1ï¼Œdup_x2ã€dup2_x2ï¼šå¤åˆ¶æ ˆé¡¶ä¸€ä¸ªæˆ–ä¸¤ä¸ªæ•°å€¼å¹¶é‡æ–°å‹å…¥æ ˆé¡¶</li>
<li>swapï¼šå°†æ ˆæœ€é¡¶ç«¯çš„ä¸¤ä¸ª slot æ•°å€¼ä½ç½®äº¤æ¢ï¼ŒJVM æ²¡æœ‰æä¾›äº¤æ¢ä¸¤ä¸ª 64 ä½æ•°æ®ç±»å‹æ•°å€¼çš„æŒ‡ä»¤</li>
<li>nopï¼šä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„æŒ‡ä»¤ï¼Œå­—èŠ‚ç ä¸º 0x00ï¼Œå’Œæ±‡ç¼–è¯­è¨€ä¸­çš„ nop ä¸€æ ·ï¼Œè¡¨ç¤ºä»€ä¹ˆéƒ½ä¸åšï¼Œä¸€èˆ¬å¯ç”¨äºè°ƒè¯•ã€å ä½ç­‰</li>
</ul>
<h5 id="æ§åˆ¶è½¬ç§»">æ§åˆ¶è½¬ç§»</h5>
<p>æ¯”è¾ƒæŒ‡ä»¤ï¼šæ¯”è¾ƒæ ˆé¡¶ä¸¤ä¸ªå…ƒç´ çš„å¤§å°ï¼Œå¹¶å°†æ¯”è¾ƒç»“æœå…¥æ ˆ</p>
<ul>
<li>lcmpï¼šæ¯”è¾ƒä¸¤ä¸ª long ç±»å‹å€¼</li>
<li>fcmplï¼šæ¯”è¾ƒä¸¤ä¸ª float ç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›-1ï¼‰</li>
<li>fcmpgï¼šæ¯”è¾ƒä¸¤ä¸ª float ç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›1ï¼‰</li>
<li>dcmplï¼šæ¯”è¾ƒä¸¤ä¸ª double ç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›-1ï¼‰</li>
<li>dcmpgï¼šæ¯”è¾ƒä¸¤ä¸ª double ç±»å‹å€¼ï¼ˆå½“é‡åˆ°NaNæ—¶ï¼Œè¿”å›1ï¼‰</li>
</ul>
<p>æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifeq</td>
<td>equalsï¼Œå½“æ ˆé¡¶intç±»å‹æ•°å€¼ç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr>
<td>ifne</td>
<td>not equalsï¼Œå½“æ ˆé¡¶inç±»å‹æ•°å€¼ä¸ç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr>
<td>iflt</td>
<td>lower thanï¼Œå½“æ ˆé¡¶inç±»å‹æ•°å€¼å°äº0æ—¶è·³è½¬</td>
</tr>
<tr>
<td>ifle</td>
<td>lower or equalsï¼Œå½“æ ˆé¡¶inç±»å‹æ•°å€¼å°äºç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr>
<td>ifgt</td>
<td>greater thanï¼Œå½“æ ˆé¡¶intç±»å‹æ•°ç»„å¤§äº0æ—¶è·³è½¬</td>
</tr>
<tr>
<td>ifge</td>
<td>greater or equalsï¼Œå½“æ ˆé¡¶inç±»å‹æ•°å€¼å¤§äºç­‰äº0æ—¶è·³è½¬</td>
</tr>
<tr>
<td>ifnull</td>
<td>ä¸º null æ—¶è·³è½¬</td>
</tr>
<tr>
<td>ifnonnull</td>
<td>ä¸ä¸º null æ—¶è·³è½¬</td>
</tr>
</tbody>
</table>
<p>æ¯”è¾ƒæ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>if_icmpeq</td>
<td>æ¯”è¾ƒæ ˆé¡¶ä¸¤ int ç±»å‹æ•°å€¼å¤§å°ï¼ˆä¸‹åŒï¼‰ï¼Œå½“å‰è€…ç­‰äºåè€…æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_icmpne</td>
<td>å½“å‰è€…ä¸ç­‰äºåè€…æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_icmplt</td>
<td>å½“å‰è€…å°äºåè€…æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_icmple</td>
<td>å½“å‰è€…å°äºç­‰äºåè€…æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_icmpgt</td>
<td>å½“å‰è€…å¤§äºåè€…æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_icmpge</td>
<td>å½“å‰è€…å¤§äºç­‰äºåè€…æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_acmpeq</td>
<td>å½“ç»“æœç›¸ç­‰æ—¶è·³è½¬</td>
</tr>
<tr>
<td>if_acmpne</td>
<td>å½“ç»“æœä¸ç›¸ç­‰æ—¶è·³è½¬</td>
</tr>
</tbody>
</table>
<p>å¤šæ¡ä»¶åˆ†æ”¯è·³è½¬æŒ‡ä»¤ï¼š</p>
<ul>
<li>tableswitchï¼šç”¨äº switch æ¡ä»¶è·³è½¬ï¼Œcase å€¼è¿ç»­</li>
<li>lookupswitchï¼šç”¨äº switch æ¡ä»¶è·³è½¬ï¼Œcase å€¼ä¸è¿ç»­</li>
</ul>
<p>æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼š</p>
<ul>
<li>gotoï¼šç”¨æ¥è¿›è¡Œè·³è½¬åˆ°æŒ‡å®šè¡Œå·çš„å­—èŠ‚ç </li>
<li>goto_wï¼šæ— æ¡ä»¶è·³è½¬ï¼ˆå®½ç´¢å¼•ï¼‰</li>
</ul>
<h5 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</h5>
<h6 id="å¤„ç†æœºåˆ¶-3">å¤„ç†æœºåˆ¶</h6>
<p>æŠ›å‡ºå¼‚å¸¸æŒ‡ä»¤ï¼šathrow æŒ‡ä»¤</p>
<p>JVM å¤„ç†å¼‚å¸¸ï¼ˆcatch è¯­å¥ï¼‰ä¸æ˜¯ç”±å­—èŠ‚ç æŒ‡ä»¤æ¥å®ç°çš„ï¼Œè€Œæ˜¯<strong>é‡‡ç”¨å¼‚å¸¸è¡¨æ¥å®Œæˆ</strong>çš„</p>
<ul>
<li>
<p>ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;    </span><br><span class="line">    int i = <span class="number">0</span>;    </span><br><span class="line">    <span class="keyword">try</span> &#123;    	</span><br><span class="line">        i = <span class="number">10</span>;    </span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="title class_">Exception</span> e) &#123;   </span><br><span class="line">        i = <span class="number">20</span>;   </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        i = <span class="number">30</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å­—èŠ‚ç ï¼š</p>
<ul>
<li>å¤šå‡ºä¸€ä¸ª <strong>Exception table</strong> çš„ç»“æ„ï¼Œ<strong>[from, to) æ˜¯å‰é—­åå¼€çš„æ£€æµ‹èŒƒå›´</strong>ï¼Œä¸€æ—¦è¿™ä¸ªèŒƒå›´å†…çš„å­—èŠ‚ç æ‰§è¡Œå‡ºç°å¼‚å¸¸ï¼Œåˆ™é€šè¿‡ type åŒ¹é…å¼‚å¸¸ç±»å‹ï¼Œå¦‚æœä¸€è‡´ï¼Œè¿›å…¥ target æ‰€æŒ‡ç¤ºè¡Œå·</li>
<li>11 è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ astore_2 æ˜¯å°†å¼‚å¸¸å¯¹è±¡å¼•ç”¨å­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 2 ä½ç½®ï¼Œå› ä¸ºå¼‚å¸¸å‡ºç°æ—¶ï¼Œåªèƒ½è¿›å…¥ Exception table ä¸­ä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡è¡¨ slot 2 ä½ç½®è¢«å…±ç”¨</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0</span>: 	iconst_0</span><br><span class="line">    <span class="number">1</span>: 	istore_1 	<span class="regexp">//</span> <span class="number">0</span> -&gt; i	-&gt;èµ‹å€¼</span><br><span class="line">    <span class="number">2</span>: 	bipush <span class="number">10</span> 	<span class="regexp">//</span> try <span class="number">10</span> æ”¾å…¥æ“ä½œæ•°æ ˆé¡¶</span><br><span class="line">    <span class="number">4</span>: 	istore_1 	<span class="regexp">//</span> <span class="number">10</span> -&gt; i å°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot1</span><br><span class="line">    <span class="number">5</span>: 	bipush <span class="number">30</span> 	<span class="regexp">//</span> ã€finallyã€‘ </span><br><span class="line">    <span class="number">7</span>: 	istore_1 	<span class="regexp">//</span> <span class="number">30</span> -&gt; i </span><br><span class="line">    <span class="number">8</span>: 	goto <span class="number">27</span> 	<span class="regexp">//</span> return -----------------------------------</span><br><span class="line">    <span class="number">11</span>: astore_2 	<span class="regexp">//</span> catch Exceptin -&gt; e ----------------------</span><br><span class="line">    <span class="number">12</span>: bipush <span class="number">20</span> 	<span class="regexp">//</span> </span><br><span class="line">    <span class="number">14</span>: istore_1 	<span class="regexp">//</span> <span class="number">20</span> -&gt; i </span><br><span class="line">    <span class="number">15</span>: bipush <span class="number">30</span> 	<span class="regexp">//</span> ã€finallyã€‘ </span><br><span class="line">    <span class="number">17</span>: istore_1 	<span class="regexp">//</span> <span class="number">30</span> -&gt; i </span><br><span class="line">    <span class="number">18</span>: goto <span class="number">27</span> 	<span class="regexp">//</span> return -----------------------------------</span><br><span class="line">    <span class="number">21</span>: astore_3 	<span class="regexp">//</span> catch any -&gt; slot <span class="number">3</span> ----------------------</span><br><span class="line">    <span class="number">22</span>: bipush <span class="number">30</span> 	<span class="regexp">//</span> ã€finallyã€‘</span><br><span class="line">    <span class="number">24</span>: istore_1 	<span class="regexp">//</span> <span class="number">30</span> -&gt; i </span><br><span class="line">    <span class="number">25</span>: aload_3 	<span class="regexp">//</span> å°†å±€éƒ¨å˜é‡è¡¨çš„slot <span class="number">3</span>æ•°æ®å¼¹å‡ºï¼Œæ”¾å…¥æ“ä½œæ•°æ ˆæ ˆé¡¶</span><br><span class="line">    <span class="number">26</span>: athrow 		<span class="regexp">//</span> throw æŠ›å‡ºå¼‚å¸¸</span><br><span class="line">    <span class="number">27</span>: return</span><br><span class="line">Exception table:</span><br><span class="line">	<span class="regexp">//</span> ä»»ä½•é˜¶æ®µå‡ºç°ä»»åŠ¡å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ finally</span><br><span class="line">	from   to 	target 	type</span><br><span class="line">		<span class="number">2</span>	<span class="number">5</span> 		<span class="number">11</span> 	Class java<span class="regexp">/lang/</span>Exception</span><br><span class="line">		<span class="number">2</span> 	<span class="number">5</span> 		<span class="number">21</span> 	any <span class="regexp">//</span> å‰©ä½™çš„å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚ Error</span><br><span class="line">		<span class="number">11</span> <span class="number">15</span> 		<span class="number">21</span> 	any <span class="regexp">//</span> å‰©ä½™çš„å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚ Error</span><br><span class="line">LineNumberTable: ...</span><br><span class="line">LocalVariableTable:</span><br><span class="line">	Start Length Slot Name Signature</span><br><span class="line">	<span class="number">12</span> 		<span class="number">3</span> 		<span class="number">2</span> 	e 	Ljava<span class="regexp">/lang/</span>Exception;</span><br><span class="line">	<span class="number">0</span> 		<span class="number">28</span> 		<span class="number">0</span> args 	[Ljava<span class="regexp">/lang/</span>String;</span><br><span class="line">	<span class="number">2</span> 		<span class="number">26</span> 		<span class="number">1</span> 	i 	I</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="finally">finally</h6>
<p>finally ä¸­çš„ä»£ç è¢«<strong>å¤åˆ¶äº† 3 ä»½</strong>ï¼Œåˆ†åˆ«æ”¾å…¥ try æµç¨‹ï¼Œcatch æµç¨‹ä»¥åŠ catch å‰©ä½™çš„å¼‚å¸¸ç±»å‹æµç¨‹ï¼ˆä¸ŠèŠ‚æ¡ˆä¾‹ï¼‰</p>
<ul>
<li>
<p>ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">test</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å­—èŠ‚ç ï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0</span>: bipush <span class="number">10</span> 	<span class="regexp">//</span> <span class="number">10</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="number">2</span>: istore_0 	<span class="regexp">//</span> <span class="number">10</span> -&gt; slot <span class="number">0</span> ã€ä»æ ˆé¡¶ç§»é™¤äº†ã€‘</span><br><span class="line">    <span class="number">3</span>: bipush <span class="number">20</span> 	<span class="regexp">//</span> <span class="number">20</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="number">5</span>: ireturn 		<span class="regexp">//</span> è¿”å›æ ˆé¡¶ int(<span class="number">20</span>)</span><br><span class="line">    <span class="number">6</span>: astore_1 	<span class="regexp">//</span> catch any å­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot1</span><br><span class="line">    <span class="number">7</span>: bipush <span class="number">20</span> 	<span class="regexp">//</span> <span class="number">20</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="number">9</span>: ireturn 		<span class="regexp">//</span> è¿”å›æ ˆé¡¶ int(<span class="number">20</span>)</span><br><span class="line">Exception table:</span><br><span class="line">	from   to 	target 	type</span><br><span class="line">		<span class="number">0</span>	<span class="number">3</span>		<span class="number">6</span> 	any      </span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="return">return</h6>
<ul>
<li>
<p>åå¼‚å¸¸</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">test</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">0</span>: bipush <span class="number">10</span> 	<span class="regexp">//</span> <span class="number">10</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="number">2</span>: istore_0 	<span class="regexp">//</span> <span class="number">10</span> -&gt; slot <span class="number">0</span> ã€ä»æ ˆé¡¶ç§»é™¤äº†ã€‘</span><br><span class="line">    <span class="number">3</span>: bipush <span class="number">20</span> 	<span class="regexp">//</span> <span class="number">20</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="number">5</span>: ireturn 		<span class="regexp">//</span> è¿”å›æ ˆé¡¶ int(<span class="number">20</span>)</span><br><span class="line">    <span class="number">6</span>: astore_1 	<span class="regexp">//</span> catch any  å­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot1</span><br><span class="line">    <span class="number">7</span>: bipush <span class="number">20</span> 	<span class="regexp">//</span> <span class="number">20</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="number">9</span>: ireturn 		<span class="regexp">//</span> è¿”å›æ ˆé¡¶ int(<span class="number">20</span>)</span><br><span class="line">Exception table:</span><br><span class="line">	from   to 	target 	type</span><br><span class="line">		<span class="number">0</span>	<span class="number">3</span>		<span class="number">6</span> 	any      </span><br></pre></td></tr></table></figure>
<ul>
<li>ç”±äº finally ä¸­çš„ ireturn è¢«æ’å…¥äº†æ‰€æœ‰å¯èƒ½çš„æµç¨‹ï¼Œå› æ­¤è¿”å›ç»“æœä»¥ finally çš„ä¸ºå‡†</li>
<li>å­—èŠ‚ç ä¸­æ²¡æœ‰ <strong>athrow</strong> ï¼Œè¡¨æ˜å¦‚æœåœ¨ finally ä¸­å‡ºç°äº† returnï¼Œä¼š<strong>åæ‰å¼‚å¸¸</strong></li>
</ul>
</li>
<li>
<p>ä¸åå¼‚å¸¸</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Demo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">    	<span class="built_in">int</span> result = test();</span><br><span class="line">    	System.<span class="keyword">out</span>.println(result);<span class="comment">//10</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">test</span>()</span> &#123;</span><br><span class="line">        <span class="built_in">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> i;<span class="comment">//è¿”å›10</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            i = <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">   	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="attribute">0</span>: 	bipush <span class="number">10</span> 	// <span class="number">10</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="attribute">2</span>: 	istore_0 	// <span class="number">10</span> èµ‹å€¼ç»™iï¼Œæ”¾å…¥slot <span class="number">0</span></span><br><span class="line">    <span class="attribute">3</span>: 	iload_0 	// i(<span class="number">10</span>)åŠ è½½è‡³æ“ä½œæ•°æ ˆ</span><br><span class="line">    <span class="attribute">4</span>: 	istore_1 	// <span class="number">10</span> -&gt; slot <span class="number">1</span>ï¼Œã€æš‚å­˜è‡³ slot <span class="number">1</span>ï¼Œç›®çš„æ˜¯ä¸ºäº†å›ºå®šè¿”å›å€¼ã€‘</span><br><span class="line">    <span class="attribute">5</span>: 	bipush <span class="number">20</span> 	// <span class="number">20</span> æ”¾å…¥æ ˆé¡¶</span><br><span class="line">    <span class="attribute">7</span>: 	istore_0 	// <span class="number">20</span> slot <span class="number">0</span></span><br><span class="line">    <span class="attribute">8</span>: 	iload_1 	// slot <span class="number">1</span>(<span class="number">10</span>) è½½å…¥ slot <span class="number">1</span> æš‚å­˜çš„å€¼</span><br><span class="line">    <span class="attribute">9</span>: 	ireturn 	// è¿”å›æ ˆé¡¶çš„ int(<span class="number">10</span>)</span><br><span class="line">    <span class="attribute">10</span>: astore_2	// catch any -&gt; slot <span class="number">2</span> å­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot2</span><br><span class="line">    <span class="attribute">11</span>: bipush <span class="number">20</span></span><br><span class="line">    <span class="attribute">13</span>: istore_0</span><br><span class="line">    <span class="attribute">14</span>: aload_2</span><br><span class="line">    <span class="attribute">15</span>: athrow		// ä¸ä¼šåæ‰å¼‚å¸¸</span><br><span class="line"><span class="attribute">Exception</span> table:</span><br><span class="line">	<span class="attribute">from</span>   to 	target 	type</span><br><span class="line">	  <span class="attribute">3</span>	   <span class="number">5</span>		<span class="number">10</span> 	any  </span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="åŒæ­¥æ§åˆ¶">åŒæ­¥æ§åˆ¶</h5>
<p>æ–¹æ³•çº§çš„åŒæ­¥ï¼šæ˜¯éšå¼çš„ï¼Œæ— é¡»é€šè¿‡å­—èŠ‚ç æŒ‡ä»¤æ¥æ§åˆ¶ï¼Œå®ƒå®ç°åœ¨æ–¹æ³•è°ƒç”¨å’Œè¿”å›æ“ä½œä¹‹ä¸­ï¼Œè™šæ‹Ÿæœºå¯ä»¥ä»æ–¹æ³•å¸¸é‡æ± çš„æ–¹æ³•è¡¨ç»“æ„ä¸­çš„ ACC_SYNCHRONIZED è®¿é—®æ ‡å¿—å¾—çŸ¥ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å£°æ˜ä¸ºåŒæ­¥æ–¹æ³•</p>
<p>æ–¹æ³•å†…æŒ‡å®šæŒ‡ä»¤åºåˆ—çš„åŒæ­¥ï¼šæœ‰ monitorenter å’Œ monitorexit ä¸¤æ¡æŒ‡ä»¤æ¥æ”¯æŒ synchronized å…³é”®å­—çš„è¯­ä¹‰</p>
<ul>
<li>montiorenterï¼šè¿›å…¥å¹¶è·å–å¯¹è±¡ç›‘è§†å™¨ï¼Œå³ä¸ºæ ˆé¡¶å¯¹è±¡åŠ é”</li>
<li>monitorexitï¼šé‡Šæ”¾å¹¶é€€å‡ºå¯¹è±¡ç›‘è§†å™¨ï¼Œå³ä¸ºæ ˆé¡¶å¯¹è±¡è§£é”</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4%E5%90%8C%E6%AD%A5%E6%8E%A7%E5%88%B6.png" alt="img"></p>
<h4 id="æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹</h4>
<p>åŸå§‹ Java ä»£ç ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;        </span><br><span class="line">        <span class="type">int</span> a = <span class="number">10</span>;        </span><br><span class="line">        <span class="type">int</span> b = Short.MAX_VALUE + <span class="number">1</span>;        </span><br><span class="line">        <span class="type">int</span> c = a + b;        </span><br><span class="line">        System.out.<span class="built_in">println</span>(c);	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>javap -v Demo.classï¼šçœç•¥</p>
<ul>
<li>
<p>å¸¸é‡æ± è½½å…¥è¿è¡Œæ—¶å¸¸é‡æ± </p>
</li>
<li>
<p>æ–¹æ³•åŒºå­—èŠ‚ç è½½å…¥æ–¹æ³•åŒº</p>
</li>
<li>
<p>main çº¿ç¨‹å¼€å§‹è¿è¡Œï¼Œåˆ†é…æ ˆå¸§å†…å­˜ï¼šï¼ˆæ“ä½œæ•°æ ˆstack=2ï¼Œå±€éƒ¨å˜é‡è¡¨locals=4ï¼‰</p>
</li>
<li>
<p><strong>æ‰§è¡Œå¼•æ“</strong>å¼€å§‹æ‰§è¡Œå­—èŠ‚ç </p>
<p><code>bipush 10</code>ï¼šå°†ä¸€ä¸ª byte å‹å…¥æ“ä½œæ•°æ ˆï¼ˆå…¶é•¿åº¦ä¼šè¡¥é½ 4 ä¸ªå­—èŠ‚ï¼‰ï¼Œç±»ä¼¼çš„æŒ‡ä»¤</p>
<ul>
<li>sipush å°†ä¸€ä¸ª short å‹å…¥æ“ä½œæ•°æ ˆï¼ˆå…¶é•¿åº¦ä¼šè¡¥é½ 4 ä¸ªå­—èŠ‚ï¼‰</li>
<li>ldc å°†ä¸€ä¸ª int å‹å…¥æ“ä½œæ•°æ ˆ</li>
<li>ldc2_w å°†ä¸€ä¸ª long å‹å…¥æ“ä½œæ•°æ ˆï¼ˆåˆ†ä¸¤æ¬¡å‹å…¥ï¼Œå› ä¸º long æ˜¯ 8 ä¸ªå­—èŠ‚ï¼‰</li>
<li>è¿™é‡Œå°çš„æ•°å­—éƒ½æ˜¯å’Œå­—èŠ‚ç æŒ‡ä»¤å­˜åœ¨ä¸€èµ·ï¼Œè¶…è¿‡ short èŒƒå›´çš„æ•°å­—å­˜å…¥äº†å¸¸é‡æ± </li>
</ul>
<p><code>istore_1</code>ï¼šå°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B1.png" alt="img"></p>
<p><code>ldc #3</code>ï¼šä»å¸¸é‡æ± åŠ è½½ #3 æ•°æ®åˆ°æ“ä½œæ•°æ ˆ Short.MAX_VALUE æ˜¯ 32767ï¼Œæ‰€ä»¥ 32768 = Short.MAX_VALUE + 1 å®é™…æ˜¯åœ¨ç¼–è¯‘æœŸé—´è®¡ç®—å®Œæˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B2.png" alt="img"></p>
<p><code>istore_2</code>ï¼šå°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 2</p>
<p><code>iload_1</code>ï¼šå°†å±€éƒ¨å˜é‡è¡¨çš„ slot 1 æ•°æ®å¼¹å‡ºï¼Œæ”¾å…¥æ“ä½œæ•°æ ˆæ ˆé¡¶</p>
<p><code>iload_2</code>ï¼šå°†å±€éƒ¨å˜é‡è¡¨çš„ slot 2 æ•°æ®å¼¹å‡ºï¼Œæ”¾å…¥æ“ä½œæ•°æ ˆæ ˆé¡¶</p>
<p><code>iadd</code>ï¼šæ‰§è¡Œç›¸åŠ æ“ä½œ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B3.png" alt="img"></p>
<p><code>istore_3</code>ï¼šå°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 3</p>
<p><code>getstatic #4</code>ï¼šè·å–é™æ€å­—æ®µ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B4.png" alt="img"></p>
<p><code>iload_3</code>ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B5.png" alt="img"></p>
<p><code>invokevirtual #5</code>ï¼š</p>
<ul>
<li>æ‰¾åˆ°å¸¸é‡æ±  #5 é¡¹</li>
<li>å®šä½åˆ°æ–¹æ³•åŒº java/io/PrintStream.println:(I)V æ–¹æ³•</li>
<li><strong>ç”Ÿæˆæ–°çš„æ ˆå¸§</strong>ï¼ˆåˆ†é… localsã€stackç­‰ï¼‰</li>
<li>ä¼ é€’å‚æ•°ï¼Œæ‰§è¡Œæ–°æ ˆå¸§ä¸­çš„å­—èŠ‚ç </li>
<li>æ‰§è¡Œå®Œæ¯•ï¼Œå¼¹å‡ºæ ˆå¸§</li>
<li>æ¸…é™¤ main æ“ä½œæ•°æ ˆå†…å®¹</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B6.png" alt="img"></p>
<p>returnï¼šå®Œæˆ main æ–¹æ³•è°ƒç”¨ï¼Œå¼¹å‡º main æ ˆå¸§ï¼Œç¨‹åºç»“æŸ</p>
</li>
</ul>
<h3 id="æ‰§è¡Œå¼•æ“">æ‰§è¡Œå¼•æ“</h3>
<h4 id="åŸºæœ¬ä»‹ç»-21">åŸºæœ¬ä»‹ç»</h4>
<p>æ‰§è¡Œå¼•æ“ï¼šJava è™šæ‹Ÿæœºçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼Œç±»åŠ è½½ä¸»è¦ä»»åŠ¡æ˜¯è´Ÿè´£è£…è½½å­—èŠ‚ç åˆ°å…¶å†…éƒ¨ï¼Œä½†å­—èŠ‚ç å¹¶ä¸èƒ½å¤Ÿç›´æ¥è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œéœ€è¦æ‰§è¡Œå¼•æ“å°†<strong>å­—èŠ‚ç æŒ‡ä»¤è§£é‡Š/ç¼–è¯‘ä¸ºå¯¹åº”å¹³å°ä¸Šçš„æœ¬åœ°æœºå™¨æŒ‡ä»¤</strong>ï¼Œè¿›è¡Œæ‰§è¡Œ</p>
<p>è™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªç›¸å¯¹äºç‰©ç†æœºçš„æ¦‚å¿µï¼Œè¿™ä¸¤ç§æœºå™¨éƒ½æœ‰ä»£ç æ‰§è¡Œèƒ½åŠ›ï¼š</p>
<ul>
<li>ç‰©ç†æœºçš„æ‰§è¡Œå¼•æ“æ˜¯ç›´æ¥å»ºç«‹åœ¨å¤„ç†å™¨ã€ç¼“å­˜ã€æŒ‡ä»¤é›†å’Œæ“ä½œç³»ç»Ÿå±‚é¢ä¸Š</li>
<li>è™šæ‹Ÿæœºçš„æ‰§è¡Œå¼•æ“æ˜¯ç”±è½¯ä»¶è‡ªè¡Œå®ç°çš„ï¼Œå¯ä»¥ä¸å—ç‰©ç†æ¡ä»¶åˆ¶çº¦åœ°å®šåˆ¶æŒ‡ä»¤é›†ä¸æ‰§è¡Œå¼•æ“çš„ç»“æ„ä½“ç³»</li>
</ul>
<p>Java æ˜¯<strong>åŠç¼–è¯‘åŠè§£é‡Šå‹è¯­è¨€</strong>ï¼Œå°†è§£é‡Šæ‰§è¡Œä¸ç¼–è¯‘æ‰§è¡ŒäºŒè€…ç»“åˆèµ·æ¥è¿›è¡Œï¼š</p>
<ul>
<li>è§£é‡Šå™¨ï¼šæ ¹æ®é¢„å®šä¹‰çš„è§„èŒƒå¯¹å­—èŠ‚ç é‡‡ç”¨é€è¡Œè§£é‡Šçš„æ–¹å¼æ‰§è¡Œï¼Œå°†æ¯æ¡å­—èŠ‚ç æ–‡ä»¶ä¸­çš„å†…å®¹ç¿»è¯‘ä¸ºå¯¹åº”å¹³å°çš„æœ¬åœ°æœºå™¨æŒ‡ä»¤æ‰§è¡Œ</li>
<li>å³æ—¶ç¼–è¯‘å™¨ï¼ˆJIT : Just In Time Compilerï¼‰ï¼šè™šæ‹Ÿæœºè¿è¡Œæ—¶å°†æºä»£ç ç›´æ¥ç¼–è¯‘æˆ<strong>å’Œæœ¬åœ°æœºå™¨å¹³å°ç›¸å…³çš„æœºå™¨ç </strong>åå†æ‰§è¡Œï¼Œå¹¶å­˜å…¥ Code Cacheï¼Œä¸‹æ¬¡é‡åˆ°ç›¸åŒçš„ä»£ç ç›´æ¥æ‰§è¡Œï¼Œæ•ˆç‡é«˜</li>
</ul>
<h4 id="æ‰§è¡Œæ–¹å¼">æ‰§è¡Œæ–¹å¼</h4>
<p>HotSpot VM é‡‡ç”¨<strong>è§£é‡Šå™¨ä¸å³æ—¶ç¼–è¯‘å™¨å¹¶å­˜çš„æ¶æ„</strong>ï¼Œè§£é‡Šå™¨å’Œå³æ—¶ç¼–è¯‘å™¨èƒ½å¤Ÿç›¸äº’åä½œï¼Œå»é€‰æ‹©æœ€åˆé€‚çš„æ–¹å¼æ¥æƒè¡¡ç¼–è¯‘æœ¬åœ°ä»£ç å’Œç›´æ¥è§£é‡Šæ‰§è¡Œä»£ç çš„æ—¶é—´</p>
<p>HostSpot JVM çš„é»˜è®¤æ‰§è¡Œæ–¹å¼ï¼š</p>
<ul>
<li>å½“ç¨‹åºå¯åŠ¨åï¼Œè§£é‡Šå™¨å¯ä»¥é©¬ä¸Šå‘æŒ¥ä½œç”¨ç«‹å³æ‰§è¡Œï¼Œçœå»ç¼–è¯‘å™¨ç¼–è¯‘çš„æ—¶é—´ï¼ˆè§£é‡Šå™¨å­˜åœ¨çš„<strong>å¿…è¦æ€§</strong>ï¼‰</li>
<li>éšç€ç¨‹åºè¿è¡Œæ—¶é—´çš„æ¨ç§»ï¼Œå³æ—¶ç¼–è¯‘å™¨é€æ¸å‘æŒ¥ä½œç”¨ï¼Œæ ¹æ®çƒ­ç‚¹æ¢æµ‹åŠŸèƒ½ï¼Œå°†æœ‰ä»·å€¼çš„å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°æœºå™¨æŒ‡ä»¤ï¼Œä»¥æ¢å–æ›´é«˜çš„ç¨‹åºæ‰§è¡Œæ•ˆç‡</li>
</ul>
<p>HotSpot VM å¯ä»¥é€šè¿‡ VM å‚æ•°è®¾ç½®ç¨‹åºæ‰§è¡Œæ–¹å¼ï¼š</p>
<ul>
<li>-Xintï¼šå®Œå…¨é‡‡ç”¨è§£é‡Šå™¨æ¨¡å¼æ‰§è¡Œç¨‹åº</li>
<li>-Xcompï¼šå®Œå…¨é‡‡ç”¨å³æ—¶ç¼–è¯‘å™¨æ¨¡å¼æ‰§è¡Œç¨‹åºã€‚å¦‚æœå³æ—¶ç¼–è¯‘å‡ºç°é—®é¢˜ï¼Œè§£é‡Šå™¨ä¼šä»‹å…¥æ‰§è¡Œ</li>
<li>-Xmixedï¼šé‡‡ç”¨è§£é‡Šå™¨ + å³æ—¶ç¼–è¯‘å™¨çš„æ··åˆæ¨¡å¼å…±åŒæ‰§è¡Œç¨‹åº</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png" alt="img"></p>
<h4 id="çƒ­ç‚¹æ¢æµ‹">çƒ­ç‚¹æ¢æµ‹</h4>
<p>çƒ­ç‚¹ä»£ç ï¼šè¢« JIT ç¼–è¯‘å™¨ç¼–è¯‘çš„å­—èŠ‚ç ï¼Œæ ¹æ®ä»£ç è¢«è°ƒç”¨æ‰§è¡Œçš„é¢‘ç‡è€Œå®šï¼Œä¸€ä¸ªè¢«å¤šæ¬¡è°ƒç”¨çš„æ–¹æ³•æˆ–è€…ä¸€ä¸ªå¾ªç¯æ¬¡æ•°è¾ƒå¤šçš„å¾ªç¯ä½“éƒ½å¯ä»¥è¢«ç§°ä¹‹ä¸ºçƒ­ç‚¹ä»£ç </p>
<p>çƒ­ç‚¹æ¢æµ‹ï¼šJIT ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶ä¼šé’ˆçƒ­ç‚¹ä»£ç åšå‡ºæ·±åº¦ä¼˜åŒ–ï¼Œå°†å…¶ç›´æ¥ç¼–è¯‘ä¸ºå¯¹åº”å¹³å°çš„æœ¬åœ°æœºå™¨æŒ‡ä»¤è¿›è¡Œç¼“å­˜ï¼Œä»¥æå‡ç¨‹åºæ‰§è¡Œæ€§èƒ½</p>
<p>JIT ç¼–è¯‘åœ¨é»˜è®¤æƒ…å†µæ˜¯å¼‚æ­¥è¿›è¡Œçš„ï¼Œå½“è§¦å‘æŸæ–¹æ³•æˆ–æŸä»£ç å—çš„ä¼˜åŒ–æ—¶ï¼Œå…ˆå°†å…¶æ”¾å…¥ç¼–è¯‘é˜Ÿåˆ—ï¼Œç„¶åç”±ç¼–è¯‘çº¿ç¨‹è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘ä¹‹åçš„ä»£ç æ”¾åœ¨ CodeCache ä¸­ï¼Œé€šè¿‡ <code>-XX:-BackgroundCompilation</code> å‚æ•°å¯ä»¥å…³é—­å¼‚æ­¥ç¼–è¯‘</p>
<ul>
<li><strong>CodeCache</strong> ç”¨äºç¼“å­˜ç¼–è¯‘åçš„æœºå™¨ç ã€åŠ¨æ€ç”Ÿæˆçš„ä»£ç å’Œæœ¬åœ°æ–¹æ³•ä»£ç  JNI</li>
<li>å¦‚æœ CodeCache åŒºåŸŸè¢«å æ»¡ï¼Œç¼–è¯‘å™¨è¢«åœç”¨ï¼Œå­—èŠ‚ç å°†ä¸ä¼šç¼–è¯‘ä¸ºæœºå™¨ç ï¼Œåº”ç”¨ç¨‹åºç»§ç»­è¿è¡Œï¼Œä½†è¿è¡Œæ€§èƒ½ä¼šé™ä½å¾ˆå¤š</li>
</ul>
<p>HotSpot VM é‡‡ç”¨çš„çƒ­ç‚¹æ¢æµ‹æ–¹å¼æ˜¯åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹ï¼Œä¸ºæ¯ä¸€ä¸ªæ–¹æ³•éƒ½å»ºç«‹ 2 ä¸ªä¸åŒç±»å‹çš„è®¡æ•°å™¨ï¼šæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ï¼ˆInvocation Counterï¼‰å’Œå›è¾¹è®¡æ•°å™¨ï¼ˆBackEdge Counterï¼‰</p>
<ul>
<li>
<p>æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ï¼šç”¨äºç»Ÿè®¡æ–¹æ³•è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œé»˜è®¤é˜ˆå€¼åœ¨ Client æ¨¡å¼ ä¸‹æ˜¯ 1500 æ¬¡ï¼Œåœ¨ Server æ¨¡å¼ä¸‹æ˜¯ 10000 æ¬¡ï¼ˆéœ€è¦è¿›è¡Œæ¿€è¿›çš„ä¼˜åŒ–ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªé˜ˆå€¼ï¼Œå°±ä¼šè§¦å‘ JIT ç¼–è¯‘ï¼Œé˜ˆå€¼å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºå‚æ•° <code>-XX:CompileThreshold</code> è®¾ç½®</p>
<p>å·¥ä½œæµç¨‹ï¼šå½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ ä¼šå…ˆæ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦å­˜åœ¨è¢« JIT ç¼–è¯‘è¿‡çš„ç‰ˆæœ¬ï¼Œå­˜åœ¨åˆ™ä½¿ç”¨ç¼–è¯‘åçš„æœ¬åœ°ä»£ç æ¥æ‰§è¡Œï¼›å¦‚æœä¸å­˜åœ¨åˆ™å°†æ­¤æ–¹æ³•çš„è°ƒç”¨è®¡æ•°å™¨å€¼åŠ  1ï¼Œç„¶ååˆ¤æ–­æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ä¸å›è¾¹è®¡æ•°å™¨å€¼ä¹‹å’Œæ˜¯å¦è¶…è¿‡æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨çš„é˜ˆå€¼ï¼Œå¦‚æœè¶…è¿‡é˜ˆå€¼ä¼šå‘å³æ—¶ç¼–è¯‘å™¨<strong>æäº¤ä¸€ä¸ªè¯¥æ–¹æ³•çš„ä»£ç ç¼–è¯‘è¯·æ±‚</strong></p>
</li>
<li>
<p>å›è¾¹è®¡æ•°å™¨ï¼šç»Ÿè®¡ä¸€ä¸ªæ–¹æ³•ä¸­å¾ªç¯ä½“ä»£ç æ‰§è¡Œçš„æ¬¡æ•°ï¼Œåœ¨å­—èŠ‚ç ä¸­æ§åˆ¶æµå‘åè·³è½¬çš„æŒ‡ä»¤ç§°ä¸ºå›è¾¹</p>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•ä¸­çš„å¾ªç¯ä½“éœ€è¦æ‰§è¡Œå¤šæ¬¡ï¼Œå¯ä»¥ä¼˜åŒ–ä¸ºä¸ºæ ˆä¸Šæ›¿æ¢ï¼Œç®€ç§° OSR (On StackReplacement) ç¼–è¯‘ï¼Œ<strong>OSR æ›¿æ¢å¾ªç¯ä»£ç ä½“çš„å…¥å£ï¼ŒC1ã€C2 æ›¿æ¢çš„æ˜¯æ–¹æ³•è°ƒç”¨çš„å…¥å£</strong>ï¼ŒOSR ç¼–è¯‘åä¼šå‡ºç°æ–¹æ³•çš„æ•´æ®µä»£ç è¢«ç¼–è¯‘äº†ï¼Œä½†æ˜¯åªæœ‰å¾ªç¯ä½“éƒ¨åˆ†æ‰æ‰§è¡Œç¼–è¯‘åçš„æœºå™¨ç ï¼Œå…¶ä»–éƒ¨åˆ†ä»æ˜¯è§£é‡Šæ‰§è¡Œ</p>
</li>
</ul>
<h4 id="åˆ†å±‚ç¼–è¯‘">åˆ†å±‚ç¼–è¯‘</h4>
<p>HotSpot VM å†…åµŒä¸¤ä¸ª JIT ç¼–è¯‘å™¨ï¼Œåˆ†åˆ«ä¸º Client Compiler å’Œ Server Compilerï¼Œç®€ç§° C1 ç¼–è¯‘å™¨å’Œ C2 ç¼–è¯‘å™¨</p>
<p>C1 ç¼–è¯‘å™¨ä¼šå¯¹å­—èŠ‚ç è¿›è¡Œç®€å•å¯é çš„ä¼˜åŒ–ï¼Œè€—æ—¶çŸ­ï¼Œä»¥è¾¾åˆ°æ›´å¿«çš„ç¼–è¯‘é€Ÿåº¦ï¼ŒC1 ç¼–è¯‘å™¨çš„ä¼˜åŒ–æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>æ–¹æ³•å†…è”ï¼š<strong>å°†è°ƒç”¨çš„å‡½æ•°ä»£ç ç¼–è¯‘åˆ°è°ƒç”¨ç‚¹å¤„</strong>ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ ˆå¸§çš„ç”Ÿæˆï¼Œå‡å°‘å‚æ•°ä¼ é€’ä»¥åŠè·³è½¬è¿‡ç¨‹</p>
<p>æ–¹æ³•å†…è”èƒ½å¤Ÿæ¶ˆé™¤æ–¹æ³•è°ƒç”¨çš„å›ºå®šå¼€é”€ï¼Œä»»ä½•æ–¹æ³•é™¤éè¢«å†…è”ï¼Œå¦åˆ™è°ƒç”¨éƒ½ä¼šæœ‰å›ºå®šå¼€é”€ï¼Œæ¥æºäºä¿å­˜ç¨‹åºåœ¨è¯¥æ–¹æ³•ä¸­çš„æ‰§è¡Œä½ç½®ï¼Œä»¥åŠæ–°å»ºã€å‹å…¥å’Œå¼¹å‡ºæ–°æ–¹æ³•æ‰€ä½¿ç”¨çš„æ ˆå¸§ã€‚</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="type">static</span> <span class="type">int</span> <span class="title">square</span><span class="params">(<span class="keyword">final</span> <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> i * i;</span><br><span class="line">&#125;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="built_in">square</span>(<span class="number">9</span>));</span><br></pre></td></tr></table></figure>
<p>square æ˜¯çƒ­ç‚¹æ–¹æ³•ï¼Œä¼šè¿›è¡Œå†…è”ï¼ŒæŠŠæ–¹æ³•å†…ä»£ç æ‹·è´ç²˜è´´åˆ°è°ƒç”¨è€…çš„ä½ç½®ï¼š</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.<span class="keyword">out</span>.printl<span class="meta">n</span>(9 <span class="comment">* 9);</span></span><br></pre></td></tr></table></figure>
<p>è¿˜èƒ½å¤Ÿè¿›è¡Œå¸¸é‡æŠ˜å ï¼ˆconstant foldingï¼‰çš„ä¼˜åŒ–ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="number">81</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å†—ä½™æ¶ˆé™¤ï¼šæ ¹æ®è¿è¡Œæ—¶çŠ¶å†µè¿›è¡Œä»£ç æŠ˜å æˆ–å‰Šé™¤</p>
</li>
<li>
<p>å†…è”ç¼“å­˜ï¼šæ˜¯ä¸€ç§åŠ å¿«åŠ¨æ€ç»‘å®šçš„ä¼˜åŒ–æŠ€æœ¯ï¼ˆæ–¹æ³•è°ƒç”¨éƒ¨åˆ†è¯¦è§£ï¼‰</p>
</li>
</ul>
<p>C2 ç¼–è¯‘å™¨è¿›è¡Œè€—æ—¶è¾ƒé•¿çš„ä¼˜åŒ–ä»¥åŠæ¿€è¿›ä¼˜åŒ–ï¼Œä¼˜åŒ–çš„ä»£ç æ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼Œå½“æ¿€è¿›ä¼˜åŒ–çš„å‡è®¾ä¸æˆç«‹æ—¶ï¼Œå†é€€å›ä½¿ç”¨ C1 ç¼–è¯‘ï¼Œè¿™ä¹Ÿæ˜¯ä½¿ç”¨åˆ†å±‚ç¼–è¯‘çš„åŸå› </p>
<p>C2 çš„ä¼˜åŒ–ä¸»è¦æ˜¯åœ¨å…¨å±€å±‚é¢ï¼Œé€ƒé€¸åˆ†ææ˜¯ä¼˜åŒ–çš„åŸºç¡€ï¼šæ ‡é‡æ›¿æ¢ã€æ ˆä¸Šåˆ†é…ã€åŒæ­¥æ¶ˆé™¤</p>
<p>VM å‚æ•°è®¾ç½®ï¼š</p>
<ul>
<li>-clientï¼šæŒ‡å®š Java è™šæ‹Ÿæœºè¿è¡Œåœ¨ Client æ¨¡å¼ä¸‹ï¼Œå¹¶ä½¿ç”¨ C1 ç¼–è¯‘å™¨</li>
<li>-serverï¼šæŒ‡å®š Java è™šæ‹Ÿæœºè¿è¡Œåœ¨ Server æ¨¡å¼ä¸‹ï¼Œå¹¶ä½¿ç”¨ C2 ç¼–è¯‘å™¨</li>
<li><code>-server -XX:+TieredCompilation</code>ï¼šåœ¨ 1.8 ä¹‹å‰ï¼Œåˆ†å±‚ç¼–è¯‘é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¯ä»¥æ·»åŠ è¯¥å‚æ•°å¼€å¯</li>
</ul>
<p>åˆ†å±‚ç¼–è¯‘ç­–ç•¥ (Tiered Compilation)ï¼šç¨‹åºè§£é‡Šæ‰§è¡Œå¯ä»¥è§¦å‘ C1 ç¼–è¯‘ï¼Œå°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç ï¼ŒåŠ ä¸Šæ€§èƒ½ç›‘æ§ï¼ŒC2 ç¼–è¯‘ä¼šæ ¹æ®æ€§èƒ½ç›‘æ§ä¿¡æ¯è¿›è¡Œæ¿€è¿›ä¼˜åŒ–ï¼ŒJVM å°†æ‰§è¡ŒçŠ¶æ€åˆ†æˆäº† 5 ä¸ªå±‚æ¬¡ï¼š</p>
<ul>
<li>
<p>0 å±‚ï¼Œè§£é‡Šæ‰§è¡Œï¼ˆInterpreterï¼‰</p>
</li>
<li>
<p>1 å±‚ï¼Œä½¿ç”¨ C1 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œï¼ˆä¸å¸¦ profilingï¼‰</p>
</li>
<li>
<p>2 å±‚ï¼Œä½¿ç”¨ C1 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œï¼ˆå¸¦åŸºæœ¬çš„ profilingï¼‰</p>
</li>
<li>
<p>3 å±‚ï¼Œä½¿ç”¨ C1 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œï¼ˆå¸¦å®Œå…¨çš„ profilingï¼‰</p>
</li>
<li>
<p>4 å±‚ï¼Œä½¿ç”¨ C2 å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘æ‰§è¡Œï¼ˆC1 å’Œ C2 åä½œè¿è¡Œï¼‰</p>
<p>è¯´æ˜ï¼šprofiling æ˜¯æŒ‡åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ”¶é›†ä¸€äº›ç¨‹åºæ‰§è¡ŒçŠ¶æ€çš„æ•°æ®ï¼Œä¾‹å¦‚æ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ï¼Œå¾ªç¯çš„å›è¾¹æ¬¡æ•°ç­‰</p>
</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/20bd2e9b1f03">https://www.jianshu.com/p/20bd2e9b1f03</a></p>
<h3 id="æ–¹æ³•è°ƒç”¨">æ–¹æ³•è°ƒç”¨</h3>
<h4 id="æ–¹æ³•è¯†åˆ«">æ–¹æ³•è¯†åˆ«</h4>
<p>Java è™šæ‹Ÿæœºè¯†åˆ«æ–¹æ³•çš„å…³é”®åœ¨äºç±»åã€æ–¹æ³•åä»¥åŠæ–¹æ³•æè¿°ç¬¦ï¼ˆmethod descriptorï¼‰</p>
<ul>
<li><strong>æ–¹æ³•æè¿°ç¬¦æ˜¯ç”±æ–¹æ³•çš„å‚æ•°ç±»å‹ä»¥åŠè¿”å›ç±»å‹æ‰€æ„æˆ</strong>ï¼ŒJava å±‚é¢å«æ–¹æ³•ç‰¹å¾ç­¾å</li>
<li>åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå¦‚æœåŒæ—¶å‡ºç°å¤šä¸ªåå­—ç›¸åŒä¸”æè¿°ç¬¦ä¹Ÿç›¸åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºä¼šåœ¨ç±»çš„éªŒè¯é˜¶æ®µæŠ¥é”™</li>
</ul>
<p>JVM æ ¹æ®åå­—å’Œæè¿°ç¬¦æ¥åˆ¤æ–­çš„ï¼Œåªè¦è¿”å›å€¼ä¸ä¸€æ ·ï¼ˆæ–¹æ³•æè¿°ç¬¦ä¸ä¸€æ ·ï¼‰ï¼Œå…¶å®ƒå®Œå…¨ä¸€æ ·ï¼Œåœ¨ JVM ä¸­æ˜¯å…è®¸çš„ï¼Œä½† Java è¯­è¨€ä¸å…è®¸</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›å€¼ç±»å‹ä¸åŒï¼Œç¼–è¯‘é˜¶æ®µç›´æ¥æŠ¥é”™</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">Integer</span> <span class="title function_">invoke</span>(<span class="params"><span class="built_in">Object</span>... args</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> int <span class="title function_">invoke</span>(<span class="params"><span class="built_in">Object</span>... args</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è°ƒç”¨æœºåˆ¶">è°ƒç”¨æœºåˆ¶</h4>
<p>æ–¹æ³•è°ƒç”¨å¹¶ä¸ç­‰äºæ–¹æ³•æ‰§è¡Œï¼Œæ–¹æ³•è°ƒç”¨é˜¶æ®µå”¯ä¸€çš„ä»»åŠ¡å°±æ˜¯<strong>ç¡®å®šè¢«è°ƒç”¨æ–¹æ³•çš„ç‰ˆæœ¬</strong>ï¼Œä¸æ˜¯æ–¹æ³•çš„å…·ä½“è¿è¡Œè¿‡ç¨‹</p>
<p>åœ¨ JVM ä¸­ï¼Œå°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨æœ‰ä¸¤ç§æœºåˆ¶ï¼š</p>
<ul>
<li>
<p>é™æ€é“¾æ¥ï¼šå½“ä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶è¢«è£…è½½è¿› JVM å†…éƒ¨æ—¶ï¼Œå¦‚æœè¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•åœ¨ç¼–è¯‘æœŸå¯çŸ¥ï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜ï¼Œå°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºé™æ€é“¾æ¥ï¼ˆç±»åŠ è½½çš„è§£æé˜¶æ®µï¼‰</p>
</li>
<li>
<p>åŠ¨æ€é“¾æ¥ï¼šè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œåªèƒ½åœ¨ç¨‹åºè¿è¡ŒæœŸå°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œç”±äºè¿™ç§å¼•ç”¨è½¬æ¢è¿‡ç¨‹å…·å¤‡åŠ¨æ€æ€§ï¼Œå› æ­¤è¢«ç§°ä¸ºåŠ¨æ€é“¾æ¥ï¼ˆåˆå§‹åŒ–åçš„è§£æé˜¶æ®µï¼‰</p>
</li>
<li>
<p>å¯¹åº”æ–¹æ³•çš„ç»‘å®šï¼ˆåˆ†é…ï¼‰æœºåˆ¶ï¼šé™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®šï¼Œç¼–è¯‘å™¨å·²ç»åŒºåˆ†äº†é‡è½½çš„æ–¹æ³•ï¼ˆé™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®šï¼‰ï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºè™šæ‹Ÿæœºä¸­ä¸å­˜åœ¨é‡è½½</p>
</li>
</ul>
<p>éè™šæ–¹æ³•ï¼š</p>
<ul>
<li>éè™šæ–¹æ³•åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šäº†å…·ä½“çš„è°ƒç”¨ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨è¿è¡Œæ—¶æ˜¯ä¸å¯å˜çš„</li>
<li>é™æ€æ–¹æ³•ã€ç§æœ‰æ–¹æ³•ã€final æ–¹æ³•ã€å®ä¾‹æ„é€ å™¨ã€çˆ¶ç±»æ–¹æ³•éƒ½æ˜¯éè™šæ–¹æ³•</li>
<li>æ‰€æœ‰æ™®é€šæˆå‘˜æ–¹æ³•ã€å®ä¾‹æ–¹æ³•ã€è¢«é‡å†™çš„æ–¹æ³•éƒ½æ˜¯è™šæ–¹æ³•</li>
</ul>
<p>åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€ï¼š</p>
<ul>
<li>
<p>åœ¨äºå¯¹ç±»å‹çš„æ£€æŸ¥æ˜¯åœ¨ç¼–è¯‘æœŸè¿˜æ˜¯åœ¨è¿è¡ŒæœŸï¼Œæ»¡è¶³å‰è€…å°±æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œåä¹‹åˆ™æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€</p>
</li>
<li>
<p>é™æ€è¯­è¨€æ˜¯åˆ¤æ–­å˜é‡è‡ªèº«çš„ç±»å‹ä¿¡æ¯ï¼›åŠ¨æ€ç±»å‹è¯­è¨€æ˜¯åˆ¤æ–­å˜é‡å€¼çš„ç±»å‹ä¿¡æ¯ï¼Œå˜é‡æ²¡æœ‰ç±»å‹ä¿¡æ¯</p>
</li>
<li>
<p><strong>Java æ˜¯é™æ€ç±»å‹è¯­è¨€</strong>ï¼ˆå°½ç®¡ Lambda è¡¨è¾¾å¼ä¸ºå…¶å¢åŠ äº†åŠ¨æ€ç‰¹æ€§ï¼‰ï¼ŒJSï¼ŒPython æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String s <span class="operator">=</span> <span class="string">&quot;abc&quot;</span><span class="comment">;   //Java</span></span><br><span class="line"><span class="attribute">info</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span><span class="comment">;       //Python</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="è°ƒç”¨æŒ‡ä»¤">è°ƒç”¨æŒ‡ä»¤</h4>
<h5 id="äº”ç§æŒ‡ä»¤">äº”ç§æŒ‡ä»¤</h5>
<p>æ™®é€šè°ƒç”¨æŒ‡ä»¤ï¼š</p>
<ul>
<li>invokestaticï¼šè°ƒç”¨é™æ€æ–¹æ³•</li>
<li>invokespecialï¼šè°ƒç”¨ç§æœ‰æ–¹æ³•ã€æ„é€ å™¨ï¼Œå’Œçˆ¶ç±»çš„å®ä¾‹æ–¹æ³•æˆ–æ„é€ å™¨ï¼Œä»¥åŠæ‰€å®ç°æ¥å£çš„é»˜è®¤æ–¹æ³•</li>
<li>invokevirtualï¼šè°ƒç”¨æ‰€æœ‰è™šæ–¹æ³•ï¼ˆè™šæ–¹æ³•åˆ†æ´¾ï¼‰</li>
<li>invokeinterfaceï¼šè°ƒç”¨æ¥å£æ–¹æ³•</li>
</ul>
<p>åŠ¨æ€è°ƒç”¨æŒ‡ä»¤ï¼š</p>
<ul>
<li>invokedynamicï¼šåŠ¨æ€è§£æå‡ºéœ€è¦è°ƒç”¨çš„æ–¹æ³•
<ul>
<li>Java7 ä¸ºäº†å®ç°åŠ¨æ€ç±»å‹è¯­è¨€æ”¯æŒè€Œå¼•å…¥äº†è¯¥æŒ‡ä»¤ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æä¾›ç›´æ¥ç”Ÿæˆ invokedynamic æŒ‡ä»¤çš„æ–¹æ³•ï¼Œéœ€è¦å€ŸåŠ© ASM è¿™ç§åº•å±‚å­—èŠ‚ç å·¥å…·æ¥äº§ç”Ÿ invokedynamic æŒ‡ä»¤</li>
<li>Java8 çš„ lambda è¡¨è¾¾å¼çš„å‡ºç°ï¼Œinvokedynamic æŒ‡ä»¤åœ¨ Java ä¸­æ‰æœ‰äº†ç›´æ¥ç”Ÿæˆæ–¹å¼</li>
</ul>
</li>
</ul>
<p>æŒ‡ä»¤å¯¹æ¯”ï¼š</p>
<ul>
<li>æ™®é€šè°ƒç”¨æŒ‡ä»¤å›ºåŒ–åœ¨è™šæ‹Ÿæœºå†…éƒ¨ï¼Œæ–¹æ³•çš„è°ƒç”¨æ‰§è¡Œä¸å¯å¹²é¢„ï¼Œæ ¹æ®æ–¹æ³•çš„ç¬¦å·å¼•ç”¨é“¾æ¥åˆ°å…·ä½“çš„ç›®æ ‡æ–¹æ³•</li>
<li>åŠ¨æ€è°ƒç”¨æŒ‡ä»¤æ”¯æŒç”¨æˆ·ç¡®å®šæ–¹æ³•</li>
<li>invokestatic å’Œ invokespecial æŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ç§°ä¸ºéè™šæ–¹æ³•ï¼Œè™šæ‹Ÿæœºèƒ½å¤Ÿç›´æ¥è¯†åˆ«å…·ä½“çš„ç›®æ ‡æ–¹æ³•</li>
<li>invokevirtual å’Œ invokeinterface æŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ç§°ä¸ºè™šæ–¹æ³•ï¼Œè™šæ‹Ÿæœºéœ€è¦åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ ¹æ®è°ƒç”¨è€…çš„åŠ¨æ€ç±»å‹æ¥ç¡®å®šç›®æ ‡æ–¹æ³•</li>
</ul>
<p>æŒ‡ä»¤è¯´æ˜ï¼š</p>
<ul>
<li>å¦‚æœè™šæ‹Ÿæœºèƒ½å¤Ÿç¡®å®šç›®æ ‡æ–¹æ³•æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´ç›®æ ‡æ–¹æ³•è¢«æ ‡è®°ä¸º finalï¼Œé‚£ä¹ˆå¯ä»¥ä¸é€šè¿‡åŠ¨æ€ç»‘å®šï¼Œç›´æ¥ç¡®å®šç›®æ ‡æ–¹æ³•</li>
<li>æ™®é€šæˆå‘˜æ–¹æ³•æ˜¯ç”± invokevirtual è°ƒç”¨ï¼Œå±äº<strong>åŠ¨æ€ç»‘å®š</strong>ï¼Œå³æ”¯æŒå¤šæ€</li>
</ul>
<h5 id="ç¬¦å·å¼•ç”¨">ç¬¦å·å¼•ç”¨</h5>
<p>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè™šæ‹Ÿæœºå¹¶ä¸çŸ¥é“ç›®æ ‡æ–¹æ³•çš„å…·ä½“å†…å­˜åœ°å€ï¼ŒJava ç¼–è¯‘å™¨ä¼šæš‚æ—¶ç”¨ç¬¦å·å¼•ç”¨æ¥è¡¨ç¤ºè¯¥ç›®æ ‡æ–¹æ³•ï¼Œè¿™ä¸€ç¬¦å·å¼•ç”¨åŒ…æ‹¬ç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„ç±»æˆ–æ¥å£çš„åå­—ï¼Œä»¥åŠç›®æ ‡æ–¹æ³•çš„æ–¹æ³•åå’Œæ–¹æ³•æè¿°ç¬¦</p>
<p>ç¬¦å·å¼•ç”¨å­˜å‚¨åœ¨æ–¹æ³•åŒºå¸¸é‡æ± ä¸­ï¼Œæ ¹æ®ç›®æ ‡æ–¹æ³•æ˜¯å¦ä¸ºæ¥å£æ–¹æ³•ï¼Œåˆ†ä¸ºæ¥å£ç¬¦å·å¼•ç”¨å’Œéæ¥å£ç¬¦å·å¼•ç”¨ï¼š</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Constant pool:</span><br><span class="line"><span class="params">...</span></span><br><span class="line">  #16 = InterfaceMethodref #27.#29	<span class="comment">// æ¥å£</span></span><br><span class="line"><span class="params">...</span></span><br><span class="line">  #22 = Methodref          #1.#33	<span class="comment">// éæ¥å£</span></span><br><span class="line"><span class="params">...</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºéæ¥å£ç¬¦å·å¼•ç”¨ï¼Œå‡å®šè¯¥ç¬¦å·å¼•ç”¨æ‰€æŒ‡å‘çš„ç±»ä¸º Cï¼Œåˆ™ Java è™šæ‹Ÿæœºä¼šæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡ŒæŸ¥æ‰¾ï¼š</p>
<ol>
<li>åœ¨ C ä¸­æŸ¥æ‰¾ç¬¦åˆåå­—åŠæè¿°ç¬¦çš„æ–¹æ³•</li>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåœ¨ C çš„çˆ¶ç±»ä¸­ç»§ç»­æœç´¢ï¼Œç›´è‡³ Object ç±»</li>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåœ¨ C æ‰€ç›´æ¥å®ç°æˆ–é—´æ¥å®ç°çš„æ¥å£ä¸­æœç´¢ï¼Œè¿™ä¸€æ­¥æœç´¢å¾—åˆ°çš„ç›®æ ‡æ–¹æ³•å¿…é¡»æ˜¯éç§æœ‰ã€éé™æ€çš„ã€‚å¦‚æœæœ‰å¤šä¸ªç¬¦åˆæ¡ä»¶çš„ç›®æ ‡æ–¹æ³•ï¼Œåˆ™ä»»æ„è¿”å›å…¶ä¸­ä¸€ä¸ª</li>
</ol>
<p>å¯¹äºæ¥å£ç¬¦å·å¼•ç”¨ï¼Œå‡å®šè¯¥ç¬¦å·å¼•ç”¨æ‰€æŒ‡å‘çš„æ¥å£ä¸º Iï¼Œåˆ™ Java è™šæ‹Ÿæœºä¼šæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡ŒæŸ¥æ‰¾ï¼š</p>
<ol>
<li>åœ¨ I ä¸­æŸ¥æ‰¾ç¬¦åˆåå­—åŠæè¿°ç¬¦çš„æ–¹æ³•</li>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåœ¨ Object ç±»ä¸­çš„å…¬æœ‰å®ä¾‹æ–¹æ³•ä¸­æœç´¢</li>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åœ¨ I çš„è¶…æ¥å£ä¸­æœç´¢ï¼Œè¿™ä¸€æ­¥çš„æœç´¢ç»“æœçš„è¦æ±‚ä¸éæ¥å£ç¬¦å·å¼•ç”¨æ­¥éª¤ 3 çš„è¦æ±‚ä¸€è‡´</li>
</ol>
<h5 id="æ‰§è¡Œæµç¨‹-2">æ‰§è¡Œæµç¨‹</h5>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Demo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Demo</span>()</span> &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">test1</span>()</span> &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> final <span class="keyword">void</span> <span class="title">test2</span>()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span>()</span> &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test4</span>()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        Demo3_9 d = <span class="keyword">new</span> Demo3_9();</span><br><span class="line">        d.test1();</span><br><span class="line">        d.test2();</span><br><span class="line">        d.test3();</span><br><span class="line">        d.test4();</span><br><span class="line">        Demo.test4();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡ ç§ä¸åŒçš„æ–¹æ³•è°ƒç”¨å¯¹åº”çš„å­—èŠ‚ç æŒ‡ä»¤ï¼š</p>
<figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>:  new             <span class="comment">#2 // class cn/jvm/t3/bytecode/Demo</span></span><br><span class="line"><span class="attribute">3</span>:  dup</span><br><span class="line"><span class="attribute">4</span>:  invokespecial   <span class="comment">#3 // Method &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="attribute">7</span>:  astore_1</span><br><span class="line"><span class="attribute">8</span>:  aload_1</span><br><span class="line"><span class="attribute">9</span>:  invokespecial   <span class="comment">#4 // Method test1:()V</span></span><br><span class="line"><span class="attribute">12</span>: aload_1</span><br><span class="line"><span class="attribute">13</span>: invokespecial   <span class="comment">#5 // Method test2:()V</span></span><br><span class="line"><span class="attribute">16</span>: aload_1</span><br><span class="line"><span class="attribute">17</span>: invokevirtual   <span class="comment">#6 // Method test3:()V</span></span><br><span class="line"><span class="attribute">20</span>: aload_1</span><br><span class="line"><span class="attribute">21</span>: pop</span><br><span class="line"><span class="attribute">22</span>: invokestatic    <span class="comment">#7 // Method test4:()V</span></span><br><span class="line"><span class="attribute">25</span>: invokestatic    <span class="comment">#7 // Method test4:()V</span></span><br><span class="line"><span class="attribute">28</span>: return</span><br></pre></td></tr></table></figure>
<ul>
<li>invokespecial è°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ æ–¹æ³• <init>:()V</li>
<li>invokevirtual è°ƒç”¨å¯¹è±¡çš„æˆå‘˜æ–¹æ³•</li>
<li><code>d.test4()</code> æ˜¯é€šè¿‡<strong>å¯¹è±¡å¼•ç”¨</strong>è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œåœ¨è°ƒç”¨ invokestatic ä¹‹å‰æ‰§è¡Œäº† pop æŒ‡ä»¤ï¼ŒæŠŠå¯¹è±¡å¼•ç”¨ä»æ“ä½œæ•°æ ˆå¼¹æ‰
<ul>
<li>ä¸å»ºè®®ä½¿ç”¨ <code>å¯¹è±¡.é™æ€æ–¹æ³•()</code> çš„æ–¹å¼è°ƒç”¨é™æ€æ–¹æ³•ï¼Œå¤šäº† aload å’Œ pop æŒ‡ä»¤</li>
<li>æˆå‘˜æ–¹æ³•ä¸é™æ€æ–¹æ³•è°ƒç”¨çš„åŒºåˆ«æ˜¯ï¼šæ‰§è¡Œæ–¹æ³•å‰æ˜¯å¦éœ€è¦å¯¹è±¡å¼•ç”¨</li>
</ul>
</li>
</ul>
<h4 id="å¤šæ€åŸç†">å¤šæ€åŸç†</h4>
<h5 id="æ‰§è¡ŒåŸç†">æ‰§è¡ŒåŸç†</h5>
<p>Java è™šæ‹Ÿæœºä¸­å…³äºæ–¹æ³•é‡å†™çš„åˆ¤å®šåŸºäºæ–¹æ³•æè¿°ç¬¦ï¼Œå¦‚æœå­ç±»å®šä¹‰äº†ä¸çˆ¶ç±»ä¸­éç§æœ‰ã€éé™æ€æ–¹æ³•åŒåçš„æ–¹æ³•ï¼Œåªæœ‰å½“è¿™ä¸¤ä¸ªæ–¹æ³•çš„å‚æ•°ç±»å‹ä»¥åŠè¿”å›ç±»å‹ä¸€è‡´ï¼ŒJava è™šæ‹Ÿæœºæ‰ä¼šåˆ¤å®šä¸ºé‡å†™</p>
<p>ç†è§£å¤šæ€ï¼š</p>
<ul>
<li>å¤šæ€æœ‰ç¼–è¯‘æ—¶å¤šæ€å’Œè¿è¡Œæ—¶å¤šæ€ï¼Œå³é™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®š</li>
<li>å‰è€…æ˜¯é€šè¿‡æ–¹æ³•é‡è½½å®ç°ï¼Œåè€…æ˜¯é€šè¿‡é‡å†™å®ç°ï¼ˆå­ç±»è¦†ç›–çˆ¶ç±»æ–¹æ³•ï¼Œè™šæ–¹æ³•è¡¨ï¼‰</li>
<li>è™šæ–¹æ³•ï¼šè¿è¡Œæ—¶åŠ¨æ€ç»‘å®šçš„æ–¹æ³•ï¼Œå¯¹æ¯”é™æ€ç»‘å®šçš„éè™šæ–¹æ³•è°ƒç”¨æ¥è¯´ï¼Œè™šæ–¹æ³•è°ƒç”¨æ›´åŠ è€—æ—¶</li>
</ul>
<p>æ–¹æ³•é‡å†™çš„æœ¬è´¨ï¼š</p>
<ol>
<li>æ‰¾åˆ°æ“ä½œæ•°æ ˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ <strong>æ‰€æ‰§è¡Œçš„å¯¹è±¡çš„å®é™…ç±»å‹</strong>ï¼Œè®°ä½œ C</li>
<li>å¦‚æœåœ¨ç±»å‹ C ä¸­æ‰¾åˆ°ä¸æè¿°ç¬¦å’Œåç§°éƒ½ç›¸ç¬¦çš„æ–¹æ³•ï¼Œåˆ™è¿›è¡Œè®¿é—®<strong>æƒé™æ ¡éªŒ</strong>ï¼ˆç§æœ‰çš„ï¼‰ï¼Œå¦‚æœé€šè¿‡åˆ™è¿”å›è¿™ä¸ªæ–¹æ³•çš„ç›´æ¥å¼•ç”¨ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ç»“æŸï¼›å¦‚æœä¸é€šè¿‡ï¼Œåˆ™è¿”å› java.lang.IllegalAccessError å¼‚å¸¸</li>
<li>æ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŒ‰ç…§ç»§æ‰¿å…³ç³»ä»ä¸‹å¾€ä¸Šä¾æ¬¡å¯¹ C çš„å„ä¸ªçˆ¶ç±»è¿›è¡Œç¬¬äºŒæ­¥çš„æœç´¢å’ŒéªŒè¯è¿‡ç¨‹</li>
<li>å¦‚æœå§‹ç»ˆæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•ï¼Œåˆ™æŠ›å‡º java.lang.AbstractMethodError å¼‚å¸¸</li>
</ol>
<h5 id="è™šæ–¹æ³•è¡¨">è™šæ–¹æ³•è¡¨</h5>
<p>åœ¨è™šæ‹Ÿæœºå·¥ä½œè¿‡ç¨‹ä¸­ä¼šé¢‘ç¹ä½¿ç”¨åˆ°åŠ¨æ€ç»‘å®šï¼Œæ¯æ¬¡åŠ¨æ€ç»‘å®šçš„è¿‡ç¨‹ä¸­éƒ½è¦é‡æ–°åœ¨ç±»çš„å…ƒæ•°æ®ä¸­æœç´¢åˆé€‚ç›®æ ‡ï¼Œå½±å“åˆ°æ‰§è¡Œæ•ˆç‡ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJVM é‡‡å–äº†ä¸€ç§ç”¨<strong>ç©ºé—´æ¢å–æ—¶é—´</strong>çš„ç­–ç•¥æ¥å®ç°åŠ¨æ€ç»‘å®šï¼Œåœ¨æ¯ä¸ª<strong>ç±»çš„æ–¹æ³•åŒº</strong>å»ºç«‹ä¸€ä¸ªè™šæ–¹æ³•è¡¨ï¼ˆvirtual method tableï¼‰ï¼Œå®ç°ä½¿ç”¨ç´¢å¼•è¡¨æ¥ä»£æ›¿æŸ¥æ‰¾ï¼Œå¯ä»¥å¿«é€Ÿå®šä½ç›®æ ‡æ–¹æ³•</p>
<ul>
<li>invokevirtual æ‰€ä½¿ç”¨çš„è™šæ–¹æ³•è¡¨ï¼ˆvirtual method tableï¼Œvtableï¼‰ï¼Œæ‰§è¡Œæµç¨‹
<ol>
<li>å…ˆé€šè¿‡æ ˆå¸§ä¸­çš„å¯¹è±¡å¼•ç”¨æ‰¾åˆ°å¯¹è±¡ï¼Œåˆ†æå¯¹è±¡å¤´ï¼Œæ‰¾åˆ°å¯¹è±¡çš„å®é™… Class</li>
<li>Class ç»“æ„ä¸­æœ‰ vtableï¼ŒæŸ¥è¡¨å¾—åˆ°æ–¹æ³•çš„å…·ä½“åœ°å€ï¼Œæ‰§è¡Œæ–¹æ³•çš„å­—èŠ‚ç </li>
</ol>
</li>
<li>invokeinterface æ‰€ä½¿ç”¨çš„æ¥å£æ–¹æ³•è¡¨ï¼ˆinterface method tableï¼Œitableï¼‰</li>
</ul>
<p>è™šæ–¹æ³•è¡¨ä¼šåœ¨ç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µè¢«åˆ›å»ºå¹¶å¼€å§‹åˆå§‹åŒ–ï¼Œç±»çš„å˜é‡åˆå§‹å€¼å‡†å¤‡å®Œæˆä¹‹åï¼ŒJVM ä¼šæŠŠè¯¥ç±»çš„æ–¹æ³•è¡¨ä¹Ÿåˆå§‹åŒ–å®Œæ¯•</p>
<p>è™šæ–¹æ³•è¡¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<ul>
<li>å¯¹äºé™æ€ç»‘å®šçš„æ–¹æ³•è°ƒç”¨è€Œè¨€ï¼Œå®é™…å¼•ç”¨æ˜¯ä¸€ä¸ªæŒ‡å‘æ–¹æ³•çš„æŒ‡é’ˆ</li>
<li>å¯¹äºåŠ¨æ€ç»‘å®šçš„æ–¹æ³•è°ƒç”¨è€Œè¨€ï¼Œå®é™…å¼•ç”¨æ˜¯æ–¹æ³•è¡¨çš„ç´¢å¼•å€¼ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•çš„é—´æ¥åœ°å€ã€‚Java è™šæ‹Ÿæœºè·å–è°ƒç”¨è€…çš„å®é™…ç±»å‹ï¼Œå¹¶åœ¨è¯¥å®é™…ç±»å‹çš„è™šæ–¹æ³•è¡¨ä¸­ï¼Œæ ¹æ®ç´¢å¼•å€¼è·å¾—ç›®æ ‡æ–¹æ³•å†…å­˜åç§»é‡ï¼ˆæŒ‡é’ˆï¼‰</li>
</ul>
<p>ä¸ºäº†ä¼˜åŒ–å¯¹è±¡è°ƒç”¨æ–¹æ³•çš„é€Ÿåº¦ï¼Œæ–¹æ³•åŒºçš„ç±»å‹ä¿¡æ¯ä¼šå¢åŠ ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè®°å½•è¯¥ç±»æ–¹æ³•çš„æ–¹æ³•è¡¨ã€‚æ¯ä¸ªç±»ä¸­éƒ½æœ‰ä¸€ä¸ªè™šæ–¹æ³•è¡¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ æŒ‡å‘ä¸€ä¸ªå½“å‰ç±»åŠå…¶ç¥–å…ˆç±»ä¸­éç§æœ‰çš„å®ä¾‹æ–¹æ³•</p>
<p>æ–¹æ³•è¡¨æ»¡è¶³ä»¥ä¸‹çš„ç‰¹è´¨ï¼š</p>
<ul>
<li>å…¶ä¸€ï¼Œå­ç±»æ–¹æ³•è¡¨ä¸­åŒ…å«çˆ¶ç±»æ–¹æ³•è¡¨ä¸­çš„<strong>æ‰€æœ‰æ–¹æ³•</strong>ï¼Œå¹¶ä¸”åœ¨æ–¹æ³•è¡¨ä¸­çš„ç´¢å¼•å€¼ä¸çˆ¶ç±»æ–¹æ³•è¡¨ç§çš„ç´¢å¼•å€¼ç›¸åŒ</li>
<li>å…¶äºŒï¼Œ<strong>éé‡å†™çš„æ–¹æ³•æŒ‡å‘çˆ¶ç±»çš„æ–¹æ³•è¡¨é¡¹ï¼Œä¸çˆ¶ç±»å…±äº«ä¸€ä¸ªæ–¹æ³•è¡¨é¡¹ï¼Œé‡å†™çš„æ–¹æ³•æŒ‡å‘æœ¬èº«è‡ªå·±çš„å®ç°</strong>ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¤šæ€æƒ…å†µä¸‹å¯ä»¥è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€‚</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E8%99%9A%E6%96%B9%E6%B3%95%E8%A1%A8.png" alt="img"></p>
<p>Passenger ç±»çš„æ–¹æ³•è¡¨åŒ…æ‹¬ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«å¯¹åº” 0 å·å’Œ 1 å·ã€‚æ–¹æ³•è¡¨è°ƒæ¢äº† toString æ–¹æ³•å’Œ passThroughImmigration æ–¹æ³•çš„ä½ç½®ï¼Œæ˜¯å› ä¸º toString æ–¹æ³•çš„ç´¢å¼•å€¼éœ€è¦ä¸ Object ç±»ä¸­åŒåæ–¹æ³•çš„ç´¢å¼•å€¼ä¸€è‡´ï¼Œä¸ºäº†ä¿æŒç®€æ´ï¼Œè¿™é‡Œä¸è€ƒè™‘ Object ç±»ä¸­çš„å…¶ä»–æ–¹æ³•ã€‚</p>
<p>è™šæ–¹æ³•è¡¨å¯¹æ€§èƒ½çš„å½±å“ï¼š</p>
<ul>
<li>ä½¿ç”¨äº†æ–¹æ³•è¡¨çš„åŠ¨æ€ç»‘å®šä¸é™æ€ç»‘å®šç›¸æ¯”ï¼Œä»…ä»…å¤šå‡ºå‡ ä¸ªå†…å­˜è§£å¼•ç”¨æ“ä½œï¼šè®¿é—®æ ˆä¸Šçš„è°ƒç”¨è€…ã€è¯»å–è°ƒç”¨è€…çš„åŠ¨æ€ç±»å‹ã€è¯»å–è¯¥ç±»å‹çš„æ–¹æ³•è¡¨ã€è¯»å–æ–¹æ³•è¡¨ä¸­æŸä¸ªç´¢å¼•å€¼æ‰€å¯¹åº”çš„ç›®æ ‡æ–¹æ³•ï¼Œä½†æ˜¯ç›¸å¯¹äºåˆ›å»ºå¹¶åˆå§‹åŒ– Java æ ˆå¸§è¿™æ“ä½œçš„å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡</li>
<li>ä¸Šè¿°ä¼˜åŒ–çš„æ•ˆæœçœ‹ä¸Šå»ä¸é”™ï¼Œä½†å®é™…ä¸Š<strong>ä»…å­˜åœ¨äºè§£é‡Šæ‰§è¡Œ</strong>ä¸­ï¼Œæˆ–è€…å³æ—¶ç¼–è¯‘ä»£ç çš„æœ€åæƒ…å†µã€‚å› ä¸ºå³æ—¶ç¼–è¯‘è¿˜æ‹¥æœ‰å¦å¤–ä¸¤ç§æ€§èƒ½æ›´å¥½çš„ä¼˜åŒ–æ‰‹æ®µï¼šå†…è”ç¼“å­˜ï¼ˆinlining cacheï¼‰å’Œæ–¹æ³•å†…è”ï¼ˆmethod inliningï¼‰</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I&#x27;m a person.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">eat</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Boy</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I&#x27;m a boy&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">fight</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Girl</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I&#x27;m a girl&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">sing</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-%E8%99%9A%E6%96%B9%E6%B3%95%E8%A1%A8%E6%8C%87%E5%90%91.png" alt="img"></p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/kaleidoscope/p/9790766.html">https://www.cnblogs.com/kaleidoscope/p/9790766.html</a></p>
<h5 id="å†…è”ç¼“å­˜">å†…è”ç¼“å­˜</h5>
<p>å†…è”ç¼“å­˜ï¼šæ˜¯ä¸€ç§åŠ å¿«åŠ¨æ€ç»‘å®šçš„ä¼˜åŒ–æŠ€æœ¯ï¼Œèƒ½å¤Ÿç¼“å­˜è™šæ–¹æ³•è°ƒç”¨ä¸­<strong>è°ƒç”¨è€…çš„åŠ¨æ€ç±»å‹ä»¥åŠè¯¥ç±»å‹æ‰€å¯¹åº”çš„ç›®æ ‡æ–¹æ³•</strong>ã€‚åœ¨ä¹‹åçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœç¢°åˆ°å·²ç¼“å­˜çš„ç±»å‹ï¼Œä¾¿ä¼šç›´æ¥è°ƒç”¨è¯¥ç±»å‹æ‰€å¯¹åº”çš„ç›®æ ‡æ–¹æ³•ï¼›åä¹‹å†…è”ç¼“å­˜åˆ™ä¼šé€€åŒ–è‡³ä½¿ç”¨åŸºäºæ–¹æ³•è¡¨çš„åŠ¨æ€ç»‘å®š</p>
<p>å¤šæ€çš„ä¸‰ä¸ªæœ¯è¯­ï¼š</p>
<ul>
<li>å•æ€ (monomorphic)ï¼šæŒ‡çš„æ˜¯ä»…æœ‰ä¸€ç§çŠ¶æ€çš„æƒ…å†µ</li>
<li>å¤šæ€ (polymorphic)ï¼šæŒ‡çš„æ˜¯æœ‰é™æ•°é‡ç§çŠ¶æ€çš„æƒ…å†µï¼ŒäºŒæ€ï¼ˆbimorphicï¼‰æ˜¯å¤šæ€çš„å…¶ä¸­ä¸€ç§</li>
<li>è¶…å¤šæ€ (megamorphic)ï¼šæŒ‡çš„æ˜¯æ›´å¤šç§çŠ¶æ€çš„æƒ…å†µï¼Œé€šå¸¸ç”¨ä¸€ä¸ªå…·ä½“æ•°å€¼æ¥åŒºåˆ†å¤šæ€å’Œè¶…å¤šæ€ï¼Œåœ¨è¿™ä¸ªæ•°å€¼ä¹‹ä¸‹ï¼Œç§°ä¹‹ä¸ºå¤šæ€ï¼Œå¦åˆ™ç§°ä¹‹ä¸ºè¶…å¤šæ€</li>
</ul>
<p>å¯¹äºå†…è”ç¼“å­˜æ¥è¯´ï¼Œæœ‰å¯¹åº”çš„å•æ€å†…è”ç¼“å­˜ã€å¤šæ€å†…è”ç¼“å­˜ï¼š</p>
<ul>
<li>å•æ€å†…è”ç¼“å­˜ï¼šåªç¼“å­˜äº†ä¸€ç§åŠ¨æ€ç±»å‹ä»¥åŠæ‰€å¯¹åº”çš„ç›®æ ‡æ–¹æ³•ï¼Œå®ç°ç®€å•ï¼Œæ¯”è¾ƒæ‰€ç¼“å­˜çš„åŠ¨æ€ç±»å‹ï¼Œå¦‚æœå‘½ä¸­ï¼Œåˆ™ç›´æ¥è°ƒç”¨å¯¹åº”çš„ç›®æ ‡æ–¹æ³•ã€‚</li>
<li>å¤šæ€å†…è”ç¼“å­˜ï¼šç¼“å­˜äº†å¤šä¸ªåŠ¨æ€ç±»å‹åŠå…¶ç›®æ ‡æ–¹æ³•ï¼Œéœ€è¦é€ä¸ªå°†æ‰€ç¼“å­˜çš„åŠ¨æ€ç±»å‹ä¸å½“å‰åŠ¨æ€ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå‘½ä¸­ï¼Œåˆ™è°ƒç”¨å¯¹åº”çš„ç›®æ ‡æ–¹æ³•</li>
</ul>
<p>ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œ<strong>Java è™šæ‹Ÿæœºåªé‡‡ç”¨å•æ€å†…è”ç¼“å­˜</strong>ï¼Œæ²¡æœ‰å‘½ä¸­çš„å¤„ç†æ–¹æ³•ï¼š</p>
<ul>
<li>æ›¿æ¢å•æ€å†…è”ç¼“å­˜ä¸­çš„çºªå½•ï¼Œç±»ä¼¼äº CPU ä¸­çš„æ•°æ®ç¼“å­˜ï¼Œå¯¹æ•°æ®çš„å±€éƒ¨æ€§æœ‰è¦æ±‚ï¼Œå³åœ¨æ›¿æ¢å†…è”ç¼“å­˜ä¹‹åçš„ä¸€æ®µæ—¶é—´å†…ï¼Œæ–¹æ³•è°ƒç”¨çš„è°ƒç”¨è€…çš„åŠ¨æ€ç±»å‹åº”å½“ä¿æŒä¸€è‡´ï¼Œä»è€Œèƒ½å¤Ÿæœ‰æ•ˆåœ°åˆ©ç”¨å†…è”ç¼“å­˜</li>
<li>åŠ£åŒ–ä¸ºè¶…å¤šæ€çŠ¶æ€ï¼Œè¿™ä¹Ÿæ˜¯ Java è™šæ‹Ÿæœºçš„å…·ä½“å®ç°æ–¹å¼ï¼Œè¿™ç§çŠ¶æ€å®é™…ä¸Šæ”¾å¼ƒäº†ä¼˜åŒ–çš„æœºä¼šï¼Œå°†ç›´æ¥è®¿é—®æ–¹æ³•è¡¨æ¥åŠ¨æ€ç»‘å®šç›®æ ‡æ–¹æ³•ï¼Œä½†æ˜¯ä¸æ›¿æ¢å†…è”ç¼“å­˜çºªå½•ç›¸æ¯”èŠ‚çœäº†å†™ç¼“å­˜çš„é¢å¤–å¼€é”€</li>
</ul>
<p>è™½ç„¶å†…è”ç¼“å­˜é™„å¸¦å†…è”äºŒå­—ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å†…è”ç›®æ ‡æ–¹æ³•</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://time.geekbang.org/column/intro/100010301">https://time.geekbang.org/column/intro/100010301</a></p>
<h3 id="ä»£ç ä¼˜åŒ–">ä»£ç ä¼˜åŒ–</h3>
<h4 id="è¯­æ³•ç³–">è¯­æ³•ç³–</h4>
<p>è¯­æ³•ç³–ï¼šæŒ‡ Java ç¼–è¯‘å™¨æŠŠ *.java æºç ç¼–è¯‘ä¸º *.class å­—èŠ‚ç çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨ç”Ÿæˆå’Œè½¬æ¢çš„ä¸€äº›ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…</p>
<h4 id="æ„é€ å™¨-3">æ„é€ å™¨</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy1</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy1</span> &#123;</span><br><span class="line">    <span class="regexp">//</span> è¿™ä¸ªæ— å‚æ„é€ æ˜¯ç¼–è¯‘å™¨å¸®åŠ©æˆ‘ä»¬åŠ ä¸Šçš„</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Candy1</span>() &#123;</span><br><span class="line">        <span class="variable language_">super</span>(); <span class="regexp">//</span> å³è°ƒç”¨çˆ¶ç±» <span class="title class_">Object</span> çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œå³è°ƒç”¨ java/lang/<span class="title class_">Object</span>.<span class="string">&quot;</span></span><br><span class="line"><span class="string">        &lt;init&gt;&quot;</span><span class="symbol">:</span>()V</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ‹†è£…ç®±">æ‹†è£…ç®±</h4>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer x <span class="operator">=</span> <span class="number">1</span><span class="comment">;</span></span><br><span class="line">int y <span class="operator">=</span> x<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åœ¨ JDK 5 ä¹‹å‰æ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œå¿…é¡»æ”¹å†™ä¸ºä»£ç ç‰‡æ®µ2ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer x = <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>value<span class="constructor">Of(1)</span>;</span><br><span class="line"><span class="built_in">int</span> y = x.<span class="built_in">int</span><span class="constructor">Value()</span>;</span><br></pre></td></tr></table></figure>
<p>JDK5 ä»¥åç¼–è¯‘é˜¶æ®µè‡ªåŠ¨è½¬æ¢æˆä¸Šè¿°ç‰‡æ®µ</p>
<h4 id="æ³›å‹æ“¦é™¤">æ³›å‹æ“¦é™¤</h4>
<p>æ³›å‹ä¹Ÿæ˜¯åœ¨ JDK 5 å¼€å§‹åŠ å…¥çš„ç‰¹æ€§ï¼Œä½† Java åœ¨ç¼–è¯‘æ³›å‹ä»£ç åä¼šæ‰§è¡Œ<strong>æ³›å‹æ“¦é™¤</strong>çš„åŠ¨ä½œï¼Œå³æ³›å‹ä¿¡æ¯åœ¨ç¼–è¯‘ä¸ºå­—èŠ‚ç ä¹‹åå°±ä¸¢å¤±äº†ï¼Œå®é™…çš„ç±»å‹éƒ½<strong>å½“åšäº† Object ç±»å‹</strong>æ¥å¤„ç†ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="type">Integer</span>&gt; list = <span class="built_in">new</span> ArrayList&lt;&gt;();</span><br><span class="line">list.<span class="keyword">add</span>(<span class="number">10</span>); // å®é™…è°ƒç”¨çš„æ˜¯ List.<span class="keyword">add</span>(<span class="keyword">Object</span> e)</span><br><span class="line"><span class="type">Integer</span> x = list.<span class="keyword">get</span>(<span class="number">0</span>); // å®é™…è°ƒç”¨çš„æ˜¯ <span class="keyword">Object</span> obj = List.<span class="keyword">get</span>(<span class="type">int</span> <span class="keyword">index</span>);</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨çœŸæ­£ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ï¼Œè¿˜è¦é¢å¤–åšä¸€ä¸ªç±»å‹è½¬æ¢çš„æ“ä½œï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// éœ€è¦å°† <span class="keyword">Object</span> è½¬ä¸º <span class="type">Integer</span></span><br><span class="line"><span class="type">Integer</span> x = (<span class="type">Integer</span>)list.<span class="keyword">get</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‰é¢çš„ x å˜é‡ç±»å‹ä¿®æ”¹ä¸º int åŸºæœ¬ç±»å‹é‚£ä¹ˆæœ€ç»ˆç”Ÿæˆçš„å­—èŠ‚ç æ˜¯ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// éœ€è¦å°† <span class="keyword">Object</span> è½¬ä¸º <span class="type">Integer</span>, å¹¶æ‰§è¡Œæ‹†ç®±æ“ä½œ</span><br><span class="line"><span class="type">int</span> x = ((<span class="type">Integer</span>)list.<span class="keyword">get</span>(<span class="number">0</span>)).intValue();</span><br></pre></td></tr></table></figure>
<h4 id="å¯å˜å‚æ•°-2">å¯å˜å‚æ•°</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">foo</span>(<span class="params"><span class="built_in">String</span>... args</span>) &#123;</span><br><span class="line">        <span class="title class_">String</span>[] array = args; <span class="comment">// ç›´æ¥èµ‹å€¼</span></span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(array);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">    	<span class="title function_">foo</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯å˜å‚æ•° <code>String... args</code> å…¶å®æ˜¯ <code>String[] args</code> ï¼Œ Java ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸé—´å°†ä¸Šè¿°ä»£ç å˜æ¢ä¸ºï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">	<span class="title function_">foo</span>(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå¦‚æœè°ƒç”¨äº† <code>foo()</code> åˆ™ç­‰ä»·ä»£ç ä¸º <code>foo(new String[]&#123;&#125;)</code> ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œè€Œä¸ä¼šä¼ é€’ null è¿›å»</p>
<h4 id="foreach">foreach</h4>
<p>æ•°ç»„çš„å¾ªç¯ï¼š</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int[]<span class="built_in"> array </span>= &#123;1, 2, 3, 4, 5&#125;; // æ•°ç»„èµ‹åˆå€¼çš„ç®€åŒ–å†™æ³•ä¹Ÿæ˜¯è¯­æ³•ç³–</span><br><span class="line">for (int e<span class="keyword"> :</span> array) &#123;</span><br><span class="line">	System.out.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘åä¸ºå¾ªç¯å–æ•°ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">array</span>.length; ++i) &#123;</span><br><span class="line">	<span class="type">int</span> e = <span class="keyword">array</span>[i];</span><br><span class="line">	<span class="keyword">System</span>.<span class="keyword">out</span>.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é›†åˆçš„å¾ªç¯ï¼š</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span><span class="operator">&lt;</span><span class="built_in">Integer</span><span class="operator">&gt;</span> <span class="variable">list</span> <span class="operator">=</span> <span class="built_in">Arrays</span><span class="operator">.</span><span class="variable">asList</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">,</span><span class="number">2</span><span class="operator">,</span><span class="number">3</span><span class="operator">,</span><span class="number">4</span><span class="operator">,</span><span class="number">5</span><span class="punctuation">)</span><span class="operator">;</span></span><br><span class="line"><span class="variable">for</span> <span class="punctuation">(</span><span class="built_in">Integer</span> <span class="variable">i</span> <span class="operator">:</span> <span class="variable">list</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">	<span class="variable">System</span><span class="operator">.</span><span class="variable">out</span><span class="operator">.</span><span class="variable">println</span><span class="punctuation">(</span><span class="variable">i</span><span class="punctuation">)</span><span class="operator">;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘åè½¬æ¢ä¸ºå¯¹è¿­ä»£å™¨çš„è°ƒç”¨ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="type">Integer</span>&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">Iterator iter = list.iterator();</span><br><span class="line"><span class="keyword">while</span>(iter.hasNext()) &#123;</span><br><span class="line">    <span class="type">Integer</span> e = (<span class="type">Integer</span>)iter.next();</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šforeach å¾ªç¯å†™æ³•ï¼Œèƒ½å¤Ÿé…åˆæ•°ç»„ä»¥åŠæ‰€æœ‰å®ç°äº† Iterable æ¥å£çš„é›†åˆç±»ä¸€èµ·ä½¿ç”¨ï¼Œå…¶ä¸­ Iterable ç”¨æ¥è·å–é›†åˆçš„è¿­ä»£å™¨</p>
<h4 id="switch">switch</h4>
<h5 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</h5>
<p>switch å¯ä»¥ä½œç”¨äºå­—ç¬¦ä¸²å’Œæšä¸¾ç±»ï¼š</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (str) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;hello&quot;</span>: &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;h&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;world&quot;</span>: &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;w&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š<strong>switch é…åˆ String å’Œæšä¸¾ä½¿ç”¨æ—¶ï¼Œå˜é‡ä¸èƒ½ä¸º null</strong></p>
<p>ä¼šè¢«ç¼–è¯‘å™¨è½¬æ¢ä¸ºï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">byte</span> x = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">switch</span>(str.hashCode()) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">99162322</span>: <span class="comment">// hello çš„ hashCode</span></span><br><span class="line">        <span class="keyword">if</span> (str.<span class="keyword">equals</span>(<span class="string">&quot;hello&quot;</span>)) &#123;</span><br><span class="line">        	x = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">113318802</span>: <span class="comment">// world çš„ hashCode</span></span><br><span class="line">        <span class="keyword">if</span> (str.<span class="keyword">equals</span>(<span class="string">&quot;world&quot;</span>)) &#123;</span><br><span class="line">        	x = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">switch</span>(x) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    	System.<span class="keyword">out</span>.println(<span class="string">&quot;h&quot;</span>);</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    	System.<span class="keyword">out</span>.println(<span class="string">&quot;w&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>æ‰§è¡Œäº†ä¸¤é switchï¼Œç¬¬ä¸€éæ˜¯æ ¹æ®å­—ç¬¦ä¸²çš„ hashCode å’Œ equals å°†å­—ç¬¦ä¸²çš„è½¬æ¢ä¸ºç›¸åº” byte ç±»å‹ï¼Œç¬¬äºŒéæ‰æ˜¯åˆ©ç”¨ byte æ‰§è¡Œè¿›è¡Œæ¯”è¾ƒ</li>
<li>hashCode æ˜¯ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå‡å°‘å¯èƒ½çš„æ¯”è¾ƒï¼›è€Œ equals æ˜¯ä¸ºäº†é˜²æ­¢ hashCode å†²çª</li>
</ul>
<h5 id="æšä¸¾-2">æšä¸¾</h5>
<p>switch æšä¸¾çš„ä¾‹å­ï¼ŒåŸå§‹ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Sex &#123;</span><br><span class="line">	MALE, FEMALE</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Candy7</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span>(<span class="params">Sex sex</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (sex) &#123;</span><br><span class="line">            <span class="keyword">case</span> MALE:</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;ç”·&quot;</span>); </span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> FEMALE:</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;å¥³&quot;</span>); </span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘è½¬æ¢åçš„ä»£ç ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¸€ä¸ªåˆæˆç±»ï¼ˆä»… jvm ä½¿ç”¨ï¼Œå¯¹æˆ‘ä»¬ä¸å¯è§ï¼‰</span></span><br><span class="line"><span class="comment">* ç”¨æ¥æ˜ å°„æšä¸¾çš„ ordinal ä¸æ•°ç»„å…ƒç´ çš„å…³ç³»</span></span><br><span class="line"><span class="comment">* æšä¸¾çš„ ordinal è¡¨ç¤ºæšä¸¾å¯¹è±¡çš„åºå·ï¼Œä» 0 å¼€å§‹</span></span><br><span class="line"><span class="comment">* å³ MALE çš„ ordinal()=0ï¼ŒFEMALE çš„ ordinal()=1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">class</span> $MAP &#123;</span><br><span class="line">    <span class="comment">// æ•°ç»„å¤§å°å³ä¸ºæšä¸¾å…ƒç´ ä¸ªæ•°ï¼Œé‡Œé¢å­˜å‚¨ case ç”¨æ¥å¯¹æ¯”çš„æ•°å­—</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span>[] map = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">2</span>];</span><br><span class="line">    <span class="type">static</span> &#123;</span><br><span class="line">    	map[Sex.MALE.<span class="built_in">ordinal</span>()] = <span class="number">1</span>;</span><br><span class="line">    	map[Sex.FEMALE.<span class="built_in">ordinal</span>()] = <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">foo</span><span class="params">(Sex sex)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = $MAP.map[sex.<span class="built_in">ordinal</span>()];</span><br><span class="line">    <span class="keyword">switch</span> (x) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        	System.out.<span class="built_in">println</span>(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        	<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        	System.out.<span class="built_in">println</span>(<span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">        	<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æšä¸¾ç±»">æšä¸¾ç±»</h4>
<p>JDK 7 æ–°å¢äº†æšä¸¾ç±»ï¼š</p>
<figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Sex</span> </span>&#123;</span><br><span class="line">	MALE, FEMALE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘è½¬æ¢åï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Sex</span> <span class="keyword">extends</span> <span class="title">Enum</span>&lt;<span class="title">Sex</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">final</span> Sex MALE;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="keyword">final</span> Sex FEMALE;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="keyword">final</span> Sex[] <span class="variable">$VALUES</span>;</span><br><span class="line">    <span class="built_in">static</span> &#123;</span><br><span class="line">        MALE = <span class="keyword">new</span> <span class="title class_">Sex</span>(<span class="string">&quot;MALE&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        FEMALE = <span class="keyword">new</span> <span class="title class_">Sex</span>(<span class="string">&quot;FEMALE&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$VALUES</span> = <span class="keyword">new</span> <span class="title class_">Sex</span>[]&#123;MALE, FEMALE&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_ invoke__">Sex</span>(String name, <span class="keyword">int</span> ordinal) &#123;</span><br><span class="line">    	<span class="title function_ invoke__">super</span>(name, ordinal);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> Sex[] <span class="title function_ invoke__">values</span>() &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="variable">$VALUES</span>.<span class="keyword">clone</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> Sex <span class="title function_ invoke__">valueOf</span>(String name) &#123;</span><br><span class="line">    	<span class="keyword">return</span> Enum.<span class="title function_ invoke__">valueOf</span>(Sex.<span class="keyword">class</span>, name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="try-w-r">try-w-r</h4>
<p>JDK 7 å¼€å§‹æ–°å¢äº†å¯¹éœ€è¦å…³é—­çš„èµ„æºå¤„ç†çš„ç‰¹æ®Šè¯­æ³• <code>try-with-resources</code>ï¼Œæ ¼å¼ï¼š</p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">try</span>(èµ„æºå˜é‡ = åˆ›å»ºèµ„æºå¯¹è±¡)&#123;</span><br><span class="line">&#125; <span class="title function_">catch</span>( ) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­èµ„æºå¯¹è±¡éœ€è¦å®ç° <strong>AutoCloseable</strong> æ¥å£ï¼Œä¾‹å¦‚ InputStreamã€OutputStreamã€Connectionã€Statementã€ResultSet ç­‰æ¥å£éƒ½å®ç°äº† AutoCloseable ï¼Œä½¿ç”¨ try-withresourceså¯ä»¥ä¸ç”¨å†™ finally è¯­å¥å—ï¼Œç¼–è¯‘å™¨ä¼šå¸®åŠ©ç”Ÿæˆå…³é—­èµ„æºä»£ç ï¼š</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>(InputStream <span class="keyword">is</span> = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;d:\\1.txt&quot;</span>)) &#123;</span><br><span class="line">	System.<span class="keyword">out</span>.println(<span class="keyword">is</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬æ¢æˆï¼š</p>
<p><code>addSuppressed(Throwable e)</code>ï¼šæ·»åŠ è¢«å‹åˆ¶å¼‚å¸¸ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢å¼‚å¸¸ä¿¡æ¯çš„ä¸¢å¤±ï¼ˆ<strong>fianlly ä¸­å¦‚æœæŠ›å‡ºäº†å¼‚å¸¸</strong>ï¼‰</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    InputStream <span class="keyword">is</span> = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;d:\\1.txt&quot;</span>);</span><br><span class="line">    Throwable t = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    	System.<span class="keyword">out</span>.println(<span class="keyword">is</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e1) &#123;</span><br><span class="line">    	<span class="comment">// t æ˜¯æˆ‘ä»¬ä»£ç å‡ºç°çš„å¼‚å¸¸</span></span><br><span class="line">    	t = e1;</span><br><span class="line">    	<span class="keyword">throw</span> e1;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­äº†èµ„æºä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">is</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæˆ‘ä»¬ä»£ç æœ‰å¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">if</span> (t != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                	<span class="keyword">is</span>.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Throwable e2) &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœ close å‡ºç°å¼‚å¸¸ï¼Œä½œä¸ºè¢«å‹åˆ¶å¼‚å¸¸æ·»åŠ </span></span><br><span class="line">                    t.addSuppressed(e2);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæˆ‘ä»¬ä»£ç æ²¡æœ‰å¼‚å¸¸ï¼Œclose å‡ºç°çš„å¼‚å¸¸å°±æ˜¯æœ€å catch å—ä¸­çš„ e</span></span><br><span class="line">                <span class="keyword">is</span>.close();</span><br><span class="line">            &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹æ³•é‡å†™">æ–¹æ³•é‡å†™</h4>
<p>æ–¹æ³•é‡å†™æ—¶å¯¹è¿”å›å€¼åˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>çˆ¶å­ç±»çš„è¿”å›å€¼å®Œå…¨ä¸€è‡´</li>
<li>å­ç±»è¿”å›å€¼å¯ä»¥æ˜¯çˆ¶ç±»è¿”å›å€¼çš„å­ç±»</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    public <span class="type">Number</span> m() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">// å­ç±»mæ–¹æ³•çš„è¿”å›å€¼æ˜¯Integeræ˜¯çˆ¶ç±»mæ–¹æ³•è¿”å›å€¼Numberçš„å­ç±»</span></span><br><span class="line">    public <span class="type">Integer</span> m() &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå­ç±»ï¼ŒJava ç¼–è¯‘å™¨ä¼šåšå¦‚ä¸‹å¤„ç†ï¼š</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    public <span class="type">Integer</span> m() &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// æ­¤æ–¹æ³•æ‰æ˜¯çœŸæ­£é‡å†™äº†çˆ¶ç±» public Number m() æ–¹æ³•</span></span><br><span class="line">	public synthetic bridge <span class="type">Number</span> m() &#123;</span><br><span class="line">    	<span class="comment">// è°ƒç”¨ public Integer m()</span></span><br><span class="line">    	<span class="keyword">return</span> m();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æ¡¥æ¥æ–¹æ³•æ¯”è¾ƒç‰¹æ®Šï¼Œä»…å¯¹ Java è™šæ‹Ÿæœºå¯è§ï¼Œå¹¶ä¸”ä¸åŸæ¥çš„ public Integer m() æ²¡æœ‰å‘½åå†²çª</p>
<h4 id="åŒ¿åå†…éƒ¨ç±»-2">åŒ¿åå†…éƒ¨ç±»</h4>
<h5 id="æ— å‚ä¼˜åŒ–">æ— å‚ä¼˜åŒ–</h5>
<p>æºä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="title class_">Runnable</span> runnable = <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">            	<span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬åŒ–åä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¢å¤–ç”Ÿæˆçš„ç±»</span></span><br><span class="line">final <span class="keyword">class</span> <span class="title class_">Candy11$1</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="title class_">Candy11</span>$1() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">    	<span class="title class_">Runnable</span> runnable = <span class="keyword">new</span> <span class="title class_">Candy11</span>$1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¸¦å‚ä¼˜åŒ–">å¸¦å‚ä¼˜åŒ–</h5>
<p>å¼•ç”¨å±€éƒ¨å˜é‡çš„åŒ¿åå†…éƒ¨ç±»ï¼Œæºä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="keyword">final</span> <span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            	System.out.println(<span class="string">&quot;ok:&quot;</span> + x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬æ¢åä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Candy11$1</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="type">int</span> val$x;</span><br><span class="line">    Candy11$<span class="number">1</span>(<span class="type">int</span> x) &#123;</span><br><span class="line">    	<span class="built_in">this</span>.val$x = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    	System.out.println(<span class="string">&quot;ok:&quot;</span> + <span class="built_in">this</span>.val$x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Candy11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="keyword">final</span> <span class="type">int</span> x)</span> &#123;</span><br><span class="line">    	<span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Candy11$1</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å±€éƒ¨å˜é‡åœ¨åº•å±‚åˆ›å»ºä¸ºå†…éƒ¨ç±»çš„æˆå‘˜å˜é‡ï¼Œå¿…é¡»æ˜¯ final çš„åŸå› ï¼š</p>
<ul>
<li>
<p>åœ¨ Java ä¸­æ–¹æ³•è°ƒç”¨æ˜¯å€¼ä¼ é€’çš„ï¼Œåœ¨åŒ¿åå†…éƒ¨ç±»ä¸­å¯¹å˜é‡çš„æ“ä½œéƒ½æ˜¯åŸºäºåŸå˜é‡çš„å‰¯æœ¬ï¼Œä¸ä¼šå½±å“åˆ°åŸå˜é‡çš„å€¼ï¼Œæ‰€ä»¥<strong>åŸå˜é‡çš„å€¼çš„æ”¹å˜ä¹Ÿæ— æ³•åŒæ­¥åˆ°å‰¯æœ¬ä¸­</strong></p>
</li>
<li>
<p>å¤–éƒ¨å˜é‡ä¸º final æ˜¯åœ¨ç¼–è¯‘æœŸä»¥å¼ºåˆ¶æ‰‹æ®µç¡®ä¿ç”¨æˆ·ä¸ä¼šåœ¨å†…éƒ¨ç±»ä¸­åšä¿®æ”¹åŸå˜é‡å€¼çš„æ“ä½œï¼Œä¹Ÿæ˜¯<strong>é˜²æ­¢å¤–éƒ¨æ“ä½œä¿®æ”¹äº†å˜é‡è€Œå†…éƒ¨ç±»æ— æ³•éšä¹‹å˜åŒ–</strong>å‡ºç°çš„å½±å“</p>
<p>åœ¨åˆ›å»º <code>Candy11$1</code> å¯¹è±¡æ—¶ï¼Œå°† x çš„å€¼èµ‹å€¼ç»™äº† <code>Candy11$1</code> å¯¹è±¡çš„ val å±æ€§ï¼Œx ä¸åº”è¯¥å†å‘ç”Ÿå˜åŒ–äº†ï¼Œå› ä¸ºå‘ç”Ÿå˜åŒ–ï¼Œthis.val$x å±æ€§æ²¡æœ‰æœºä¼šå†è·Ÿç€å˜åŒ–</p>
</li>
</ul>
<h4 id="åå°„ä¼˜åŒ–">åå°„ä¼˜åŒ–</h4>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> Reflect1 &#123;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> foo() &#123;</span><br><span class="line">    	<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;foo...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws <span class="keyword">Exception</span> &#123;</span><br><span class="line">        <span class="keyword">Method</span> foo = Reflect1.<span class="keyword">class</span>.getMethod(&quot;foo&quot;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">16</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">System</span>.<span class="keyword">out</span>.printf(&quot;%d\t&quot;, i);</span><br><span class="line">            foo.invoke(<span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">in</span>.<span class="keyword">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>foo.invoke 0 ~ 15 æ¬¡è°ƒç”¨çš„æ˜¯ MethodAccessor çš„å®ç°ç±» <code>NativeMethodAccessorImpl.invoke0()</code>ï¼Œæœ¬åœ°æ–¹æ³•æ‰§è¡Œé€Ÿåº¦æ…¢ï¼›å½“è°ƒç”¨åˆ°ç¬¬ 16 æ¬¡æ—¶ï¼Œä¼šé‡‡ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„ç±» <code>sun.reflect.GeneratedMethodAccessor1</code> ä»£æ›¿</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public Object invoke(Object obj, Object<span class="literal">[]</span> args)throws Exception &#123;</span><br><span class="line">    <span class="comment">// inflationThreshold è†¨èƒ€é˜ˆå€¼ï¼Œé»˜è®¤ 15</span></span><br><span class="line">    <span class="keyword">if</span> (++numInvocations &gt; <span class="module-access"><span class="module"><span class="identifier">ReflectionFactory</span>.</span></span>inflation<span class="constructor">Threshold()</span><span class="operator"></span></span><br><span class="line"><span class="operator">        &amp;&amp; </span>!<span class="module-access"><span class="module"><span class="identifier">ReflectUtil</span>.</span></span>is<span class="constructor">VMAnonymousClass(<span class="params">method</span>.<span class="params">getDeclaringClass</span>()</span>)) &#123;</span><br><span class="line">        MethodAccessorImpl acc = (MethodAccessorImpl)</span><br><span class="line">            <span class="keyword">new</span> <span class="constructor">MethodAccessorGenerator()</span>.</span><br><span class="line">            generate<span class="constructor">Method(<span class="params">method</span>.<span class="params">getDeclaringClass</span>()</span>,</span><br><span class="line">                           <span class="keyword">method</span>.get<span class="constructor">Name()</span>,</span><br><span class="line">                           <span class="keyword">method</span>.get<span class="constructor">ParameterTypes()</span>,</span><br><span class="line">                           <span class="keyword">method</span>.get<span class="constructor">ReturnType()</span>,</span><br><span class="line">                           <span class="keyword">method</span>.get<span class="constructor">ExceptionTypes()</span>,</span><br><span class="line">                           <span class="keyword">method</span>.get<span class="constructor">Modifiers()</span>);</span><br><span class="line">        parent.set<span class="constructor">Delegate(<span class="params">acc</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ã€è°ƒç”¨æœ¬åœ°æ–¹æ³•å®ç°ã€‘</span></span><br><span class="line">    return invoke0(<span class="keyword">method</span>, obj, args);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> static native Object invoke0(Method m, Object obj, Object<span class="literal">[]</span> args);</span><br><span class="line">public <span class="keyword">class</span> GeneratedMethodAccessor1 extends MethodAccessorImpl &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆæŠ›éæ³•å‚æ•°å¼‚å¸¸</span></span><br><span class="line">    block4 : &#123;</span><br><span class="line">        <span class="keyword">if</span> (arrobject<span class="operator"> == </span>null<span class="operator"> || </span>arrobject.length<span class="operator"> == </span><span class="number">0</span>) break block4;</span><br><span class="line">            throw <span class="keyword">new</span> <span class="constructor">IllegalArgumentException()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// ã€å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ˜¯ç›´æ¥è°ƒç”¨æ–¹æ³•ã€‘</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Reflect1</span>.</span></span>foo<span class="literal">()</span>;</span><br><span class="line">        <span class="comment">// å› ä¸ºæ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æŸ¥çœ‹ ReflectionFactory æºç å¯çŸ¥ï¼š</p>
<ul>
<li>sun.reflect.noInflation å¯ä»¥ç”¨æ¥ç¦ç”¨è†¨èƒ€ï¼Œç›´æ¥ç”Ÿæˆ GeneratedMethodAccessor1ï¼Œä½†é¦–æ¬¡ç”Ÿæˆæ¯”è¾ƒè€—æ—¶ï¼Œå¦‚æœä»…åå°„è°ƒç”¨ä¸€æ¬¡ï¼Œä¸åˆ’ç®—</li>
<li>sun.reflect.inflationThreshold å¯ä»¥ä¿®æ”¹è†¨èƒ€é˜ˆå€¼</li>
</ul>
<h2 id="ç³»ç»Ÿä¼˜åŒ–">ç³»ç»Ÿä¼˜åŒ–</h2>
<h3 id="æ€§èƒ½è°ƒä¼˜">æ€§èƒ½è°ƒä¼˜</h3>
<h4 id="æ€§èƒ½æŒ‡æ ‡">æ€§èƒ½æŒ‡æ ‡</h4>
<p>æ€§èƒ½æŒ‡æ ‡ä¸»è¦æ˜¯ååé‡ã€å“åº”æ—¶é—´ã€QPSã€TPS ç­‰ã€å¹¶å‘ç”¨æˆ·æ•°ç­‰ï¼Œè€Œè¿™äº›æ€§èƒ½æŒ‡æ ‡åˆä¾èµ–äºç³»ç»ŸæœåŠ¡å™¨çš„èµ„æºï¼Œå¦‚ CPUã€å†…å­˜ã€ç£ç›˜ IOã€ç½‘ç»œ IO ç­‰ï¼Œå¯¹äºè¿™äº›æŒ‡æ ‡æ•°æ®çš„æ”¶é›†ï¼Œé€šå¸¸å¯ä»¥æ ¹æ®Javaæœ¬èº«çš„å·¥å…·æˆ–æŒ‡ä»¤è¿›è¡ŒæŸ¥è¯¢</p>
<p>å‡ ä¸ªé‡è¦çš„æŒ‡æ ‡ï¼š</p>
<ol>
<li>åœé¡¿æ—¶é—´ï¼ˆå“åº”æ—¶é—´ï¼‰ï¼šæäº¤è¯·æ±‚å’Œè¿”å›è¯¥è¯·æ±‚çš„å“åº”ä¹‹é—´ä½¿ç”¨çš„æ—¶é—´ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶ä¸­ STW çš„æ—¶é—´</li>
<li>ååé‡ï¼šå¯¹å•ä½æ—¶é—´å†…å®Œæˆçš„å·¥ä½œé‡ï¼ˆè¯·æ±‚ï¼‰çš„é‡åº¦ï¼ˆå¯ä»¥å¯¹æ¯” GC çš„æ€§èƒ½æŒ‡æ ‡ï¼‰</li>
<li>å¹¶å‘æ•°ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¯¹æœåŠ¡å™¨æœ‰å®é™…äº¤äº’çš„è¯·æ±‚æ•°</li>
<li>QPSï¼šQueries Per Secondï¼Œæ¯ç§’å¤„ç†çš„æŸ¥è¯¢é‡</li>
<li>TPSï¼šTransactions Per Secondï¼Œæ¯ç§’äº§ç”Ÿçš„äº‹åŠ¡æ•°</li>
<li>å†…å­˜å ç”¨ï¼šJava å †åŒºæ‰€å çš„å†…å­˜å¤§å°</li>
</ol>
<h4 id="ä¼˜åŒ–æ­¥éª¤">ä¼˜åŒ–æ­¥éª¤</h4>
<p>å¯¹äºä¸€ä¸ªç³»ç»Ÿè¦éƒ¨ç½²ä¸Šçº¿æ—¶ï¼Œåˆ™ä¸€å®šä¼šå¯¹ JVM è¿›è¡Œè°ƒæ•´ï¼Œä¸ç»è¿‡ä»»ä½•è°ƒæ•´ç›´æ¥ä¸Šçº¿ï¼Œå®¹æ˜“å‡ºç°çº¿ä¸Šç³»ç»Ÿé¢‘ç¹ FullGC é€ æˆç³»ç»Ÿå¡é¡¿ã€CPU ä½¿ç”¨é¢‘ç‡è¿‡é«˜ã€ç³»ç»Ÿæ— ååº”ç­‰é—®é¢˜</p>
<ol>
<li>
<p>æ€§èƒ½ç›‘æ§ï¼šé€šè¿‡è¿è¡Œæ—¥å¿—ã€å †æ ˆä¿¡æ¯ã€çº¿ç¨‹å¿«ç…§ç­‰ä¿¡æ¯ç›‘æ§æ˜¯å¦å‡ºç° GC é¢‘ç¹ã€OOMã€å†…å­˜æ³„æ¼ã€æ­»é”ã€å“åº”æ—¶é—´è¿‡é•¿ç­‰æƒ…å†µ</p>
</li>
<li>
<p>æ€§èƒ½åˆ†æï¼š</p>
<ul>
<li>
<p>æ‰“å° GC æ—¥å¿—ï¼Œé€šè¿‡ GCviewer æˆ–è€… <a target="_blank" rel="noopener" href="http://gceasy.io">http://gceasy.io</a> æ¥åˆ†æå¼‚å¸¸ä¿¡æ¯</p>
</li>
<li>
<p>è¿ç”¨å‘½ä»¤è¡Œå·¥å…·ã€jstackã€jmapã€jinfo ç­‰</p>
</li>
<li>
<p>dump å‡ºå †æ–‡ä»¶ï¼Œä½¿ç”¨å†…å­˜åˆ†æå·¥å…·åˆ†ææ–‡ä»¶</p>
</li>
<li>
<p>ä½¿ç”¨é˜¿é‡Œ Arthasã€jconsoleã€JVisualVM æ¥<strong>å®æ—¶æŸ¥çœ‹ JVM çŠ¶æ€</strong></p>
</li>
<li>
<p>jstack æŸ¥çœ‹å †æ ˆä¿¡æ¯</p>
</li>
</ul>
</li>
<li>
<p>æ€§èƒ½è°ƒä¼˜ï¼š</p>
<ul>
<li>
<p>é€‚å½“å¢åŠ å†…å­˜ï¼Œæ ¹æ®ä¸šåŠ¡èƒŒæ™¯é€‰æ‹©åƒåœ¾å›æ”¶å™¨</p>
</li>
<li>
<p>ä¼˜åŒ–ä»£ç ï¼Œæ§åˆ¶å†…å­˜ä½¿ç”¨</p>
</li>
<li>
<p>å¢åŠ æœºå™¨ï¼Œåˆ†æ•£èŠ‚ç‚¹å‹åŠ›</p>
</li>
<li>
<p>åˆç†è®¾ç½®çº¿ç¨‹æ± çº¿ç¨‹æ•°é‡</p>
</li>
<li>
<p>ä½¿ç”¨ä¸­é—´ä»¶æé«˜ç¨‹åºæ•ˆç‡ï¼Œæ¯”å¦‚ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰</p>
</li>
</ul>
</li>
</ol>
<h4 id="å‚æ•°è°ƒä¼˜">å‚æ•°è°ƒä¼˜</h4>
<p>å¯¹äº JVM è°ƒä¼˜ï¼Œä¸»è¦å°±æ˜¯è°ƒæ•´å¹´è½»ä»£ã€è€å¹´ä»£ã€å…ƒç©ºé—´çš„å†…å­˜ç©ºé—´å¤§å°åŠä½¿ç”¨çš„åƒåœ¾å›æ”¶å™¨ç±»å‹</p>
<ul>
<li>
<p>è®¾ç½®å †çš„åˆå§‹å¤§å°å’Œæœ€å¤§å¤§å°ï¼Œä¸ºäº†é˜²æ­¢åƒåœ¾æ”¶é›†å™¨åœ¨åˆå§‹å¤§å°ã€æœ€å¤§å¤§å°ä¹‹é—´æ”¶ç¼©å †è€Œäº§ç”Ÿé¢å¤–çš„æ—¶é—´ï¼Œé€šå¸¸æŠŠæœ€å¤§ã€åˆå§‹å¤§å°è®¾ç½®ä¸ºç›¸åŒçš„å€¼</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-Xmsï¼šè®¾ç½®å †çš„åˆå§‹åŒ–å¤§å°</span></span><br><span class="line"><span class="deletion">-Xmxï¼šè®¾ç½®å †çš„æœ€å¤§å¤§å°</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è®¾ç½®å¹´è½»ä»£ä¸­ Eden åŒºå’Œä¸¤ä¸ª Survivor åŒºçš„å¤§å°æ¯”ä¾‹ã€‚è¯¥å€¼å¦‚æœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤æ¯”ä¾‹ä¸º 8:1:1ã€‚Java å®˜æ–¹é€šè¿‡å¢å¤§ Eden åŒºçš„å¤§å°ï¼Œæ¥å‡å°‘ YGC å‘ç”Ÿçš„æ¬¡æ•°ï¼Œè™½ç„¶æ¬¡æ•°å‡å°‘äº†ï¼Œä½† Eden åŒºæ»¡çš„æ—¶å€™ï¼Œç”±äºå ç”¨çš„ç©ºé—´è¾ƒå¤§ï¼Œå¯¼è‡´é‡Šæ”¾ç¼“æ…¢ï¼Œæ­¤æ—¶ STW çš„æ—¶é—´è¾ƒé•¿ï¼Œå› æ­¤éœ€è¦æŒ‰ç…§ç¨‹åºæƒ…å†µå»è°ƒä¼˜</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-XX:SurvivorRatio</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¹´è½»ä»£å’Œè€å¹´ä»£é»˜è®¤æ¯”ä¾‹ä¸º 1:2ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´äºŒè€…ç©ºé—´å¤§å°æ¯”ç‡æ¥è®¾ç½®ä¸¤è€…çš„å¤§å°ã€‚</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-XX:newSize   è®¾ç½®å¹´è½»ä»£çš„åˆå§‹å¤§å°</span></span><br><span class="line"><span class="deletion">-XX:MaxNewSize   è®¾ç½®å¹´è½»ä»£çš„æœ€å¤§å¤§å°ï¼Œ  åˆå§‹å¤§å°å’Œæœ€å¤§å¤§å°ä¸¤ä¸ªå€¼é€šå¸¸ç›¸åŒ</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>çº¿ç¨‹å †æ ˆçš„è®¾ç½®ï¼š<strong>æ¯ä¸ªçº¿ç¨‹é»˜è®¤ä¼šå¼€å¯ 1M çš„å †æ ˆ</strong>ï¼Œç”¨äºå­˜æ”¾æ ˆå¸§ã€è°ƒç”¨å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰ï¼Œä½†ä¸€èˆ¬ 256K å°±å¤Ÿç”¨ï¼Œé€šå¸¸å‡å°‘æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆï¼Œå¯ä»¥äº§ç”Ÿæ›´å¤šçš„çº¿ç¨‹ï¼Œä½†è¿™å®é™…ä¸Šè¿˜å—é™äºæ“ä½œç³»ç»Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Xss   å¯¹æ¯ä¸ªçº¿ç¨‹stackå¤§å°çš„è°ƒæ•´,-Xss128k</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸€èˆ¬ä¸€å¤©è¶…è¿‡ä¸€æ¬¡ FullGC å°±æ˜¯æœ‰é—®é¢˜ï¼Œé¦–å…ˆé€šè¿‡å·¥å…·æŸ¥çœ‹æ˜¯å¦å‡ºç°å†…å­˜æ³„éœ²ï¼Œå¦‚æœå‡ºç°å†…å­˜æ³„éœ²åˆ™è°ƒæ•´ä»£ç ï¼Œæ²¡æœ‰çš„è¯åˆ™è°ƒæ•´ JVM å‚æ•°</p>
</li>
<li>
<p>ç³»ç»Ÿ CPU æŒç»­é£™é«˜çš„è¯ï¼Œé¦–å…ˆå…ˆæ’æŸ¥ä»£ç é—®é¢˜ï¼Œå¦‚æœä»£ç æ²¡é—®é¢˜ï¼Œåˆ™å’¨è¯¢è¿ç»´æˆ–è€…äº‘æœåŠ¡å™¨ä¾›åº”å•†ï¼Œé€šå¸¸æœåŠ¡å™¨é‡å¯æˆ–è€…æœåŠ¡å™¨è¿ç§»å³å¯è§£å†³</p>
</li>
<li>
<p>å¦‚æœæ•°æ®æŸ¥è¯¢æ€§èƒ½å¾ˆä½ä¸‹çš„è¯ï¼Œå¦‚æœç³»ç»Ÿå¹¶å‘é‡å¹¶æ²¡æœ‰å¤šå°‘ï¼Œåˆ™åº”æ›´åŠ å…³æ³¨æ•°æ®åº“çš„ç›¸å…³é—®é¢˜</p>
</li>
<li>
<p>å¦‚æœæœåŠ¡å™¨é…ç½®è¿˜ä¸é”™ï¼ŒJDK8 å¼€å§‹å°½é‡ä½¿ç”¨ G1 æˆ–è€…æ–°ç”Ÿä»£å’Œè€å¹´ä»£ç»„åˆä½¿ç”¨å¹¶è¡Œåƒåœ¾å›æ”¶å™¨</p>
</li>
</ul>
<h3 id="å‘½ä»¤è¡Œç¯‡">å‘½ä»¤è¡Œç¯‡</h3>
<h4 id="jps">jps</h4>
<p>jpsï¼ˆJava Process Statuï¼‰ï¼šæ˜¾ç¤ºæŒ‡å®šç³»ç»Ÿå†…æ‰€æœ‰çš„ HotSpot è™šæ‹Ÿæœºè¿›ç¨‹ï¼ˆæŸ¥çœ‹è™šæ‹Ÿæœºè¿›ç¨‹ä¿¡æ¯ï¼‰ï¼Œå¯ç”¨äºæŸ¥è¯¢æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œè¿›ç¨‹çš„æœ¬åœ°è™šæ‹Ÿæœº ID ä¸æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹ ID æ˜¯ä¸€è‡´çš„ï¼Œæ˜¯å”¯ä¸€çš„</p>
<p>ä½¿ç”¨è¯­æ³•ï¼š<code>jps [options] [hostid]</code></p>
<p>options å‚æ•°ï¼š</p>
<ul>
<li>-qï¼šä»…ä»…æ˜¾ç¤º LVMIDï¼ˆlocal virtual machine idï¼‰ï¼Œå³æœ¬åœ°è™šæ‹Ÿæœºå”¯ä¸€ idï¼Œä¸æ˜¾ç¤ºä¸»ç±»çš„åç§°ç­‰</li>
<li>-lï¼šè¾“å‡ºåº”ç”¨ç¨‹åºä¸»ç±»çš„å…¨ç±»åæˆ–å¦‚æœè¿›ç¨‹æ‰§è¡Œçš„æ˜¯ jar åŒ…ï¼Œåˆ™è¾“å‡º jar å®Œæ•´è·¯å¾„</li>
<li>-mï¼šè¾“å‡ºè™šæ‹Ÿæœºè¿›ç¨‹å¯åŠ¨æ—¶ä¼ é€’ç»™ä¸»ç±» main()çš„å‚æ•°</li>
<li>-vï¼šåˆ—å‡ºè™šæ‹Ÿæœºè¿›ç¨‹å¯åŠ¨æ—¶çš„JVMå‚æ•°ï¼Œæ¯”å¦‚ -Xms20m -Xmx50mæ˜¯å¯åŠ¨ç¨‹åºæŒ‡å®šçš„ jvm å‚æ•°</li>
</ul>
<p>ostid å‚æ•°ï¼šRMIæ³¨å†Œè¡¨ä¸­æ³¨å†Œçš„ä¸»æœºåï¼Œå¦‚æœæƒ³è¦è¿œç¨‹ç›‘æ§ä¸»æœºä¸Šçš„ java ç¨‹åºï¼Œéœ€è¦å®‰è£… jstatd</p>
<h4 id="jstat">jstat</h4>
<p>jstatï¼ˆJVM Statistics Monitoring Toolï¼‰ï¼šç”¨äºç›‘è§† JVM å„ç§è¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ˜¾ç¤ºæœ¬åœ°æˆ–è€…è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»è£…è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€JITç¼–è¯‘ç­‰è¿è¡Œæ•°æ®ï¼Œåœ¨æ²¡æœ‰ GUI çš„å›¾å½¢ç•Œé¢ï¼Œåªæä¾›äº†çº¯æ–‡æœ¬æ§åˆ¶å°ç¯å¢ƒçš„æœåŠ¡å™¨ä¸Šï¼Œå®ƒæ˜¯è¿è¡ŒæœŸå®šä½è™šæ‹Ÿæœºæ€§èƒ½é—®é¢˜çš„é¦–é€‰å·¥å…·ï¼Œå¸¸ç”¨äºæ£€æµ‹åƒåœ¾å›æ”¶é—®é¢˜ä»¥åŠå†…å­˜æ³„æ¼é—®é¢˜</p>
<p>ä½¿ç”¨è¯­æ³•ï¼š<code>jstat - [-t] [-h]  [ []]</code></p>
<p>æŸ¥çœ‹å‘½ä»¤ç›¸å…³å‚æ•°ï¼šjstat-h æˆ– jstat-help</p>
<ul>
<li>
<p>vmid æ˜¯è¿›ç¨‹ id å·</p>
</li>
<li>
<p>option å‚æ•°ï¼š</p>
<p>ç±»è£…è½½ç›¸å…³ï¼š</p>
<ul>
<li>-classï¼šæ˜¾ç¤º ClassLoader çš„ç›¸å…³ä¿¡æ¯ï¼Œç±»çš„è£…è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´ã€ç±»è£…è½½æ‰€æ¶ˆè€—çš„æ—¶é—´ç­‰</li>
</ul>
<p>åƒåœ¾å›æ”¶ç›¸å…³ï¼š</p>
<ul>
<li>-gcï¼šæ˜¾ç¤ºä¸GCç›¸å…³çš„å †ä¿¡æ¯ï¼Œå¹´è½»ä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ç­‰çš„å®¹é‡ã€å·²ç”¨ç©ºé—´ã€GCæ—¶é—´åˆè®¡ç­‰ä¿¡æ¯</li>
<li>-gccapacityï¼šæ˜¾ç¤ºå†…å®¹ä¸ -gc åŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨ Java å †å„ä¸ªåŒºåŸŸä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</li>
<li>-gcutilï¼šæ˜¾ç¤ºå†…å®¹ä¸ -gc åŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨å·²ä½¿ç”¨ç©ºé—´å æ€»ç©ºé—´çš„ç™¾åˆ†æ¯”</li>
<li>-gccauseï¼šä¸ -gcutil åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯ä¼šé¢å¤–è¾“å‡ºå¯¼è‡´æœ€åä¸€æ¬¡æˆ–å½“å‰æ­£åœ¨å‘ç”Ÿçš„ GC äº§ç”Ÿçš„åŸå› </li>
<li>-gcnewï¼šæ˜¾ç¤ºæ–°ç”Ÿä»£ GC çŠ¶å†µ</li>
<li>-gcnewcapacityï¼šæ˜¾ç¤ºå†…å®¹ä¸ -gcnew åŸºæœ¬ç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</li>
<li>-geoldï¼šæ˜¾ç¤ºè€å¹´ä»£ GC çŠ¶å†µ</li>
<li>-gcoldcapacityï¼šæ˜¾ç¤ºå†…å®¹ä¸ -gcold åŸºæœ¬ç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</li>
<li>-gcpermcapacityï¼šæ˜¾ç¤ºæ°¸ä¹…ä»£ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</li>
</ul>
<p>JIT ç›¸å…³ï¼š</p>
<ul>
<li>-compilerï¼šæ˜¾ç¤º JIT ç¼–è¯‘å™¨ç¼–è¯‘è¿‡çš„æ–¹æ³•ã€è€—æ—¶ç­‰ä¿¡æ¯</li>
<li>-printcompilationï¼šè¾“å‡ºå·²ç»è¢« JIT ç¼–è¯‘çš„æ–¹æ³•</li>
</ul>
</li>
</ul>
<h4 id="jinfo">jinfo</h4>
<p>jinfoï¼ˆConfiguration Info for Javaï¼‰ï¼šæŸ¥çœ‹è™šæ‹Ÿæœºé…ç½®å‚æ•°ä¿¡æ¯ï¼Œä¹Ÿå¯ç”¨äºè°ƒæ•´è™šæ‹Ÿæœºçš„é…ç½®å‚æ•°ï¼Œå¼€å‘äººå‘˜å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ° Java è™šæ‹Ÿæœºå‚æ•°çš„å½“å‰å€¼</p>
<p>ä½¿ç”¨è¯­æ³•ï¼š<code>jinfo [options] pid</code></p>
<p>options å‚æ•°ï¼š</p>
<ul>
<li>no optionï¼šè¾“å‡ºå…¨éƒ¨çš„å‚æ•°å’Œç³»ç»Ÿå±æ€§</li>
<li>-flag nameï¼šè¾“å‡ºå¯¹åº”åç§°çš„å‚æ•°</li>
<li>-flag [Â±]nameï¼šå¼€å¯æˆ–è€…å…³é—­å¯¹åº”åç§°çš„å‚æ•° åªæœ‰è¢«æ ‡è®°ä¸ºmanageableçš„å‚æ•°æ‰å¯ä»¥è¢«åŠ¨æ€ä¿®æ”¹</li>
<li>-flag name=valueï¼šè®¾å®šå¯¹åº”åç§°çš„å‚æ•°</li>
<li>-flagsï¼šè¾“å‡ºå…¨éƒ¨çš„å‚æ•°</li>
<li>-syspropsï¼šè¾“å‡ºç³»ç»Ÿå±æ€§</li>
</ul>
<h4 id="jmap">jmap</h4>
<p>jmapï¼ˆJVM Memory Mapï¼‰ï¼šè·å– dump æ–‡ä»¶ï¼Œè¿˜å¯ä»¥è·å–ç›®æ ‡ Java è¿›ç¨‹çš„å†…å­˜ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬ Java å †å„åŒºåŸŸçš„ä½¿ç”¨æƒ…å†µã€å †ä¸­å¯¹è±¡çš„ç»Ÿè®¡ä¿¡æ¯ã€ç±»åŠ è½½ä¿¡æ¯ç­‰</p>
<p>ä½¿ç”¨è¯­æ³•ï¼š</p>
<ul>
<li><code>jmap [options] </code></li>
<li><code>jmap [options] </code></li>
<li><code>jmap [options] [server_id@] </code></li>
</ul>
<p>option å‚æ•°ï¼š</p>
<ul>
<li>-dumpï¼šç”Ÿæˆ dump æ–‡ä»¶ï¼ˆJavaå †è½¬å‚¨å¿«ç…§ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ï¼Œ-dump:live åªä¿å­˜å †ä¸­çš„å­˜æ´»å¯¹è±¡</li>
<li>-heapï¼šè¾“å‡ºæ•´ä¸ªå †ç©ºé—´çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ GC çš„ä½¿ç”¨ã€å †é…ç½®ä¿¡æ¯ï¼Œä»¥åŠå†…å­˜çš„ä½¿ç”¨ä¿¡æ¯ç­‰</li>
<li>-histoï¼šè¾“å‡ºå †ç©ºé—´ä¸­å¯¹è±¡çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»ã€å®ä¾‹æ•°é‡å’Œåˆè®¡å®¹é‡ï¼Œ-histo:live åªç»Ÿè®¡å †ä¸­çš„å­˜æ´»å¯¹è±¡</li>
<li>-J <flag>ï¼šä¼ é€’å‚æ•°ç»™ jmap å¯åŠ¨çš„ jvm</li>
<li>-finalizerinfoï¼šæ˜¾ç¤ºåœ¨ F-Queue ä¸­ç­‰å¾… Finalizer çº¿ç¨‹æ‰§è¡Œ finalize æ–¹æ³•çš„å¯¹è±¡ï¼Œä»… linux/solaris å¹³å°æœ‰æ•ˆ</li>
<li>-permstatï¼šä»¥ ClassLoader ä¸ºç»Ÿè®¡å£å¾„è¾“å‡ºæ°¸ä¹…ä»£çš„å†…å­˜çŠ¶æ€ä¿¡æ¯ï¼Œä»… linux/solaris å¹³å°æœ‰æ•ˆ</li>
<li>-Fï¼šå½“è™šæ‹Ÿæœºè¿›ç¨‹å¯¹ -dump é€‰é¡¹æ²¡æœ‰ä»»ä½•å“åº”æ—¶ï¼Œå¼ºåˆ¶æ‰§è¡Œç”Ÿæˆ dump æ–‡ä»¶ï¼Œä»… linux/solaris å¹³å°æœ‰æ•ˆ</li>
</ul>
<h4 id="jhat">jhat</h4>
<p>jhatï¼ˆJVM Heap Analysis Toolï¼‰ï¼šSun JDK æä¾›çš„ jhat å‘½ä»¤ä¸ jmap å‘½ä»¤æ­é…ä½¿ç”¨ï¼Œç”¨äº<strong>åˆ†æ jmap ç”Ÿæˆçš„ heap dump æ–‡ä»¶</strong>ï¼ˆå †è½¬å‚¨å¿«ç…§ï¼‰ï¼Œjhat å†…ç½®äº†ä¸€ä¸ªå¾®å‹çš„ HTTP/HTML æœåŠ¡å™¨ï¼Œç”Ÿæˆ dump æ–‡ä»¶çš„åˆ†æç»“æœåï¼Œç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹åˆ†æç»“æœ</p>
<p>ä½¿ç”¨è¯­æ³•ï¼š<code>jhat  </code></p>
<p>options å‚æ•°ï¼š</p>
<ul>
<li>-stack falseï½œtrueï¼šå…³é—­ï½œæ‰“å¼€å¯¹è±¡åˆ†é…è°ƒç”¨æ ˆè·Ÿè¸ª</li>
<li>-refs falseï½œtrueï¼šå…³é—­ï½œæ‰“å¼€å¯¹è±¡å¼•ç”¨è·Ÿè¸ª</li>
<li>-port port-numberï¼šè®¾ç½® jhat HTTP Server çš„ç«¯å£å·ï¼Œé»˜è®¤ 7000</li>
<li>-exclude exclude-fileï¼šæ‰§è¡Œå¯¹è±¡æŸ¥è¯¢æ—¶éœ€è¦æ’é™¤çš„æ•°æ®æˆå‘˜</li>
<li>-baseline exclude-fileï¼šæŒ‡å®šä¸€ä¸ªåŸºå‡†å †è½¬å‚¨</li>
<li>-debug intï¼šè®¾ç½® debug çº§åˆ«</li>
<li>-versionï¼šå¯åŠ¨åæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å°±é€€å‡º</li>
<li>-J <flag>ï¼šä¼ å…¥å¯åŠ¨å‚æ•°ï¼Œæ¯”å¦‚ -J-Xmx512m</li>
</ul>
<p>è¯´æ˜ï¼šjhat å‘½ä»¤åœ¨ JDK9ã€JDK10 ä¸­å·²ç»è¢«åˆ é™¤ï¼Œå®˜æ–¹å»ºè®®ç”¨ VisualVM ä»£æ›¿</p>
<h4 id="jstack">jstack</h4>
<p>jstackï¼ˆJVM Stack Traceï¼‰ï¼šç”¨äºç”Ÿæˆè™šæ‹ŸæœºæŒ‡å®šè¿›ç¨‹å½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ï¼ˆè™šæ‹Ÿæœºå †æ ˆè·Ÿè¸ªï¼‰ï¼Œçº¿ç¨‹å¿«ç…§å°±æ˜¯å½“å‰è™šæ‹Ÿæœºå†…æŒ‡å®šè¿›ç¨‹çš„æ¯ä¸€æ¡çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆçš„é›†åˆ</p>
<p>çº¿ç¨‹å¿«ç…§çš„ä½œç”¨ï¼šå¯ç”¨äºå®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´ç­‰å¾…ç­‰é—®é¢˜ï¼Œç”¨ jstack æ˜¾ç¤ºå„ä¸ªçº¿ç¨‹è°ƒç”¨çš„å †æ ˆæƒ…å†µ</p>
<p>ä½¿ç”¨è¯­æ³•ï¼š<code>jstack [options] pid</code></p>
<p>options å‚æ•°ï¼š</p>
<ul>
<li>-Fï¼šå½“æ­£å¸¸è¾“å‡ºçš„è¯·æ±‚ä¸è¢«å“åº”æ—¶ï¼Œå¼ºåˆ¶è¾“å‡ºçº¿ç¨‹å †æ ˆ</li>
<li>-lï¼šé™¤å †æ ˆå¤–ï¼Œæ˜¾ç¤ºå…³äºé”çš„é™„åŠ ä¿¡æ¯</li>
<li>-mï¼šå¦‚æœè°ƒç”¨æœ¬åœ°æ–¹æ³•çš„è¯ï¼Œå¯ä»¥æ˜¾ç¤º C/C++ çš„å †æ ˆ</li>
</ul>
<p>åœ¨ thread dump ä¸­çš„å‡ ç§çŠ¶æ€ï¼š</p>
<ul>
<li>æ­»é”ï¼šDeadlock</li>
<li>ç­‰å¾…èµ„æºï¼šWaiting on condition</li>
<li>ç­‰å¾…è·å–ç›‘è§†å™¨ï¼šWaiting on monitor entry</li>
<li>é˜»å¡ï¼šBlocked</li>
<li>æ‰§è¡Œä¸­ï¼šRunnable</li>
<li>æš‚åœï¼šSuspended</li>
<li>å¯¹è±¡ç­‰å¾…ä¸­ï¼šObject.wait() æˆ– TIMEDï¼¿WAITING</li>
<li>åœæ­¢ï¼šParked</li>
</ul>
<h4 id="jcmd">jcmd</h4>
<p>jcmd æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥å®ç°å‰é¢é™¤äº† jstat ä¹‹å¤–æ‰€æœ‰å‘½ä»¤çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ dumpã€å†…å­˜ä½¿ç”¨ã€æŸ¥çœ‹ Java è¿›ç¨‹ã€å¯¼å‡ºçº¿ç¨‹ä¿¡æ¯ã€æ‰§è¡Œ GCã€JVM è¿è¡Œæ—¶é—´ç­‰</p>
<p>jcmd -lï¼šåˆ—å‡ºæ‰€æœ‰çš„JVMè¿›ç¨‹</p>
<p>jcmd è¿›ç¨‹å· helpï¼šé’ˆå¯¹æŒ‡å®šçš„è¿›ç¨‹ï¼Œåˆ—å‡ºæ”¯æŒçš„æ‰€æœ‰å…·ä½“å‘½ä»¤</p>
<ul>
<li>
<p>Thread.printï¼šå¯ä»¥æ›¿æ¢ jstack æŒ‡ä»¤</p>
</li>
<li>
<p>GC.class_histogramï¼šå¯ä»¥æ›¿æ¢ jmap ä¸­çš„ -histo æ“ä½œ</p>
</li>
<li>
<p>GC.heap_dumpï¼šå¯ä»¥æ›¿æ¢ jmap ä¸­çš„ -dump æ“ä½œ</p>
</li>
<li>
<p>GC.runï¼šå¯ä»¥æŸ¥çœ‹GCçš„æ‰§è¡Œæƒ…å†µ</p>
</li>
<li>
<p>VM.uptimeï¼šå¯ä»¥æŸ¥çœ‹ç¨‹åºçš„æ€»æ‰§è¡Œæ—¶é—´ï¼Œå¯ä»¥æ›¿æ¢ jstat æŒ‡ä»¤ä¸­çš„ -t  æ“ä½œ</p>
</li>
<li>
<p>VM.system_propertiesï¼šå¯ä»¥æ›¿æ¢ jinfo -sysprops è¿›ç¨‹ id</p>
</li>
<li>
<p>VM.flagsï¼šå¯ä»¥è·å– JVM çš„é…ç½®å‚æ•°ä¿¡æ¯</p>
</li>
</ul>
<h4 id="jstatd">jstatd</h4>
<p>jstatd æ˜¯ä¸€ä¸ª RMI æœåŠ¡ç«¯ç¨‹åºï¼Œç›¸å½“äºä»£ç†æœåŠ¡å™¨ï¼Œå»ºç«‹æœ¬åœ°è®¡ç®—æœºä¸è¿œç¨‹ç›‘æ§å·¥å…·çš„é€šä¿¡ï¼Œjstatd æœåŠ¡å™¨å°†æœ¬æœºçš„ Java åº”ç”¨ç¨‹åºä¿¡æ¯ä¼ é€’åˆ°è¿œç¨‹è®¡ç®—æœº</p>
<p>è¿œç¨‹ä¸»æœºä¿¡æ¯æ”¶é›†ï¼Œå‰é¢çš„æŒ‡ä»¤åªæ¶‰åŠåˆ°ç›‘æ§æœ¬æœºçš„ Java åº”ç”¨ç¨‹åºï¼Œè€Œåœ¨è¿™äº›å·¥å…·ä¸­ï¼Œä¸€äº›ç›‘æ§å·¥å…·ä¹Ÿæ”¯æŒå¯¹è¿œç¨‹è®¡ç®—æœºçš„ç›‘æ§ï¼ˆå¦‚ jpsã€jstatï¼‰ï¼Œä¸ºäº†å¯ç”¨è¿œç¨‹ç›‘æ§ï¼Œåˆ™éœ€è¦é…åˆä½¿ç”¨ jstatd å·¥å…·ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/JVM-jstatd%E5%9B%BE%E8%A7%A3.png" alt="img"></p>
<h3 id="GUIå·¥å…·">GUIå·¥å…·</h3>
<p>å·¥å…·çš„ä½¿ç”¨æ­¤å¤„ä¸å†å¤šè¨€ï¼Œæ¨èä¸€ä¸ªå†™çš„éå¸¸å¥½çš„æ–‡ç« ï¼ŒJVM è°ƒä¼˜éƒ¨åˆ†çš„ç¬”è®°å…¨éƒ¨å‚è€ƒæ­¤æ–‡ç« ç¼–å†™</p>
<p>è§†é¢‘é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PJ411n7xZ?p=304">https://www.bilibili.com/video/BV1PJ411n7xZ?p=304</a></p>
<p>æ–‡ç« é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://www.yuque.com/u21195183/jvm/lv1zot">https://www.yuque.com/u21195183/jvm/lv1zot</a></p>
<h3 id="è¿è¡Œå‚æ•°">è¿è¡Œå‚æ•°</h3>
<h4 id="å‚æ•°é€‰é¡¹">å‚æ•°é€‰é¡¹</h4>
<p>æ·»åŠ  JVM å‚æ•°é€‰é¡¹ï¼šè¿›å…¥ Run/Debug Configurations â†’ VM options è®¾ç½®å‚æ•°</p>
<ul>
<li>
<p>æ ‡å‡†å‚æ•°é€‰é¡¹ï¼š<code>java [-options] class [args...]</code> æˆ– <code>java [-options] -jar jarfile [args...]</code></p>
<p>å‘½ä»¤ï¼š<code>-? -help</code> å¯ä»¥è¾“å‡ºæ­¤å‘½ä»¤çš„ç›¸å…³é€‰é¡¹</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Seazean&gt;<span class="keyword">java </span>-version</span><br><span class="line"><span class="keyword">java </span>version <span class="string">&quot;1.8.0_221&quot;</span></span><br><span class="line"><span class="keyword">Java(TM) </span>SE Runtime Environment (<span class="keyword">build </span><span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_221-<span class="keyword">b11)</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">Java </span>HotSpot(TM) <span class="number">64</span>-<span class="keyword">Bit </span>Server VM (<span class="keyword">build </span><span class="number">25</span>.<span class="number">221</span>-<span class="keyword">b11, </span>mixed mode)</span><br><span class="line"><span class="comment"># mixed mode å­—æ ·ï¼Œä»£è¡¨å½“å‰ç³»ç»Ÿä½¿ç”¨çš„æ˜¯æ··åˆæ¨¡å¼</span></span><br></pre></td></tr></table></figure>
<p>Hotspot JVM æœ‰ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ Server å’Œ Clientï¼Œåˆ†åˆ«é€šè¿‡ -server å’Œ- client è®¾ç½®æ¨¡å¼ï¼š</p>
<ul>
<li>32 ä½ç³»ç»Ÿä¸Šï¼Œé»˜è®¤ä½¿ç”¨ Client ç±»å‹çš„ JVMï¼Œè¦ä½¿ç”¨ Server æ¨¡å¼ï¼Œæœºå™¨é…ç½®è‡³å°‘æœ‰ 2 ä¸ªä»¥ä¸Šçš„å†…æ ¸å’Œ 2G ä»¥ä¸Šçš„ç‰©ç†å†…å­˜ï¼ŒClient æ¨¡å¼é€‚ç”¨äºå¯¹å†…å­˜è¦æ±‚è¾ƒå°çš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œé»˜è®¤ä½¿ç”¨ Serial ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨</li>
<li>64 ä½ç³»ç»Ÿä¸Šï¼Œåªæ”¯æŒ Server æ¨¡å¼çš„ JVMï¼Œé€‚ç”¨äºéœ€è¦å¤§å†…å­˜çš„åº”ç”¨ç¨‹åºï¼Œé»˜è®¤ä½¿ç”¨å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨</li>
</ul>
</li>
<li>
<p>-X å‚æ•°é€‰é¡¹ï¼š</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-Xmixed           æ··åˆæ¨¡å¼æ‰§è¡Œ (é»˜è®¤)</span></span><br><span class="line"><span class="deletion">-Xint             ä»…è§£é‡Šæ¨¡å¼æ‰§è¡Œ</span></span><br><span class="line"><span class="deletion">-Xbootclasspath:&lt;ç”¨;åˆ†éš”çš„ç›®å½•å’Œzip/jaræ–‡ä»¶&gt;è®¾ç½®æœç´¢è·¯å¾„ä»¥å¼•å¯¼ç±»å’Œèµ„æº</span></span><br><span class="line"><span class="deletion">-Xbootclasspath/a:&lt;ç”¨;åˆ†éš”çš„ç›®å½•å’Œzip/jaræ–‡ä»¶&gt;é™„åŠ åœ¨å¼•å¯¼ç±»è·¯å¾„æœ«å°¾</span></span><br><span class="line"><span class="deletion">-Xbootclasspath/p:&lt;ç”¨;åˆ†éš”çš„ç›®å½•å’Œzip/jaræ–‡ä»¶&gt;ç½®äºå¼•å¯¼ç±»è·¯å¾„ä¹‹å‰</span></span><br><span class="line"><span class="deletion">-Xdiag            æ˜¾ç¤ºé™„åŠ è¯Šæ–­æ¶ˆæ¯</span></span><br><span class="line"><span class="deletion">-Xnoclassgc       ç¦ç”¨ç±»åƒåœ¾æ”¶é›†</span></span><br><span class="line"><span class="deletion">-Xincgc           å¯ç”¨å¢é‡åƒåœ¾æ”¶é›†</span></span><br><span class="line"><span class="deletion">-Xloggc:&lt;file&gt;    å°† GC çŠ¶æ€è®°å½•åœ¨æ–‡ä»¶ä¸­ (å¸¦æ—¶é—´æˆ³)</span></span><br><span class="line"><span class="deletion">-Xbatch           ç¦ç”¨åå°ç¼–è¯‘</span></span><br><span class="line"><span class="deletion">-Xprof            è¾“å‡º cpu é…ç½®æ–‡ä»¶æ•°æ®</span></span><br><span class="line"><span class="deletion">-Xfuture          å¯ç”¨æœ€ä¸¥æ ¼çš„æ£€æŸ¥, é¢„æœŸå°†æ¥çš„é»˜è®¤å€¼</span></span><br><span class="line"><span class="deletion">-Xrs              å‡å°‘ Java/VM å¯¹æ“ä½œç³»ç»Ÿä¿¡å·çš„ä½¿ç”¨ (è¯·å‚é˜…æ–‡æ¡£)</span></span><br><span class="line"><span class="deletion">-Xcheck:jni       å¯¹ JNI å‡½æ•°æ‰§è¡Œå…¶ä»–æ£€æŸ¥</span></span><br><span class="line"><span class="deletion">-Xshare:off       ä¸å°è¯•ä½¿ç”¨å…±äº«ç±»æ•°æ®</span></span><br><span class="line"><span class="deletion">-Xshare:auto      åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ä½¿ç”¨å…±äº«ç±»æ•°æ® (é»˜è®¤)</span></span><br><span class="line"><span class="deletion">-Xshare:on        è¦æ±‚ä½¿ç”¨å…±äº«ç±»æ•°æ®, å¦åˆ™å°†å¤±è´¥ã€‚</span></span><br><span class="line"><span class="deletion">-XshowSettings    æ˜¾ç¤ºæ‰€æœ‰è®¾ç½®å¹¶ç»§ç»­</span></span><br><span class="line"><span class="deletion">-XshowSettings:all			æ˜¾ç¤ºæ‰€æœ‰è®¾ç½®å¹¶ç»§ç»­</span></span><br><span class="line"><span class="deletion">-XshowSettings:vm 			æ˜¾ç¤ºæ‰€æœ‰ä¸ vm ç›¸å…³çš„è®¾ç½®å¹¶ç»§ç»­</span></span><br><span class="line"><span class="deletion">-XshowSettings:properties	æ˜¾ç¤ºæ‰€æœ‰å±æ€§è®¾ç½®å¹¶ç»§ç»­</span></span><br><span class="line"><span class="deletion">-XshowSettings:locale		æ˜¾ç¤ºæ‰€æœ‰ä¸åŒºåŸŸè®¾ç½®ç›¸å…³çš„è®¾ç½®å¹¶ç»§ç»­</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>-XX å‚æ•°é€‰é¡¹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Booleanç±»å‹æ ¼å¼</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+&lt;option&gt;</span>  			å¯ç”¨optionå±æ€§</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:-&lt;option&gt;</span>  			ç¦ç”¨optionå±æ€§</span><br><span class="line"><span class="comment">#éBooleanç±»å‹æ ¼å¼</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:&lt;option&gt;=&lt;number&gt;</span>  	è®¾ç½®optionæ•°å€¼ï¼Œå¯ä»¥å¸¦å•ä½å¦‚k/K/m/M/g/G</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:&lt;option&gt;=&lt;string&gt;</span>  	è®¾ç½®optionå­—ç¬¦å€¼</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ç¨‹åºè¿è¡Œä¸­ï¼š</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®Booleanç±»å‹å‚æ•°</span></span><br><span class="line">jinfo -flag [+|-]<span class="variable">&lt;name&gt;</span> <span class="variable">&lt;pid&gt;</span></span><br><span class="line"><span class="comment"># è®¾ç½®éBooleanç±»å‹å‚æ•°</span></span><br><span class="line">jinfo -flag <span class="variable">&lt;name&gt;</span>=<span class="variable">&lt;value&gt;</span> <span class="variable">&lt;pid&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ‰“å°å‚æ•°">æ‰“å°å‚æ•°</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintCommandLineFlags</span> 	ç¨‹åºè¿è¡Œæ—¶<span class="variable constant_">JVM</span>é»˜è®¤è®¾ç½®æˆ–ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®çš„<span class="variable constant_">XX</span>é€‰é¡¹</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintFlagsInitial</span> 		æ‰“å°æ‰€æœ‰<span class="variable constant_">XX</span>é€‰é¡¹çš„é»˜è®¤å€¼</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintFlagsFinal</span> 		æ‰“å°æ‰€æœ‰<span class="variable constant_">XX</span>é€‰é¡¹çš„å®é™…å€¼</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintVMOptions</span> 		æ‰“å°<span class="variable constant_">JVM</span>çš„å‚æ•°</span><br></pre></td></tr></table></figure>
<h4 id="å†…å­˜å‚æ•°">å†…å­˜å‚æ•°</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ˆ</span></span><br><span class="line">-<span class="title class_">Xss128k</span> &lt;==&gt; -<span class="variable constant_">XX</span><span class="symbol">:ThreadStackSize=</span>128k 		è®¾ç½®çº¿ç¨‹æ ˆçš„å¤§å°ä¸º128K</span><br><span class="line"></span><br><span class="line"><span class="comment"># å †</span></span><br><span class="line">-<span class="title class_">Xms2048m</span> &lt;==&gt; -<span class="variable constant_">XX</span><span class="symbol">:InitialHeapSize=</span>2048m 	è®¾ç½®<span class="variable constant_">JVM</span>åˆå§‹å †å†…å­˜ä¸º2048Mï¼ˆé»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„<span class="number">1</span>/<span class="number">64</span>ï¼‰</span><br><span class="line">-<span class="title class_">Xmx2048m</span> &lt;==&gt; -<span class="variable constant_">XX</span><span class="symbol">:MaxHeapSize=</span>2048m 		è®¾ç½®<span class="variable constant_">JVM</span>æœ€å¤§å †å†…å­˜ä¸º2048Mï¼ˆé»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„<span class="number">1</span>/<span class="number">4</span>ï¼‰</span><br><span class="line">-<span class="title class_">Xmn2g</span> &lt;==&gt; -<span class="variable constant_">XX</span><span class="symbol">:NewSize=</span>2g 					è®¾ç½®å¹´è½»ä»£å¤§å°ä¸º2G</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:SurvivorRatio=</span><span class="number">8</span> 						è®¾ç½®<span class="title class_">Eden</span>åŒºä¸<span class="title class_">Survivor</span>åŒºçš„æ¯”å€¼ï¼Œé»˜è®¤ä¸º<span class="number">8</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:NewRatio=</span><span class="number">2</span> 								è®¾ç½®è€å¹´ä»£ä¸å¹´è½»ä»£çš„æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º<span class="number">2</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseAdaptiveSizePolicy</span> 					è®¾ç½®å¤§å°æ¯”ä¾‹è‡ªé€‚åº”ï¼Œé»˜è®¤å¼€å¯</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:PretenureSizeThreadshold=</span><span class="number">1024</span> 			è®¾ç½®è®©å¤§äºæ­¤é˜ˆå€¼çš„å¯¹è±¡ç›´æ¥åˆ†é…åœ¨è€å¹´ä»£ï¼Œåªå¯¹<span class="title class_">Serial</span>ã€<span class="title class_">ParNew</span>æ”¶é›†å™¨æœ‰æ•ˆ</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:MaxTenuringThreshold=</span><span class="number">15</span> 				è®¾ç½®æ–°ç”Ÿä»£æ™‹å‡è€å¹´ä»£çš„å¹´é¾„é™åˆ¶ï¼Œé»˜è®¤ä¸º<span class="number">15</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:TargetSurvivorRatio</span> 					è®¾ç½®<span class="title class_">Minor</span>GCç»“æŸå<span class="title class_">Survivor</span>åŒºå ç”¨ç©ºé—´çš„æœŸæœ›æ¯”ä¾‹</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•åŒº</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:MetaspaceSize</span> / -<span class="variable constant_">XX</span><span class="symbol">:PermSize=</span>256m 		è®¾ç½®å…ƒç©ºé—´/æ°¸ä¹…ä»£åˆå§‹å€¼ä¸º256M</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:MaxMetaspaceSize</span> / -<span class="variable constant_">XX</span><span class="symbol">:MaxPermSize=</span>256m è®¾ç½®å…ƒç©ºé—´/æ°¸ä¹…ä»£æœ€å¤§å€¼ä¸º256M</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseCompressedOops</span> 						ä½¿ç”¨å‹ç¼©å¯¹è±¡</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseCompressedClassPointers</span> 			ä½¿ç”¨å‹ç¼©ç±»æŒ‡é’ˆ</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:CompressedClassSpaceSize</span> 				è®¾ç½®<span class="title class_">Klass</span> <span class="title class_">Metaspace</span>çš„å¤§å°ï¼Œé»˜è®¤1G</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥å†…å­˜</span></span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:MaxDirectMemorySize</span> 					æŒ‡å®š<span class="title class_">DirectMemory</span>å®¹é‡ï¼Œé»˜è®¤ç­‰äº<span class="title class_">Java</span>å †æœ€å¤§å€¼</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼šå‚æ•°å‰é¢æ˜¯<code>+</code>å·è¯´æ˜æ˜¯å¼€å¯ï¼Œå¦‚æœæ˜¯<code>-</code>å·è¯´æ˜æ˜¯å…³é—­</p>
<h4 id="OOMå‚æ•°">OOMå‚æ•°</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+HeapDumpOnOutMemoryError</span> 	å†…å­˜å‡ºç°<span class="variable constant_">OOM</span>æ—¶ç”Ÿæˆ<span class="title class_">Heap</span>è½¬å‚¨æ–‡ä»¶ï¼Œä¸¤è€…äº’æ–¥</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+HeapDumpBeforeFullGC</span> 		å‡ºç°<span class="title class_">Full</span>GCæ—¶ç”Ÿæˆ<span class="title class_">Heap</span>è½¬å‚¨æ–‡ä»¶ï¼Œä¸¤è€…äº’æ–¥</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:HeapDumpPath=&lt;path&gt;</span> 		æŒ‡å®šheapè½¬å‚¨æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤å½“å‰ç›®å½•</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:OnOutOfMemoryError=&lt;path&gt;</span> 	æŒ‡å®šå¯è¡Œæ€§ç¨‹åºæˆ–è„šæœ¬çš„è·¯å¾„ï¼Œå½“å‘ç”Ÿ<span class="variable constant_">OOM</span>æ—¶æ‰§è¡Œè„šæœ¬</span><br></pre></td></tr></table></figure>
<h4 id="æ—¥å¿—å‚æ•°">æ—¥å¿—å‚æ•°</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintGC</span> &lt;==&gt; -<span class="symbol">verbose:</span>gc  	æ‰“å°ç®€è¦æ—¥å¿—ä¿¡æ¯</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCDetails</span>            	æ‰“å°è¯¦ç»†æ—¥å¿—ä¿¡æ¯</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCTimeStamps</span>  		æ‰“å°ç¨‹åºå¯åŠ¨åˆ°<span class="variable constant_">GC</span>å‘ç”Ÿçš„æ—¶é—´ï¼Œæ­é…-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCDetails</span>ä½¿ç”¨</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCDateStamps</span>  		æ‰“å°<span class="variable constant_">GC</span>å‘ç”Ÿæ—¶çš„æ—¶é—´æˆ³ï¼Œæ­é…-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCDetails</span>ä½¿ç”¨</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintHeapAtGC</span> 			 	æ‰“å°<span class="variable constant_">GC</span>å‰åçš„å †ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾</span><br><span class="line">-<span class="title class_">Xloggc</span><span class="symbol">:&lt;file&gt;</span> 					è¾“å‡º<span class="variable constant_">GC</span>å¯¼æŒ‡å®šè·¯å¾„ä¸‹çš„æ–‡ä»¶ä¸­</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+TraceClassLoading</span>  		ç›‘æ§ç±»çš„åŠ è½½</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintTenuringDistribution</span>	æ‰“å°<span class="variable constant_">JVM</span>åœ¨æ¯æ¬¡<span class="title class_">Minor</span>GCåå½“å‰ä½¿ç”¨çš„<span class="title class_">Survivor</span>ä¸­å¯¹è±¡çš„å¹´é¾„åˆ†å¸ƒ</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCApplicationStoppedTime</span>  	æ‰“å°<span class="variable constant_">GC</span>æ—¶çº¿ç¨‹çš„åœé¡¿æ—¶é—´</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintGCApplicationConcurrentTime</span>  	æ‰“å°åƒåœ¾æ”¶é›†ä¹‹å‰åº”ç”¨æœªä¸­æ–­çš„æ‰§è¡Œæ—¶é—´</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintReferenceGC</span> 					æ‰“å°å›æ”¶äº†å¤šå°‘ç§ä¸åŒå¼•ç”¨ç±»å‹çš„å¼•ç”¨</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseGCLogFileRotation</span> 				å¯ç”¨<span class="variable constant_">GC</span>æ—¥å¿—æ–‡ä»¶çš„è‡ªåŠ¨è½¬å‚¨</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:NumberOfGCLogFiles=</span><span class="number">1</span>  				è®¾ç½®<span class="variable constant_">GC</span>æ—¥å¿—æ–‡ä»¶çš„å¾ªç¯æ•°ç›®</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:GCLogFileSize=</span>1M  					è®¾ç½®<span class="variable constant_">GC</span>æ—¥å¿—æ–‡ä»¶çš„å¤§å°</span><br></pre></td></tr></table></figure>
<h4 id="å…¶ä»–å‚æ•°">å…¶ä»–å‚æ•°</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+DisableExplicitGC</span>  	ç¦ç”¨hotspotæ‰§è¡Œ<span class="title class_">System</span>.gc()ï¼Œé»˜è®¤ç¦ç”¨</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+DoEscapeAnalysis</span>  		å¼€å¯é€ƒé€¸åˆ†æ</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseBiasedLocking</span>  		å¼€å¯åå‘é”</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseLargePages</span>  		å¼€å¯ä½¿ç”¨å¤§é¡µé¢</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+PrintTLAB</span>  			æ‰“å°<span class="variable constant_">TLAB</span>çš„ä½¿ç”¨æƒ…å†µ</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:TLABSize</span>  				è®¾ç½®<span class="variable constant_">TLAB</span>å¤§å°</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:ReservedCodeCacheSize=&lt;n&gt;</span>[g|<span class="params">m</span>|k]ã€-<span class="variable constant_">XX</span><span class="symbol">:InitialCodeCacheSize=&lt;n&gt;</span>[g|<span class="params">m</span>|k] æŒ‡å®šä»£ç ç¼“å­˜å¤§å°</span><br><span class="line">-<span class="variable constant_">XX</span><span class="symbol">:+UseCodeCacheFlushing</span>  	æ”¾å¼ƒä¸€äº›è¢«ç¼–è¯‘çš„ä»£ç ï¼Œé¿å…ä»£ç ç¼“å­˜è¢«å æ»¡æ—¶<span class="variable constant_">JVM</span>åˆ‡æ¢åˆ°interpreted-onlyçš„æƒ…å†µ</span><br></pre></td></tr></table></figure>
<h4 id="ä»£ç è·å–">ä»£ç è·å–</h4>
<p>Java æä¾›äº† java.lang.management åŒ…ç”¨äºç›‘è§†å’Œç®¡ç† Java è™šæ‹Ÿæœºå’Œ Java è¿è¡Œæ—¶ä¸­çš„å…¶ä»–ç»„ä»¶ï¼Œå…è®¸æœ¬åœ°æˆ–è¿œç¨‹ç›‘æ§å’Œç®¡ç†è¿è¡Œçš„ Java è™šæ‹Ÿæœºã€‚ManagementFactory ç±»è¾ƒä¸ºå¸¸ç”¨ï¼ŒRuntime ç±»å¯è·å–å†…å­˜ã€CPU æ ¸æ•°ç­‰ç›¸å…³çš„æ•°æ®ï¼Œé€šè¿‡ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥ç›‘æ§åº”ç”¨æœåŠ¡å™¨çš„å †å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè®¾ç½®ä¸€äº›é˜ˆå€¼è¿›è¡ŒæŠ¥è­¦ç­‰å¤„ç†</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> MemoryMonitor &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        MemoryMXBean memorymbean = <span class="module-access"><span class="module"><span class="identifier">ManagementFactory</span>.</span></span>get<span class="constructor">MemoryMXBean()</span>;</span><br><span class="line">        MemoryUsage usage = memorymbean.get<span class="constructor">HeapMemoryUsage()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;INIT HEAP: &quot;</span> + usage.get<span class="constructor">Init()</span><span class="operator"> / </span><span class="number">1024</span><span class="operator"> / </span><span class="number">1024</span> + <span class="string">&quot;m&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;MAX HEAP: &quot;</span> + usage.get<span class="constructor">Max()</span><span class="operator"> / </span><span class="number">1024</span><span class="operator"> / </span><span class="number">1024</span> + <span class="string">&quot;m&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;USE HEAP: &quot;</span> + usage.get<span class="constructor">Used()</span><span class="operator"> / </span><span class="number">1024</span><span class="operator"> / </span><span class="number">1024</span> + <span class="string">&quot;m&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;\nFull Information:&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;Heap Memory Usage: &quot;</span> + memorymbean.get<span class="constructor">HeapMemoryUsage()</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;Non-Heap Memory Usage: &quot;</span> + memorymbean.get<span class="constructor">NonHeapMemoryUsage()</span>);</span><br><span class="line"></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;====é€šè¿‡javaæ¥è·å–ç›¸å…³ç³»ç»ŸçŠ¶æ€====&quot;</span>);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;å½“å‰å †å†…å­˜å¤§å°totalMemory &quot;</span> + (<span class="built_in">int</span>) <span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.total<span class="constructor">Memory()</span><span class="operator"> / </span><span class="number">1024</span><span class="operator"> / </span><span class="number">1024</span> + <span class="string">&quot;m&quot;</span>);<span class="comment">// å½“å‰å †å†…å­˜å¤§å°</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;ç©ºé—²å †å†…å­˜å¤§å°freeMemory &quot;</span> + (<span class="built_in">int</span>) <span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.free<span class="constructor">Memory()</span><span class="operator"> / </span><span class="number">1024</span><span class="operator"> / </span><span class="number">1024</span> + <span class="string">&quot;m&quot;</span>);<span class="comment">// ç©ºé—²å †å†…å­˜å¤§å°</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;æœ€å¤§å¯ç”¨æ€»å †å†…å­˜maxMemory &quot;</span> + <span class="module-access"><span class="module"><span class="identifier">Runtime</span>.</span></span>get<span class="constructor">Runtime()</span>.max<span class="constructor">Memory()</span><span class="operator"> / </span><span class="number">1024</span><span class="operator"> / </span><span class="number">1024</span> + <span class="string">&quot;m&quot;</span>);<span class="comment">// æœ€å¤§å¯ç”¨æ€»å †å†…å­˜å¤§å°</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ—¥å¿—åˆ†æ">æ—¥å¿—åˆ†æ</h3>
<h4 id="æ—¥å¿—åˆ†ç±»">æ—¥å¿—åˆ†ç±»</h4>
<p>HotSpot VM çš„ GC æŒ‰ç…§å›æ”¶åŒºåŸŸåˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç§æ˜¯éƒ¨åˆ†æ”¶é›†ï¼ˆPartial GCï¼‰ï¼Œä¸€ç§æ˜¯æ•´å †æ”¶é›†ï¼ˆFull GCï¼‰</p>
<ul>
<li>éƒ¨åˆ†æ”¶é›†ï¼ˆPartial GCï¼‰ï¼šä¸æ˜¯å®Œæ•´æ”¶é›†æ•´ä¸ª Java å †çš„åƒåœ¾æ”¶é›†ã€‚å…¶ä¸­åˆåˆ†ä¸ºï¼š
<ul>
<li>æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GC/Young GCï¼‰ï¼šåªæ˜¯æ–°ç”Ÿä»£ï¼ˆEden/S0ã€S1ï¼‰çš„åƒåœ¾æ”¶é›†</li>
<li>è€å¹´ä»£æ”¶é›†ï¼ˆMajor GC/Old GCï¼‰ï¼šåªæ˜¯è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼Œåªæœ‰ CMS GC ä¼šæœ‰å•ç‹¬æ”¶é›†è€å¹´ä»£çš„è¡Œä¸º</li>
</ul>
</li>
<li>æ··åˆæ”¶é›†ï¼ˆMixed GCï¼‰ï¼šæ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£ä»¥åŠéƒ¨åˆ†è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼Œåªæœ‰ G1 GC ä¼šæœ‰è¿™ç§è¡Œä¸º</li>
<li>æ•´å †æ”¶é›†ï¼ˆFull GCï¼‰ï¼šæ”¶é›†æ•´ä¸ª Java å †å’Œæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ã€‚</li>
</ul>
<p>Minor GC/Young GC æ—¥å¿—ï¼š</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="variable">GC</span> <span class="punctuation">(</span><span class="variable">Allocation</span> <span class="built_in">Failure</span><span class="punctuation">)</span> <span class="punctuation">[</span><span class="variable">PSYoungGen</span><span class="operator">:</span> <span class="number">31744</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">2192</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">36864</span><span class="built_in">K</span><span class="punctuation">)</span> <span class="punctuation">]</span> <span class="number">31744</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">2200</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">121856</span><span class="built_in">K</span><span class="punctuation">)</span><span class="operator">,</span> <span class="number">0.0139308</span> <span class="variable">secs</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="built_in">Times</span><span class="operator">:</span> <span class="variable">user</span><span class="operator">=</span><span class="number">0.05</span> <span class="variable">sys</span><span class="operator">=</span><span class="number">0.01</span><span class="operator">,</span> <span class="variable">real</span><span class="operator">=</span><span class="number">0.01</span> <span class="variable">secs</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>Full GC æ—¥å¿—ï¼š</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="built_in">Full</span> <span class="variable">GC</span> <span class="punctuation">(</span><span class="variable">Metadata</span> <span class="variable">GC</span> <span class="built_in">Threshold</span><span class="punctuation">)</span> <span class="punctuation">[</span><span class="variable">PSYoungGen</span><span class="operator">:</span> <span class="number">5104</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">0</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">132096</span><span class="built_in">K</span><span class="punctuation">)</span> <span class="punctuation">]</span> <span class="punctuation">[</span><span class="variable">Par01dGen</span><span class="operator">:</span> <span class="number">416</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">5453</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">50176</span><span class="built_in">K</span><span class="punctuation">)</span> <span class="punctuation">]</span><span class="number">5520</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">5453</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">182272</span><span class="built_in">K</span><span class="punctuation">)</span><span class="operator">,</span> <span class="punctuation">[</span><span class="variable">Metaspace</span><span class="operator">:</span> <span class="number">20637</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">20637</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">1067008</span><span class="built_in">K</span><span class="punctuation">)</span> <span class="punctuation">]</span><span class="operator">,</span> <span class="number">0.0245883</span> <span class="variable">secs</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="built_in">Times</span><span class="operator">:</span> <span class="variable">user</span><span class="operator">=</span><span class="number">0.06</span> <span class="variable">sys</span><span class="operator">=</span><span class="number">0.00</span><span class="operator">,</span> <span class="variable">real</span><span class="operator">=</span><span class="number">0.02</span> <span class="variable">secs</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<h4 id="æ—¥å¿—è§£æ">æ—¥å¿—è§£æ</h4>
<p>é€šè¿‡æ—¥å¿—çœ‹åƒåœ¾æ”¶é›†å™¨ï¼š</p>
<ul>
<li>Serial æ”¶é›†å™¨ï¼šæ–°ç”Ÿä»£æ˜¾ç¤º <code>[DefNew</code>ï¼Œå³ <code>Default New Generation</code></li>
<li>ParNew æ”¶é›†å™¨ï¼šæ–°ç”Ÿä»£æ˜¾ç¤º <code>[ParNew</code>ï¼Œå³ <code>Parallel New Generation</code></li>
<li>Parallel Scavenge æ”¶é›†å™¨ï¼šæ–°ç”Ÿä»£æ˜¾ç¤º <code>[PSYoungGen</code>ï¼ŒJDK1.7 ä½¿ç”¨çš„ PSYoungGen</li>
<li>Parallel Old æ”¶é›†å™¨ï¼šè€å¹´ä»£æ˜¾ç¤º <code>[ParoldGen</code></li>
<li>G1 æ”¶é›†å™¨ï¼šæ˜¾ç¤º <code>garbage-first heap</code></li>
</ul>
<p>é€šè¿‡æ—¥å¿—çœ‹ GC åŸå› ï¼š</p>
<ul>
<li>Allocation Failureï¼šè¡¨æ˜æœ¬æ¬¡å¼•èµ· GC çš„åŸå› æ˜¯å› ä¸ºæ–°ç”Ÿä»£ä¸­æ²¡æœ‰è¶³å¤Ÿçš„åŒºåŸŸå­˜æ”¾éœ€è¦åˆ†é…çš„æ•°æ®</li>
<li>Metadata GCThresholdï¼šMetaspace åŒºä¸è¶³</li>
<li>FErgonomicsï¼šJVM è‡ªé€‚åº”è°ƒæ•´å¯¼è‡´çš„ GC</li>
<li>Systemï¼šè°ƒç”¨äº† System.gc() æ–¹æ³•</li>
</ul>
<p>é€šè¿‡æ—¥å¿—çœ‹ GC å‰åæƒ…å†µï¼šGC å‰å†…å­˜å ç”¨ â†’ GC åå†…å­˜å ç”¨ï¼ˆè¯¥åŒºåŸŸå†…å­˜æ€»å¤§å°ï¼‰</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="variable">PSYoungGen</span><span class="operator">:</span> <span class="number">5986</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">696</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">8704</span><span class="built_in">K</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="number">5986</span><span class="built_in">K</span><span class="operator">-&gt;</span><span class="number">704</span><span class="built_in">K</span> <span class="punctuation">(</span><span class="number">9216</span><span class="built_in">K</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>ä¸­æ‹¬å·å†…ï¼šGC å›æ”¶å‰å¹´è½»ä»£å †å¤§å° â†’ å›æ”¶åå¤§å°ï¼ˆå¹´è½»ä»£å †æ€»å¤§å°ï¼‰</p>
</li>
<li>
<p>æ‹¬å·å¤–ï¼šGC å›æ”¶å‰å¹´è½»ä»£å’Œè€å¹´ä»£å¤§å° â†’ å›æ”¶åå¤§å°ï¼ˆå¹´è½»ä»£å’Œè€å¹´ä»£æ€»å¤§å°ï¼‰</p>
</li>
<li>
<p>Minor GC å †å†…å­˜æ€»å®¹é‡ = 9/10 å¹´è½»ä»£ + è€å¹´ä»£ï¼ŒSurvivor åŒºåªè®¡ç®— from éƒ¨åˆ†ï¼Œè€Œ JVM é»˜è®¤å¹´è½»ä»£ä¸­ Eden åŒºå’Œ Survivor åŒºçš„æ¯”ä¾‹å…³ç³»ï¼šEden:S0:S1=8:1:1</p>
</li>
</ul>
<p>é€šè¿‡æ—¥å¿—çœ‹ GC æ—¶é—´ï¼šGC æ—¥å¿—ä¸­æœ‰ä¸‰ä¸ªæ—¶é—´ userã€sysã€real</p>
<ul>
<li>userï¼šè¿›ç¨‹æ‰§è¡Œç”¨æˆ·æ€ä»£ç ï¼ˆæ ¸å¿ƒä¹‹å¤–ï¼‰æ‰€ä½¿ç”¨çš„æ—¶é—´ï¼Œè¿™æ˜¯æ‰§è¡Œæ­¤è¿›ç¨‹æ‰€ä½¿ç”¨çš„å®é™… CPU æ—¶é—´ï¼Œå…¶ä»–è¿›ç¨‹å’Œæ­¤è¿›ç¨‹é˜»å¡çš„æ—¶é—´å¹¶ä¸åŒ…æ‹¬åœ¨å†…ï¼Œåœ¨åƒåœ¾æ”¶é›†çš„æƒ…å†µä¸‹ï¼Œè¡¨ç¤º GC çº¿ç¨‹æ‰§è¡Œæ‰€ä½¿ç”¨çš„ CPU æ€»æ—¶é—´ã€‚</li>
<li>sysï¼šè¿›ç¨‹åœ¨å†…æ ¸æ€æ¶ˆè€—çš„ CPU æ—¶é—´ï¼Œå³åœ¨å†…æ ¸æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æˆ–ç­‰å¾…ç³»ç»Ÿäº‹ä»¶æ‰€ä½¿ç”¨çš„ CPU æ—¶é—´</li>
<li>realï¼šç¨‹åºä»å¼€å§‹åˆ°ç»“æŸæ‰€ç”¨çš„æ—¶é’Ÿæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´åŒ…æ‹¬å…¶ä»–è¿›ç¨‹ä½¿ç”¨çš„æ—¶é—´ç‰‡å’Œè¿›ç¨‹é˜»å¡çš„æ—¶é—´ï¼ˆæ¯”å¦‚ç­‰å¾… I/O å®Œæˆï¼‰ï¼Œå¯¹äºå¹¶è¡Œ GCï¼Œè¿™ä¸ªæ•°å­—åº”è¯¥æ¥è¿‘ï¼ˆç”¨æˆ·æ—¶é—´ï¼‹ç³»ç»Ÿæ—¶é—´ï¼‰é™¤ä»¥åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨çš„çº¿ç¨‹æ•°</li>
</ul>
<p>ç”±äºå¤šæ ¸çš„åŸå› ï¼Œä¸€èˆ¬çš„ GC äº‹ä»¶ä¸­ï¼Œreal time å°äº sys timeï¼‹user timeï¼Œå› ä¸ºæ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘çš„å»åš GCã€‚å¦‚æœ realï¼sysï¼‹user çš„è¯ï¼Œåˆ™è¯´æ˜ IO è´Ÿè½½éå¸¸é‡æˆ– CPU ä¸å¤Ÿç”¨</p>
<h4 id="åˆ†æå·¥å…·">åˆ†æå·¥å…·</h4>
<p>GCEasy æ˜¯ä¸€æ¬¾åœ¨çº¿çš„ GC æ—¥å¿—åˆ†æå™¨ï¼Œå¯ä»¥é€šè¿‡ GC æ—¥å¿—åˆ†æè¿›è¡Œå†…å­˜æ³„éœ²æ£€æµ‹ã€GC æš‚åœåŸå› åˆ†æã€JVM é…ç½®å»ºè®®ä¼˜åŒ–ç­‰åŠŸèƒ½ï¼Œå¤§å¤šæ•°åŠŸèƒ½æ˜¯å…è´¹çš„</p>
<ul>
<li>å®˜ç½‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://gceasy.io/">https://gceasy.io/</a></li>
</ul>
<p>GCViewer æ˜¯ä¸€æ¬¾ç¦»çº¿çš„ GC æ—¥å¿—åˆ†æå™¨ï¼Œç”¨äºå¯è§†åŒ– Java VM é€‰é¡¹ -verbose:gc å’Œ .NET ç”Ÿæˆçš„æ•°æ® -Xloggc:<file>ï¼Œè¿˜å¯ä»¥è®¡ç®—ä¸åƒåœ¾å›æ”¶ç›¸å…³çš„æ€§èƒ½æŒ‡æ ‡ï¼ˆååé‡ã€ç´¯ç§¯çš„æš‚åœã€æœ€é•¿çš„æš‚åœç­‰ï¼‰ï¼Œå½“é€šè¿‡æ›´æ”¹ä¸–ä»£å¤§å°æˆ–è®¾ç½®åˆå§‹å †å¤§å°æ¥è°ƒæ•´ç‰¹å®šåº”ç”¨ç¨‹åºçš„åƒåœ¾å›æ”¶æ—¶ï¼Œæ­¤åŠŸèƒ½éå¸¸æœ‰ç”¨</p>
<ul>
<li>æºç ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/chewiebug/GCViewer">https://github.com/chewiebug/GCViewer</a></li>
<li>è¿è¡Œç‰ˆæœ¬ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/chewiebug/GCViewer/wiki/Changelog">https://github.com/chewiebug/GCViewer/wiki/Changelog</a></li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.yuque.com/u21195183/jvm/ukmb3k">https://www.yuque.com/u21195183/jvm/ukmb3k</a></p>
<h1>ALG</h1>
<h2 id="é€’å½’">é€’å½’</h2>
<h3 id="æ¦‚è¿°-13">æ¦‚è¿°</h3>
<p>ç®—æ³•ï¼šè§£é¢˜æ–¹æ¡ˆçš„å‡†ç¡®è€Œå®Œæ•´çš„æè¿°ï¼Œæ˜¯ä¸€ç³»åˆ—è§£å†³é—®é¢˜çš„æ¸…æ™°æŒ‡ä»¤ï¼Œä»£è¡¨ç€ç”¨ç³»ç»Ÿçš„æ–¹æ³•è§£å†³é—®é¢˜çš„ç­–ç•¥æœºåˆ¶</p>
<p>é€’å½’ï¼šç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§</p>
<p>é€’å½’ï¼š</p>
<ul>
<li>ç›´æ¥é€’å½’ï¼šè‡ªå·±çš„æ–¹æ³•è°ƒç”¨è‡ªå·±</li>
<li>é—´æ¥é€’å½’ï¼šè‡ªå·±çš„æ–¹æ³•è°ƒç”¨åˆ«çš„æ–¹æ³•ï¼Œåˆ«çš„æ–¹æ³•åˆè°ƒç”¨è‡ªå·±</li>
</ul>
<p>é€’å½’å¦‚æœæ§åˆ¶çš„ä¸æ°å½“ï¼Œä¼šå½¢æˆé€’å½’çš„æ­»å¾ªç¯ï¼Œä»è€Œå¯¼è‡´æ ˆå†…å­˜æº¢å‡ºé”™è¯¯</p>
<p>å‚è€ƒä¹¦ç±ï¼š<a target="_blank" rel="noopener" href="https://book.douban.com/subject/35263893/">https://book.douban.com/subject/35263893/</a></p>
<h3 id="ç®—æ³•">ç®—æ³•</h3>
<h4 id="æ ¸å¿ƒæ€æƒ³">æ ¸å¿ƒæ€æƒ³</h4>
<p>é€’å½’çš„ä¸‰è¦ç´ ï¼ˆç†è®ºï¼‰ï¼š</p>
<ol>
<li>é€’å½’çš„ç»ˆç»“ç‚¹</li>
<li>é€’å½’çš„å…¬å¼</li>
<li>é€’å½’çš„æ–¹å‘ï¼šå¿…é¡»èµ°å‘ç»ˆç»“ç‚¹</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// f(x)=f(x-1)+1;   f(1)=1;    f(10)=?</span></span><br><span class="line"><span class="comment">// 1.é€’å½’çš„ç»ˆç»“ç‚¹ï¼š f(1)  = 1</span></span><br><span class="line"><span class="comment">// 2.é€’å½’çš„å…¬å¼ï¼šf(x) = f(x - 1) + 1</span></span><br><span class="line"><span class="comment">// 3.é€’å½’çš„æ–¹å‘ï¼šå¿…é¡»èµ°å‘ç»ˆç»“ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">f</span>(x<span class="number">-1</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å…¬å¼è½¬æ¢">å…¬å¼è½¬æ¢</h4>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²çŸ¥ï¼š f(x) = f(x + 1) + 2,  f(1) = 1ã€‚æ±‚ï¼šf(10) = ?</span></span><br><span class="line"><span class="comment">// å…¬å¼è½¬æ¢</span></span><br><span class="line"><span class="comment">// f(x-1)=f(x-1+1)+2 =&gt; f(x)=f(x-1)+2</span></span><br><span class="line"><span class="comment">//ï¼ˆ1ï¼‰é€’å½’çš„å…¬å¼ï¼š   f(n) = f(n-1)- 2 ;</span></span><br><span class="line"><span class="comment">//ï¼ˆ2ï¼‰é€’å½’çš„ç»ˆç»“ç‚¹ï¼š  f(1) = 1</span></span><br><span class="line"><span class="comment">//ï¼ˆ3ï¼‰é€’å½’çš„æ–¹å‘ï¼šå¿…é¡»èµ°å‘ç»ˆç»“ç‚¹ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">f</span>(n<span class="number">-1</span>) - <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ³¨æ„äº‹é¡¹-2">æ³¨æ„äº‹é¡¹</h4>
<p>ä»¥ä¸Šç†è®ºåªèƒ½é’ˆå¯¹äº<strong>è§„å¾‹åŒ–é€’å½’</strong>ï¼Œå¦‚æœæ˜¯éè§„å¾‹åŒ–æ˜¯ä¸èƒ½å¥—ç”¨ä»¥ä¸Šå…¬å¼çš„ï¼ éè§„å¾‹åŒ–é€’å½’çš„é—®é¢˜ï¼šæ–‡ä»¶æœç´¢ï¼Œå•¤é…’é—®é¢˜ã€‚</p>
<h3 id="åº”ç”¨-2">åº”ç”¨</h3>
<h4 id="çŒ´å­åƒæ¡ƒ">çŒ´å­åƒæ¡ƒ</h4>
<p>çŒ´å­ç¬¬ä¸€å¤©æ‘˜äº†è‹¥å¹²ä¸ªæ¡ƒå­ï¼Œå½“å³åƒäº†ä¸€åŠï¼Œè§‰å¾—å¥½ä¸è¿‡ç˜¾ï¼Œç„¶ååˆå¤šåƒäº†ä¸€ä¸ªã€‚ç¬¬äºŒå¤©åˆåƒäº†å‰ä¸€å¤©å‰©ä¸‹çš„ä¸€åŠï¼Œè§‰å¾—å¥½ä¸è¿‡ç˜¾ï¼Œç„¶ååˆå¤šåƒäº†ä¸€ä¸ªã€‚ä»¥åæ¯å¤©éƒ½æ˜¯å¦‚æ­¤ã€‚ç­‰åˆ°ç¬¬åå¤©å†åƒçš„æ—¶å€™å‘ç°åªæœ‰1ä¸ªæ¡ƒå­ï¼Œé—®çŒ´å­ç¬¬ä¸€å¤©æ€»å…±æ‘˜äº†å¤šå°‘ä¸ªæ¡ƒå­ï¼Ÿ</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ï¼ˆ1ï¼‰å…¬å¼ï¼š f(x+1)=f(x)-f(x)/2-1; ==&gt; 2f(x+1) = f(x) - 2 ==&gt; f(x)=2f(x+1)+2</span></span><br><span class="line"><span class="comment">ï¼ˆ2ï¼‰ç»ˆç»“ç‚¹ï¼šf(10) = 1</span></span><br><span class="line"><span class="comment">ï¼ˆ3ï¼‰é€’å½’çš„æ–¹å‘ï¼šèµ°å‘äº†ç»ˆç»“ç‚¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x == <span class="number">10</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*<span class="built_in">f</span>(x+<span class="number">1</span>)+<span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é€’å½’æ±‚å’Œ">é€’å½’æ±‚å’Œ</h4>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ï¼ˆ1ï¼‰é€’å½’çš„ç»ˆç‚¹æ¥ï¼šf(1) = 1</span></span><br><span class="line"><span class="comment">//ï¼ˆ2ï¼‰é€’å½’çš„å…¬å¼ï¼š f(n) = f(n-1) + n</span></span><br><span class="line"><span class="comment">//ï¼ˆ3ï¼‰é€’å½’çš„æ–¹å‘å¿…é¡»èµ°å‘ç»ˆç»“ç‚¹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">f</span>(n<span class="number">-1</span>) + n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ±‰è¯ºå¡”">æ±‰è¯ºå¡”</h4>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Hanoi</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        hanoi(<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>, <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†nä¸ªå—åˆ†æ²»çš„ä»xç§»åŠ¨åˆ°zï¼Œyä¸ºè¾…åŠ©æŸ±</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hanoi</span>(<span class="params"><span class="built_in">char</span> x, <span class="built_in">char</span> y, <span class="built_in">char</span> z, <span class="built_in">int</span> n</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(x + <span class="string">&quot;â†’&quot;</span> + z);    <span class="comment">// ç›´æ¥å°†xçš„å—ç§»åŠ¨åˆ°z</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            hanoi(x, z, y, n - <span class="number">1</span>);           	<span class="comment">// åˆ†æ²»å¤„ç†n-1ä¸ªå—ï¼Œå…ˆå°†n-1ä¸ªå—å€ŸåŠ©zç§»åˆ°y</span></span><br><span class="line">            System.<span class="keyword">out</span>.println(x + <span class="string">&quot;â†’&quot;</span> + z);    <span class="comment">// ç„¶åå°†xæœ€ä¸‹é¢çš„å—ï¼ˆæœ€å¤§çš„ï¼‰ç§»åŠ¨åˆ°z</span></span><br><span class="line">            hanoi(y, x, z, n - <span class="number">1</span>);           	<span class="comment">// æœ€åå°†n-1ä¸ªå—ä»yç§»åŠ¨åˆ°zï¼Œxä¸ºè¾…åŠ©æŸ±</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦ O(2^n)</p>
<h4 id="å•¤é…’é—®é¢˜">å•¤é…’é—®é¢˜</h4>
<p>éè§„å¾‹åŒ–é€’å½’é—®é¢˜ï¼Œå•¤é…’ 2 å…ƒ 1 ç“¶ï¼Œ4 ä¸ªç›–å­å¯ä»¥æ¢ 1 ç“¶ï¼Œ2 ä¸ªç©ºç“¶å¯ä»¥æ¢ 1 ç“¶</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BeerDemo</span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªé™æ€å˜é‡å­˜å‚¨å¯ä»¥å–é…’çš„æ€»æ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> totalNum;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> lastBottleNum;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> lastCoverNum;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">        buyBeer(<span class="number">10</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;æ€»æ•°ï¼š&quot;</span>+totalNum);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å‰©ä½™ç›–å­ï¼š&quot;</span>+ lastCoverNum);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å‰©ä½™ç“¶å­ï¼š&quot;</span>+ lastBottleNum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">buyBeer</span>(<span class="params"><span class="built_in">int</span> money</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">int</span> number = money / <span class="number">2</span>;</span><br><span class="line">        totalNum += number;</span><br><span class="line">        <span class="comment">// ç®—å‡ºå½“å‰å‰©ä½™çš„å…¨éƒ¨ç›–å­å’Œç“¶å­æ•°ï¼Œæ¢ç®—æˆé‡‘é¢ç»§ç»­è´­ä¹°ã€‚</span></span><br><span class="line">        <span class="built_in">int</span> currentBottleNum = lastBottleNum + number ;</span><br><span class="line">        <span class="built_in">int</span> currentCoverNum = lastCoverNum + number ;</span><br><span class="line">        <span class="comment">// æŠŠä»–ä»¬æ¢ç®—æˆé‡‘é¢</span></span><br><span class="line">        <span class="built_in">int</span> totalMoney = <span class="number">0</span> ;</span><br><span class="line">        totalMoney += (currentBottleNum/<span class="number">2</span>)*<span class="number">2</span>; <span class="comment">// é™¤2ä»£è¡¨å¯ä»¥æ¢å‡ ä¸ªç“¶å­ï¼Œä¹˜2ä»£è¡¨æ¢ç®—æˆé’±ï¼Œç§’ï¼</span></span><br><span class="line">        lastBottleNum = currentBottleNum % <span class="number">2</span> ;<span class="comment">// å–ä½™//ç®—å‡ºå‰©ä½™çš„ç“¶å­</span></span><br><span class="line">     </span><br><span class="line">        totalMoney += (currentCoverNum / <span class="number">4</span>) * <span class="number">2</span>;</span><br><span class="line">        lastCoverNum = currentCoverNum % <span class="number">4</span> ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»§ç»­æ‹¿é’±ä¹°é…’</span></span><br><span class="line">        <span class="keyword">if</span>(totalMoney &gt;= <span class="number">2</span>)&#123;</span><br><span class="line">            buyBeer(totalMoney);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ’åº">æ’åº</h2>
<h3 id="å†’æ³¡æ’åº">å†’æ³¡æ’åº</h3>
<p>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ï¼šä¸¤ä¸ªæ•°æ¯”è¾ƒå¤§å°ï¼Œè¾ƒå¤§çš„æ•°ä¸‹æ²‰ï¼Œè¾ƒå°çš„æ•°å†’èµ·æ¥</p>
<p>ç®—æ³•æè¿°ï¼šæ¯æ¬¡ä»æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ä¸¤ä¸¤æ¯”è¾ƒï¼ŒæŠŠè¾ƒå¤§çš„å…ƒç´ ä¸è¾ƒå°çš„å…ƒç´ è¿›è¡Œå±‚å±‚äº¤æ¢ï¼Œæœ€ç»ˆæŠŠå½“å‰æœ€å¤§çš„ä¸€ä¸ªå…ƒç´ å­˜å…¥åˆ°æ•°ç»„å½“å‰çš„æœ«å°¾</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>ç¡®å®šæ€»å…±éœ€è¦å†’å‡ è½®ï¼šæ•°ç»„çš„é•¿åº¦-1</li>
<li>æ¯è½®ä¸¤ä¸¤æ¯”è¾ƒå‡ æ¬¡</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif" alt="img"></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0 1ä½ç½®æ¯”è¾ƒï¼Œå¤§çš„æ”¾åé¢ï¼Œç„¶å1 2ä½ç½®æ¯”è¾ƒï¼Œå¤§çš„ç»§ç»­æ”¾åé¢ï¼Œä¸€è½®å¾ªç¯æœ€åä¸€ä½æ˜¯æœ€å¤§å€¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSort</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        <span class="type">int</span> flag;<span class="comment">//æ ‡è®°æœ¬è¶Ÿæ’åºæ˜¯å¦å‘ç”Ÿäº†äº¤æ¢</span></span><br><span class="line">        <span class="comment">//æ¯”è¾ƒiå’Œi+1ï¼Œä¸éœ€è¦å†æ¯”æœ€åä¸€ä¸ªä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            flag = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//æœ€åiä½ä¸éœ€è¦æ¯”ï¼Œå·²ç»æ’åºå¥½</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="type">int</span> temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                    flag = <span class="number">1</span>;<span class="comment">//å‘ç”Ÿäº†äº¤æ¢</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯æ˜å·²ç»æœ‰åºï¼Œä¸éœ€è¦ç»§ç»­æ’åºï¼ŒèŠ‚çœæ—¶é—´</span></span><br><span class="line">            <span class="keyword">if</span>(flag == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.<span class="built_in">println</span>(Arrays.<span class="built_in">toString</span>(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†’æ³¡æ’åºæ—¶é—´å¤æ‚åº¦ï¼šæœ€åæƒ…å†µ</p>
<ul>
<li>å…ƒç´ æ¯”è¾ƒçš„æ¬¡æ•°ä¸ºï¼š<code>(N-1)+(N-2)+(N-3)+...+2+1=((N-1)+1)*(N-1)/2=N^2/2-N/2</code></li>
<li>å…ƒç´ äº¤æ¢çš„æ¬¡æ•°ä¸ºï¼š<code>(N-1)+(N-2)+(N-3)+...+2+1=((N-1)+1)*(N-1)/2=N^2/2-N/2</code></li>
<li>æ€»æ‰§è¡Œæ¬¡æ•°ä¸ºï¼š<code>(N^2/2-N/2)+(N^2/2-N/2)=N^2-N</code></li>
</ul>
<p>æŒ‰ç…§å¤§ O æ¨å¯¼æ³•åˆ™ï¼Œä¿ç•™å‡½æ•°ä¸­çš„æœ€é«˜é˜¶é¡¹é‚£ä¹ˆæœ€ç»ˆå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(N^2)</p>
<h3 id="é€‰æ‹©æ’åº">é€‰æ‹©æ’åº</h3>
<h4 id="ç®€å•é€‰æ‹©">ç®€å•é€‰æ‹©</h4>
<p>é€‰æ‹©æ’åºï¼ˆSelection-sortï¼‰ï¼šä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•</p>
<p>ç®—æ³•æè¿°ï¼šé¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>æ§åˆ¶é€‰æ‹©å‡ è½®ï¼šæ•°ç»„çš„é•¿åº¦ - 1</li>
<li>æ§åˆ¶æ¯è½®ä»å½“å‰ä½ç½®å¼€å§‹æ¯”è¾ƒå‡ æ¬¡</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F.gif" alt="img"></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SelectSort</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//è·å–æœ€å°ç´¢å¼•ä½ç½®</span></span><br><span class="line">            <span class="type">int</span> minIndex = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[minIndex] &gt; arr[j]) &#123;</span><br><span class="line">                    minIndex = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//äº¤æ¢å…ƒç´ </span></span><br><span class="line">            <span class="type">int</span> temp = arr[i];</span><br><span class="line">            arr[i] = arr[minIndex];</span><br><span class="line">            arr[minIndex] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.<span class="built_in">println</span>(Arrays.<span class="built_in">toString</span>(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€‰æ‹©æ’åºæ—¶é—´å¤æ‚åº¦ï¼š</p>
<ul>
<li>æ•°æ®æ¯”è¾ƒæ¬¡æ•°ï¼š<code>(N-1)+(N-2)+(N-3)+...+2+1=((N-1)+1)*(N-1)/2=N^2/2-N/2</code></li>
<li>æ•°æ®äº¤æ¢æ¬¡æ•°ï¼š<code>N-1</code></li>
<li>æ—¶é—´å¤æ‚åº¦ï¼š<code>N^2/2-N/2+ï¼ˆN-1ï¼‰=N^2/2+N/2-1</code></li>
</ul>
<p>æ ¹æ®å¤§ O æ¨å¯¼æ³•åˆ™ï¼Œä¿ç•™æœ€é«˜é˜¶é¡¹ï¼Œå»é™¤å¸¸æ•°å› å­ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N^2)</p>
<h4 id="å †æ’åº">å †æ’åº</h4>
<p>å †æ’åºï¼ˆHeapsortï¼‰æ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå †ç»“æ„æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰çˆ¶èŠ‚ç‚¹</p>
<p>ä¼˜å…ˆé˜Ÿåˆ—ï¼šå †æ’åºæ¯æ¬¡ä¸Šæµ®è¿‡ç¨‹éƒ½ä¼šå°†æœ€å¤§æˆ–è€…æœ€å°å€¼æ”¾åœ¨å †é¡¶ï¼Œåº”ç”¨äºä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥å°†ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ æµ®åˆ°å †é¡¶</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—ï¼ˆR1,R2â€¦.Rnï¼‰æ„å»ºæˆå¤§é¡¶å †ï¼Œå¹¶é€šè¿‡ä¸Šæµ®å¯¹å †è¿›è¡Œè°ƒæ•´ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼Œ<strong>å †é¡¶ä¸ºæœ€å¤§æ•°</strong></li>
<li>å°†å †é¡¶å…ƒç´  R[1] ä¸æœ€åä¸€ä¸ªå…ƒç´  R[n] äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒºï¼ˆR1,R2,â€¦â€¦Rn-1ï¼‰å’Œæ–°çš„æœ‰åºåŒº Rnï¼Œä¸”æ»¡è¶³ R[1,2â€¦n-1]&lt;=R[n]</li>
<li>äº¤æ¢åæ–°çš„å †é¡¶ R[1] å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒºï¼ˆR1,R2,â€¦â€¦Rn-1ï¼‰è°ƒæ•´ä¸ºæ–°å †ï¼Œç„¶åå†æ¬¡å°† R[1] ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒºï¼ˆR1,R2â€¦.Rn-2ï¼‰å’Œæ–°çš„æœ‰åºåŒºï¼ˆRn-1,Rnï¼‰ï¼Œä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸º n-1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆ</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%A0%86%E6%8E%92%E5%BA%8F.jpg" alt="img"></p>
<p>floorï¼šå‘ä¸‹å–æ•´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeapSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        heapSort(arr, arr.length - <span class="number">1</span>);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//highä¸ºæ•°ç»„æœ€å¤§ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="comment">//å»ºå †ï¼Œé€†æ’åºï¼Œå› ä¸ºå †æ’åºå®šä¹‰çš„äº¤æ¢é¡ºåºæ˜¯ä»å½“å‰ç»“ç‚¹å¾€ä¸‹äº¤æ¢ï¼Œé€†åºæ’å¯ä»¥é¿å…å¤šä½™çš„äº¤æ¢</span></span><br><span class="line">        <span class="comment">//iåˆå§‹å€¼æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œå¦‚æœå‚æ•°æ˜¯æ•°ç»„é•¿åº¦lenï¼Œåˆ™ i = len / 2 -1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (high - <span class="number">1</span>) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">//è°ƒæ•´å‡½æ•°</span></span><br><span class="line">            sift(arr, i, high);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä»å°¾ç´¢å¼•å¼€å§‹æ’åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> high; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">//å°†æœ€å¤§çš„èŠ‚ç‚¹æ”¾å…¥æœ«å°¾</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">            arr[<span class="number">0</span>] = arr[i];</span><br><span class="line">            arr[i] = temp;</span><br><span class="line">            <span class="comment">//ç»§ç»­å¯»æ‰¾æœ€å¤§çš„èŠ‚ç‚¹</span></span><br><span class="line">            sift(arr, <span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è°ƒæ•´å‡½æ•°ï¼Œè°ƒæ•´arr[low]çš„å…ƒç´ ï¼Œä»ç´¢å¼•lowåˆ°highçš„èŒƒå›´è°ƒæ•´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sift</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="comment">//æš‚å­˜è°ƒæ•´å…ƒç´ </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[low];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low, j = low * <span class="number">2</span> + <span class="number">1</span>;<span class="comment">//jæ˜¯å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (j &lt;= high) &#123;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰å³å­©å­ï¼Œå¹¶ä¸”æ¯”è¾ƒå·¦å³å­©å­ä¸­è¾ƒå¤§çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (j &lt; high &amp;&amp; arr[j] &lt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                j++;    <span class="comment">//æŒ‡å‘å³å­©å­</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp &lt; arr[j]) &#123;</span><br><span class="line">                arr[i] = arr[j];</span><br><span class="line">                i = j;  <span class="comment">//ç»§ç»­å‘ä¸‹è°ƒæ•´</span></span><br><span class="line">                j = <span class="number">2</span> * i + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//temp &gt; arr[j]ï¼Œè¯´æ˜ä¹Ÿå¤§äºjçš„å­©å­ï¼Œæ¢æµ‹ç»“æŸ</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†è¢«è°ƒæ•´çš„èŠ‚ç‚¹æ”¾å…¥æœ€ç»ˆçš„ä½ç½®</span></span><br><span class="line">        arr[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å †æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(nlogn)</p>
<h3 id="æ’å…¥æ’åº">æ’å…¥æ’åº</h3>
<h4 id="ç›´æ¥æ’å…¥">ç›´æ¥æ’å…¥</h4>
<p>æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰ï¼šåœ¨è¦æ’åºçš„ä¸€ç»„æ•°ä¸­ï¼Œå‡å®šå‰ n-1 ä¸ªæ•°å·²ç»æ’å¥½åºï¼Œç°åœ¨å°†ç¬¬ n ä¸ªæ•°æ’åˆ°è¿™ä¸ªæœ‰åºæ•°åˆ—ä¸­ï¼Œä½¿å¾—è¿™ n ä¸ªæ•°ä¹Ÿæ˜¯æ’å¥½é¡ºåºçš„ï¼Œå¦‚æ­¤åå¤å¾ªç¯ï¼Œç›´åˆ°å…¨éƒ¨æ’å¥½é¡ºåº</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.png" alt="img"></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InsertSort</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">                <span class="comment">// æ¯”è¾ƒç´¢å¼•jå¤„çš„å€¼å’Œç´¢å¼•j-1å¤„çš„å€¼ï¼Œ</span></span><br><span class="line">                <span class="comment">// å¦‚æœç´¢å¼•j-1å¤„çš„å€¼æ¯”ç´¢å¼•jå¤„çš„å€¼å¤§ï¼Œåˆ™äº¤æ¢æ•°æ®ï¼Œ</span></span><br><span class="line">                <span class="comment">// å¦‚æœä¸å¤§ï¼Œé‚£ä¹ˆå°±æ‰¾åˆ°åˆé€‚çš„ä½ç½®äº†ï¼Œé€€å‡ºå¾ªç¯å³å¯ï¼›</span></span><br><span class="line">                <span class="keyword">if</span> (arr[j - <span class="number">1</span>] &gt; arr[j]) &#123;</span><br><span class="line">                    <span class="type">int</span> temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">                    arr[j - <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.<span class="built_in">println</span>(Arrays.<span class="built_in">toString</span>(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ’å…¥æ’åºæ—¶é—´å¤æ‚åº¦ï¼š</p>
<ul>
<li>æ¯”è¾ƒçš„æ¬¡æ•°ä¸ºï¼š<code>(N-1)+(N-2)+(N-3)+...+2+1=((N-1)+1)*(N-1)/2=N^2/2-N/2</code></li>
<li>äº¤æ¢çš„æ¬¡æ•°ä¸ºï¼š<code>(N-1)+(N-2)+(N-3)+...+2+1=((N-1)+1)(N-1)/2=N^2/2-N/2</code></li>
<li>æ€»æ‰§è¡Œæ¬¡æ•°ä¸ºï¼š<code>(N^2/2-N/2)+(N^2/2-N/2)=N^2-N</code></li>
</ul>
<p>æŒ‰ç…§å¤§ O æ¨å¯¼æ³•åˆ™ï¼Œä¿ç•™å‡½æ•°ä¸­çš„æœ€é«˜é˜¶é¡¹é‚£ä¹ˆæœ€ç»ˆæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(N^2)</p>
<h4 id="å¸Œå°”æ’åº">å¸Œå°”æ’åº</h4>
<p>å¸Œå°”æ’åºï¼ˆShell Sortï¼‰ï¼šä¹Ÿæ˜¯ä¸€ç§æ’å…¥æ’åºï¼Œä¹Ÿç§°ä¸ºç¼©å°å¢é‡æ’åº</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>é€‰å®šä¸€ä¸ªå¢é•¿é‡ hï¼ŒæŒ‰ç…§å¢é•¿é‡ h ä½œä¸ºæ•°æ®åˆ†ç»„çš„ä¾æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„</li>
<li>å¯¹åˆ†å¥½ç»„çš„æ¯ä¸€ç»„æ•°æ®å®Œæˆæ’å…¥æ’åº</li>
<li>å‡å°å¢é•¿é‡ï¼Œæœ€å°å‡ä¸º 1ï¼Œé‡å¤ç¬¬äºŒæ­¥æ“ä½œ</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F.png" alt="img"></p>
<p>å¸Œå°”æ’åºçš„æ ¸å¿ƒåœ¨äºé—´éš”åºåˆ—çš„è®¾å®šï¼Œæ—¢å¯ä»¥æå‰è®¾å®šå¥½é—´éš”åºåˆ—ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€çš„å®šä¹‰é—´éš”åºåˆ—ï¼Œå¸Œå°”æ’åºå°±æ˜¯æ’å…¥æ’åºå¢åŠ äº†é—´éš”</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShellSort</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        <span class="comment">// ç¡®å®šå¢é•¿é‡hçš„åˆå§‹å€¼</span></span><br><span class="line">        <span class="type">int</span> h = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (h &lt; arr.length / <span class="number">2</span>) &#123;</span><br><span class="line">            h = <span class="number">2</span> * h + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¸Œå°”æ’åº</span></span><br><span class="line">        <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°å¾…æ’å…¥çš„å…ƒç´ </span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = h; i &lt; arr.length; i++) &#123;</span><br><span class="line">                <span class="comment">// æŠŠå¾…æ’å…¥çš„å…ƒç´ æ’åˆ°æœ‰åºæ•°åˆ—ä¸­</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = i; j &gt;= h; j -= h) &#123;</span><br><span class="line">                    <span class="comment">// å¾…æ’å…¥çš„å…ƒç´ æ˜¯arr[j]ï¼Œæ¯”è¾ƒarr[j]å’Œarr[j-h]</span></span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &lt; arr[j - h]) &#123;</span><br><span class="line">                        <span class="type">int</span> temp = arr[j];</span><br><span class="line">                        arr[j] = arr[j - h];</span><br><span class="line">                        arr[j - h] = temp;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‡å°hçš„å€¼ï¼Œå‡å°è§„åˆ™ä¸ºï¼š</span></span><br><span class="line">            h = h / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.<span class="built_in">println</span>(Arrays.<span class="built_in">toString</span>(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å¸Œå°”æ’åºä¸­ï¼Œå¢é•¿é‡ h å¹¶æ²¡æœ‰å›ºå®šçš„è§„åˆ™ï¼Œæœ‰å¾ˆå¤šè®ºæ–‡ç ”ç©¶äº†å„ç§ä¸åŒçš„é€’å¢åºåˆ—ï¼Œä½†éƒ½æ— æ³•è¯æ˜æŸä¸ªåºåˆ—æ˜¯æœ€å¥½çš„ï¼Œæ‰€ä»¥å¯¹äºå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†æå°±è®¤ä¸º O(nlogn)</p>
<h3 id="å½’å¹¶æ’åº">å½’å¹¶æ’åº</h3>
<h4 id="å®ç°æ–¹å¼">å®ç°æ–¹å¼</h4>
<p>å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰ï¼šå»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œè¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•çš„å…¸å‹çš„åº”ç”¨ã€‚å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—ï¼›å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åºã€‚è‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸ºäºŒè·¯å½’å¹¶ã€‚</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>ä¸€ç»„æ•°æ®æ‹†åˆ†æˆä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„å­ç»„ï¼Œå¹¶å¯¹æ¯ä¸€ä¸ªå­ç»„ç»§ç»­æ‹†åˆ†ï¼Œç›´åˆ°æ‹†åˆ†åçš„æ¯ä¸ªå­ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯1ä¸ºæ­¢</li>
<li>å°†ç›¸é‚»çš„ä¸¤ä¸ªå­ç»„è¿›è¡Œåˆå¹¶æˆä¸€ä¸ªæœ‰åºçš„å¤§ç»„</li>
<li>ä¸æ–­çš„é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æœ€ç»ˆåªæœ‰ä¸€ä¸ªç»„ä¸ºæ­¢</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F.png" alt="img"></p>
<p>å½’å¹¶æ­¥éª¤ï¼šæ¯æ¬¡æ¯”è¾ƒä¸¤ç«¯æœ€å°çš„å€¼ï¼ŒæŠŠæœ€å°çš„å€¼æ”¾åœ¨è¾…åŠ©æ•°ç»„çš„å·¦è¾¹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BD%92%E5%B9%B6%E6%AD%A5%E9%AA%A41.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BD%92%E5%B9%B6%E6%AD%A5%E9%AA%A42.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BD%92%E5%B9%B6%E6%AD%A5%E9%AA%A43.png" alt="img"></p>
<h4 id="å®ç°ä»£ç ">å®ç°ä»£ç </h4>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> MergeSort &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> arr = <span class="keyword">new</span> <span class="built_in">int</span><span class="literal">[]</span>&#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        merge<span class="constructor">Sort(<span class="params">arr</span>, 0, <span class="params">arr</span>.<span class="params">length</span> - 1)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">arr</span>)</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// lowä¸ºarræœ€å°ç´¢å¼•ï¼Œhighä¸ºæœ€å¤§ç´¢å¼•</span></span><br><span class="line">    public static void merge<span class="constructor">Sort(<span class="params">int</span>[] <span class="params">arr</span>, <span class="params">int</span> <span class="params">low</span>, <span class="params">int</span> <span class="params">high</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// low == high æ—¶è¯´æ˜åªæœ‰ä¸€ä¸ªå…ƒç´ äº†ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">            <span class="built_in">int</span> mid = (low + high)<span class="operator"> / </span><span class="number">2</span>;</span><br><span class="line">            merge<span class="constructor">Sort(<span class="params">arr</span>, <span class="params">low</span>, <span class="params">mid</span>)</span>;		<span class="comment">// å½’å¹¶æ’åºå‰åŠæ®µ</span></span><br><span class="line">            merge<span class="constructor">Sort(<span class="params">arr</span>, <span class="params">mid</span> + 1, <span class="params">high</span>)</span>;	<span class="comment">// å½’å¹¶æ’åºååŠæ®µ</span></span><br><span class="line">            merge(arr, low, mid, high);		<span class="comment">// å°†ä¸¤æ®µæœ‰åºæ®µåˆæˆä¸€æ®µæœ‰åºæ®µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> static void merge(<span class="built_in">int</span><span class="literal">[]</span> arr, <span class="built_in">int</span> low, <span class="built_in">int</span> mid, <span class="built_in">int</span> high) &#123;</span><br><span class="line">        <span class="built_in">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å®šä¹‰å·¦å³æŒ‡é’ˆ</span></span><br><span class="line">        <span class="built_in">int</span> left = low, right = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> assist = <span class="keyword">new</span> <span class="built_in">int</span><span class="literal">[<span class="identifier">high</span> - <span class="identifier">low</span> + <span class="number">1</span>]</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (left &lt;= mid<span class="operator"> &amp;&amp; </span>right &lt;= high) &#123;</span><br><span class="line">            assist<span class="literal">[<span class="identifier">index</span><span class="operator">++</span>]</span> = arr<span class="literal">[<span class="identifier">left</span>]</span> &lt; arr<span class="literal">[<span class="identifier">right</span>]</span> ? arr<span class="literal">[<span class="identifier">left</span><span class="operator">++</span>]</span> : arr<span class="literal">[<span class="identifier">right</span><span class="operator">++</span>]</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= mid) &#123;</span><br><span class="line">            assist<span class="literal">[<span class="identifier">index</span><span class="operator">++</span>]</span> = arr<span class="literal">[<span class="identifier">left</span><span class="operator">++</span>]</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (right &lt;= high) &#123;</span><br><span class="line">            assist<span class="literal">[<span class="identifier">index</span><span class="operator">++</span>]</span> = arr<span class="literal">[<span class="identifier">right</span><span class="operator">++</span>]</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> k = <span class="number">0</span>; k &lt; assist.length; k++) &#123;</span><br><span class="line">            arr<span class="literal">[<span class="identifier">low</span><span class="operator">++</span>]</span> = assist<span class="literal">[<span class="identifier">k</span>]</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.png" alt="img"></p>
<p>ç”¨æ ‘çŠ¶å›¾æ¥æè¿°å½’å¹¶ï¼Œå‡è®¾å…ƒç´ çš„ä¸ªæ•°ä¸º nï¼Œé‚£ä¹ˆä½¿ç”¨å½’å¹¶æ’åºæ‹†åˆ†çš„æ¬¡æ•°ä¸º <code>log2(n)</code>ï¼Œå³å±‚æ•°ï¼Œæ¯æ¬¡å½’å¹¶éœ€è¦åš n æ¬¡å¯¹æ¯”ï¼Œæœ€ç»ˆå¾—å‡ºçš„å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º <code>log2(n)*n</code>ï¼Œæ ¹æ®å¤§Oæ¨å¯¼æ³•åˆ™ï¼Œå¿½ç•¥åº•æ•°ï¼Œæœ€ç»ˆå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)</p>
<p>å½’å¹¶æ’åºçš„ç¼ºç‚¹ï¼šéœ€è¦ç”³è¯·é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œå¯¼è‡´ç©ºé—´å¤æ‚åº¦æå‡ï¼Œæ˜¯å…¸å‹çš„<strong>ä»¥ç©ºé—´æ¢æ—¶é—´</strong>çš„æ“ä½œ</p>
<h3 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h3>
<p>å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰ï¼šé€šè¿‡<strong>åˆ†æ²»æ€æƒ³</strong>å¯¹å†’æ³¡æ’åºçš„æ”¹è¿›ï¼ŒåŸºæœ¬è¿‡ç¨‹æ˜¯é€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—</p>
<p>å®ç°æ€è·¯ï¼š</p>
<ol>
<li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºåŸºå‡†ï¼ˆpivotï¼‰</li>
<li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ï¼Œåœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ï¼Œè¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼›</li>
<li>é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åº</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.gif" alt="img"></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> QuickSort &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> arr = &#123;<span class="number">55</span>, <span class="number">22</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        quick<span class="constructor">Sort(<span class="params">arr</span>, 0, <span class="params">arr</span>.<span class="params">length</span> - 1)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">arr</span>)</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void quick<span class="constructor">Sort(<span class="params">int</span>[] <span class="params">arr</span>, <span class="params">int</span> <span class="params">low</span>, <span class="params">int</span> <span class="params">high</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// é€’å½’ç»“æŸçš„æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (low &gt;= high) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">int</span> left = low;</span><br><span class="line">        <span class="built_in">int</span> right = high;</span><br><span class="line">        <span class="comment">// åŸºå‡†æ•°</span></span><br><span class="line">        <span class="built_in">int</span> temp = arr<span class="literal">[<span class="identifier">left</span>]</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="comment">// ç”¨ &gt;= å¯ä»¥é˜²æ­¢å¤šä½™çš„äº¤æ¢</span></span><br><span class="line">            <span class="keyword">while</span> (arr<span class="literal">[<span class="identifier">right</span>]</span> &gt;= temp<span class="operator"> &amp;&amp; </span>right &gt; left) &#123;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åšåˆ¤æ–­é˜²æ­¢ç›¸ç­‰</span></span><br><span class="line">            <span class="keyword">if</span> (right &gt; left) &#123;</span><br><span class="line">                <span class="comment">// åˆ°è¿™é‡Œè¯´æ˜ arr[right] &lt; temp </span></span><br><span class="line">                arr<span class="literal">[<span class="identifier">left</span>]</span> = arr<span class="literal">[<span class="identifier">right</span>]</span>;<span class="comment">// æ­¤æ—¶æŠŠarr[right]å…ƒç´ è§†ä¸ºç©º</span></span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (arr<span class="literal">[<span class="identifier">left</span>]</span> &lt;= temp<span class="operator"> &amp;&amp; </span>left &lt; right) &#123;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (right &gt; left) &#123;</span><br><span class="line">                arr<span class="literal">[<span class="identifier">right</span>]</span> = arr<span class="literal">[<span class="identifier">left</span>]</span>;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// left == right</span></span><br><span class="line">        arr<span class="literal">[<span class="identifier">left</span>]</span> = temp;</span><br><span class="line">        quick<span class="constructor">Sort(<span class="params">arr</span>, <span class="params">low</span>, <span class="params">left</span>-1)</span>;</span><br><span class="line">        quick<span class="constructor">Sort(<span class="params">arr</span>, <span class="params">right</span> + 1, <span class="params">high</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¿«é€Ÿæ’åºå’Œå½’å¹¶æ’åºçš„åŒºåˆ«ï¼š</p>
<ul>
<li>å¿«é€Ÿæ’åºæ˜¯å¦å¤–ä¸€ç§åˆ†æ²»çš„æ’åºç®—æ³•ï¼Œå°†ä¸€ä¸ªæ•°ç»„åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œå°†ä¸¤éƒ¨åˆ†ç‹¬ç«‹çš„æ’åº</li>
<li>å½’å¹¶æ’åºçš„å¤„ç†è¿‡ç¨‹æ˜¯ç”±ä¸‹åˆ°ä¸Šçš„ï¼Œå…ˆå¤„ç†å­é—®é¢˜ï¼Œç„¶åå†åˆå¹¶ã€‚è€Œå¿«æ’æ­£å¥½ç›¸åï¼Œå®ƒçš„å¤„ç†è¿‡ç¨‹æ˜¯ç”±ä¸Šåˆ°ä¸‹çš„ï¼Œå…ˆåˆ†åŒºï¼Œç„¶åå†å¤„ç†å­é—®é¢˜</li>
<li>å¿«é€Ÿæ’åºå’Œå½’å¹¶æ’åºæ˜¯äº’è¡¥çš„ï¼šå½’å¹¶æ’åºå°†æ•°ç»„åˆ†æˆä¸¤ä¸ªå­æ•°ç»„åˆ†åˆ«æ’åºï¼Œå¹¶å°†æœ‰åºçš„å­æ•°ç»„å½’å¹¶ä»è€Œå°†æ•´ä¸ªæ•°ç»„æ’åºï¼Œè€Œå¿«é€Ÿæ’åºçš„æ–¹å¼åˆ™æ˜¯å½“ä¸¤ä¸ªæ•°ç»„éƒ½æœ‰åºæ—¶ï¼Œæ•´ä¸ªæ•°ç»„è‡ªç„¶å°±æœ‰åºäº†</li>
<li>åœ¨å½’å¹¶æ’åºä¸­ï¼Œä¸€ä¸ªæ•°ç»„è¢«ç­‰åˆ†ä¸ºä¸¤åŠï¼Œå½’å¹¶è°ƒç”¨å‘ç”Ÿåœ¨å¤„ç†æ•´ä¸ªæ•°ç»„ä¹‹å‰ï¼Œåœ¨å¿«é€Ÿæ’åºä¸­ï¼Œåˆ‡åˆ†æ•°ç»„çš„ä½ç½®å–å†³äºæ•°ç»„çš„å†…å®¹ï¼Œé€’å½’è°ƒç”¨å‘ç”Ÿåœ¨å¤„ç†æ•´ä¸ªæ•°ç»„ä¹‹å</li>
</ul>
<p>æ—¶é—´å¤æ‚åº¦ï¼š</p>
<ul>
<li>
<p>æœ€ä¼˜æƒ…å†µï¼šæ¯ä¸€æ¬¡åˆ‡åˆ†é€‰æ‹©çš„åŸºå‡†æ•°å­—åˆšå¥½å°†å½“å‰åºåˆ—ç­‰åˆ†ã€‚æŠŠæ•°ç»„çš„åˆ‡åˆ†çœ‹åšæ˜¯ä¸€ä¸ªæ ‘ï¼Œå…±åˆ‡åˆ†äº† logn æ¬¡ï¼Œæ‰€ä»¥ï¼Œæœ€ä¼˜æƒ…å†µä¸‹å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)</p>
</li>
<li>
<p>æœ€åæƒ…å†µï¼šæ¯ä¸€æ¬¡åˆ‡åˆ†é€‰æ‹©çš„åŸºå‡†æ•°å­—æ˜¯å½“å‰åºåˆ—ä¸­æœ€å¤§æ•°æˆ–è€…æœ€å°æ•°ï¼Œè¿™ä½¿å¾—æ¯æ¬¡åˆ‡åˆ†éƒ½ä¼šæœ‰ä¸€ä¸ªå­ç»„ï¼Œé‚£ä¹ˆæ€»å…±å°±å¾—åˆ‡åˆ†næ¬¡ï¼Œæ‰€ä»¥æœ€åæƒ…å†µä¸‹ï¼Œå¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%BF%AB%E6%8E%92%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.png" alt="img"></p>
</li>
<li>
<p>å¹³å‡æƒ…å†µï¼šæ¯ä¸€æ¬¡åˆ‡åˆ†é€‰æ‹©çš„åŸºå‡†æ•°å­—ä¸æ˜¯æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œä¹Ÿä¸æ˜¯ä¸­å€¼ï¼Œè¿™ç§æƒ…å†µç”¨æ•°å­¦å½’çº³æ³•è¯æ˜ï¼Œå¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)</p>
</li>
</ul>
<p>æ¨èè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1b7411N798?t=1001&amp;p=81">https://www.bilibili.com/video/BV1b7411N798?t=1001&amp;p=81</a></p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/nrsc272420199/article/details/82587933">https://blog.csdn.net/nrsc272420199/article/details/82587933</a></p>
<h3 id="åŸºæ•°æ’åº">åŸºæ•°æ’åº</h3>
<p>åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰ï¼šåˆå«æ¡¶æ’åºå’Œç®±æ’åºï¼Œå€ŸåŠ©å¤šå…³é”®å­—æ’åºçš„æ€æƒ³å¯¹å•é€»è¾‘å…³é”®å­—è¿›è¡Œæ’åºçš„æ–¹æ³•</p>
<p>è®¡æ•°æ’åºå…¶å®æ˜¯æ¡¶æ’åºçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå½“è¦æ’åºçš„ n ä¸ªæ•°æ®ï¼Œæ‰€å¤„çš„èŒƒå›´å¹¶ä¸å¤§çš„æ—¶å€™ï¼Œæ¯”å¦‚æœ€å¤§å€¼æ˜¯ kï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ•°æ®åˆ’åˆ†æˆ k ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶å†…çš„æ•°æ®å€¼éƒ½æ˜¯ç›¸åŒçš„ï¼Œçœæ‰äº†æ¡¶å†…æ’åºçš„æ—¶é—´</p>
<p>æŒ‰ç…§ä½ä½å…ˆæ’åºï¼Œç„¶åæ”¶é›†ï¼›å†æŒ‰ç…§é«˜ä½æ’åºï¼Œç„¶åå†æ”¶é›†ï¼›ä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æœ€é«˜ä½ã€‚æœ‰æ—¶å€™æœ‰äº›å±æ€§æ˜¯æœ‰ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œå…ˆæŒ‰ä½ä¼˜å…ˆçº§æ’åºï¼Œå†æŒ‰é«˜ä¼˜å…ˆçº§æ’åºã€‚æœ€åçš„æ¬¡åºå°±æ˜¯é«˜ä¼˜å…ˆçº§é«˜çš„åœ¨å‰ï¼Œé«˜ä¼˜å…ˆçº§ç›¸åŒçš„ä½ä¼˜å…ˆçº§é«˜çš„åœ¨å‰</p>
<p>è§£é‡Šï¼šå…ˆæ’ä½ä½å†æ’é«˜ä½ï¼Œå¯ä»¥è¯´æ˜åœ¨é«˜ä½ç›¸ç­‰çš„æƒ…å†µä¸‹ä½ä½æ˜¯é€’å¢çš„ï¼Œå¦‚æœé«˜ä½ä¹Ÿæ˜¯é€’å¢ï¼Œåˆ™æ•°æ®æœ‰åº</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F.gif" alt="img"></p>
<p>å®ç°æ€è·¯ï¼š</p>
<ul>
<li>è·å¾—æœ€å¤§æ•°çš„ä½æ•°ï¼Œå¯ä»¥é€šè¿‡å°†æœ€å¤§æ•°å˜ä¸º String ç±»å‹ï¼Œå†æ±‚é•¿åº¦</li>
<li>å°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œ<strong>ä½æ•°è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶</strong></li>
<li>ä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åº</li>
<li>ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½ï¼ˆä¸ªä½ â†’ åä½ â†’ ç™¾ä½ â†’ â€¦ â†’æœ€é«˜ä½ï¼‰æ’åºå®Œæˆä»¥åï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BucketSort</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="type">int</span>[]&#123;<span class="number">576</span>, <span class="number">22</span>, <span class="number">26</span>, <span class="number">548</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">843</span>, <span class="number">536</span>, <span class="number">735</span>, <span class="number">43</span>, <span class="number">3</span>, <span class="number">912</span>, <span class="number">88</span>&#125;;</span><br><span class="line">        <span class="built_in">bucketSort</span>(arr);</span><br><span class="line">        System.out.<span class="built_in">println</span>(Arrays.<span class="built_in">toString</span>(arr));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="type">static</span> <span class="type">void</span> <span class="title">bucketSort</span><span class="params">(<span class="type">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¡¶çš„ä¸ªæ•°å›ºå®šä¸º10ä¸ªï¼ˆä¸ªä½æ˜¯0~9ï¼‰ï¼Œæ•°ç»„é•¿åº¦ä¸ºäº†é˜²æ­¢æ‰€æœ‰çš„æ•°åœ¨åŒä¸€è¡Œ</span></span><br><span class="line">        <span class="type">int</span>[][] bucket = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>][arr.length];</span><br><span class="line">        <span class="comment">//è®°å½•æ¯ä¸ªæ¡¶ä¸­çš„æœ‰å¤šå°‘ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="type">int</span>[] elementCounts = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ•°ç»„çš„æœ€å¤§å…ƒç´ </span></span><br><span class="line">        <span class="type">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            max = max &gt; arr[i] ? max : arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> maxEle = Integer.<span class="built_in">toString</span>(max);</span><br><span class="line">        <span class="comment">//å°†æ•°ç»„ä¸­çš„å…ƒç´ æ”¾å…¥æ¡¶ä¸­ï¼Œæœ€å¤§æ•°çš„ä½æ•°ç›¸å½“äºéœ€è¦å‡ æ¬¡æ”¾å…¥æ¡¶ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, step = <span class="number">1</span>; i &lt; maxEle.<span class="built_in">length</span>(); i++, step *= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">                <span class="comment">//è·å–æœ€åä¸€ä½çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•</span></span><br><span class="line">                <span class="type">int</span> index = (arr[j] / step) % <span class="number">10</span>;</span><br><span class="line">                <span class="comment">//æ”¾å…¥å…·ä½“ä½ç½®</span></span><br><span class="line">                bucket[index][elementCounts[index]] = arr[j];</span><br><span class="line">                <span class="comment">//å­˜å‚¨æ¯ä¸ªæ¡¶çš„æ•°é‡</span></span><br><span class="line">                elementCounts[index]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ”¶é›†å›æ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>, index = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">                <span class="comment">//å…ˆè¿›å…ˆå‡º</span></span><br><span class="line">                <span class="type">int</span> position = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">//æ¡¶ä¸­æœ‰å…ƒç´ å°±å–å‡º</span></span><br><span class="line">                <span class="keyword">while</span> (elementCounts[j] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    arr[index] = bucket[j][position];</span><br><span class="line">                    elementCounts[j]--;</span><br><span class="line">                    position++;</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç©ºé—´æ¢æ—¶é—´</p>
<p>æ¨èè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1b7411N798?p=86">https://www.bilibili.com/video/BV1b7411N798?p=86</a></p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.toutiao.com/a6593273307280179715/?iid=6593273307280179715">https://www.toutiao.com/a6593273307280179715/?iid=6593273307280179715</a></p>
<h3 id="ç®—æ³•æ€»ç»“">ç®—æ³•æ€»ç»“</h3>
<h4 id="ç¨³å®šæ€§">ç¨³å®šæ€§</h4>
<p>ç¨³å®šæ€§ï¼šåœ¨å¾…æ’åºçš„è®°å½•åºåˆ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„è®°å½•ï¼Œè‹¥ç»è¿‡æ’åºï¼Œè¿™äº›è®°å½•çš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ï¼Œå³åœ¨åŸåºåˆ—ä¸­ <code>r[i]=r[j]</code>ï¼Œä¸” r[i] åœ¨ r[j] ä¹‹å‰ï¼Œè€Œåœ¨æ’åºåçš„åºåˆ—ä¸­ï¼Œr[i] ä»åœ¨ r[j] ä¹‹å‰ï¼Œåˆ™ç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼Œå¦åˆ™ç§°ä¸ºä¸ç¨³å®šçš„</p>
<p>å¦‚æœä¸€ç»„æ•°æ®åªéœ€è¦ä¸€æ¬¡æ’åºï¼Œåˆ™ç¨³å®šæ€§ä¸€èˆ¬æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå¦‚æœä¸€ç»„æ•°æ®éœ€è¦å¤šæ¬¡æ’åºï¼Œç¨³å®šæ€§æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E7%A8%B3%E5%AE%9A%E6%80%A7.png" alt="img"></p>
<ul>
<li>å†’æ³¡æ’åºï¼šåªæœ‰å½“ <code>arr[i]&gt;arr[i+1]</code> çš„æ—¶å€™ï¼Œæ‰ä¼šäº¤æ¢å…ƒç´ çš„ä½ç½®ï¼Œè€Œç›¸ç­‰çš„æ—¶å€™å¹¶ä¸äº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥å†’æ³¡æ’åºæ˜¯ä¸€ç§ç¨³å®šæ’åºç®—æ³•</li>
<li>é€‰æ‹©æ’åºï¼šæ˜¯ç»™æ¯ä¸ªä½ç½®é€‰æ‹©å½“å‰å…ƒç´ æœ€å°çš„ï¼Œä¾‹å¦‚æœ‰æ•°æ®{5(1)ï¼Œ8 ï¼Œ5(2)ï¼Œ 3ï¼Œ 9 }ï¼Œç¬¬ä¸€éé€‰æ‹©åˆ°çš„æœ€å°å…ƒç´ ä¸º3ï¼Œæ‰€ä»¥5(1)ä¼šå’Œ3è¿›è¡Œäº¤æ¢ä½ç½®ï¼Œæ­¤æ—¶5(1)åˆ°äº†5(2)åé¢ï¼Œç ´åäº†ç¨³å®šæ€§ï¼Œæ‰€ä»¥æ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³•</li>
<li>æ’å…¥æ’åºï¼šæ¯”è¾ƒæ˜¯ä»æœ‰åºåºåˆ—çš„æœ«å°¾å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯æƒ³è¦æ’å…¥çš„å…ƒç´ å’Œå·²ç»æœ‰åºçš„æœ€å¤§è€…å¼€å§‹æ¯”èµ·ï¼Œå¦‚æœæ¯”å®ƒå¤§åˆ™ç›´æ¥æ’å…¥åœ¨å…¶åé¢ï¼Œå¦åˆ™ä¸€ç›´å¾€å‰æ‰¾ç›´åˆ°æ‰¾åˆ°å®ƒè¯¥æ’å…¥çš„ä½ç½®ã€‚å¦‚æœç¢°è§ä¸€ä¸ªå’Œæ’å…¥å…ƒç´ ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆæŠŠè¦æ’å…¥çš„å…ƒç´ æ”¾åœ¨ç›¸ç­‰å…ƒç´ çš„åé¢ã€‚ç›¸ç­‰å…ƒç´ çš„å‰åé¡ºåºæ²¡æœ‰æ”¹å˜ï¼Œä»åŸæ— åºåºåˆ—å‡ºå»çš„é¡ºåºå°±æ˜¯æ’å¥½åºåçš„é¡ºåºï¼Œæ‰€ä»¥æ’å…¥æ’åºæ˜¯ç¨³å®šçš„</li>
<li>å¸Œå°”æ’åºï¼šæŒ‰ç…§ä¸åŒæ­¥é•¿å¯¹å…ƒç´ è¿›è¡Œæ’å…¥æ’åºï¼Œè™½ç„¶ä¸€æ¬¡æ’å…¥æ’åºæ˜¯ç¨³å®šçš„ï¼Œä½†åœ¨ä¸åŒçš„æ’å…¥æ’åºè¿‡ç¨‹ä¸­ï¼Œç›¸åŒçš„å…ƒç´ å¯èƒ½åœ¨å„è‡ªçš„æ’å…¥æ’åºä¸­ç§»åŠ¨ï¼Œæœ€åå…¶ç¨³å®šæ€§å°±ä¼šè¢«æ‰“ä¹±ï¼Œæ‰€ä»¥å¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„</li>
<li>å½’å¹¶æ’åºåœ¨å½’å¹¶çš„è¿‡ç¨‹ä¸­ï¼Œåªæœ‰ `arr[i] çš„æ—¶å€™æ‰ä¼šäº¤æ¢ä½ç½®ï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ ç›¸ç­‰åˆ™ä¸ä¼šäº¤æ¢ä½ç½®ï¼Œæ‰€ä»¥å®ƒå¹¶ä¸ä¼šç ´åç¨³å®šæ€§ï¼Œå½’å¹¶æ’åºæ˜¯ç¨³å®šçš„</li>
<li>å¿«é€Ÿæ’åºï¼šå¿«æ’éœ€è¦ä¸€ä¸ªåŸºå‡†å€¼ï¼Œåœ¨åŸºå‡†å€¼çš„å³ä¾§æ‰¾ä¸€ä¸ªæ¯”åŸºå‡†å€¼å°çš„å…ƒç´ ï¼Œåœ¨åŸºå‡†å€¼çš„å·¦ä¾§æ‰¾ä¸€ä¸ªæ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ ï¼Œç„¶åäº¤æ¢è¿™ä¸¤ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶ä¼šç ´åç¨³å®šæ€§ï¼Œæ‰€ä»¥å¿«é€Ÿæ’åºæ˜¯ä¸€ç§ä¸ç¨³å®šçš„ç®—æ³•</li>
</ul>
<p>è®°å¿†å£è¯€ï¼š</p>
<ul>
<li>æƒ…ç»ªä¸ç¨³å®šï¼Œå¿«äº›é€‰ä¸€å †å¥½å‹æ¥èŠå¤©</li>
<li>å¿«ï¼šå¿«é€Ÿæ’åºã€äº›ï¼šå¸Œå°”æ’åºã€é€‰ï¼šé€‰æ‹©æ’åºã€å †ï¼šå †æ’åº</li>
</ul>
<h4 id="ç®—æ³•å¯¹æ¯”">ç®—æ³•å¯¹æ¯”</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Sort-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94.png" alt="img"></p>
<h4 id="è¡¥å……é—®é¢˜">è¡¥å……é—®é¢˜</h4>
<p>æµ·é‡æ•°æ®é—®é¢˜ï¼š</p>
<ul>
<li>æµ·é‡æ•°æ®æ’åºï¼š
<ul>
<li>å¤–éƒ¨æ’åºï¼šå½’å¹¶ + è´¥è€…æ ‘</li>
<li>åŸºæ•°æ’åºï¼š<a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/42038">https://time.geekbang.org/column/article/42038</a></li>
</ul>
</li>
<li>æµ·é‡æ•°æ®æŸ¥è¯¢ï¼š
<ul>
<li>å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨</li>
<li>æ„å»ºç´¢å¼•ï¼šB+ æ ‘ã€è·³è¡¨</li>
</ul>
</li>
</ul>
<h2 id="æŸ¥æ‰¾">æŸ¥æ‰¾</h2>
<p>æ­£å¸¸æŸ¥æ‰¾ï¼šä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹éå†ï¼Œä¸€ä¸ªä¸€ä¸ªçš„å¾€åæ‰¾ï¼Œç»¼åˆæŸ¥æ‰¾æ¯”è¾ƒè€—æ—¶</p>
<p>äºŒåˆ†æŸ¥æ‰¾ä¹Ÿç§°æŠ˜åŠæŸ¥æ‰¾ï¼ˆBinary Searchï¼‰æ˜¯ä¸€ç§æ•ˆç‡è¾ƒé«˜çš„æŸ¥æ‰¾æ–¹æ³•ï¼Œæ•°ç»„å¿…é¡»æ˜¯æœ‰åºæ•°ç»„</p>
<p>è¿‡ç¨‹ï¼šæ¯æ¬¡å…ˆä¸ä¸­é—´çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¤§äºå¾€å³è¾¹æ‰¾ï¼Œå¦‚æœå°äºå¾€å·¦è¾¹æ‰¾ï¼Œå¦‚æœç­‰äºå°±è¿”å›è¯¥å…ƒç´ ç´¢å¼•ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰è¯¥å…ƒç´ ï¼Œè¿”å› -1</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(logn)</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè®°å½•å¼€å§‹çš„ç´¢å¼•ä½ç½®å’Œç»“æŸçš„ç´¢å¼•ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">å–å‡ºä¸­é—´ç´¢å¼•ä½ç½®çš„å€¼ï¼Œæ‹¿å…ƒç´ ä¸ä¸­é—´ä½ç½®çš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå°äºä¸­é—´å€¼ï¼Œç»“æŸä½ç½®=ä¸­é—´ç´¢å¼•-1.</span></span><br><span class="line"><span class="comment">å–å‡ºä¸­é—´ç´¢å¼•ä½ç½®çš„å€¼ï¼Œæ‹¿å…ƒç´ ä¸ä¸­é—´ä½ç½®çš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¤§äºä¸­é—´å€¼ï¼Œå¼€å§‹ä½ç½®=ä¸­é—´ç´¢å¼•+1.</span></span><br><span class="line"><span class="comment">å¾ªç¯æ­£å¸¸æ‰§è¡Œçš„æ¡ä»¶ï¼šå¼€å§‹ä½ç½®ç´¢å¼•&lt;=ç»“æŸä½ç½®ç´¢å¼•ã€‚å¦åˆ™è¯´æ˜å¯»æ‰¾å®Œæ¯•ä½†æ˜¯æ²¡æœ‰è¯¥å…ƒç´ å€¼è¿”å›-1.*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">binarySearch</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">10</span>, <span class="number">14</span>, <span class="number">21</span>, <span class="number">38</span>, <span class="number">45</span>, <span class="number">47</span>, <span class="number">53</span>, <span class="number">81</span>, <span class="number">87</span>, <span class="number">99</span>&#125;;</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">&quot;81çš„ç´¢å¼•æ˜¯ï¼š&quot;</span> + <span class="built_in">binarySearch</span>(arr,<span class="number">81</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">binarySearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> des)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> end = arr.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¡®ä¿ä¸ä¼šå‡ºç°é‡å¤æŸ¥æ‰¾ï¼Œè¶Šç•Œ</span></span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end) &#123;</span><br><span class="line">            <span class="comment">// è®¡ç®—å‡ºä¸­é—´ç´¢å¼•å€¼</span></span><br><span class="line">            <span class="type">int</span> mid = (start + end) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (des == arr[mid]) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (des &gt; arr[mid]) &#123;</span><br><span class="line">                start = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (des &lt; arr[mid]) &#123;</span><br><span class="line">                end = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸Šè¿°å¾ªç¯æ‰§è¡Œå®Œæ¯•è¿˜æ²¡æœ‰è¿”å›ç´¢å¼•ï¼Œè¯´æ˜æ ¹æœ¬ä¸å­˜åœ¨è¯¥å…ƒç´ å€¼ï¼Œç›´æ¥è¿”å›-1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE.gif" alt="img"></p>
<p>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">binarySearch</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> des)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> end = arr.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (start + end) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (des == arr[mid]) &#123;</span><br><span class="line">                <span class="comment">//å¦‚æœ mid ç­‰äº 0ï¼Œé‚£è¿™ä¸ªå…ƒç´ å·²ç»æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‚£è‚¯å®šæ˜¯æˆ‘è¦æ‰¾çš„</span></span><br><span class="line">                <span class="keyword">if</span> (mid == <span class="number">0</span> || a[mid - <span class="number">1</span>] != des) &#123;</span><br><span class="line">                    <span class="keyword">return</span> mid;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//a[mid]å‰é¢çš„ä¸€ä¸ªå…ƒç´  a[mid-1]ä¹Ÿç­‰äº valueï¼Œ</span></span><br><span class="line">                    <span class="comment">//è¦æ‰¾çš„å…ƒç´ è‚¯å®šå‡ºç°åœ¨[low, mid-1]ä¹‹é—´</span></span><br><span class="line">                    high = mid - <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (des &gt; arr[mid]) &#123;</span><br><span class="line">                start = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (des &lt; arr[mid]) &#123;</span><br><span class="line">                end = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒ¹é…">åŒ¹é…</h2>
<h3 id="BF">BF</h3>
<p>Brute Force æš´åŠ›åŒ¹é…ç®—æ³•ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>&#123;</span><br><span class="line">    <span class="type">String</span> s = <span class="string">&quot;seazean&quot;</span>;</span><br><span class="line">    <span class="type">String</span> t = <span class="string">&quot;az&quot;</span>;</span><br><span class="line">    System.out.<span class="built_in">println</span>(<span class="built_in">match</span>(s,t));<span class="comment">//2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">int</span> <span class="title">match</span><span class="params">(<span class="type">String</span> s,<span class="type">String</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> i = k, j = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//é˜²æ­¢è¶Šç•Œ</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; s.<span class="built_in">length</span>() &amp;&amp; j &lt; t.<span class="built_in">length</span>()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.<span class="built_in">charAt</span>(i) == t.<span class="built_in">charAt</span>(j)) &#123;</span><br><span class="line">            ++i;</span><br><span class="line">            ++j;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            k++;</span><br><span class="line">            i = k;</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¯´æ˜æ˜¯åŒ¹é…æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> (j &gt;= t.<span class="built_in">length</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(m*n)</p>
<h3 id="RK">RK</h3>
<p>æŠŠä¸»ä¸²å¾—é•¿åº¦è®°ä¸º nï¼Œæ¨¡å¼ä¸²å¾—é•¿åº¦è®°ä¸º mï¼Œé€šè¿‡å“ˆå¸Œç®—æ³•å¯¹ä¸»ä¸²ä¸­çš„ n-m+1 ä¸ªå­ä¸²åˆ†åˆ«æ±‚å“ˆå¸Œå€¼ï¼Œç„¶åé€ä¸ªä¸æ¨¡å¼ä¸²çš„å“ˆå¸Œå€¼æ¯”è¾ƒå¤§å°ï¼Œå¦‚æœæŸä¸ªå­ä¸²çš„å“ˆå¸Œå€¼ä¸æ¨¡å¼ä¸²ç›¸ç­‰ï¼Œå†å»å¯¹æ¯”å€¼æ˜¯å¦ç›¸ç­‰ï¼ˆé˜²æ­¢å“ˆå¸Œå†²çªï¼‰ï¼Œé‚£å°±è¯´æ˜å¯¹åº”çš„å­ä¸²å’Œæ¨¡å¼ä¸²åŒ¹é…äº†</p>
<p>å› ä¸ºå“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ•°å­—ä¹‹é—´æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰æ˜¯éå¸¸å¿«é€Ÿçš„</p>
<p>ç¬¬ä¸€éƒ¨åˆ†è®¡ç®—å“ˆå¸Œå€¼çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œç¬¬äºŒéƒ¨åˆ†å¯¹æ¯”çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ•´ä½“å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œæœ€åä¸º O(n*m)</p>
<h3 id="KMP">KMP</h3>
<p>KMP åŒ¹é…ï¼š</p>
<ul>
<li>next æ•°ç»„çš„æ ¸å¿ƒå°±æ˜¯è‡ªå·±åŒ¹é…è‡ªå·±ï¼Œä¸»ä¸²ä»£è¡¨åç¼€ï¼Œæ¨¡å¼ä¸²ä»£è¡¨å‰ç¼€</li>
<li>nextVal æ•°ç»„çš„æ ¸å¿ƒå°±æ˜¯å›é€€å¤±é…</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> Kmp &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        String s = <span class="string">&quot;acababaabc&quot;</span>;</span><br><span class="line">        String t = <span class="string">&quot;abaabc&quot;</span>;</span><br><span class="line">        <span class="comment">//[-1, 0, 0, 1, 1, 2]</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">getNext</span>(<span class="params">t</span>)</span>));</span><br><span class="line">        <span class="comment">//[-1, 0, -1, 1, 0, 2]</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">getNextVal</span>(<span class="params">t</span>)</span>));</span><br><span class="line">        <span class="comment">//5</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(kmp(s, t));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> static <span class="built_in">int</span> kmp(String s, String t) &#123;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> next = get<span class="constructor">Next(<span class="params">t</span>)</span>;</span><br><span class="line">        <span class="built_in">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; s.length<span class="literal">()</span><span class="operator"> &amp;&amp; </span>j &lt; t.length<span class="literal">()</span>) &#123;</span><br><span class="line">            <span class="comment">//j==-1æ—¶è¯´æ˜ç¬¬ä¸€ä¸ªä½ç½®åŒ¹é…å¤±è´¥ï¼Œæ‰€ä»¥å°†sçš„ä¸‹ä¸€ä¸ªå’Œtçš„é¦–å­—ç¬¦æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">if</span> (j<span class="operator"> == </span>-<span class="number">1</span><span class="operator"> || </span>s.<span class="built_in">char</span><span class="constructor">At(<span class="params">i</span>)</span><span class="operator"> == </span>t.<span class="built_in">char</span><span class="constructor">At(<span class="params">j</span>)</span>) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                j++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//æ¨¡å¼ä¸²å³ç§»ï¼Œæ¯”è¾ƒsçš„å½“å‰ä½ç½®ä¸tçš„next[j]ä½ç½®</span></span><br><span class="line">                j = next<span class="literal">[<span class="identifier">j</span>]</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt;= t.length<span class="literal">()</span>) &#123;</span><br><span class="line">            return i - j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        return -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//nextæ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> static <span class="built_in">int</span><span class="literal">[]</span> get<span class="constructor">Next(String <span class="params">t</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> next = <span class="keyword">new</span> <span class="built_in">int</span><span class="literal">[<span class="identifier">t</span>.<span class="identifier">length</span>()]</span>;</span><br><span class="line">        next<span class="literal">[<span class="number">0</span>]</span> = -<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> j = -<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; t.length<span class="literal">()</span> - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®å·²çŸ¥çš„å‰jä½æ¨æµ‹ç¬¬j+1ä½</span></span><br><span class="line">            <span class="comment">// j=-1è¯´æ˜é¦–ä½å°±æ²¡æœ‰åŒ¹é…ï¼Œå³t[0]!=t[i]ï¼Œè¯´æ˜next[i+1]æ²¡æœ‰æœ€å¤§å‰ç¼€ï¼Œä¸º0</span></span><br><span class="line">            <span class="keyword">if</span> (j<span class="operator"> == </span>-<span class="number">1</span><span class="operator"> || </span>t.<span class="built_in">char</span><span class="constructor">At(<span class="params">i</span>)</span><span class="operator"> == </span>t.<span class="built_in">char</span><span class="constructor">At(<span class="params">j</span>)</span>) &#123;</span><br><span class="line">                <span class="comment">// å› ä¸ºæ¨¡å¼ä¸²å·²ç»åŒ¹é…åˆ°äº†ç´¢å¼•jå¤„ï¼Œè¯´æ˜ä¹‹å‰çš„ä½éƒ½æ˜¯ç›¸ç­‰çš„</span></span><br><span class="line">                <span class="comment">// å› ä¸ºæ˜¯è‡ªå·±åŒ¹é…è‡ªå·±ï¼Œæ‰€ä»¥æ¨¡å¼ä¸²å°±æ˜¯å‰ç¼€ï¼Œä¸»ä¸²å°±æ˜¯åç¼€ï¼Œjå°±æ˜¯æœ€é•¿å…¬å…±å‰ç¼€</span></span><br><span class="line">                <span class="comment">// å½“i+1ä½ç½®ä¸åŒ¹é…æ—¶ï¼ˆiä½ä¹‹å‰åŒ¹é…ï¼‰ï¼Œå¯ä»¥è·³è½¬åˆ°j+1ä½ç½®å¯¹æ¯”ï¼Œnext[i+1]=j+1</span></span><br><span class="line">                i++;</span><br><span class="line">                j++;</span><br><span class="line">                next<span class="literal">[<span class="identifier">i</span>]</span> = j;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//iä½ç½®çš„æ•°æ®å’Œjä½ç½®çš„ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥å›é€€å¯¹æ¯”iå’Œnext[j]ä½ç½®çš„æ•°æ®</span></span><br><span class="line">                j = next<span class="literal">[<span class="identifier">j</span>]</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        return next;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//nextVal</span></span><br><span class="line">    <span class="keyword">private</span> static <span class="built_in">int</span><span class="literal">[]</span> get<span class="constructor">NextVal(String <span class="params">t</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> nextVal = <span class="keyword">new</span> <span class="built_in">int</span><span class="literal">[<span class="identifier">t</span>.<span class="identifier">length</span>()]</span>;</span><br><span class="line">        nextVal<span class="literal">[<span class="number">0</span>]</span> = -<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> j = -<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; t.length<span class="literal">()</span> - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j<span class="operator"> == </span>-<span class="number">1</span><span class="operator"> || </span>t.<span class="built_in">char</span><span class="constructor">At(<span class="params">i</span>)</span><span class="operator"> == </span>t.<span class="built_in">char</span><span class="constructor">At(<span class="params">j</span>)</span>) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                j++;</span><br><span class="line">                <span class="comment">// å¦‚æœt[i+1] == t[next(i+1)]=next[j+1]ï¼Œå›é€€åä»ç„¶å¤±é…ï¼Œæ‰€ä»¥è¦ç»§ç»­å›é€€</span></span><br><span class="line">                <span class="keyword">if</span> (t.<span class="built_in">char</span><span class="constructor">At(<span class="params">i</span>)</span><span class="operator"> == </span>t.<span class="built_in">char</span><span class="constructor">At(<span class="params">j</span>)</span>) &#123;</span><br><span class="line">                    nextVal<span class="literal">[<span class="identifier">i</span>]</span> = nextVal<span class="literal">[<span class="identifier">j</span>]</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    nextVal<span class="literal">[<span class="identifier">i</span>]</span> = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                j = nextVal<span class="literal">[<span class="identifier">j</span>]</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return nextVal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹³å‡å’Œæœ€åæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(m+n)</p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/tangzhengyue/p/4315393.html">https://www.cnblogs.com/tangzhengyue/p/4315393.html</a></p>
<h2 id="æ ‘">æ ‘</h2>
<h3 id="äºŒå‰æ ‘">äºŒå‰æ ‘</h3>
<p>äºŒå‰æ ‘ä¸­ï¼Œä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„åº¦è¦å°äºç­‰äº 2</p>
<ul>
<li>èŠ‚ç‚¹ï¼šåœ¨æ ‘ç»“æ„ä¸­,æ¯ä¸€ä¸ªå…ƒç´ ç§°ä¹‹ä¸ºèŠ‚ç‚¹</li>
<li>åº¦ï¼šæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡ç§°ä¹‹ä¸ºåº¦</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="äºŒå‰æ ‘ç»“æ„å›¾"></p>
<h3 id="æ’åºæ ‘">æ’åºæ ‘</h3>
<h4 id="å­˜å‚¨ç»“æ„-3">å­˜å‚¨ç»“æ„</h4>
<p>äºŒå‰æ’åºæ ‘ï¼ˆBSTï¼‰ï¼Œåˆç§°äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…äºŒå‰æœç´¢æ ‘</p>
<ul>
<li>æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</li>
<li>å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºæ ¹èŠ‚ç‚¹çš„å€¼</li>
<li>å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæ ¹èŠ‚ç‚¹çš„å€¼</li>
<li>ä¸å­˜åœ¨é‡å¤çš„èŠ‚ç‚¹</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="äºŒå‰æŸ¥æ‰¾æ ‘"></p>
<h4 id="ä»£ç å®ç°">ä»£ç å®ç°</h4>
<ul>
<li>
<p>èŠ‚ç‚¹ç±»ï¼š</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="built_in">key</span>;</span><br><span class="line">    TreeNode left;  <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">    TreeNode right; <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">TreeNode</span>(<span class="type">int</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">        <span class="variable">this</span>.<span class="property">key</span> = <span class="built_in">key</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æŸ¥æ‰¾èŠ‚ç‚¹ï¼š</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> // é€’å½’æŸ¥æ‰¾</span><br><span class="line">private static TreeNode search(TreeNode<span class="built_in"> root</span>, int<span class="built_in"> key</span>) &#123;</span><br><span class="line">    //é€’å½’ç»“æŸçš„æ¡ä»¶</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">(root</span> == null) &#123;</span><br><span class="line">        <span class="keyword">return</span> null;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">(key</span> ==<span class="built_in"> root</span><span class="built_in">.key</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span><span class="built_in"> root</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">(key</span> &gt;<span class="built_in"> root</span><span class="built_in">.key</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> search<span class="built_in">(root</span>.right,<span class="built_in"> key</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> search<span class="built_in">(root</span>.left,<span class="built_in"> key</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// éé€’å½’</span><br><span class="line">private static TreeNode search1(TreeNode<span class="built_in"> root</span>, int<span class="built_in"> key</span>) &#123;</span><br><span class="line">    while <span class="built_in">(root</span> != null) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">(key</span> ==<span class="built_in"> root</span><span class="built_in">.key</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span><span class="built_in"> root</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">(key</span> &gt;<span class="built_in"> root</span><span class="built_in">.key</span>) &#123;</span><br><span class="line">           <span class="built_in"> root</span> =<span class="built_in"> root</span>.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="built_in"> root</span> =<span class="built_in"> root</span>.left;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ’å…¥èŠ‚ç‚¹ï¼š</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">private static int <span class="keyword">insert</span>(TreeNode<span class="built_in"> root</span>, int<span class="built_in"> key</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">(root</span> == null) &#123;</span><br><span class="line">       <span class="built_in"> root</span> = new TreeNode<span class="built_in">(key</span>);</span><br><span class="line">       <span class="built_in"> root</span>.left = null;</span><br><span class="line">       <span class="built_in"> root</span>.right = null;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">(key</span> ==<span class="built_in"> root</span><span class="built_in">.key</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">(key</span> &gt;<span class="built_in"> root</span><span class="built_in">.key</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">insert</span><span class="built_in">(root</span>.right,<span class="built_in"> key</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">insert</span><span class="built_in">(root</span>.left,<span class="built_in"> key</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ„é€ å‡½æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•°ï¼Œè¿”å›æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> TreeNode <span class="title function_">createBST</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(arr[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            insert(root, arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ é™¤èŠ‚ç‚¹ï¼šè¦åˆ é™¤èŠ‚ç‚¹12ï¼Œå…ˆæ‰¾åˆ°èŠ‚ç‚¹19ï¼Œç„¶åç§»åŠ¨å¹¶æ›¿æ¢èŠ‚ç‚¹12<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9.png" alt="img"></p>
<p>ä»£ç é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://leetcode-cn.com/submissions/detail/190232548/">https://leetcode-cn.com/submissions/detail/190232548/</a></p>
</li>
</ul>
<p>å‚è€ƒè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1iJ411E7xW?t=756&amp;p=86">https://www.bilibili.com/video/BV1iJ411E7xW?t=756&amp;p=86</a></p>
<p>å›¾ç‰‡æ¥æºï¼š<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/delete-node-in-a-bst/solution/tu-jie-yi-dong-jie-dian-er-bu-shi-xiu-ga-edtn/">https://leetcode-cn.com/problems/delete-node-in-a-bst/solution/tu-jie-yi-dong-jie-dian-er-bu-shi-xiu-ga-edtn/</a></p>
<h3 id="å¹³è¡¡æ ‘">å¹³è¡¡æ ‘</h3>
<p>å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLï¼‰çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>äºŒå‰æ ‘å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡ 1</li>
<li>ä»»æ„èŠ‚ç‚¹çš„å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘</li>
</ul>
<p>å¹³è¡¡äºŒå‰æ ‘æ—‹è½¬ï¼š</p>
<ul>
<li>æ—‹è½¬è§¦å‘æ—¶æœºï¼šå½“æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åï¼Œè¯¥æ ‘ä¸å†æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘</li>
<li>å¹³è¡¡äºŒå‰æ ‘å’ŒäºŒå‰æŸ¥æ‰¾æ ‘å¯¹æ¯”ç»“æ„å›¾</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%92%8C%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E5%AF%B9%E6%AF%94%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="å¹³è¡¡äºŒå‰æ ‘å’ŒäºŒå‰æŸ¥æ‰¾æ ‘å¯¹æ¯”"></p>
<ul>
<li>
<p>å·¦æ—‹ï¼šå°†æ ¹èŠ‚ç‚¹çš„å³ä¾§å¾€å·¦æ‹‰ï¼ŒåŸå…ˆçš„å³å­èŠ‚ç‚¹å˜æˆæ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶æŠŠå¤šä½™çš„å·¦å­èŠ‚ç‚¹å‡ºè®©ï¼Œç»™å·²ç»é™çº§çš„æ ¹èŠ‚ç‚¹å½“å³å­èŠ‚ç‚¹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%B7%A6%E6%97%8B01.png" alt="å¹³è¡¡äºŒå‰æ ‘å·¦æ—‹"></p>
</li>
<li>
<p>å³æ—‹ï¼šå°†æ ¹èŠ‚ç‚¹çš„å·¦ä¾§å¾€å³æ‹‰ï¼Œå·¦å­èŠ‚ç‚¹å˜æˆäº†æ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶æŠŠå¤šä½™çš„å³å­èŠ‚ç‚¹å‡ºè®©ï¼Œç»™å·²ç»é™çº§æ ¹èŠ‚ç‚¹å½“å·¦å­èŠ‚ç‚¹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E5%8F%B3%E6%97%8B01.png" alt="å¹³è¡¡äºŒå‰æ ‘å³æ—‹"></p>
</li>
</ul>
<p>æ¨èæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://pdai.tech/md/algorithm/alg-basic-tree-balance.html">https://pdai.tech/md/algorithm/alg-basic-tree-balance.html</a></p>
<h3 id="çº¢é»‘æ ‘">çº¢é»‘æ ‘</h3>
<p>çº¢é»‘æ ‘çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯çº¢æˆ–è€…é»‘</p>
</li>
<li>
<p>çº¢é»‘æ ‘ä¸æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒçš„å¹³è¡¡æ˜¯é€šè¿‡è‡ªå·±çš„çº¢é»‘è§„åˆ™è¿›è¡Œå®ç°çš„</p>
</li>
</ul>
<p>çº¢é»‘æ ‘çš„çº¢é»‘è§„åˆ™æœ‰å“ªäº›ï¼š</p>
<ol>
<li>æ¯ä¸€ä¸ªèŠ‚ç‚¹æˆ–æ˜¯çº¢è‰²çš„ï¼Œæˆ–è€…æ˜¯é»‘è‰²çš„</li>
<li>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²</li>
<li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹æˆ–è€…çˆ¶èŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹ç›¸åº”çš„æŒ‡é’ˆå±æ€§å€¼ä¸º Nilï¼Œè¿™äº› Nil è§†ä¸ºå¶èŠ‚ç‚¹ï¼Œæ¯ä¸ªå¶èŠ‚ç‚¹ (Nil) æ˜¯é»‘è‰²çš„</li>
<li>å¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼ˆä¸èƒ½å‡ºç°ä¸¤ä¸ªçº¢è‰²èŠ‚ç‚¹ç›¸è¿çš„æƒ…å†µï¼‰</li>
<li>å¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»è¯¥èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Šï¼Œå‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹</li>
</ol>
<p>çº¢é»‘æ ‘ä¸ AVL æ ‘çš„æ¯”è¾ƒï¼š</p>
<ul>
<li>
<p>AVL æ ‘æ˜¯æ›´åŠ ä¸¥æ ¼çš„å¹³è¡¡ï¼Œå¯ä»¥æä¾›æ›´å¿«çš„æŸ¥æ‰¾é€Ÿåº¦ï¼Œé€‚ç”¨äºè¯»å–<strong>æŸ¥æ‰¾å¯†é›†å‹ä»»åŠ¡</strong></p>
</li>
<li>
<p>çº¢é»‘æ ‘åªæ˜¯åšåˆ°è¿‘ä¼¼å¹³è¡¡ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼çš„å¹³è¡¡ï¼Œçº¢é»‘æ ‘çš„æ’å…¥åˆ é™¤æ¯” AVL æ ‘æ›´ä¾¿äºæ§åˆ¶ï¼Œçº¢é»‘æ ‘æ›´é€‚åˆäº<strong>æ’å…¥ä¿®æ”¹å¯†é›†å‹ä»»åŠ¡</strong></p>
</li>
<li>
<p>çº¢é»‘æ ‘æ•´ä½“æ€§èƒ½ç•¥ä¼˜äº AVL æ ‘ï¼ŒAVL æ ‘çš„æ—‹è½¬æ¯”çº¢é»‘æ ‘çš„æ—‹è½¬å¤šï¼Œæ›´åŠ éš¾ä»¥å¹³è¡¡å’Œè°ƒè¯•ï¼Œæ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡æ¯”çº¢é»‘æ ‘æ…¢</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E7%BA%A2%E9%BB%91%E6%A0%91%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="çº¢é»‘æ ‘"></p>
<p>çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹çš„é»˜è®¤é¢œè‰²ä¸ºçº¢è‰²ï¼Œæ•ˆç‡é«˜ <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/%E7%BA%A2%E9%BB%91%E6%A0%91%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9%E9%A2%9C%E8%89%B2.png" alt="img"></p>
<p><strong>çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹åå¦‚ä½•ä¿æŒçº¢é»‘è§„åˆ™ï¼š</strong></p>
<ul>
<li>æ ¹èŠ‚ç‚¹ä½ç½®
<ul>
<li>ç›´æ¥å˜ä¸ºé»‘è‰²</li>
</ul>
</li>
<li>éæ ¹èŠ‚ç‚¹ä½ç½®
<ul>
<li>çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²
<ul>
<li>ä¸éœ€è¦ä»»ä½•æ“ä½œ,é»˜è®¤çº¢è‰²å³å¯</li>
</ul>
</li>
<li>çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰²
<ul>
<li>å”å”èŠ‚ç‚¹ä¸ºçº¢è‰²
<ol>
<li>å°†&quot;çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºé»‘è‰²,å°†&quot;å”å”èŠ‚ç‚¹&quot;è®¾ä¸ºé»‘è‰²</li>
<li>å°†&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºçº¢è‰²</li>
<li>å¦‚æœ&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;ä¸ºæ ¹èŠ‚ç‚¹,åˆ™å°†æ ¹èŠ‚ç‚¹å†æ¬¡å˜æˆé»‘è‰²</li>
</ol>
</li>
<li>å”å”èŠ‚ç‚¹ä¸ºé»‘è‰²
<ol>
<li>å°†&quot;çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºé»‘è‰²</li>
<li>å°†&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;è®¾ä¸ºçº¢è‰²</li>
<li>ä»¥&quot;ç¥–çˆ¶èŠ‚ç‚¹&quot;ä¸ºæ”¯ç‚¹è¿›è¡Œæ—‹è½¬</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å¹¶æŸ¥é›†">å¹¶æŸ¥é›†</h3>
<h4 id="åŸºæœ¬å®ç°">åŸºæœ¬å®ç°</h4>
<p>å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å‹çš„æ•°æ®ç»“æ„ï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªå…ƒç´ éƒ½å”¯ä¸€çš„å¯¹åº”ä¸€ä¸ªç»“ç‚¹</li>
<li>æ¯ä¸€ç»„æ•°æ®ä¸­çš„å¤šä¸ªå…ƒç´ éƒ½åœ¨åŒä¸€é¢—æ ‘ä¸­</li>
<li>ä¸€ä¸ªç»„ä¸­çš„æ•°æ®å¯¹åº”çš„æ ‘å’Œå¦å¤–ä¸€ä¸ªç»„ä¸­çš„æ•°æ®å¯¹åº”çš„æ ‘ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»</li>
<li>å…ƒç´ åœ¨æ ‘ä¸­å¹¶æ²¡æœ‰å­çˆ¶çº§å…³ç³»çš„ç¡¬æ€§è¦æ±‚</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%B9%B6%E6%9F%A5%E9%9B%86.png" alt="img"></p>
<p>å¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æŸ¥è¯¢å…ƒç´  p å’Œå…ƒç´  q æ˜¯å¦å±äºåŒä¸€ç»„</li>
<li>åˆå¹¶å…ƒç´  p å’Œå…ƒç´  q æ‰€åœ¨çš„ç»„</li>
</ul>
<p>å­˜å‚¨ç»“æ„ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p>åˆå¹¶æ–¹å¼ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%90%88%E5%B9%B6.png" alt="img"></p>
<p>ä»£ç å®ç°ï¼š</p>
<ul>
<li>
<p>ç±»å®ç°ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> UF &#123;</span><br><span class="line">    <span class="comment">//è®°å½•èŠ‚ç‚¹å…ƒç´ å’Œè¯¥å…ƒç´ æ‰€åœ¨åˆ†ç»„çš„æ ‡è¯†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] eleAndGroup;</span><br><span class="line">    <span class="comment">//è®°å½•åˆ†ç»„çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="keyword">count</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="keyword">public</span> UF(<span class="keyword">int</span> N) &#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–åˆ†ç»„æ•°é‡</span></span><br><span class="line">        <span class="keyword">this</span>.<span class="keyword">count</span> = N;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–eleAndGroupæ•°é‡</span></span><br><span class="line">        <span class="keyword">this</span>.eleAndGroup = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–eleAndGroupä¸­çš„å…ƒç´ åŠå…¶æ‰€åœ¨åˆ†ç»„çš„æ ‡è¯†ç¬¦ï¼ŒeleAndGroupç´¢å¼•ä½œä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„å…ƒç´ </span></span><br><span class="line">        <span class="comment">//æ¯ä¸ªç´¢å¼•å¤„çš„å€¼å°±æ˜¯è¯¥ç»„çš„ç´¢å¼•ï¼Œå°±æ˜¯è¯¥å…ƒç´ æ‰€åœ¨çš„ç»„çš„æ ‡è¯†ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; eleAndGroup.length; i++) &#123;</span><br><span class="line">            eleAndGroup[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢pæ‰€åœ¨çš„åˆ†ç»„çš„æ ‡è¯†ç¬¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="keyword">find</span>(<span class="keyword">int</span> p) &#123;</span><br><span class="line">        <span class="keyword">return</span> eleAndGroup[p];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¹¶æŸ¥é›†ä¸­å…ƒç´ på’Œå…ƒç´ qæ˜¯å¦åœ¨åŒä¸€åˆ†ç»„ä¸­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> connect(<span class="keyword">int</span> p, <span class="keyword">int</span> q) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">find</span>(p) == <span class="keyword">find</span>(q);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŠŠpå…ƒç´ æ‰€åœ¨åˆ†ç»„å’Œqå…ƒç´ æ‰€åœ¨åˆ†ç»„åˆå¹¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> union(<span class="keyword">int</span> p, <span class="keyword">int</span> q) &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å…ƒç´ qå’Œpæ˜¯å¦å·²ç»åœ¨åŒä¸€ä¸ªåˆ†ç»„ä¸­ï¼Œå¦‚æœå·²ç»åœ¨åŒä¸€ä¸ªåˆ†ç»„ä¸­ï¼Œåˆ™ç»“æŸæ–¹æ³•å°±å¯ä»¥äº†</span></span><br><span class="line">        <span class="keyword">if</span> (connect(p, q)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pGroup = <span class="keyword">find</span>(p);<span class="comment">//æ‰¾åˆ°pæ‰€åœ¨åˆ†ç»„çš„æ ‡è¯†ç¬¦</span></span><br><span class="line">        <span class="keyword">int</span> qGroup = <span class="keyword">find</span>(q);<span class="comment">//æ‰¾åˆ°qæ‰€åœ¨åˆ†ç»„çš„æ ‡è¯†ç¬¦</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆå¹¶ç»„ï¼Œè®©pæ‰€åœ¨ç»„çš„ æ‰€æœ‰å…ƒç´  çš„ç»„æ ‡è¯†ç¬¦å˜ä¸ºqæ‰€åœ¨åˆ†ç»„çš„æ ‡è¯†ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; eleAndGroup.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (eleAndGroup[i] == pGroup) &#123;</span><br><span class="line">                eleAndGroup[i] = qGroup;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ†ç»„ä¸ªæ•°-1</span></span><br><span class="line">        <span class="keyword">this</span>.<span class="keyword">count</span>--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">    //åˆ›å»ºå¹¶æŸ¥é›†å¯¹è±¡</span><br><span class="line">    UF uf = <span class="built_in">new</span> UF(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(uf);</span><br><span class="line"></span><br><span class="line">    //ä»æ§åˆ¶å°å½•å…¥ä¸¤ä¸ªåˆå¹¶çš„å…ƒç´ ï¼Œè°ƒç”¨<span class="keyword">union</span>æ–¹æ³•åˆå¹¶ï¼Œè§‚å¯Ÿåˆå¹¶åå¹¶æŸ¥é›†çš„åˆ†ç»„</span><br><span class="line">    Scanner sc = <span class="built_in">new</span> Scanner(<span class="keyword">System</span>.<span class="keyword">in</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;è¾“å…¥ç¬¬ä¸€ä¸ªè¦åˆå¹¶çš„å…ƒç´ &quot;);</span><br><span class="line">        <span class="type">int</span> p = sc.nextInt();</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;è¾“å…¥ç¬¬äºŒä¸ªè¦åˆå¹¶çš„å…ƒç´ &quot;);</span><br><span class="line">        <span class="type">int</span> q = sc.nextInt();</span><br><span class="line">        <span class="keyword">if</span> (uf.<span class="keyword">connect</span>(p, q)) &#123;</span><br><span class="line">            <span class="keyword">System</span>.<span class="keyword">out</span>.println(p + &quot;å…ƒç´ å·²ç»å’Œ&quot; + q + &quot;å…ƒç´ å·²ç»åœ¨åŒä¸€ä¸ªç»„&quot;);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        uf.<span class="keyword">union</span>(p, q);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;å½“å‰å¹¶æŸ¥é›†ä¸­è¿˜æœ‰ï¼š&quot; + uf.count() + &quot;ä¸ªåˆ†ç»„&quot;);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(uf);</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;********************&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æœ€åæƒ…å†µä¸‹ union ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(N^2)</p>
<h4 id="ä¼˜åŒ–å®ç°">ä¼˜åŒ–å®ç°</h4>
<p>è®©æ¯ä¸ªç´¢å¼•å¤„çš„èŠ‚ç‚¹éƒ½æŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œå½“ eleGroup[i] = i æ—¶ï¼Œè¯´æ˜ i æ˜¯æ ¹èŠ‚ç‚¹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%B9%B6%E6%9F%A5%E9%9B%86%E4%BC%98%E5%8C%96.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢pæ‰€åœ¨çš„åˆ†ç»„çš„æ ‡è¯†ç¬¦ï¼Œé€’å½’å¯»æ‰¾çˆ¶æ ‡è¯†ç¬¦ï¼Œç›´åˆ°æ‰¾åˆ°æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findRoot</span><span class="params">(<span class="type">int</span> p)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (p != eleAndGroup[p]) &#123;</span><br><span class="line">        p = eleAndGroup[p];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//p == eleGroup[p]ï¼Œè¯´æ˜pæ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å¹¶æŸ¥é›†ä¸­å…ƒç´ på’Œå…ƒç´ qæ˜¯å¦åœ¨åŒä¸€åˆ†ç»„ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> findRoot(p) == findRoot(q);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠpå…ƒç´ æ‰€åœ¨åˆ†ç»„å’Œqå…ƒç´ æ‰€åœ¨åˆ†ç»„åˆå¹¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">    <span class="comment">//æ‰¾åˆ°p qå¯¹åº”çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">pRoot</span> <span class="operator">=</span> findRoot(p);</span><br><span class="line">    <span class="type">int</span> <span class="variable">qRoot</span> <span class="operator">=</span> findRoot(q);</span><br><span class="line">    <span class="keyword">if</span> (pRoot == qRoot) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®©pæ‰€åœ¨æ ‘çš„èŠ‚ç‚¹æ ¹èŠ‚ç‚¹ä¸ºqçš„æ‰€åœ¨çš„æ ¹èŠ‚ç‚¹ï¼Œåªéœ€è¦æŠŠæ ¹èŠ‚ç‚¹æ”¹ä¸€ä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)</span></span><br><span class="line">    eleAndGroup[pRoot] = qRoot;</span><br><span class="line">    <span class="built_in">this</span>.count-</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦æ˜¯ O(N^2)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%B9%B6%E6%9F%A5%E9%9B%86%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.png" alt="img"></p>
<p>ç»§ç»­ä¼˜åŒ–ï¼šè·¯å¾„å‹ç¼©ï¼Œä¿è¯æ¯æ¬¡æŠŠå°æ ‘åˆå¹¶åˆ°å¤§æ ‘</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UF_Tree_Weighted</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] eleAndGroup;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] size;<span class="comment">//å­˜å‚¨æ¯ä¸€ä¸ªæ ¹ç»“ç‚¹å¯¹åº”çš„æ ‘ä¸­çš„ä¿å­˜çš„èŠ‚ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UF_Tree_Weighted</span><span class="params">(<span class="type">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.count = N;</span><br><span class="line">        <span class="keyword">this</span>.eleAndGroup = <span class="keyword">new</span> <span class="type">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; eleAndGroup.length; i++) &#123;</span><br><span class="line">            eleAndGroup[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.size = <span class="keyword">new</span> <span class="type">int</span>[N];</span><br><span class="line">        <span class="comment">//é»˜è®¤æƒ…å†µä¸‹ï¼Œsizeä¸­æ¯ä¸ªç´¢å¼•å¤„çš„å€¼éƒ½æ˜¯1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size.length; i++) &#123;</span><br><span class="line">            size[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//æŸ¥è¯¢pæ‰€åœ¨çš„åˆ†ç»„çš„æ ‡è¯†ç¬¦ï¼Œçˆ¶æ ‡è¯†ç¬¦</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">int</span> <span class="title">findRoot</span><span class="params">(<span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (p != eleAndGroup[p]) &#123;</span><br><span class="line">            p = eleAndGroup[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­å¹¶æŸ¥é›†ä¸­å…ƒç´ på’Œå…ƒç´ qæ˜¯å¦åœ¨åŒä¸€åˆ†ç»„ä¸­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">findRoot</span>(p) == <span class="built_in">findRoot</span>(q);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŠŠpå…ƒç´ æ‰€åœ¨åˆ†ç»„å’Œqå…ƒç´ æ‰€åœ¨åˆ†ç»„åˆå¹¶</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="type">void</span> <span class="title">union</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ‰¾åˆ°p qå¯¹åº”çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> pRoot = <span class="built_in">findRoot</span>(p);</span><br><span class="line">        <span class="type">int</span> qRoot = <span class="built_in">findRoot</span>(q);</span><br><span class="line">        <span class="keyword">if</span> (pRoot == qRoot) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­pRootå¯¹åº”çš„æ ‘å¤§è¿˜æ˜¯qRootå¯¹åº”çš„æ ‘å¤§ï¼Œæœ€ç»ˆéœ€è¦æŠŠè¾ƒå°çš„æ ‘åˆå¹¶åˆ°è¾ƒå¤§çš„æ ‘ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (size[pRoot] &lt; size[qRoot]) &#123;</span><br><span class="line">            eleAndGroup[pRoot] = qRoot;</span><br><span class="line">            size[qRoot] += size[pRoot];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            eleAndGroup[qRoot] = pRoot;</span><br><span class="line">            size[pRoot] += size[qRoot];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç»„çš„æ•°é‡-1ã€</span></span><br><span class="line">        <span class="keyword">this</span>.count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h4>
<p>å¹¶æŸ¥é›†å­˜å‚¨çš„æ¯ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå¤§å‹è®¡ç®—æœºç½‘ç»œä¸­çš„è®¡ç®—æœºï¼š</p>
<ul>
<li>å¯ä»¥é€šè¿‡ connected(int p, int q) æ¥æ£€æµ‹è¯¥ç½‘ç»œä¸­çš„æŸä¸¤å°è®¡ç®—æœºä¹‹é—´æ˜¯å¦è¿é€š</li>
<li>å¯ä»¥è°ƒç”¨ union(int p,int q) ä½¿å¾— p å’Œ q ä¹‹é—´è¿é€šï¼Œè¿™æ ·ä¸¤å°è®¡ç®—æœºä¹‹é—´å°±å¯ä»¥é€šä¿¡</li>
</ul>
<p>ç•…é€šå·¥ç¨‹ï¼šæŸçœè°ƒæŸ¥åŸé•‡äº¤é€šçŠ¶å†µï¼Œå¾—åˆ°ç°æœ‰åŸé•‡é“è·¯ç»Ÿè®¡è¡¨ï¼Œè¡¨ä¸­åˆ—å‡ºäº†æ¯æ¡é“è·¯ç›´æ¥è¿é€šçš„åŸé•‡ã€‚çœæ”¿åºœç•…é€šå·¥ç¨‹çš„ç›®æ ‡æ˜¯ä½¿å…¨çœä»»ä½•ä¸¤ä¸ªåŸé•‡é—´éƒ½å¯ä»¥å®ç°äº¤é€šï¼Œä½†ä¸ä¸€å®šæœ‰ç›´æ¥çš„é“è·¯ç›¸è¿ï¼Œåªè¦äº’ç›¸é—´æ¥é€šè¿‡é“è·¯å¯è¾¾å³å¯ï¼Œé—®æœ€å°‘è¿˜éœ€è¦å»ºè®¾å¤šå°‘æ¡é“è·¯ï¼Ÿ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.png" alt="img"></p>
<p>è§£é¢˜æ€è·¯ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå¹¶æŸ¥é›† UF_Tree_Weighted(20)</li>
<li>åˆ†åˆ«è°ƒç”¨ union(0,1)ã€union(6,9)ã€union(3,8)ã€union(5,11)ã€union(2,12)ã€union(6,10)ã€union(4,8)ï¼Œè¡¨ç¤ºå·²ç»ä¿®å»ºå¥½çš„é“è·¯æŠŠå¯¹åº”çš„åŸå¸‚è¿æ¥èµ·æ¥</li>
<li>å¦‚æœåŸå¸‚å…¨éƒ¨è¿æ¥èµ·æ¥ï¼Œé‚£ä¹ˆå¹¶æŸ¥é›†ä¸­å‰©ä½™çš„åˆ†ç»„æ•°ç›®ä¸º 1ï¼Œæ‰€æœ‰çš„åŸå¸‚éƒ½åœ¨ä¸€ä¸ªæ ‘ä¸­ï¼Œåªéœ€è¦è·å–å½“å‰å¹¶æŸ¥é›†ä¸­å‰©ä½™çš„æ•°ç›®å‡å» 1ï¼Œå°±æ˜¯è¿˜éœ€è¦ä¿®å»ºçš„é“è·¯æ•°ç›®</li>
</ol>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String<span class="literal">[]</span> args)throws Exception &#123;</span><br><span class="line">    Scanner sc = <span class="keyword">new</span> <span class="constructor">Scanner(System.<span class="params">in</span>)</span>;</span><br><span class="line">    <span class="comment">//è¯»å–åŸå¸‚æ•°ç›®ï¼Œåˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="built_in">int</span> number = sc.next<span class="constructor">Int()</span>;</span><br><span class="line">    <span class="comment">//è¯»å–å·²ç»ä¿®å»ºå¥½çš„é“è·¯æ•°ç›®</span></span><br><span class="line">    <span class="built_in">int</span> roadNumber = sc.next<span class="constructor">Int()</span>;</span><br><span class="line">    UF_Tree_Weighted uf = <span class="keyword">new</span> <span class="constructor">UF_Tree_Weighted(<span class="params">number</span>)</span>;</span><br><span class="line">    <span class="comment">//å¾ªç¯è¯»å–å·²ç»ä¿®å»ºå¥½çš„é“è·¯ï¼Œå¹¶è°ƒç”¨unionæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; roadNumber; i++) &#123;</span><br><span class="line">        <span class="built_in">int</span> p = sc.next<span class="constructor">Int()</span>;</span><br><span class="line">        <span class="built_in">int</span> q = sc.next<span class="constructor">Int()</span>;</span><br><span class="line">        uf.union(p,q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–å‰©ä½™çš„åˆ†ç»„æ•°é‡</span></span><br><span class="line">    <span class="built_in">int</span> groupNumber = uf.count<span class="literal">()</span>;</span><br><span class="line">    <span class="comment">//è®¡ç®—å‡ºè¿˜éœ€è¦ä¿®å»ºçš„é“è·¯</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;è¿˜éœ€è¦ä¿®å»º&quot;</span>+(groupNumber-<span class="number">1</span>)+<span class="string">&quot;é“è·¯ï¼ŒåŸå¸‚æ‰èƒ½ç›¸é€š&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒè§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1iJ411E7xW?p=142">https://www.bilibili.com/video/BV1iJ411E7xW?p=142</a></p>
<h3 id="å­—å…¸æ ‘">å­—å…¸æ ‘</h3>
<h4 id="åŸºæœ¬ä»‹ç»-22">åŸºæœ¬ä»‹ç»</h4>
<p>Trie æ ‘ï¼Œä¹Ÿå«å­—å…¸æ ‘ï¼Œæ˜¯ä¸€ç§ä¸“é—¨å¤„ç†å­—ç¬¦ä¸²åŒ¹é…çš„æ ‘å½¢ç»“æ„ï¼Œç”¨æ¥è§£å†³åœ¨ä¸€ç»„å­—ç¬¦ä¸²é›†åˆä¸­å¿«é€ŸæŸ¥æ‰¾æŸä¸ªå­—ç¬¦ä¸²çš„é—®é¢˜ï¼ŒTrie æ ‘çš„æœ¬è´¨å°±æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²ä¹‹é—´çš„å…¬å…±å‰ç¼€ï¼Œå°†é‡å¤çš„å‰ç¼€åˆå¹¶åœ¨ä¸€èµ·</p>
<ul>
<li>æ ¹èŠ‚ç‚¹ä¸åŒ…å«ä»»ä½•ä¿¡æ¯</li>
<li>æ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œä»<strong>æ ¹èŠ‚ç‚¹åˆ°çº¢è‰²èŠ‚ç‚¹çš„ä¸€æ¡è·¯å¾„è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²</strong></li>
<li>çº¢è‰²èŠ‚ç‚¹å¹¶ä¸éƒ½æ˜¯å¶å­èŠ‚ç‚¹</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%AD%97%E5%85%B8%E6%A0%91%E6%9E%84%E9%80%A0%E8%BF%87%E7%A8%8B1.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%AD%97%E5%85%B8%E6%A0%91%E6%9E%84%E9%80%A0%E8%BF%87%E7%A8%8B2.png" alt="img"></p>
<p>æ³¨æ„ï¼šè¦æŸ¥æ‰¾çš„æ˜¯å­—ç¬¦ä¸²â€œheâ€ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ²¿ç€æŸæ¡è·¯å¾„æ¥åŒ¹é…ï¼Œå¯ä»¥åŒ¹é…æˆåŠŸã€‚ä½†æ˜¯è·¯å¾„çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹â€œeâ€å¹¶ä¸æ˜¯çº¢è‰²çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œheâ€æ˜¯æŸä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€å­ä¸²ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²</p>
<h4 id="å®ç°Trie">å®ç°Trie</h4>
<p>é€šè¿‡ä¸€ä¸ªä¸‹æ ‡ä¸å­—ç¬¦ä¸€ä¸€æ˜ å°„çš„æ•°ç»„ï¼Œæ¥å­˜å‚¨å­èŠ‚ç‚¹çš„æŒ‡é’ˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%AD%97%E5%85%B8%E6%A0%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p>æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼ˆn è¡¨ç¤ºè¦æŸ¥æ‰¾å­—ç¬¦ä¸²çš„é•¿åº¦ï¼‰</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TrieNode root = <span class="keyword">new</span> TrieNode(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’å…¥ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> insert(<span class="built_in">char</span>[] chars) &#123;</span><br><span class="line">        TrieNode p = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">            <span class="comment">//è·å–å­—ç¬¦çš„ç´¢å¼•ä½ç½®</span></span><br><span class="line">            <span class="built_in">int</span> <span class="keyword">index</span> = chars[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (p.children[<span class="keyword">index</span>] == <span class="literal">null</span>) &#123;</span><br><span class="line">                TrieNode node = <span class="keyword">new</span> TrieNode(chars[i]);</span><br><span class="line">                p.children[<span class="keyword">index</span>] = node;</span><br><span class="line">            &#125;</span><br><span class="line">            p = p.children[<span class="keyword">index</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        p.isEndChar = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">boolean</span> find(<span class="built_in">char</span>[] chars) &#123;</span><br><span class="line">        TrieNode p = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">            <span class="built_in">int</span> <span class="keyword">index</span> = chars[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (p.children[<span class="keyword">index</span>] == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            p = p.children[<span class="keyword">index</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p.isEndChar) &#123;</span><br><span class="line">            <span class="comment">//å®Œå…¨åŒ¹é…</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸èƒ½å®Œå…¨åŒ¹é…ï¼Œåªæ˜¯å‰ç¼€</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">TrieNode</span> &#123;</span><br><span class="line">        <span class="built_in">char</span> data;</span><br><span class="line">        TrieNode[] children = <span class="keyword">new</span> TrieNode[<span class="number">26</span>];<span class="comment">//26ä¸ªè‹±æ–‡å­—æ¯</span></span><br><span class="line">        <span class="built_in">boolean</span> isEndChar = <span class="literal">false</span>;<span class="comment">//ç»“å°¾å­—ç¬¦ä¸ºtrue</span></span><br><span class="line">        <span class="keyword">public</span> TrieNode(<span class="built_in">char</span> data) &#123;</span><br><span class="line">            <span class="keyword">this</span>.data = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¼˜åŒ–Trie">ä¼˜åŒ–Trie</h4>
<p>Trie æ ‘æ˜¯éå¸¸è€—å†…å­˜ï¼Œé‡‡å–ç©ºé—´æ¢æ—¶é—´çš„æ€è·¯ã€‚Trie æ ‘çš„å˜ä½“æœ‰å¾ˆå¤šï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³å†…å­˜æ¶ˆè€—çš„é—®é¢˜ã€‚æ¯”å¦‚ç¼©ç‚¹ä¼˜åŒ–ï¼Œå¯¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œè€Œä¸”æ­¤èŠ‚ç‚¹ä¸æ˜¯ä¸€ä¸ªä¸²çš„ç»“æŸèŠ‚ç‚¹ï¼Œå¯ä»¥å°†æ­¤èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹åˆå¹¶</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Java/Tree-%E5%AD%97%E5%85%B8%E6%A0%91%E7%BC%A9%E7%82%B9%E4%BC%98%E5%8C%96.png" alt="img"></p>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/72414">https://time.geekbang.org/column/article/72414</a></p>
<h2 id="å›¾">å›¾</h2>
<p>å›¾çš„é‚»æ¥è¡¨å½¢å¼ï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AGraph</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> VertexNode[] adjList;   <span class="comment">//é‚»æ¥æ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> vLen, eLen;         <span class="comment">//é¡¶ç‚¹æ•°å’Œè¾¹æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AGraph</span><span class="params">(<span class="keyword">int</span> vLen, <span class="keyword">int</span> eLen)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.vLen = vLen;</span><br><span class="line">        <span class="keyword">this</span>.eLen = eLen;</span><br><span class="line">        adjList = <span class="keyword">new</span> VertexNode[vLen];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¼§èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ArcNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> adjVex;         <span class="comment">//è¯¥è¾¹æ‰€æŒ‡å‘çš„é¡¶ç‚¹çš„ä½ç½®</span></span><br><span class="line">        ArcNode nextArc;    <span class="comment">//ä¸‹ä¸€æ¡è¾¹ï¼ˆå¼§ï¼‰</span></span><br><span class="line">        <span class="comment">//int info  		//æ·»åŠ æƒå€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ArcNode</span><span class="params">(<span class="keyword">int</span> adjVex)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.adjVex = adjVex;</span><br><span class="line">            nextArc = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¡¨é¡¶ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">VertexNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> data;      	<span class="comment">//é¡¶ç‚¹ä¿¡æ¯</span></span><br><span class="line">        ArcNode firstArc;  	<span class="comment">//æŒ‡å‘ç¬¬ä¸€æ¡è¾¹çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">VertexNode</span><span class="params">(<span class="keyword">char</span> data)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.data = data;</span><br><span class="line">            firstArc = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å›¾çš„é‚»æ¥çŸ©é˜µå½¢å¼ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MGraph</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[][] edges;      <span class="comment">//é‚»æ¥çŸ©é˜µå®šä¹‰ï¼Œæœ‰æƒå›¾å°†intæ”¹ä¸ºfloat</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> vLen;           <span class="comment">//é¡¶ç‚¹æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> eLen;           <span class="comment">//è¾¹æ•°</span></span><br><span class="line">    <span class="keyword">private</span> VertexNode[] vex;   <span class="comment">//å­˜æ”¾èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MGraph</span><span class="params">(<span class="type">int</span> vLen, <span class="type">int</span> eLen)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.vLen = vLen;</span><br><span class="line">        <span class="keyword">this</span>.eLen = eLen;</span><br><span class="line">        <span class="keyword">this</span>.edges = <span class="keyword">new</span> <span class="type">int</span>[vLen][vLen];</span><br><span class="line">        <span class="keyword">this</span>.vex = <span class="keyword">new</span> VertexNode[vLen];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">VertexNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> num;    <span class="comment">//é¡¶ç‚¹ç¼–å·</span></span><br><span class="line">        <span class="type">String</span> info;  <span class="comment">//é¡¶ç‚¹ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">VertexNode</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.num = num;</span><br><span class="line">            <span class="keyword">this</span>.info = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å›¾ç›¸å…³çš„ç®—æ³•éœ€è¦å¾ˆå¤šçš„æµç¨‹å›¾ï¼Œæ­¤å¤„ä¸å†ä¸€ä¸€åˆ—ä¸¾ï¼Œæ¨èå‚è€ƒä¹¦ç±ã€Šæ•°æ®ç»“æ„é«˜åˆ†ç¬”è®°ã€‹</p>
<h2 id="ä½å›¾">ä½å›¾</h2>
<h3 id="åŸºæœ¬ä»‹ç»-23">åŸºæœ¬ä»‹ç»</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨ï¼šä¸€ç§æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡ï¼ˆä½æ•°ç»„ï¼‰å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°ï¼ˆå“ˆå¸Œå‡½æ•°ï¼‰ï¼Œæ—¢ç„¶æ˜¯äºŒè¿›åˆ¶ï¼Œæ¯ä¸ªç©ºé—´å­˜æ”¾çš„ä¸æ˜¯ 0 å°±æ˜¯ 1ï¼Œä½†æ˜¯åˆå§‹é»˜è®¤å€¼éƒ½æ˜¯ 0ï¼Œæ‰€ä»¥å¸ƒéš†è¿‡æ»¤å™¨ä¸å­˜æ•°æ®åªå­˜çŠ¶æ€</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/DB/Redis-Bitmaps%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p>è¿™ç§æ•°æ®ç»“æ„æ˜¯é«˜æ•ˆä¸”æ€§èƒ½å¾ˆå¥½çš„ï¼Œä½†ç¼ºç‚¹æ˜¯å…·æœ‰ä¸€å®šçš„é”™è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤éš¾åº¦ã€‚å¹¶ä¸”ç†è®ºæƒ…å†µä¸‹ï¼Œæ·»åŠ åˆ°é›†åˆä¸­çš„å…ƒç´ è¶Šå¤šï¼Œè¯¯æŠ¥çš„å¯èƒ½æ€§å°±è¶Šå¤§</p>
<h3 id="å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹</h3>
<p>å‘å¸ƒéš†è¿‡æ»¤å™¨ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´  key æ—¶ï¼Œä¼šé€šè¿‡å¤šä¸ª hash å‡½æ•°å¾—åˆ°å¤šä¸ªå“ˆå¸Œå€¼ï¼Œåœ¨ä½æ•°ç»„ä¸­æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼ç½®ä¸º 1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://seazean.oss-cn-beijing.aliyuncs.com/img/DB/Redis-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE.png" alt="img"></p>
<p>å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œæ˜¯å¦åœ¨äºŒè¿›åˆ¶çš„é›†åˆä¸­ï¼ŒæŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é€šè¿‡ K ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—è¯¥æ•°æ®ï¼Œå¯¹åº”è®¡ç®—å‡ºçš„ K ä¸ª hash å€¼</li>
<li>é€šè¿‡ hash å€¼æ‰¾åˆ°å¯¹åº”çš„äºŒè¿›åˆ¶çš„æ•°ç»„ä¸‹æ ‡</li>
<li>åˆ¤æ–­æ–¹æ³•ï¼šå¦‚æœå­˜åœ¨ä¸€å¤„ä½ç½®çš„äºŒè¿›åˆ¶æ•°æ®æ˜¯ 0ï¼Œé‚£ä¹ˆè¯¥æ•°æ®ä¸€å®šä¸å­˜åœ¨ã€‚å¦‚æœéƒ½æ˜¯ 1ï¼Œåˆ™è®¤ä¸ºæ•°æ®å­˜åœ¨é›†åˆä¸­ï¼ˆä¼šè¯¯åˆ¤ï¼‰</li>
</ul>
<p>å¸ƒéš†è¿‡æ»¤å™¨ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>äºŒè¿›åˆ¶ç»„æˆçš„æ•°ç»„ï¼Œå ç”¨å†…å­˜æå°‘ï¼Œå¹¶ä¸”æ’å…¥å’ŒæŸ¥è¯¢é€Ÿåº¦éƒ½è¶³å¤Ÿå¿«</li>
<li>å»é‡æ–¹ä¾¿ï¼šå½“å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å­˜å‚¨æ—¶å¯¹åº”çš„ä½æ•°ç»„ä¸‹æ ‡è®¾ç½®ä¸º 1ï¼Œå½“ç¬¬äºŒæ¬¡å­˜å‚¨ç›¸åŒå­—ç¬¦ä¸²æ—¶ï¼Œå› ä¸ºå¯¹åº”ä½ç½®å·²è®¾ç½®ä¸º 1ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“çŸ¥é“æ­¤å€¼å·²ç»å­˜åœ¨</li>
</ul>
</li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>éšç€æ•°æ®çš„å¢åŠ ï¼Œè¯¯åˆ¤ç‡ä¼šå¢åŠ ï¼šæ·»åŠ æ•°æ®æ˜¯é€šè¿‡è®¡ç®—æ•°æ®çš„ hash å€¼ï¼Œä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½å“ˆå¸Œå‡ºæ¥çš„ä½ç½®ç›¸åŒï¼Œå¯¼è‡´æ— æ³•ç¡®å®šåˆ°åº•æ˜¯å“ªä¸ªæ•°æ®å­˜åœ¨ï¼Œ<strong>è¿™ç§æƒ…å†µå¯ä»¥é€‚å½“å¢åŠ ä½æ•°ç»„å¤§å°æˆ–è€…è°ƒæ•´å“ˆå¸Œå‡½æ•°</strong></li>
<li>æ— æ³•åˆ é™¤æ•°æ®ï¼šå¯èƒ½å­˜åœ¨å‡ ä¸ªæ•°æ®å æ®ç›¸åŒçš„ä½ç½®ï¼Œæ‰€ä»¥åˆ é™¤ä¸€ä½ä¼šå¯¼è‡´å¾ˆå¤šæ•°æ®å¤±æ•ˆ</li>
</ul>
</li>
<li>æ€»ç»“ï¼š<strong>å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¦‚æœåˆ¤æ–­æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œé‚£è¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨</strong></li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/ysocean/p/12594982.html">https://www.cnblogs.com/ysocean/p/12594982.html</a></p>
<h3 id="Guava">Guava</h3>
<p>å¼•å…¥ Guava çš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>28.0-jre<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šè¯¯åˆ¤ç‡ä¸ºï¼ˆ0.01ï¼‰ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">    // åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨å¯¹è±¡</span><br><span class="line">    BloomFilter&lt;<span class="type">Integer</span>&gt; <span class="keyword">filter</span> = BloomFilter.<span class="keyword">create</span>(</span><br><span class="line">        Funnels.integerFunnel(),</span><br><span class="line">        <span class="number">1500</span>,</span><br><span class="line">        <span class="number">0.01</span>);</span><br><span class="line">    // åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">filter</span>.mightContain(<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">filter</span>.mightContain(<span class="number">2</span>));</span><br><span class="line">    // å°†å…ƒç´ æ·»åŠ è¿›å¸ƒéš†è¿‡æ»¤å™¨</span><br><span class="line">    <span class="keyword">filter</span>.put(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">filter</span>.put(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">filter</span>.mightContain(<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">filter</span>.mightContain(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®ç°å¸ƒéš†">å®ç°å¸ƒéš†</h3>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyBloomFilter</span> &#123;</span><br><span class="line">    <span class="comment">//å¸ƒéš†è¿‡æ»¤å™¨å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> DEFAULT_SIZE = <span class="number">2</span> &lt;&lt; <span class="number">28</span>;</span><br><span class="line">    <span class="comment">//bitæ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾key</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> BitSet bitSet = <span class="keyword">new </span><span class="class title_">BitSet</span>(DEFAULT_SIZE);</span><br><span class="line">    <span class="comment">//åé¢hashå‡½æ•°ä¼šç”¨åˆ°ï¼Œç”¨æ¥ç”Ÿæˆä¸åŒçš„hashå€¼ï¼Œéšæ„è®¾ç½®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span>[] ints = &#123;<span class="number">1</span>, <span class="number">6</span>, <span class="number">16</span>, <span class="number">38</span>, <span class="number">58</span>, <span class="number">68</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//addæ–¹æ³•ï¼Œè®¡ç®—å‡ºkeyçš„hashå€¼ï¼Œå¹¶å°†å¯¹åº”ä¸‹æ ‡ç½®ä¸ºtrue</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">add</span>(<span class="built_in">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">        Arrays.<span class="property">stream</span>(ints).<span class="property">forEach</span>(i -&gt; bitSet.<span class="property">set</span>(<span class="title function_">hash</span>(<span class="built_in">key</span>, i)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ï¼Œtrueä¸ä¸€å®šè¯´æ˜keyå­˜åœ¨ï¼Œä½†æ˜¯falseä¸€å®šè¯´æ˜ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isContain</span>(<span class="built_in">Object</span> <span class="built_in">key</span>) &#123;</span><br><span class="line">        <span class="type">boolean</span> result = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : ints) &#123;</span><br><span class="line">            <span class="comment">//çŸ­è·¯ä¸ï¼Œåªè¦æœ‰ä¸€ä¸ªbitä½ä¸ºfalseï¼Œåˆ™è¿”å›false</span></span><br><span class="line">            result = result &amp;&amp; bitSet.<span class="property">get</span>(<span class="title function_">hash</span>(<span class="built_in">key</span>, i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//hashå‡½æ•°ï¼Œå€Ÿé‰´äº†hashmapçš„æ‰°åŠ¨ç®—æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">hash</span>(<span class="built_in">Object</span> <span class="built_in">key</span>, <span class="type">int</span> i) &#123;</span><br><span class="line">        <span class="type">int</span> h;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">key</span> == <span class="literal">null</span> ? <span class="number">0</span> : (i * (DEFAULT_SIZE - <span class="number">1</span>) &amp; ((h = <span class="built_in">key</span>.<span class="property">hashCode</span>()) ^ (h &gt;&gt;&gt; <span class="number">16</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>javaseåŸºç¡€çŸ¥è¯†</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://www.json25.cn/posts/827432d7.html">https://www.json25.cn/posts/827432d7.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>jsonğŸ¥</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2021-03-16</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2023-03-17</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>java</a><a class="post-meta__tags" href="/tags/javase/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>javase</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn-eys.pages.dev/img/donate.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/donate.webp" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://cdn-eys.pages.dev/img/zfb.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/zfb.webp" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/posts/2636df6a.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm11.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">redisæ•°æ®åº“</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/0.html" title="jucå¹¶å‘ç¼–ç¨‹"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm17.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-17</div><div class="title">jucå¹¶å‘ç¼–ç¨‹</div></div></a></div><div><a href="/posts/784bec6.html" title="ajaxç¬”è®°"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm15.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-07</div><div class="title">ajaxç¬”è®°</div></div></a></div><div><a href="/posts/8de1ec.html" title="javaé¢ç»"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm4.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-15</div><div class="title">javaé¢ç»</div></div></a></div><div><a href="/posts/779497dd.html" title="å¸¸ç”¨æ¡†æ¶"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm13.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-17</div><div class="title">å¸¸ç”¨æ¡†æ¶</div></div></a></div><div><a href="/posts/84cad344.html" title="javassmæ¡†æ¶"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm9.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-17</div><div class="title">javassmæ¡†æ¶</div></div></a></div><div><a href="/posts/10c11d66.html" title="javaå¸¸ç”¨å·¥å…·"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm13.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-03-17</div><div class="title">javaå¸¸ç”¨å·¥å…·</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">JavaSE</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-text">åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE"><span class="toc-text">æ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="toc-text">å˜é‡ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">æ•°æ®ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="toc-text">åŸºæœ¬ç±»å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E8%BD%AC%E5%9E%8B"><span class="toc-text">ä¸Šä¸‹è½¬å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">å¼•ç”¨ç±»å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%AF%B9%E6%AF%94"><span class="toc-text">ç±»å‹å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E7%AE%B1%E6%8B%86%E7%AE%B1"><span class="toc-text">è£…ç®±æ‹†ç®±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E6%B1%A0"><span class="toc-text">ç¼“å­˜æ± </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">è¾“å…¥æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-text">æ•°ç»„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E8%AE%BF%E9%97%AE"><span class="toc-text">å…ƒç´ è®¿é—®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="toc-text">å†…å­˜åˆ†é…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%BC%82%E5%B8%B8"><span class="toc-text">æ•°ç»„å¼‚å¸¸</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">äºŒç»´æ•°ç»„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97"><span class="toc-text">è¿ç®—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-text">å‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%A2%E5%8F%82%E5%AE%9E%E5%8F%82"><span class="toc-text">å½¢å‚å®å‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-text">å¯å˜å‚æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-text">æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%A6%82%E8%BF%B0"><span class="toc-text">æ–¹æ³•æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E8%B0%83%E7%94%A8"><span class="toc-text">å®šä¹‰è°ƒç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD"><span class="toc-text">æ–¹æ³•é‡è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8D%E8%BD%BD%E4%BB%8B%E7%BB%8D"><span class="toc-text">é‡è½½ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%80%89%E5%8F%96"><span class="toc-text">æ–¹æ³•é€‰å–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E9%87%8D%E8%BD%BD"><span class="toc-text">ç»§æ‰¿é‡è½½</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">å‚æ•°ä¼ é€’</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE"><span class="toc-text">æšä¸¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Debug"><span class="toc-text">Debug</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-text">å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-text">ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">æ„é€ å™¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85"><span class="toc-text">åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-text">å°è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#this"><span class="toc-text">this</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#static"><span class="toc-text">static</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#static-%E7%94%A8%E6%B3%95"><span class="toc-text">static ç”¨æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-text">ä¸¤ä¸ªé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-text">ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-2"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E8%AE%BF%E9%97%AE"><span class="toc-text">å˜é‡è®¿é—®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%AE%BF%E9%97%AE"><span class="toc-text">æ–¹æ³•è®¿é—®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-text">å¸¸è§é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#super"><span class="toc-text">super</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#final"><span class="toc-text">final</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-3"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E5%8F%98%E9%87%8F"><span class="toc-text">ä¿®é¥°å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F"><span class="toc-text">é™æ€å˜é‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%8F%98%E9%87%8F"><span class="toc-text">å®ä¾‹å˜é‡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-text">æŠ½è±¡ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-4"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-2"><span class="toc-text">å¸¸è§é—®é¢˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E6%84%8F%E4%B9%89"><span class="toc-text">å­˜åœ¨æ„ä¹‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-text">æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-5"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3"><span class="toc-text">å®ç°æ¥å£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD"><span class="toc-text">æ–°å¢åŠŸèƒ½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-text">å¯¹æ¯”æŠ½è±¡ç±»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-text">å¤šæ€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-6"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E8%BD%AC%E5%9E%8B-2"><span class="toc-text">ä¸Šä¸‹è½¬å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#instanceof"><span class="toc-text">instanceof</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">å†…éƒ¨ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">é™æ€å†…éƒ¨ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">å®ä¾‹å†…éƒ¨ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">å±€éƒ¨å†…éƒ¨ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">åŒ¿åå†…éƒ¨ç±»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AC%A6"><span class="toc-text">æƒé™ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-text">ä»£ç å—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-text">é™æ€ä»£ç å—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-text">å®ä¾‹ä»£ç å—</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Object"><span class="toc-text">Object</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-7"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E6%B5%85%E5%85%8B%E9%9A%86"><span class="toc-text">æ·±æµ…å…‹éš†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Objects"><span class="toc-text">Objects</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String"><span class="toc-text">String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-8"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">å¸¸ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E5%BC%8F"><span class="toc-text">æ„é€ æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#String-Pool"><span class="toc-text">String Pool</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-9"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#intern"><span class="toc-text">intern()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-3"><span class="toc-text">å¸¸è§é—®é¢˜</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E4%BD%8D%E7%BD%AE"><span class="toc-text">å†…å­˜ä½ç½®</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%B8%B8%E9%87%8F%E6%B1%A0"><span class="toc-text">ä¼˜åŒ–å¸¸é‡æ± </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%A5%BD%E5%A4%84"><span class="toc-text">ä¸å¯å˜å¥½å¤„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#StringBuilder"><span class="toc-text">StringBuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arrays"><span class="toc-text">Arrays</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Random"><span class="toc-text">Random</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#System"><span class="toc-text">System</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Date"><span class="toc-text">Date</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DateFormat"><span class="toc-text">DateFormat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Calendar"><span class="toc-text">Calendar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LocalDateTime"><span class="toc-text">LocalDateTime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Math"><span class="toc-text">Math</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DecimalFormat"><span class="toc-text">DecimalFormat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BigDecimal"><span class="toc-text">BigDecimal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Regex"><span class="toc-text">Regex</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D"><span class="toc-text">å­—ç¬¦åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%AD%97%E7%AC%A6"><span class="toc-text">æ™®é€šå­—ç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-text">ç‰¹æ®Šå­—ç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%AD%97%E7%AC%A6"><span class="toc-text">æ ‡å‡†å­—ç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AC%A6"><span class="toc-text">è‡ªå®šä¹‰ç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8F%E8%AF%8D%E5%AD%97%E7%AC%A6"><span class="toc-text">é‡è¯å­—ç¬¦</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%8D%E7%BD%AE%E5%8C%B9%E9%85%8D"><span class="toc-text">ä½ç½®åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E8%BE%B9%E7%95%8C"><span class="toc-text">å­—ç¬¦è¾¹ç•Œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E7%BB%84"><span class="toc-text">æ•è·ç»„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E5%BC%95%E7%94%A8"><span class="toc-text">åå‘å¼•ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9B%B6%E5%AE%BD%E6%96%AD%E8%A8%80"><span class="toc-text">é›¶å®½æ–­è¨€</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F"><span class="toc-text">åŒ¹é…æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%8C%B9%E9%85%8D"><span class="toc-text">åˆ†ç»„åŒ¹é…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8"><span class="toc-text">åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%AA%8C%E8%AF%81"><span class="toc-text">åŸºæœ¬éªŒè¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E5%8F%B7%E7%A0%81"><span class="toc-text">éªŒè¯å·ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2"><span class="toc-text">æŸ¥æ‰¾æ›¿æ¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8F%B7%E7%A0%81"><span class="toc-text">æœç´¢å·ç </span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88"><span class="toc-text">é›†åˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%A6%82%E8%BF%B0"><span class="toc-text">é›†åˆæ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84"><span class="toc-text">å­˜å‚¨ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Collection"><span class="toc-text">Collection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-4"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-2"><span class="toc-text">API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86"><span class="toc-text">éå†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#List"><span class="toc-text">List</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-5"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ArrayList"><span class="toc-text">ArrayList</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%BA%90%E7%A0%81"><span class="toc-text">æºç </span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Vector"><span class="toc-text">Vector</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LinkedList"><span class="toc-text">LinkedList</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%BA%90%E7%A0%81-2"><span class="toc-text">æºç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set"><span class="toc-text">Set</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-6"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HashSet"><span class="toc-text">HashSet</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Linked"><span class="toc-text">Linked</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#TreeSet"><span class="toc-text">TreeSet</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Queue"><span class="toc-text">Queue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Collections"><span class="toc-text">Collections</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-text">Map</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-7"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8API"><span class="toc-text">å¸¸ç”¨API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-text">éå†æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HashMap"><span class="toc-text">HashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-10"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-text">ç»§æ‰¿å…³ç³»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%B1%9E%E6%80%A7"><span class="toc-text">æˆå‘˜å±æ€§</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-text">æ„é€ æ–¹æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95"><span class="toc-text">æˆå‘˜æ–¹æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E5%BC%82%E5%B8%B8"><span class="toc-text">å¹¶å‘å¼‚å¸¸</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LinkedMap"><span class="toc-text">LinkedMap</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-text">åŸç†åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LRU"><span class="toc-text">LRU</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TreeMap"><span class="toc-text">TreeMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WeakMap"><span class="toc-text">WeakMap</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-text">æ³›å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-8"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="toc-text">è‡ªå®šä¹‰</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%B1%BB"><span class="toc-text">æ³›å‹ç±»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-text">æ³›å‹æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">é€šé…ç¬¦</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-text">å¼‚å¸¸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-11"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B"><span class="toc-text">å¤„ç†è¿‡ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%BC%82%E5%B8%B8"><span class="toc-text">ç¼–è¯‘å¼‚å¸¸</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-12"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-text">å¤„ç†æœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#throws"><span class="toc-text">throws</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#try-catch"><span class="toc-text">try&#x2F;catch</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E5%81%9A%E6%B3%95"><span class="toc-text">è§„èŒƒåšæ³•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%BC%82%E5%B8%B8"><span class="toc-text">è¿è¡Œå¼‚å¸¸</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-13"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6-2"><span class="toc-text">å¤„ç†æœºåˆ¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Finally"><span class="toc-text">Finally</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-2"><span class="toc-text">è‡ªå®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%A7%84%E8%8C%83"><span class="toc-text">å¤„ç†è§„èŒƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%CE%BB"><span class="toc-text">Î»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lambda"><span class="toc-text">lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-14"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8C%96%E6%96%B9%E6%B3%95"><span class="toc-text">ç®€åŒ–æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%AE%80%E5%8C%96"><span class="toc-text">å¸¸ç”¨ç®€åŒ–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8"><span class="toc-text">æ–¹æ³•å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-15"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-text">é™æ€æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-text">å®ä¾‹æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E5%AE%9A%E7%B1%BB%E5%9E%8B"><span class="toc-text">ç‰¹å®šç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-2"><span class="toc-text">æ„é€ å™¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O"><span class="toc-text">I&#x2F;O</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream"><span class="toc-text">Stream</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-9"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%B5%81"><span class="toc-text">è·å–æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8API-2"><span class="toc-text">å¸¸ç”¨API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%88%E7%BB%93%E6%96%B9%E6%B3%95"><span class="toc-text">ç»ˆç»“æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E9%9B%86%E6%B5%81"><span class="toc-text">æ”¶é›†æµ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#File"><span class="toc-text">File</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB"><span class="toc-text">æ–‡ä»¶ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8API-3"><span class="toc-text">å¸¸ç”¨API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-2"><span class="toc-text">å¸¸ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%96%B9%E6%B3%95"><span class="toc-text">åˆ¤æ–­æ–¹æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%88%A0%E9%99%A4"><span class="toc-text">åˆ›å»ºåˆ é™¤</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E7%9B%AE%E5%BD%95"><span class="toc-text">éå†ç›®å½•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%90%9C%E7%B4%A2"><span class="toc-text">æ–‡ä»¶æœç´¢</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Character"><span class="toc-text">Character</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IOStream"><span class="toc-text">IOStream</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-10"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81"><span class="toc-text">å­—èŠ‚æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E8%BE%93%E5%85%A5"><span class="toc-text">å­—èŠ‚è¾“å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E8%BE%93%E5%87%BA"><span class="toc-text">å­—èŠ‚è¾“å‡º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6"><span class="toc-text">æ–‡ä»¶å¤åˆ¶</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-text">å­—ç¬¦æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E8%BE%93%E5%85%A5"><span class="toc-text">å­—ç¬¦è¾“å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E8%BE%93%E5%87%BA"><span class="toc-text">å­—ç¬¦è¾“å‡º</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-text">ç¼“å†²æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-16"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E8%BE%93%E5%85%A5"><span class="toc-text">å­—èŠ‚ç¼“å†²è¾“å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%BC%93%E5%86%B2%E8%BE%93%E5%87%BA"><span class="toc-text">å­—èŠ‚ç¼“å†²è¾“å‡º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81%E6%80%A7%E8%83%BD"><span class="toc-text">å­—èŠ‚æµæ€§èƒ½</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E8%BE%93%E5%85%A5"><span class="toc-text">å­—ç¬¦ç¼“å†²è¾“å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E8%BE%93%E5%87%BA"><span class="toc-text">å­—ç¬¦ç¼“å†²è¾“å‡º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AB%98%E6%95%88%E5%8E%9F%E5%9B%A0"><span class="toc-text">é«˜æ•ˆåŸå› </span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81"><span class="toc-text">è½¬æ¢æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-text">ä¹±ç é—®é¢˜</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E8%BE%93%E5%85%A5-2"><span class="toc-text">å­—ç¬¦è¾“å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E8%BE%93%E5%87%BA-2"><span class="toc-text">å­—ç¬¦è¾“å‡º</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">åºåˆ—åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-17"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96-2"><span class="toc-text">åºåˆ—åŒ–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97"><span class="toc-text">ååºåˆ—</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81"><span class="toc-text">æ‰“å°æµ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Close"><span class="toc-text">Close</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Properties"><span class="toc-text">Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RandomIO"><span class="toc-text">RandomIO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Commons"><span class="toc-text">Commons</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-text">åå°„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6"><span class="toc-text">æµ‹è¯•æ¡†æ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D%E5%8F%8D%E5%B0%84"><span class="toc-text">ä»‹ç»åå°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-text">è·å–å…ƒç´ </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%B1%BB"><span class="toc-text">è·å–ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9E%84%E9%80%A0"><span class="toc-text">è·å–æ„é€ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%8F%98%E9%87%8F"><span class="toc-text">è·å–å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%96%B9%E6%B3%95"><span class="toc-text">è·å–æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%B4%E5%8A%9B%E6%94%BB%E5%87%BB"><span class="toc-text">æš´åŠ›æ”»å‡»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3"><span class="toc-text">æ³¨è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-text">æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E6%A0%BC%E5%BC%8F"><span class="toc-text">æ³¨è§£æ ¼å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E5%B1%9E%E6%80%A7"><span class="toc-text">æ³¨è§£å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%B1%9E%E6%80%A7"><span class="toc-text">æ™®é€šå±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%B1%9E%E6%80%A7"><span class="toc-text">ç‰¹æ®Šå±æ€§</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E6%B3%A8%E8%A7%A3"><span class="toc-text">å…ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E8%A7%A3%E6%9E%90"><span class="toc-text">æ³¨è§£è§£æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XML"><span class="toc-text">XML</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-11"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA"><span class="toc-text">åˆ›å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-text">ç»„æˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-text">çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DTD"><span class="toc-text">DTD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Schema"><span class="toc-text">Schema</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dom4J"><span class="toc-text">Dom4J</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90"><span class="toc-text">è§£æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E5%85%83%E7%B4%A0"><span class="toc-text">æ ¹å…ƒç´ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E5%85%83%E7%B4%A0"><span class="toc-text">å­å…ƒç´ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-text">å±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%9C%AC"><span class="toc-text">æ–‡æœ¬</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XPath"><span class="toc-text">XPath</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SDP"><span class="toc-text">SDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-text">å•ä¾‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-18"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A5%BF%E6%B1%89%E5%BC%8F"><span class="toc-text">é¥¿æ±‰å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%87%92%E6%B1%89%E5%BC%8F"><span class="toc-text">æ‡’æ±‰å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A0%B4%E5%9D%8F%E5%8D%95%E4%BE%8B"><span class="toc-text">ç ´åå•ä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">ååºåˆ—åŒ–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E7%A0%B4%E8%A7%A3"><span class="toc-text">åå°„ç ´è§£</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Runtime"><span class="toc-text">Runtime</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-text">ä»£ç†æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-text">é™æ€ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JDK"><span class="toc-text">JDK</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">ä½¿ç”¨æ–¹å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">å®ç°åŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90"><span class="toc-text">æºç è§£æ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CGLIB"><span class="toc-text">CGLIB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="toc-text">æ–¹å¼å¯¹æ¯”</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">JVM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM%E6%A6%82%E8%BF%B0"><span class="toc-text">JVMæ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-19"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%9E%8B"><span class="toc-text">æ¶æ„æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"><span class="toc-text">å†…å­˜ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%A6%82%E8%BF%B0"><span class="toc-text">å†…å­˜æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM%E5%86%85%E5%AD%98"><span class="toc-text">JVMå†…å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88"><span class="toc-text">è™šæ‹Ÿæœºæ ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Java-%E6%A0%88"><span class="toc-text">Java æ ˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-text">å±€éƒ¨å˜é‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88"><span class="toc-text">æ“ä½œæ•°æ ˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5"><span class="toc-text">åŠ¨æ€é“¾æ¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%9C%B0%E5%9D%80"><span class="toc-text">è¿”å›åœ°å€</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%99%84%E5%8A%A0%E4%BF%A1%E6%81%AF"><span class="toc-text">é™„åŠ ä¿¡æ¯</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88"><span class="toc-text">æœ¬åœ°æ–¹æ³•æ ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-text">ç¨‹åºè®¡æ•°å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A0%86"><span class="toc-text">å †</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8C%BA"><span class="toc-text">æ–¹æ³•åŒº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%86%85%E5%AD%98"><span class="toc-text">æœ¬åœ°å†…å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-20"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%A9%BA%E9%97%B4"><span class="toc-text">å…ƒç©ºé—´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98"><span class="toc-text">ç›´æ¥å†…å­˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E4%BD%8D%E7%BD%AE"><span class="toc-text">å˜é‡ä½ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-text">å†…å­˜ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D-2"><span class="toc-text">å†…å­˜åˆ†é…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">ä¸¤ç§æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TLAB"><span class="toc-text">TLAB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90"><span class="toc-text">é€ƒé€¸åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E4%BB%A3%E6%80%9D%E6%83%B3"><span class="toc-text">åˆ†ä»£æ€æƒ³</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E4%BB%A3%E4%BB%8B%E7%BB%8D"><span class="toc-text">åˆ†ä»£ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E4%BB%A3%E5%88%86%E9%85%8D"><span class="toc-text">åˆ†ä»£åˆ†é…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E7%AD%96%E7%95%A5"><span class="toc-text">å›æ”¶ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6"><span class="toc-text">è§¦å‘æ¡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F"><span class="toc-text">å®‰å…¨åŒºåŸŸ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9E%83%E5%9C%BE%E5%88%A4%E6%96%AD"><span class="toc-text">åƒåœ¾åˆ¤æ–­</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9E%83%E5%9C%BE%E4%BB%8B%E7%BB%8D"><span class="toc-text">åƒåœ¾ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95"><span class="toc-text">å¼•ç”¨è®¡æ•°æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90"><span class="toc-text">å¯è¾¾æ€§åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#GC-Roots"><span class="toc-text">GC Roots</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0"><span class="toc-text">ä¸‰è‰²æ ‡è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0%E7%AE%97%E6%B3%95"><span class="toc-text">æ ‡è®°ç®—æ³•</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%A0%87%E8%AE%B0"><span class="toc-text">å¹¶å‘æ ‡è®°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#finalization"><span class="toc-text">finalization</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%88%86%E6%9E%90"><span class="toc-text">å¼•ç”¨åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="toc-text">æ— ç”¨å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E7%94%A8%E7%B1%BB"><span class="toc-text">æ— ç”¨ç±»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%9F%E5%BC%83%E5%B8%B8%E9%87%8F"><span class="toc-text">åºŸå¼ƒå¸¸é‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F-2"><span class="toc-text">é™æ€å˜é‡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"><span class="toc-text">å›æ”¶ç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-text">å¤åˆ¶ç®—æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4"><span class="toc-text">æ ‡è®°æ¸…é™¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0%E6%95%B4%E7%90%86"><span class="toc-text">æ ‡è®°æ•´ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="toc-text">åƒåœ¾å›æ”¶å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-12"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Serial"><span class="toc-text">Serial</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ParNew"><span class="toc-text">ParNew</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Parallel"><span class="toc-text">Parallel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CMS"><span class="toc-text">CMS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#G1"><span class="toc-text">G1</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#G1-%E7%89%B9%E7%82%B9"><span class="toc-text">G1 ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%B0%E5%BF%86%E9%9B%86"><span class="toc-text">è®°å¿†é›†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-2"><span class="toc-text">å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0"><span class="toc-text">ç›¸å…³å‚æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E4%BC%98"><span class="toc-text">è°ƒä¼˜</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZGC"><span class="toc-text">ZGC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F"><span class="toc-text">å†…å­˜æ³„æ¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%84%E9%9C%B2%E6%BA%A2%E5%87%BA"><span class="toc-text">æ³„éœ²æº¢å‡º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%A0%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-text">å‡ ç§æƒ…å†µ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E9%9B%86%E5%90%88"><span class="toc-text">é™æ€é›†åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-2"><span class="toc-text">å•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%B1%BB-2"><span class="toc-text">å†…éƒ¨ç±»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E7%9B%B8%E5%85%B3"><span class="toc-text">è¿æ¥ç›¸å…³</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%90%88%E7%90%86%E5%9F%9F"><span class="toc-text">ä¸åˆç†åŸŸ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E5%93%88%E5%B8%8C"><span class="toc-text">æ”¹å˜å“ˆå¸Œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E6%B3%84%E9%9C%B2"><span class="toc-text">ç¼“å­˜æ³„éœ²</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-text">æ¡ˆä¾‹åˆ†æ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD"><span class="toc-text">ç±»åŠ è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E8%AE%BF%E5%AD%98"><span class="toc-text">å¯¹è±¡è®¿å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84-2"><span class="toc-text">å­˜å‚¨ç»“æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E5%A4%A7%E5%B0%8F"><span class="toc-text">å®é™…å¤§å°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E7%BA%A6%E5%86%85%E5%AD%98"><span class="toc-text">èŠ‚çº¦å†…å­˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE"><span class="toc-text">å¯¹è±¡è®¿é—®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-text">å¯¹è±¡åˆ›å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-2"><span class="toc-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%97%B6%E6%9C%BA"><span class="toc-text">åˆ›å»ºæ—¶æœº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B"><span class="toc-text">åˆ›å»ºè¿‡ç¨‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BF%E4%B8%8A%E5%90%AF%E4%B8%8B"><span class="toc-text">æ‰¿ä¸Šå¯ä¸‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="toc-text">åŠ è½½è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-3"><span class="toc-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E9%98%B6%E6%AE%B5"><span class="toc-text">åŠ è½½é˜¶æ®µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5%E9%98%B6%E6%AE%B5"><span class="toc-text">é“¾æ¥é˜¶æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81"><span class="toc-text">éªŒè¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-text">å‡†å¤‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90-2"><span class="toc-text">è§£æ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96-2"><span class="toc-text">åˆå§‹åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-3"><span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#clinit"><span class="toc-text">clinit</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E6%9C%BA"><span class="toc-text">æ—¶æœº</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#init"><span class="toc-text">init</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD%E9%98%B6%E6%AE%B5"><span class="toc-text">å¸è½½é˜¶æ®µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-text">ç±»åŠ è½½å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD-2"><span class="toc-text">ç±»åŠ è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-text">åŠ è½½å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8API-4"><span class="toc-text">å¸¸ç”¨API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9E%8B"><span class="toc-text">åŠ è½½æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="toc-text">åŠ è½½æœºåˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE"><span class="toc-text">åŒäº²å§”æ´¾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">æºç åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A0%B4%E5%9D%8F%E5%A7%94%E6%B4%BE"><span class="toc-text">ç ´åå§”æ´¾</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6"><span class="toc-text">æ²™ç®±æœºåˆ¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-3"><span class="toc-text">è‡ªå®šä¹‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JDK9"><span class="toc-text">JDK9</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-text">è¿è¡Œæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">æ‰§è¡Œè¿‡ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%A0%81"><span class="toc-text">å­—èŠ‚ç </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%80%A7"><span class="toc-text">è·¨å¹³å°æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80%E5%8F%91%E5%B1%95"><span class="toc-text">è¯­è¨€å‘å±•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E7%BB%93%E6%9E%84"><span class="toc-text">ç±»ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-text">æ–‡ä»¶ç»“æ„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AD%94%E6%95%B0%E7%89%88%E6%9C%AC"><span class="toc-text">é­”æ•°ç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F%E6%B1%A0"><span class="toc-text">å¸¸é‡æ± </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%A0%87%E8%AF%86"><span class="toc-text">è®¿é—®æ ‡è¯†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E9%9B%86%E5%90%88"><span class="toc-text">ç´¢å¼•é›†åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E8%A1%A8"><span class="toc-text">å­—æ®µè¡¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%A1%A8"><span class="toc-text">æ–¹æ³•è¡¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E8%A1%A8"><span class="toc-text">å±æ€§è¡¨</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%8C%87%E4%BB%A4"><span class="toc-text">ç¼–è¯‘æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#javac"><span class="toc-text">javac</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#javap"><span class="toc-text">javap</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E9%9B%86"><span class="toc-text">æŒ‡ä»¤é›†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4"><span class="toc-text">æ‰§è¡ŒæŒ‡ä»¤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E5%AD%98%E5%82%A8"><span class="toc-text">åŠ è½½å­˜å‚¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E6%8C%87%E4%BB%A4"><span class="toc-text">ç®—æœ¯æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">ç±»å‹è½¬æ¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%AE%BF%E9%97%AE"><span class="toc-text">åˆ›å»ºè®¿é—®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%8C%87%E4%BB%A4"><span class="toc-text">æ–¹æ³•æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88-2"><span class="toc-text">æ“ä½œæ•°æ ˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%BD%AC%E7%A7%BB"><span class="toc-text">æ§åˆ¶è½¬ç§»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">å¼‚å¸¸å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6-3"><span class="toc-text">å¤„ç†æœºåˆ¶</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#finally"><span class="toc-text">finally</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#return"><span class="toc-text">return</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E6%8E%A7%E5%88%B6"><span class="toc-text">åŒæ­¥æ§åˆ¶</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">æ‰§è¡Œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E"><span class="toc-text">æ‰§è¡Œå¼•æ“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-21"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-text">æ‰§è¡Œæ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%83%AD%E7%82%B9%E6%8E%A2%E6%B5%8B"><span class="toc-text">çƒ­ç‚¹æ¢æµ‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E7%BC%96%E8%AF%91"><span class="toc-text">åˆ†å±‚ç¼–è¯‘</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8"><span class="toc-text">æ–¹æ³•è°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%AF%86%E5%88%AB"><span class="toc-text">æ–¹æ³•è¯†åˆ«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E6%9C%BA%E5%88%B6"><span class="toc-text">è°ƒç”¨æœºåˆ¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-text">è°ƒç”¨æŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%94%E7%A7%8D%E6%8C%87%E4%BB%A4"><span class="toc-text">äº”ç§æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E5%BC%95%E7%94%A8"><span class="toc-text">ç¬¦å·å¼•ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B-2"><span class="toc-text">æ‰§è¡Œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E6%80%81%E5%8E%9F%E7%90%86"><span class="toc-text">å¤šæ€åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-text">æ‰§è¡ŒåŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E6%96%B9%E6%B3%95%E8%A1%A8"><span class="toc-text">è™šæ–¹æ³•è¡¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E8%81%94%E7%BC%93%E5%AD%98"><span class="toc-text">å†…è”ç¼“å­˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-text">ä»£ç ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-text">è¯­æ³•ç³–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8-3"><span class="toc-text">æ„é€ å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%86%E8%A3%85%E7%AE%B1"><span class="toc-text">æ‹†è£…ç®±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E6%93%A6%E9%99%A4"><span class="toc-text">æ³›å‹æ“¦é™¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0-2"><span class="toc-text">å¯å˜å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#foreach"><span class="toc-text">foreach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch"><span class="toc-text">switch</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE-2"><span class="toc-text">æšä¸¾</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB"><span class="toc-text">æšä¸¾ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#try-w-r"><span class="toc-text">try-w-r</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%87%8D%E5%86%99"><span class="toc-text">æ–¹æ³•é‡å†™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB-2"><span class="toc-text">åŒ¿åå†…éƒ¨ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E5%8F%82%E4%BC%98%E5%8C%96"><span class="toc-text">æ— å‚ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A6%E5%8F%82%E4%BC%98%E5%8C%96"><span class="toc-text">å¸¦å‚ä¼˜åŒ–</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E4%BC%98%E5%8C%96"><span class="toc-text">åå°„ä¼˜åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96"><span class="toc-text">ç³»ç»Ÿä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98"><span class="toc-text">æ€§èƒ½è°ƒä¼˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-text">æ€§èƒ½æŒ‡æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E6%AD%A5%E9%AA%A4"><span class="toc-text">ä¼˜åŒ–æ­¥éª¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98"><span class="toc-text">å‚æ•°è°ƒä¼˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AF%87"><span class="toc-text">å‘½ä»¤è¡Œç¯‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jps"><span class="toc-text">jps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jstat"><span class="toc-text">jstat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jinfo"><span class="toc-text">jinfo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jmap"><span class="toc-text">jmap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jhat"><span class="toc-text">jhat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jstack"><span class="toc-text">jstack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jcmd"><span class="toc-text">jcmd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jstatd"><span class="toc-text">jstatd</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GUI%E5%B7%A5%E5%85%B7"><span class="toc-text">GUIå·¥å…·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-text">è¿è¡Œå‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E9%80%89%E9%A1%B9"><span class="toc-text">å‚æ•°é€‰é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E5%8F%82%E6%95%B0"><span class="toc-text">æ‰“å°å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E5%8F%82%E6%95%B0"><span class="toc-text">å†…å­˜å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OOM%E5%8F%82%E6%95%B0"><span class="toc-text">OOMå‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%8F%82%E6%95%B0"><span class="toc-text">æ—¥å¿—å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%8F%82%E6%95%B0"><span class="toc-text">å…¶ä»–å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%8E%B7%E5%8F%96"><span class="toc-text">ä»£ç è·å–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90"><span class="toc-text">æ—¥å¿—åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E7%B1%BB"><span class="toc-text">æ—¥å¿—åˆ†ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%A7%A3%E6%9E%90"><span class="toc-text">æ—¥å¿—è§£æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7"><span class="toc-text">åˆ†æå·¥å…·</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">ALG</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-text">é€’å½’</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-13"><span class="toc-text">æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%B3%95"><span class="toc-text">ç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text">æ ¸å¿ƒæ€æƒ³</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-text">å…¬å¼è½¬æ¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="toc-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8-2"><span class="toc-text">åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8C%B4%E5%AD%90%E5%90%83%E6%A1%83"><span class="toc-text">çŒ´å­åƒæ¡ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E6%B1%82%E5%92%8C"><span class="toc-text">é€’å½’æ±‚å’Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B1%89%E8%AF%BA%E5%A1%94"><span class="toc-text">æ±‰è¯ºå¡”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%95%A4%E9%85%92%E9%97%AE%E9%A2%98"><span class="toc-text">å•¤é…’é—®é¢˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-text">æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="toc-text">å†’æ³¡æ’åº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F"><span class="toc-text">é€‰æ‹©æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E9%80%89%E6%8B%A9"><span class="toc-text">ç®€å•é€‰æ‹©</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A0%86%E6%8E%92%E5%BA%8F"><span class="toc-text">å †æ’åº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F"><span class="toc-text">æ’å…¥æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5"><span class="toc-text">ç›´æ¥æ’å…¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F"><span class="toc-text">å¸Œå°”æ’åº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F"><span class="toc-text">å½’å¹¶æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-text">å®ç°æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="toc-text">å®ç°ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F"><span class="toc-text">å¿«é€Ÿæ’åº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F"><span class="toc-text">åŸºæ•°æ’åº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-text">ç®—æ³•æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="toc-text">ç¨³å®šæ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94"><span class="toc-text">ç®—æ³•å¯¹æ¯”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E9%97%AE%E9%A2%98"><span class="toc-text">è¡¥å……é—®é¢˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE"><span class="toc-text">æŸ¥æ‰¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-text">åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BF"><span class="toc-text">BF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RK"><span class="toc-text">RK</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KMP"><span class="toc-text">KMP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91"><span class="toc-text">æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E5%8F%89%E6%A0%91"><span class="toc-text">äºŒå‰æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%A0%91"><span class="toc-text">æ’åºæ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84-3"><span class="toc-text">å­˜å‚¨ç»“æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B3%E8%A1%A1%E6%A0%91"><span class="toc-text">å¹³è¡¡æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A2%E9%BB%91%E6%A0%91"><span class="toc-text">çº¢é»‘æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E6%9F%A5%E9%9B%86"><span class="toc-text">å¹¶æŸ¥é›†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0"><span class="toc-text">åŸºæœ¬å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%AE%9E%E7%8E%B0"><span class="toc-text">ä¼˜åŒ–å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">åº”ç”¨åœºæ™¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%A0%91"><span class="toc-text">å­—å…¸æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-22"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0Trie"><span class="toc-text">å®ç°Trie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96Trie"><span class="toc-text">ä¼˜åŒ–Trie</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE"><span class="toc-text">å›¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%8D%E5%9B%BE"><span class="toc-text">ä½å›¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-23"><span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">å·¥ä½œæµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Guava"><span class="toc-text">Guava</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%B8%83%E9%9A%86"><span class="toc-text">å®ç°å¸ƒéš†</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">é­”æ”¹æŒ‡å—</a><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="FomalhautğŸ¥"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2022-2023</b></span><span><b>&nbsp;&nbsp;By jsonğŸ¥</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™æ•°æ®åˆ†æå¾—ç›Šäº51laæŠ€æœ¯æ”¯æŒ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://cdn-eys.pages.dev/html/beian.html" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/%E8%90%8Cicp%E5%A4%87-2023001927-pink.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://www.json1234.xyz/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://www.json1234.xyz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://www.json25.cn/categories/è®¡ç®—æœºåŸºç¡€/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¼ jsonã®è®¡ç®—æœºåŸºç¡€ç¬”è®° (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.json25.cn/categories/é­”æ”¹æ•™ç¨‹/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ jsonã®åšå®¢é­”æ”¹æ•™ç¨‹ (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.json25.cn/categories/JavaåŸºç¡€/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŸ jsonã®JavaåŸºç¡€ç¬”è®° (6)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.json25.cn/categories/æ•°æ®åº“/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¨ jsonã®æ•°æ®åº“ç¬”è®° (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://www.json25.cn/categories/å‰ç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ jsonã®å‰ç«¯ç¬”è®° (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://www.json25.cn/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/10c11d66.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm13.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-03-17</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/10c11d66.html&quot;);" href="javascript:void(0);" alt="">javaå¸¸ç”¨å·¥å…·</a><div class="blog-slider__text">è¿™æ˜¯ä¸€ç¯‡å…³äºjavaå·¥å…·çš„ä»‹ç»</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/10c11d66.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/440e822d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm5.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-17</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/440e822d.html&quot;);" href="javascript:void(0);" alt="">æ•°æ®ç»“æ„ç®—æ³•</a><div class="blog-slider__text">è¿™æ˜¯è€ƒç ”æ•°æ®ç»“æ„ç®—æ³•æ€»ç»“</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/440e822d.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/84cad344.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm9.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/84cad344.html&quot;);" href="javascript:void(0);" alt="">javassmæ¡†æ¶</a><div class="blog-slider__text">è¿™æ˜¯ssmæ¡†æ¶çš„ç¬”è®°</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/84cad344.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/827432d7.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm18.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-03-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/827432d7.html&quot;);" href="javascript:void(0);" alt="">javaseåŸºç¡€çŸ¥è¯†</a><div class="blog-slider__text">è¿™æ˜¯ä¸€ç¯‡å…³äºjavaseçš„ç¬”è®°</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/827432d7.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/779497dd.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm13.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/779497dd.html&quot;);" href="javascript:void(0);" alt="">å¸¸ç”¨æ¡†æ¶</a><div class="blog-slider__text">è¿™æ˜¯ä¸€ç¯‡å…³äºjavaå¸¸ç”¨æ¡†æ¶çš„ç¬”è®°</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/779497dd.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2636df6a.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm11.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-03-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2636df6a.html&quot;);" href="javascript:void(0);" alt="">redisæ•°æ®åº“</a><div class="blog-slider__text">è¿™æ˜¯ä¸€ç¯‡å…³äºredisæ•°æ®åº“çš„ç¬”è®°</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2636df6a.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/b7e144d1.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm0.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/b7e144d1.html&quot;);" href="javascript:void(0);" alt="">ç®—æ³•</a><div class="blog-slider__text">æœ¬æ–‡ä¸»è¦è®°å½•leetcodeåˆ·é¢˜è®°å½•</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/b7e144d1.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/8de1ec.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm4.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/8de1ec.html&quot;);" href="javascript:void(0);" alt="">javaé¢ç»</a><div class="blog-slider__text">æœ¬æ–‡ä¸»è¦è®°å½•Javaé¢è¯•åŸºæœ¬å…«è‚¡æ–‡ï¼ŒåŒæ—¶ä¸ºäº†å·©å›ºjavaåŸºç¡€å’Œå¤ä¹ å­¦è¿‡çš„å†…å®¹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/8de1ec.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/784bec6.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm15.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/784bec6.html&quot;);" href="javascript:void(0);" alt="">ajaxç¬”è®°</a><div class="blog-slider__text">æœ¬æ–‡ä¸»è¦è®°å½•äº†javaåŸºç¡€ä¸­ajaxæŠ€æœ¯çš„ä½¿ç”¨ä¸ç›¸å…³æŠ€æœ¯</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/784bec6.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/13fb5dc7.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm20.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/13fb5dc7.html&quot;);" href="javascript:void(0);" alt="">mysqlæ•°æ®åº“ç¬”è®°</a><div class="blog-slider__text">æœ¬æ–‡è®°å½•äº†mysqlçš„ä¸€äº›åŸºç¡€æ“ä½œå’Œå¸¸ç”¨çš„crudè¯­å¥çš„ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/13fb5dc7.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn-eys.pages.dev/img/dm6.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</a><div class="blog-slider__text">ğŸ¥§æœ¬æ–‡æ±‡æ€»Markdownæ ¼å¼ä»¥åŠå¤–æŒ‚æ ‡ç­¾åœ¨ç½‘é¡µç«¯çš„æ¸²æŸ“æ•ˆæœï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><!-- hexo injector body_end end --></body></html>